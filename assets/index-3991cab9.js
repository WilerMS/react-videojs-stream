(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function i(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=i(n);fetch(n.href,s)}})();var gu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function cy(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var i=function r(){if(this instanceof r){var n=[null];n.push.apply(n,arguments);var s=Function.bind.apply(e,n);return new s}return e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(i,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})}),i}var dy={exports:{}},Wa={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Sm=Object.getOwnPropertySymbols,xE=Object.prototype.hasOwnProperty,SE=Object.prototype.propertyIsEnumerable;function EE(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function bE(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;var r=Object.getOwnPropertyNames(e).map(function(s){return e[s]});if(r.join("")!=="0123456789")return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(s){n[s]=s}),Object.keys(Object.assign({},n)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var hy=bE()?Object.assign:function(t,e){for(var i,r=EE(t),n,s=1;s<arguments.length;s++){i=Object(arguments[s]);for(var a in i)xE.call(i,a)&&(r[a]=i[a]);if(Sm){n=Sm(i);for(var o=0;o<n.length;o++)SE.call(i,n[o])&&(r[n[o]]=i[n[o]])}}return r},fy={exports:{}},ce={};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dh=hy,rs=60103,py=60106;ce.Fragment=60107;ce.StrictMode=60108;ce.Profiler=60114;var my=60109,gy=60110,yy=60112;ce.Suspense=60113;var _y=60115,vy=60116;if(typeof Symbol=="function"&&Symbol.for){var Wt=Symbol.for;rs=Wt("react.element"),py=Wt("react.portal"),ce.Fragment=Wt("react.fragment"),ce.StrictMode=Wt("react.strict_mode"),ce.Profiler=Wt("react.profiler"),my=Wt("react.provider"),gy=Wt("react.context"),yy=Wt("react.forward_ref"),ce.Suspense=Wt("react.suspense"),_y=Wt("react.memo"),vy=Wt("react.lazy")}var Em=typeof Symbol=="function"&&Symbol.iterator;function CE(t){return t===null||typeof t!="object"?null:(t=Em&&t[Em]||t["@@iterator"],typeof t=="function"?t:null)}function Xa(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=1;i<arguments.length;i++)e+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ty={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xy={};function ns(t,e,i){this.props=t,this.context=e,this.refs=xy,this.updater=i||Ty}ns.prototype.isReactComponent={};ns.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error(Xa(85));this.updater.enqueueSetState(this,t,e,"setState")};ns.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Sy(){}Sy.prototype=ns.prototype;function Ah(t,e,i){this.props=t,this.context=e,this.refs=xy,this.updater=i||Ty}var kh=Ah.prototype=new Sy;kh.constructor=Ah;Dh(kh,ns.prototype);kh.isPureReactComponent=!0;var Ih={current:null},Ey=Object.prototype.hasOwnProperty,by={key:!0,ref:!0,__self:!0,__source:!0};function Cy(t,e,i){var r,n={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)Ey.call(e,r)&&!by.hasOwnProperty(r)&&(n[r]=e[r]);var o=arguments.length-2;if(o===1)n.children=i;else if(1<o){for(var l=Array(o),d=0;d<o;d++)l[d]=arguments[d+2];n.children=l}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)n[r]===void 0&&(n[r]=o[r]);return{$$typeof:rs,type:t,key:s,ref:a,props:n,_owner:Ih.current}}function wE(t,e){return{$$typeof:rs,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ph(t){return typeof t=="object"&&t!==null&&t.$$typeof===rs}function DE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(i){return e[i]})}var bm=/\/+/g;function Sc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?DE(""+t.key):e.toString(36)}function tu(t,e,i,r,n){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case rs:case py:a=!0}}if(a)return a=t,n=n(a),t=r===""?"."+Sc(a,0):r,Array.isArray(n)?(i="",t!=null&&(i=t.replace(bm,"$&/")+"/"),tu(n,e,i,"",function(d){return d})):n!=null&&(Ph(n)&&(n=wE(n,i+(!n.key||a&&a.key===n.key?"":(""+n.key).replace(bm,"$&/")+"/")+t)),e.push(n)),1;if(a=0,r=r===""?".":r+":",Array.isArray(t))for(var o=0;o<t.length;o++){s=t[o];var l=r+Sc(s,o);a+=tu(s,e,i,l,n)}else if(l=CE(t),typeof l=="function")for(t=l.call(t),o=0;!(s=t.next()).done;)s=s.value,l=r+Sc(s,o++),a+=tu(s,e,i,l,n);else if(s==="object")throw e=""+t,Error(Xa(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e));return a}function Ro(t,e,i){if(t==null)return t;var r=[],n=0;return tu(t,r,"","",function(s){return e.call(i,s,n++)}),r}function AE(t){if(t._status===-1){var e=t._result;e=e(),t._status=0,t._result=e,e.then(function(i){t._status===0&&(i=i.default,t._status=1,t._result=i)},function(i){t._status===0&&(t._status=2,t._result=i)})}if(t._status===1)return t._result;throw t._result}var wy={current:null};function qi(){var t=wy.current;if(t===null)throw Error(Xa(321));return t}var kE={ReactCurrentDispatcher:wy,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:Ih,IsSomeRendererActing:{current:!1},assign:Dh};ce.Children={map:Ro,forEach:function(t,e,i){Ro(t,function(){e.apply(this,arguments)},i)},count:function(t){var e=0;return Ro(t,function(){e++}),e},toArray:function(t){return Ro(t,function(e){return e})||[]},only:function(t){if(!Ph(t))throw Error(Xa(143));return t}};ce.Component=ns;ce.PureComponent=Ah;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kE;ce.cloneElement=function(t,e,i){if(t==null)throw Error(Xa(267,t));var r=Dh({},t.props),n=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=Ih.current),e.key!==void 0&&(n=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)Ey.call(e,l)&&!by.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=i;else if(1<l){o=Array(l);for(var d=0;d<l;d++)o[d]=arguments[d+2];r.children=o}return{$$typeof:rs,type:t.type,key:n,ref:s,props:r,_owner:a}};ce.createContext=function(t,e){return e===void 0&&(e=null),t={$$typeof:gy,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider={$$typeof:my,_context:t},t.Consumer=t};ce.createElement=Cy;ce.createFactory=function(t){var e=Cy.bind(null,t);return e.type=t,e};ce.createRef=function(){return{current:null}};ce.forwardRef=function(t){return{$$typeof:yy,render:t}};ce.isValidElement=Ph;ce.lazy=function(t){return{$$typeof:vy,_payload:{_status:-1,_result:t},_init:AE}};ce.memo=function(t,e){return{$$typeof:_y,type:t,compare:e===void 0?null:e}};ce.useCallback=function(t,e){return qi().useCallback(t,e)};ce.useContext=function(t,e){return qi().useContext(t,e)};ce.useDebugValue=function(){};ce.useEffect=function(t,e){return qi().useEffect(t,e)};ce.useImperativeHandle=function(t,e,i){return qi().useImperativeHandle(t,e,i)};ce.useLayoutEffect=function(t,e){return qi().useLayoutEffect(t,e)};ce.useMemo=function(t,e){return qi().useMemo(t,e)};ce.useReducer=function(t,e,i){return qi().useReducer(t,e,i)};ce.useRef=function(t){return qi().useRef(t)};ce.useState=function(t){return qi().useState(t)};ce.version="17.0.2";fy.exports=ce;var bn=fy.exports;const Ks=xi(bn);/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IE=bn,Dy=60103;Wa.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var Cm=Symbol.for;Dy=Cm("react.element"),Wa.Fragment=Cm("react.fragment")}var PE=IE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,OE=Object.prototype.hasOwnProperty,LE={key:!0,ref:!0,__self:!0,__source:!0};function Ay(t,e,i){var r,n={},s=null,a=null;i!==void 0&&(s=""+i),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)OE.call(e,r)&&!LE.hasOwnProperty(r)&&(n[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)n[r]===void 0&&(n[r]=e[r]);return{$$typeof:Dy,type:t,key:s,ref:a,props:n,_owner:PE.current}}Wa.jsx=Ay;Wa.jsxs=Ay;dy.exports=Wa;var ki=dy.exports,ky={exports:{}},Ht={},Iy={exports:{}},Py={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){var e,i,r,n;if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}if(typeof window>"u"||typeof MessageChannel!="function"){var l=null,d=null,m=function(){if(l!==null)try{var q=t.unstable_now();l(!0,q),l=null}catch(K){throw setTimeout(m,0),K}};e=function(q){l!==null?setTimeout(e,0,q):(l=q,setTimeout(m,0))},i=function(q,K){d=setTimeout(q,K)},r=function(){clearTimeout(d)},t.unstable_shouldYield=function(){return!1},n=t.unstable_forceFrameRate=function(){}}else{var y=window.setTimeout,v=window.clearTimeout;if(typeof console<"u"){var b=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof b!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var S=!1,A=null,T=-1,_=5,x=0;t.unstable_shouldYield=function(){return t.unstable_now()>=x},n=function(){},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<q?Math.floor(1e3/q):5};var I=new MessageChannel,D=I.port2;I.port1.onmessage=function(){if(A!==null){var q=t.unstable_now();x=q+_;try{A(!0,q)?D.postMessage(null):(S=!1,A=null)}catch(K){throw D.postMessage(null),K}}else S=!1},e=function(q){A=q,S||(S=!0,D.postMessage(null))},i=function(q,K){T=y(function(){q(t.unstable_now())},K)},r=function(){v(T),T=-1}}function O(q,K){var re=q.length;q.push(K);e:for(;;){var be=re-1>>>1,Be=q[be];if(Be!==void 0&&0<H(Be,K))q[be]=K,q[re]=Be,re=be;else break e}}function N(q){return q=q[0],q===void 0?null:q}function U(q){var K=q[0];if(K!==void 0){var re=q.pop();if(re!==K){q[0]=re;e:for(var be=0,Be=q.length;be<Be;){var ei=2*(be+1)-1,bi=q[ei],Sr=ei+1,Gi=q[Sr];if(bi!==void 0&&0>H(bi,re))Gi!==void 0&&0>H(Gi,bi)?(q[be]=Gi,q[Sr]=re,be=Sr):(q[be]=bi,q[ei]=re,be=ei);else if(Gi!==void 0&&0>H(Gi,re))q[be]=Gi,q[Sr]=re,be=Sr;else break e}}return K}return null}function H(q,K){var re=q.sortIndex-K.sortIndex;return re!==0?re:q.id-K.id}var j=[],ee=[],oe=1,se=null,z=3,ue=!1,Oe=!1,ae=!1;function Te(q){for(var K=N(ee);K!==null;){if(K.callback===null)U(ee);else if(K.startTime<=q)U(ee),K.sortIndex=K.expirationTime,O(j,K);else break;K=N(ee)}}function bt(q){if(ae=!1,Te(q),!Oe)if(N(j)!==null)Oe=!0,e(qt);else{var K=N(ee);K!==null&&i(bt,K.startTime-q)}}function qt(q,K){Oe=!1,ae&&(ae=!1,r()),ue=!0;var re=z;try{for(Te(K),se=N(j);se!==null&&(!(se.expirationTime>K)||q&&!t.unstable_shouldYield());){var be=se.callback;if(typeof be=="function"){se.callback=null,z=se.priorityLevel;var Be=be(se.expirationTime<=K);K=t.unstable_now(),typeof Be=="function"?se.callback=Be:se===N(j)&&U(j),Te(K)}else U(j);se=N(j)}if(se!==null)var ei=!0;else{var bi=N(ee);bi!==null&&i(bt,bi.startTime-K),ei=!1}return ei}finally{se=null,z=re,ue=!1}}var Ei=n;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){Oe||ue||(Oe=!0,e(qt))},t.unstable_getCurrentPriorityLevel=function(){return z},t.unstable_getFirstCallbackNode=function(){return N(j)},t.unstable_next=function(q){switch(z){case 1:case 2:case 3:var K=3;break;default:K=z}var re=z;z=K;try{return q()}finally{z=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=Ei,t.unstable_runWithPriority=function(q,K){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var re=z;z=q;try{return K()}finally{z=re}},t.unstable_scheduleCallback=function(q,K,re){var be=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?be+re:be):re=be,q){case 1:var Be=-1;break;case 2:Be=250;break;case 5:Be=1073741823;break;case 4:Be=1e4;break;default:Be=5e3}return Be=re+Be,q={id:oe++,callback:K,priorityLevel:q,startTime:re,expirationTime:Be,sortIndex:-1},re>be?(q.sortIndex=re,O(ee,q),N(j)===null&&q===N(ee)&&(ae?r():ae=!0,i(bt,re-be))):(q.sortIndex=Be,O(j,q),Oe||ue||(Oe=!0,e(qt))),q},t.unstable_wrapCallback=function(q){var K=z;return function(){var re=z;z=K;try{return q.apply(this,arguments)}finally{z=re}}}})(Py);Iy.exports=Py;var NE=Iy.exports;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pl=bn,De=hy,He=NE;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=1;i<arguments.length;i++)e+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!pl)throw Error($(227));var Oy=new Set,Ca={};function Xr(t,e){$n(t,e),$n(t+"Capture",e)}function $n(t,e){for(Ca[t]=e,t=0;t<e.length;t++)Oy.add(e[t])}var Fi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),RE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wm=Object.prototype.hasOwnProperty,Dm={},Am={};function ME(t){return wm.call(Am,t)?!0:wm.call(Dm,t)?!1:RE.test(t)?Am[t]=!0:(Dm[t]=!0,!1)}function BE(t,e,i,r){if(i!==null&&i.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:i!==null?!i.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function FE(t,e,i,r){if(e===null||typeof e>"u"||BE(t,e,i,r))return!0;if(r)return!1;if(i!==null)switch(i.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ht(t,e,i,r,n,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=n,this.mustUseProperty=i,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var Xe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Xe[t]=new ht(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Xe[e]=new ht(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Xe[t]=new ht(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Xe[t]=new ht(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Xe[t]=new ht(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Xe[t]=new ht(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Xe[t]=new ht(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Xe[t]=new ht(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Xe[t]=new ht(t,5,!1,t.toLowerCase(),null,!1,!1)});var Oh=/[\-:]([a-z])/g;function Lh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Oh,Lh);Xe[e]=new ht(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Oh,Lh);Xe[e]=new ht(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Oh,Lh);Xe[e]=new ht(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Xe[t]=new ht(t,1,!1,t.toLowerCase(),null,!1,!1)});Xe.xlinkHref=new ht("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Xe[t]=new ht(t,1,!1,t.toLowerCase(),null,!0,!0)});function Nh(t,e,i,r){var n=Xe.hasOwnProperty(e)?Xe[e]:null,s=n!==null?n.type===0:r?!1:!(!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N");s||(FE(e,i,n,r)&&(i=null),r||n===null?ME(e)&&(i===null?t.removeAttribute(e):t.setAttribute(e,""+i)):n.mustUseProperty?t[n.propertyName]=i===null?n.type===3?!1:"":i:(e=n.attributeName,r=n.attributeNamespace,i===null?t.removeAttribute(e):(n=n.type,i=n===3||n===4&&i===!0?"":""+i,r?t.setAttributeNS(r,e,i):t.setAttribute(e,i))))}var Kr=pl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ys=60103,Lr=60106,Ji=60107,Rh=60108,oa=60114,Mh=60109,Bh=60110,ml=60112,ua=60113,yu=60120,gl=60115,Fh=60116,Uh=60121,jh=60128,Ly=60129,$h=60130,fd=60131;if(typeof Symbol=="function"&&Symbol.for){var je=Symbol.for;Ys=je("react.element"),Lr=je("react.portal"),Ji=je("react.fragment"),Rh=je("react.strict_mode"),oa=je("react.profiler"),Mh=je("react.provider"),Bh=je("react.context"),ml=je("react.forward_ref"),ua=je("react.suspense"),yu=je("react.suspense_list"),gl=je("react.memo"),Fh=je("react.lazy"),Uh=je("react.block"),je("react.scope"),jh=je("react.opaque.id"),Ly=je("react.debug_trace_mode"),$h=je("react.offscreen"),fd=je("react.legacy_hidden")}var km=typeof Symbol=="function"&&Symbol.iterator;function Is(t){return t===null||typeof t!="object"?null:(t=km&&t[km]||t["@@iterator"],typeof t=="function"?t:null)}var Ec;function Qs(t){if(Ec===void 0)try{throw Error()}catch(i){var e=i.stack.trim().match(/\n( *(at )?)/);Ec=e&&e[1]||""}return`
`+Ec+t}var bc=!1;function Mo(t,e){if(!t||bc)return"";bc=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var n=l.stack.split(`
`),s=r.stack.split(`
`),a=n.length-1,o=s.length-1;1<=a&&0<=o&&n[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(n[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||n[a]!==s[o])return`
`+n[a].replace(" at new "," at ");while(1<=a&&0<=o);break}}}finally{bc=!1,Error.prepareStackTrace=i}return(t=t?t.displayName||t.name:"")?Qs(t):""}function UE(t){switch(t.tag){case 5:return Qs(t.type);case 16:return Qs("Lazy");case 13:return Qs("Suspense");case 19:return Qs("SuspenseList");case 0:case 2:case 15:return t=Mo(t.type,!1),t;case 11:return t=Mo(t.type.render,!1),t;case 22:return t=Mo(t.type._render,!1),t;case 1:return t=Mo(t.type,!0),t;default:return""}}function Cn(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ji:return"Fragment";case Lr:return"Portal";case oa:return"Profiler";case Rh:return"StrictMode";case ua:return"Suspense";case yu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Bh:return(t.displayName||"Context")+".Consumer";case Mh:return(t._context.displayName||"Context")+".Provider";case ml:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case gl:return Cn(t.type);case Uh:return Cn(t._render);case Fh:e=t._payload,t=t._init;try{return Cn(t(e))}catch{}}return null}function cr(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function Ny(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function jE(t){var e=Ny(t)?"checked":"value",i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var n=i.get,s=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return n.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Bo(t){t._valueTracker||(t._valueTracker=jE(t))}function Ry(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var i=e.getValue(),r="";return t&&(r=Ny(t)?t.checked?"true":"false":t.value),t=r,t!==i?(e.setValue(t),!0):!1}function _u(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function pd(t,e){var i=e.checked;return De({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??t._wrapperState.initialChecked})}function Im(t,e){var i=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;i=cr(e.value!=null?e.value:i),t._wrapperState={initialChecked:r,initialValue:i,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function My(t,e){e=e.checked,e!=null&&Nh(t,"checked",e,!1)}function md(t,e){My(t,e);var i=cr(e.value),r=e.type;if(i!=null)r==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+i):t.value!==""+i&&(t.value=""+i);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?gd(t,e.type,i):e.hasOwnProperty("defaultValue")&&gd(t,e.type,cr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Pm(t,e,i){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,i||e===t.value||(t.value=e),t.defaultValue=e}i=t.name,i!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,i!==""&&(t.name=i)}function gd(t,e,i){(e!=="number"||_u(t.ownerDocument)!==t)&&(i==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+i&&(t.defaultValue=""+i))}function $E(t){var e="";return pl.Children.forEach(t,function(i){i!=null&&(e+=i)}),e}function yd(t,e){return t=De({children:void 0},e),(e=$E(e.children))&&(t.children=e),t}function wn(t,e,i,r){if(t=t.options,e){e={};for(var n=0;n<i.length;n++)e["$"+i[n]]=!0;for(i=0;i<t.length;i++)n=e.hasOwnProperty("$"+t[i].value),t[i].selected!==n&&(t[i].selected=n),n&&r&&(t[i].defaultSelected=!0)}else{for(i=""+cr(i),e=null,n=0;n<t.length;n++){if(t[n].value===i){t[n].selected=!0,r&&(t[n].defaultSelected=!0);return}e!==null||t[n].disabled||(e=t[n])}e!==null&&(e.selected=!0)}}function _d(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return De({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Om(t,e){var i=e.value;if(i==null){if(i=e.children,e=e.defaultValue,i!=null){if(e!=null)throw Error($(92));if(Array.isArray(i)){if(!(1>=i.length))throw Error($(93));i=i[0]}e=i}e==null&&(e=""),i=e}t._wrapperState={initialValue:cr(i)}}function By(t,e){var i=cr(e.value),r=cr(e.defaultValue);i!=null&&(i=""+i,i!==t.value&&(t.value=i),e.defaultValue==null&&t.defaultValue!==i&&(t.defaultValue=i)),r!=null&&(t.defaultValue=""+r)}function Lm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}var vd={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Fy(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Td(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Fy(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Fo,Uy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,i,r,n){MSApp.execUnsafeLocalFunction(function(){return t(e,i,r,n)})}:t}(function(t,e){if(t.namespaceURI!==vd.svg||"innerHTML"in t)t.innerHTML=e;else{for(Fo=Fo||document.createElement("div"),Fo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Fo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function wa(t,e){if(e){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=e;return}}t.textContent=e}var la={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},VE=["Webkit","ms","Moz","O"];Object.keys(la).forEach(function(t){VE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),la[e]=la[t]})});function jy(t,e,i){return e==null||typeof e=="boolean"||e===""?"":i||typeof e!="number"||e===0||la.hasOwnProperty(t)&&la[t]?(""+e).trim():e+"px"}function $y(t,e){t=t.style;for(var i in e)if(e.hasOwnProperty(i)){var r=i.indexOf("--")===0,n=jy(i,e[i],r);i==="float"&&(i="cssFloat"),r?t.setProperty(i,n):t[i]=n}}var HE=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xd(t,e){if(e){if(HE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(!(typeof e.dangerouslySetInnerHTML=="object"&&"__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function Sd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Vh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ed=null,Dn=null,An=null;function Nm(t){if(t=Ya(t)){if(typeof Ed!="function")throw Error($(280));var e=t.stateNode;e&&(e=Sl(e),Ed(t.stateNode,t.type,e))}}function Vy(t){Dn?An?An.push(t):An=[t]:Dn=t}function Hy(){if(Dn){var t=Dn,e=An;if(An=Dn=null,Nm(t),e)for(t=0;t<e.length;t++)Nm(e[t])}}function Hh(t,e){return t(e)}function qy(t,e,i,r,n){return t(e,i,r,n)}function qh(){}var zy=Hh,Nr=!1,Cc=!1;function zh(){(Dn!==null||An!==null)&&(qh(),Hy())}function qE(t,e,i){if(Cc)return t(e,i);Cc=!0;try{return zy(t,e,i)}finally{Cc=!1,zh()}}function Da(t,e){var i=t.stateNode;if(i===null)return null;var r=Sl(i);if(r===null)return null;i=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error($(231,e,typeof i));return i}var bd=!1;if(Fi)try{var Ps={};Object.defineProperty(Ps,"passive",{get:function(){bd=!0}}),window.addEventListener("test",Ps,Ps),window.removeEventListener("test",Ps,Ps)}catch{bd=!1}function zE(t,e,i,r,n,s,a,o,l){var d=Array.prototype.slice.call(arguments,3);try{e.apply(i,d)}catch(m){this.onError(m)}}var ca=!1,vu=null,Tu=!1,Cd=null,GE={onError:function(t){ca=!0,vu=t}};function WE(t,e,i,r,n,s,a,o,l){ca=!1,vu=null,zE.apply(GE,arguments)}function XE(t,e,i,r,n,s,a,o,l){if(WE.apply(this,arguments),ca){if(ca){var d=vu;ca=!1,vu=null}else throw Error($(198));Tu||(Tu=!0,Cd=d)}}function Yr(t){var e=t,i=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&1026&&(i=e.return),t=e.return;while(t)}return e.tag===3?i:null}function Gy(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Rm(t){if(Yr(t)!==t)throw Error($(188))}function KE(t){var e=t.alternate;if(!e){if(e=Yr(t),e===null)throw Error($(188));return e!==t?null:t}for(var i=t,r=e;;){var n=i.return;if(n===null)break;var s=n.alternate;if(s===null){if(r=n.return,r!==null){i=r;continue}break}if(n.child===s.child){for(s=n.child;s;){if(s===i)return Rm(n),t;if(s===r)return Rm(n),e;s=s.sibling}throw Error($(188))}if(i.return!==r.return)i=n,r=s;else{for(var a=!1,o=n.child;o;){if(o===i){a=!0,i=n,r=s;break}if(o===r){a=!0,r=n,i=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===i){a=!0,i=s,r=n;break}if(o===r){a=!0,r=s,i=n;break}o=o.sibling}if(!a)throw Error($(189))}}if(i.alternate!==r)throw Error($(190))}if(i.tag!==3)throw Error($(188));return i.stateNode.current===i?t:e}function Wy(t){if(t=KE(t),!t)return null;for(var e=t;;){if(e.tag===5||e.tag===6)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function Mm(t,e){for(var i=t.alternate;e!==null;){if(e===t||e===i)return!0;e=e.return}return!1}var Xy,Gh,Ky,Yy,wd=!1,ni=[],ir=null,rr=null,nr=null,Aa=new Map,ka=new Map,Os=[],Bm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dd(t,e,i,r,n){return{blockedOn:t,domEventName:e,eventSystemFlags:i|16,nativeEvent:n,targetContainers:[r]}}function Fm(t,e){switch(t){case"focusin":case"focusout":ir=null;break;case"dragenter":case"dragleave":rr=null;break;case"mouseover":case"mouseout":nr=null;break;case"pointerover":case"pointerout":Aa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ka.delete(e.pointerId)}}function Ls(t,e,i,r,n,s){return t===null||t.nativeEvent!==s?(t=Dd(e,i,r,n,s),e!==null&&(e=Ya(e),e!==null&&Gh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,n!==null&&e.indexOf(n)===-1&&e.push(n),t)}function YE(t,e,i,r,n){switch(e){case"focusin":return ir=Ls(ir,t,e,i,r,n),!0;case"dragenter":return rr=Ls(rr,t,e,i,r,n),!0;case"mouseover":return nr=Ls(nr,t,e,i,r,n),!0;case"pointerover":var s=n.pointerId;return Aa.set(s,Ls(Aa.get(s)||null,t,e,i,r,n)),!0;case"gotpointercapture":return s=n.pointerId,ka.set(s,Ls(ka.get(s)||null,t,e,i,r,n)),!0}return!1}function QE(t){var e=Rr(t.target);if(e!==null){var i=Yr(e);if(i!==null){if(e=i.tag,e===13){if(e=Gy(i),e!==null){t.blockedOn=e,Yy(t.lanePriority,function(){He.unstable_runWithPriority(t.priority,function(){Ky(i)})});return}}else if(e===3&&i.stateNode.hydrate){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function iu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var i=Yh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(i!==null)return e=Ya(i),e!==null&&Gh(e),t.blockedOn=i,!1;e.shift()}return!0}function Um(t,e,i){iu(t)&&i.delete(e)}function JE(){for(wd=!1;0<ni.length;){var t=ni[0];if(t.blockedOn!==null){t=Ya(t.blockedOn),t!==null&&Xy(t);break}for(var e=t.targetContainers;0<e.length;){var i=Yh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(i!==null){t.blockedOn=i;break}e.shift()}t.blockedOn===null&&ni.shift()}ir!==null&&iu(ir)&&(ir=null),rr!==null&&iu(rr)&&(rr=null),nr!==null&&iu(nr)&&(nr=null),Aa.forEach(Um),ka.forEach(Um)}function Ns(t,e){t.blockedOn===e&&(t.blockedOn=null,wd||(wd=!0,He.unstable_scheduleCallback(He.unstable_NormalPriority,JE)))}function Qy(t){function e(n){return Ns(n,t)}if(0<ni.length){Ns(ni[0],t);for(var i=1;i<ni.length;i++){var r=ni[i];r.blockedOn===t&&(r.blockedOn=null)}}for(ir!==null&&Ns(ir,t),rr!==null&&Ns(rr,t),nr!==null&&Ns(nr,t),Aa.forEach(e),ka.forEach(e),i=0;i<Os.length;i++)r=Os[i],r.blockedOn===t&&(r.blockedOn=null);for(;0<Os.length&&(i=Os[0],i.blockedOn===null);)QE(i),i.blockedOn===null&&Os.shift()}function Uo(t,e){var i={};return i[t.toLowerCase()]=e.toLowerCase(),i["Webkit"+t]="webkit"+e,i["Moz"+t]="moz"+e,i}var pn={animationend:Uo("Animation","AnimationEnd"),animationiteration:Uo("Animation","AnimationIteration"),animationstart:Uo("Animation","AnimationStart"),transitionend:Uo("Transition","TransitionEnd")},wc={},Jy={};Fi&&(Jy=document.createElement("div").style,"AnimationEvent"in window||(delete pn.animationend.animation,delete pn.animationiteration.animation,delete pn.animationstart.animation),"TransitionEvent"in window||delete pn.transitionend.transition);function yl(t){if(wc[t])return wc[t];if(!pn[t])return t;var e=pn[t],i;for(i in e)if(e.hasOwnProperty(i)&&i in Jy)return wc[t]=e[i];return t}var Zy=yl("animationend"),e_=yl("animationiteration"),t_=yl("animationstart"),i_=yl("transitionend"),r_=new Map,Wh=new Map,ZE=["abort","abort",Zy,"animationEnd",e_,"animationIteration",t_,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",i_,"transitionEnd","waiting","waiting"];function Xh(t,e){for(var i=0;i<t.length;i+=2){var r=t[i],n=t[i+1];n="on"+(n[0].toUpperCase()+n.slice(1)),Wh.set(r,e),r_.set(r,n),Xr(n,[r])}}var eb=He.unstable_now;eb();var me=8;function hn(t){if(1&t)return me=15,1;if(2&t)return me=14,2;if(4&t)return me=13,4;var e=24&t;return e!==0?(me=12,e):t&32?(me=11,32):(e=192&t,e!==0?(me=10,e):t&256?(me=9,256):(e=3584&t,e!==0?(me=8,e):t&4096?(me=7,4096):(e=4186112&t,e!==0?(me=6,e):(e=62914560&t,e!==0?(me=5,e):t&67108864?(me=4,67108864):t&134217728?(me=3,134217728):(e=805306368&t,e!==0?(me=2,e):1073741824&t?(me=1,1073741824):(me=8,t))))))}function tb(t){switch(t){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function ib(t){switch(t){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error($(358,t))}}function Ia(t,e){var i=t.pendingLanes;if(i===0)return me=0;var r=0,n=0,s=t.expiredLanes,a=t.suspendedLanes,o=t.pingedLanes;if(s!==0)r=s,n=me=15;else if(s=i&134217727,s!==0){var l=s&~a;l!==0?(r=hn(l),n=me):(o&=s,o!==0&&(r=hn(o),n=me))}else s=i&~a,s!==0?(r=hn(s),n=me):o!==0&&(r=hn(o),n=me);if(r===0)return 0;if(r=31-dr(r),r=i&((0>r?0:1<<r)<<1)-1,e!==0&&e!==r&&!(e&a)){if(hn(e),n<=me)return e;me=n}if(e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)i=31-dr(e),n=1<<i,r|=t[i],e&=~n;return r}function n_(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function xu(t,e){switch(t){case 15:return 1;case 14:return 2;case 12:return t=fn(24&~e),t===0?xu(10,e):t;case 10:return t=fn(192&~e),t===0?xu(8,e):t;case 8:return t=fn(3584&~e),t===0&&(t=fn(4186112&~e),t===0&&(t=512)),t;case 2:return e=fn(805306368&~e),e===0&&(e=268435456),e}throw Error($(358,t))}function fn(t){return t&-t}function Dc(t){for(var e=[],i=0;31>i;i++)e.push(t);return e}function _l(t,e,i){t.pendingLanes|=e;var r=e-1;t.suspendedLanes&=r,t.pingedLanes&=r,t=t.eventTimes,e=31-dr(e),t[e]=i}var dr=Math.clz32?Math.clz32:sb,rb=Math.log,nb=Math.LN2;function sb(t){return t===0?32:31-(rb(t)/nb|0)|0}var ab=He.unstable_UserBlockingPriority,ob=He.unstable_runWithPriority,ru=!0;function ub(t,e,i,r){Nr||qh();var n=Kh,s=Nr;Nr=!0;try{qy(n,t,e,i,r)}finally{(Nr=s)||zh()}}function lb(t,e,i,r){ob(ab,Kh.bind(null,t,e,i,r))}function Kh(t,e,i,r){if(ru){var n;if((n=(e&4)===0)&&0<ni.length&&-1<Bm.indexOf(t))t=Dd(null,t,e,i,r),ni.push(t);else{var s=Yh(t,e,i,r);if(s===null)n&&Fm(t,r);else{if(n){if(-1<Bm.indexOf(t)){t=Dd(s,t,e,i,r),ni.push(t);return}if(YE(s,t,e,i,r))return;Fm(t,r)}y_(t,e,r,null,i)}}}}function Yh(t,e,i,r){var n=Vh(r);if(n=Rr(n),n!==null){var s=Yr(n);if(s===null)n=null;else{var a=s.tag;if(a===13){if(n=Gy(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.hydrate)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return y_(t,e,r,n,i),null}var Zi=null,Qh=null,nu=null;function s_(){if(nu)return nu;var t,e=Qh,i=e.length,r,n="value"in Zi?Zi.value:Zi.textContent,s=n.length;for(t=0;t<i&&e[t]===n[t];t++);var a=i-t;for(r=1;r<=a&&e[i-r]===n[s-r];r++);return nu=n.slice(t,1<r?1-r:void 0)}function su(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function jo(){return!0}function jm(){return!1}function Pt(t){function e(i,r,n,s,a){this._reactName=i,this._targetInst=n,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(i=t[o],this[o]=i?i(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?jo:jm,this.isPropagationStopped=jm,this}return De(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=jo)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=jo)},persist:function(){},isPersistent:jo}),e}var ss={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jh=Pt(ss),Ka=De({},ss,{view:0,detail:0}),cb=Pt(Ka),Ac,kc,Rs,vl=De({},Ka,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Rs&&(Rs&&t.type==="mousemove"?(Ac=t.screenX-Rs.screenX,kc=t.screenY-Rs.screenY):kc=Ac=0,Rs=t),Ac)},movementY:function(t){return"movementY"in t?t.movementY:kc}}),$m=Pt(vl),db=De({},vl,{dataTransfer:0}),hb=Pt(db),fb=De({},Ka,{relatedTarget:0}),Ic=Pt(fb),pb=De({},ss,{animationName:0,elapsedTime:0,pseudoElement:0}),mb=Pt(pb),gb=De({},ss,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),yb=Pt(gb),_b=De({},ss,{data:0}),Vm=Pt(_b),vb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sb(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=xb[t])?!!e[t]:!1}function Zh(){return Sb}var Eb=De({},Ka,{key:function(t){if(t.key){var e=vb[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=su(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Tb[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zh,charCode:function(t){return t.type==="keypress"?su(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?su(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),bb=Pt(Eb),Cb=De({},vl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hm=Pt(Cb),wb=De({},Ka,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zh}),Db=Pt(wb),Ab=De({},ss,{propertyName:0,elapsedTime:0,pseudoElement:0}),kb=Pt(Ab),Ib=De({},vl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Pb=Pt(Ib),Ob=[9,13,27,32],ef=Fi&&"CompositionEvent"in window,da=null;Fi&&"documentMode"in document&&(da=document.documentMode);var Lb=Fi&&"TextEvent"in window&&!da,a_=Fi&&(!ef||da&&8<da&&11>=da),qm=String.fromCharCode(32),zm=!1;function o_(t,e){switch(t){case"keyup":return Ob.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function u_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var mn=!1;function Nb(t,e){switch(t){case"compositionend":return u_(e);case"keypress":return e.which!==32?null:(zm=!0,qm);case"textInput":return t=e.data,t===qm&&zm?null:t;default:return null}}function Rb(t,e){if(mn)return t==="compositionend"||!ef&&o_(t,e)?(t=s_(),nu=Qh=Zi=null,mn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return a_&&e.locale!=="ko"?null:e.data;default:return null}}var Mb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Mb[t.type]:e==="textarea"}function l_(t,e,i,r){Vy(r),e=Su(e,"onChange"),0<e.length&&(i=new Jh("onChange","change",null,i,r),t.push({event:i,listeners:e}))}var ha=null,Pa=null;function Bb(t){p_(t,0)}function Tl(t){var e=yn(t);if(Ry(e))return t}function Fb(t,e){if(t==="change")return e}var c_=!1;if(Fi){var Pc;if(Fi){var Oc="oninput"in document;if(!Oc){var Wm=document.createElement("div");Wm.setAttribute("oninput","return;"),Oc=typeof Wm.oninput=="function"}Pc=Oc}else Pc=!1;c_=Pc&&(!document.documentMode||9<document.documentMode)}function Xm(){ha&&(ha.detachEvent("onpropertychange",d_),Pa=ha=null)}function d_(t){if(t.propertyName==="value"&&Tl(Pa)){var e=[];if(l_(e,Pa,t,Vh(t)),t=Bb,Nr)t(e);else{Nr=!0;try{Hh(t,e)}finally{Nr=!1,zh()}}}}function Ub(t,e,i){t==="focusin"?(Xm(),ha=e,Pa=i,ha.attachEvent("onpropertychange",d_)):t==="focusout"&&Xm()}function jb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Tl(Pa)}function $b(t,e){if(t==="click")return Tl(e)}function Vb(t,e){if(t==="input"||t==="change")return Tl(e)}function Hb(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Rt=typeof Object.is=="function"?Object.is:Hb,qb=Object.prototype.hasOwnProperty;function Oa(t,e){if(Rt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var i=Object.keys(t),r=Object.keys(e);if(i.length!==r.length)return!1;for(r=0;r<i.length;r++)if(!qb.call(e,i[r])||!Rt(t[i[r]],e[i[r]]))return!1;return!0}function Km(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ym(t,e){var i=Km(t);t=0;for(var r;i;){if(i.nodeType===3){if(r=t+i.textContent.length,t<=e&&r>=e)return{node:i,offset:e-t};t=r}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Km(i)}}function h_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?h_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Qm(){for(var t=window,e=_u();e instanceof t.HTMLIFrameElement;){try{var i=typeof e.contentWindow.location.href=="string"}catch{i=!1}if(i)t=e.contentWindow;else break;e=_u(t.document)}return e}function Ad(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var zb=Fi&&"documentMode"in document&&11>=document.documentMode,gn=null,kd=null,fa=null,Id=!1;function Jm(t,e,i){var r=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Id||gn==null||gn!==_u(r)||(r=gn,"selectionStart"in r&&Ad(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),fa&&Oa(fa,r)||(fa=r,r=Su(kd,"onSelect"),0<r.length&&(e=new Jh("onSelect","select",null,e,i),t.push({event:e,listeners:r}),e.target=gn)))}Xh("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);Xh("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Xh(ZE,2);for(var Zm="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Lc=0;Lc<Zm.length;Lc++)Wh.set(Zm[Lc],0);$n("onMouseEnter",["mouseout","mouseover"]);$n("onMouseLeave",["mouseout","mouseover"]);$n("onPointerEnter",["pointerout","pointerover"]);$n("onPointerLeave",["pointerout","pointerover"]);Xr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Js="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),f_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Js));function eg(t,e,i){var r=t.type||"unknown-event";t.currentTarget=i,XE(r,e,void 0,t),t.currentTarget=null}function p_(t,e){e=(e&4)!==0;for(var i=0;i<t.length;i++){var r=t[i],n=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,d=o.currentTarget;if(o=o.listener,l!==s&&n.isPropagationStopped())break e;eg(n,o,d),s=l}else for(a=0;a<r.length;a++){if(o=r[a],l=o.instance,d=o.currentTarget,o=o.listener,l!==s&&n.isPropagationStopped())break e;eg(n,o,d),s=l}}}if(Tu)throw t=Cd,Tu=!1,Cd=null,t}function Se(t,e){var i=v_(e),r=t+"__bubble";i.has(r)||(g_(e,t,2,!1),i.add(r))}var tg="_reactListening"+Math.random().toString(36).slice(2);function m_(t){t[tg]||(t[tg]=!0,Oy.forEach(function(e){f_.has(e)||ig(e,!1,t,null),ig(e,!0,t,null)}))}function ig(t,e,i,r){var n=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,s=i;if(t==="selectionchange"&&i.nodeType!==9&&(s=i.ownerDocument),r!==null&&!e&&f_.has(t)){if(t!=="scroll")return;n|=2,s=r}var a=v_(s),o=t+"__"+(e?"capture":"bubble");a.has(o)||(e&&(n|=4),g_(s,t,n,e),a.add(o))}function g_(t,e,i,r){var n=Wh.get(e);switch(n===void 0?2:n){case 0:n=ub;break;case 1:n=lb;break;default:n=Kh}i=n.bind(null,e,i,t),n=void 0,!bd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(n=!0),r?n!==void 0?t.addEventListener(e,i,{capture:!0,passive:n}):t.addEventListener(e,i,!0):n!==void 0?t.addEventListener(e,i,{passive:n}):t.addEventListener(e,i,!1)}function y_(t,e,i,r,n){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===n||o.nodeType===8&&o.parentNode===n)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===n||l.nodeType===8&&l.parentNode===n))return;a=a.return}for(;o!==null;){if(a=Rr(o),a===null)return;if(l=a.tag,l===5||l===6){r=s=a;continue e}o=o.parentNode}}r=r.return}qE(function(){var d=s,m=Vh(i),y=[];e:{var v=r_.get(t);if(v!==void 0){var b=Jh,S=t;switch(t){case"keypress":if(su(i)===0)break e;case"keydown":case"keyup":b=bb;break;case"focusin":S="focus",b=Ic;break;case"focusout":S="blur",b=Ic;break;case"beforeblur":case"afterblur":b=Ic;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=$m;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=hb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=Db;break;case Zy:case e_:case t_:b=mb;break;case i_:b=kb;break;case"scroll":b=cb;break;case"wheel":b=Pb;break;case"copy":case"cut":case"paste":b=yb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=Hm}var A=(e&4)!==0,T=!A&&t==="scroll",_=A?v!==null?v+"Capture":null:v;A=[];for(var x=d,I;x!==null;){I=x;var D=I.stateNode;if(I.tag===5&&D!==null&&(I=D,_!==null&&(D=Da(x,_),D!=null&&A.push(La(x,D,I)))),T)break;x=x.return}0<A.length&&(v=new b(v,S,null,i,m),y.push({event:v,listeners:A}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",b=t==="mouseout"||t==="pointerout",v&&!(e&16)&&(S=i.relatedTarget||i.fromElement)&&(Rr(S)||S[as]))break e;if((b||v)&&(v=m.window===m?m:(v=m.ownerDocument)?v.defaultView||v.parentWindow:window,b?(S=i.relatedTarget||i.toElement,b=d,S=S?Rr(S):null,S!==null&&(T=Yr(S),S!==T||S.tag!==5&&S.tag!==6)&&(S=null)):(b=null,S=d),b!==S)){if(A=$m,D="onMouseLeave",_="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(A=Hm,D="onPointerLeave",_="onPointerEnter",x="pointer"),T=b==null?v:yn(b),I=S==null?v:yn(S),v=new A(D,x+"leave",b,i,m),v.target=T,v.relatedTarget=I,D=null,Rr(m)===d&&(A=new A(_,x+"enter",S,i,m),A.target=I,A.relatedTarget=T,D=A),T=D,b&&S)t:{for(A=b,_=S,x=0,I=A;I;I=nn(I))x++;for(I=0,D=_;D;D=nn(D))I++;for(;0<x-I;)A=nn(A),x--;for(;0<I-x;)_=nn(_),I--;for(;x--;){if(A===_||_!==null&&A===_.alternate)break t;A=nn(A),_=nn(_)}A=null}else A=null;b!==null&&rg(y,v,b,A,!1),S!==null&&T!==null&&rg(y,T,S,A,!0)}}e:{if(v=d?yn(d):window,b=v.nodeName&&v.nodeName.toLowerCase(),b==="select"||b==="input"&&v.type==="file")var O=Fb;else if(Gm(v))if(c_)O=Vb;else{O=jb;var N=Ub}else(b=v.nodeName)&&b.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(O=$b);if(O&&(O=O(t,d))){l_(y,O,i,m);break e}N&&N(t,v,d),t==="focusout"&&(N=v._wrapperState)&&N.controlled&&v.type==="number"&&gd(v,"number",v.value)}switch(N=d?yn(d):window,t){case"focusin":(Gm(N)||N.contentEditable==="true")&&(gn=N,kd=d,fa=null);break;case"focusout":fa=kd=gn=null;break;case"mousedown":Id=!0;break;case"contextmenu":case"mouseup":case"dragend":Id=!1,Jm(y,i,m);break;case"selectionchange":if(zb)break;case"keydown":case"keyup":Jm(y,i,m)}var U;if(ef)e:{switch(t){case"compositionstart":var H="onCompositionStart";break e;case"compositionend":H="onCompositionEnd";break e;case"compositionupdate":H="onCompositionUpdate";break e}H=void 0}else mn?o_(t,i)&&(H="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&(H="onCompositionStart");H&&(a_&&i.locale!=="ko"&&(mn||H!=="onCompositionStart"?H==="onCompositionEnd"&&mn&&(U=s_()):(Zi=m,Qh="value"in Zi?Zi.value:Zi.textContent,mn=!0)),N=Su(d,H),0<N.length&&(H=new Vm(H,t,null,i,m),y.push({event:H,listeners:N}),U?H.data=U:(U=u_(i),U!==null&&(H.data=U)))),(U=Lb?Nb(t,i):Rb(t,i))&&(d=Su(d,"onBeforeInput"),0<d.length&&(m=new Vm("onBeforeInput","beforeinput",null,i,m),y.push({event:m,listeners:d}),m.data=U))}p_(y,e)})}function La(t,e,i){return{instance:t,listener:e,currentTarget:i}}function Su(t,e){for(var i=e+"Capture",r=[];t!==null;){var n=t,s=n.stateNode;n.tag===5&&s!==null&&(n=s,s=Da(t,i),s!=null&&r.unshift(La(t,s,n)),s=Da(t,e),s!=null&&r.push(La(t,s,n))),t=t.return}return r}function nn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function rg(t,e,i,r,n){for(var s=e._reactName,a=[];i!==null&&i!==r;){var o=i,l=o.alternate,d=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&d!==null&&(o=d,n?(l=Da(i,s),l!=null&&a.unshift(La(i,l,o))):n||(l=Da(i,s),l!=null&&a.push(La(i,l,o)))),i=i.return}a.length!==0&&t.push({event:e,listeners:a})}function Eu(){}var Nc=null,Rc=null;function __(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function Pd(t,e){return t==="textarea"||t==="option"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ng=typeof setTimeout=="function"?setTimeout:void 0,Gb=typeof clearTimeout=="function"?clearTimeout:void 0;function tf(t){t.nodeType===1?t.textContent="":t.nodeType===9&&(t=t.body,t!=null&&(t.textContent=""))}function kn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break}return t}function sg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"){if(e===0)return t;e--}else i==="/$"&&e++}t=t.previousSibling}return null}var Mc=0;function Wb(t){return{$$typeof:jh,toString:t,valueOf:t}}var xl=Math.random().toString(36).slice(2),er="__reactFiber$"+xl,bu="__reactProps$"+xl,as="__reactContainer$"+xl,ag="__reactEvents$"+xl;function Rr(t){var e=t[er];if(e)return e;for(var i=t.parentNode;i;){if(e=i[as]||i[er]){if(i=e.alternate,e.child!==null||i!==null&&i.child!==null)for(t=sg(t);t!==null;){if(i=t[er])return i;t=sg(t)}return e}t=i,i=t.parentNode}return null}function Ya(t){return t=t[er]||t[as],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function yn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function Sl(t){return t[bu]||null}function v_(t){var e=t[ag];return e===void 0&&(e=t[ag]=new Set),e}var Od=[],_n=-1;function _r(t){return{current:t}}function Ee(t){0>_n||(t.current=Od[_n],Od[_n]=null,_n--)}function Pe(t,e){_n++,Od[_n]=t.current,t.current=e}var hr={},tt=_r(hr),vt=_r(!1),Hr=hr;function Vn(t,e){var i=t.type.contextTypes;if(!i)return hr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var n={},s;for(s in i)n[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=n),n}function Tt(t){return t=t.childContextTypes,t!=null}function Cu(){Ee(vt),Ee(tt)}function og(t,e,i){if(tt.current!==hr)throw Error($(168));Pe(tt,e),Pe(vt,i)}function T_(t,e,i){var r=t.stateNode;if(t=e.childContextTypes,typeof r.getChildContext!="function")return i;r=r.getChildContext();for(var n in r)if(!(n in t))throw Error($(108,Cn(e)||"Unknown",n));return De({},i,r)}function au(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||hr,Hr=tt.current,Pe(tt,t),Pe(vt,vt.current),!0}function ug(t,e,i){var r=t.stateNode;if(!r)throw Error($(169));i?(t=T_(t,e,Hr),r.__reactInternalMemoizedMergedChildContext=t,Ee(vt),Ee(tt),Pe(tt,t)):Ee(vt),Pe(vt,i)}var rf=null,Ur=null,Xb=He.unstable_runWithPriority,nf=He.unstable_scheduleCallback,Ld=He.unstable_cancelCallback,Kb=He.unstable_shouldYield,lg=He.unstable_requestPaint,Nd=He.unstable_now,Yb=He.unstable_getCurrentPriorityLevel,El=He.unstable_ImmediatePriority,x_=He.unstable_UserBlockingPriority,S_=He.unstable_NormalPriority,E_=He.unstable_LowPriority,b_=He.unstable_IdlePriority,Bc={},Qb=lg!==void 0?lg:function(){},Ai=null,ou=null,Fc=!1,cg=Nd(),Qe=1e4>cg?Nd:function(){return Nd()-cg};function Hn(){switch(Yb()){case El:return 99;case x_:return 98;case S_:return 97;case E_:return 96;case b_:return 95;default:throw Error($(332))}}function C_(t){switch(t){case 99:return El;case 98:return x_;case 97:return S_;case 96:return E_;case 95:return b_;default:throw Error($(332))}}function qr(t,e){return t=C_(t),Xb(t,e)}function Na(t,e,i){return t=C_(t),nf(t,e,i)}function Si(){if(ou!==null){var t=ou;ou=null,Ld(t)}w_()}function w_(){if(!Fc&&Ai!==null){Fc=!0;var t=0;try{var e=Ai;qr(99,function(){for(;t<e.length;t++){var i=e[t];do i=i(!0);while(i!==null)}}),Ai=null}catch(i){throw Ai!==null&&(Ai=Ai.slice(t+1)),nf(El,Si),i}finally{Fc=!1}}}var Jb=Kr.ReactCurrentBatchConfig;function Xt(t,e){if(t&&t.defaultProps){e=De({},e),t=t.defaultProps;for(var i in t)e[i]===void 0&&(e[i]=t[i]);return e}return e}var wu=_r(null),Du=null,vn=null,Au=null;function sf(){Au=vn=Du=null}function af(t){var e=wu.current;Ee(wu),t.type._context._currentValue=e}function D_(t,e){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)===e){if(i===null||(i.childLanes&e)===e)break;i.childLanes|=e}else t.childLanes|=e,i!==null&&(i.childLanes|=e);t=t.return}}function In(t,e){Du=t,Au=vn=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Yt=!0),t.firstContext=null)}function Ut(t,e){if(Au!==t&&e!==!1&&e!==0)if((typeof e!="number"||e===1073741823)&&(Au=t,e=1073741823),e={context:t,observedBits:e,next:null},vn===null){if(Du===null)throw Error($(308));vn=e,Du.dependencies={lanes:0,firstContext:e,responders:null}}else vn=vn.next=e;return t._currentValue}var Yi=!1;function of(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function A_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function sr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ar(t,e){if(t=t.updateQueue,t!==null){t=t.shared;var i=t.pending;i===null?e.next=e:(e.next=i.next,i.next=e),t.pending=e}}function dg(t,e){var i=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,i===r)){var n=null,s=null;if(i=i.firstBaseUpdate,i!==null){do{var a={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};s===null?n=s=a:s=s.next=a,i=i.next}while(i!==null);s===null?n=s=e:s=s.next=e}else n=s=e;i={baseState:r.baseState,firstBaseUpdate:n,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=e:t.next=e,i.lastBaseUpdate=e}function Ra(t,e,i,r){var n=t.updateQueue;Yi=!1;var s=n.firstBaseUpdate,a=n.lastBaseUpdate,o=n.shared.pending;if(o!==null){n.shared.pending=null;var l=o,d=l.next;l.next=null,a===null?s=d:a.next=d,a=l;var m=t.alternate;if(m!==null){m=m.updateQueue;var y=m.lastBaseUpdate;y!==a&&(y===null?m.firstBaseUpdate=d:y.next=d,m.lastBaseUpdate=l)}}if(s!==null){y=n.baseState,a=0,m=d=l=null;do{o=s.lane;var v=s.eventTime;if((r&o)===o){m!==null&&(m=m.next={eventTime:v,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var b=t,S=s;switch(o=e,v=i,S.tag){case 1:if(b=S.payload,typeof b=="function"){y=b.call(v,y,o);break e}y=b;break e;case 3:b.flags=b.flags&-4097|64;case 0:if(b=S.payload,o=typeof b=="function"?b.call(v,y,o):b,o==null)break e;y=De({},y,o);break e;case 2:Yi=!0}}s.callback!==null&&(t.flags|=32,o=n.effects,o===null?n.effects=[s]:o.push(s))}else v={eventTime:v,lane:o,tag:s.tag,payload:s.payload,callback:s.callback,next:null},m===null?(d=m=v,l=y):m=m.next=v,a|=o;if(s=s.next,s===null){if(o=n.shared.pending,o===null)break;s=o.next,o.next=null,n.lastBaseUpdate=o,n.shared.pending=null}}while(1);m===null&&(l=y),n.baseState=l,n.firstBaseUpdate=d,n.lastBaseUpdate=m,Ja|=a,t.lanes=a,t.memoizedState=y}}function hg(t,e,i){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],n=r.callback;if(n!==null){if(r.callback=null,r=i,typeof n!="function")throw Error($(191,n));n.call(r)}}}var k_=new pl.Component().refs;function ku(t,e,i,r){e=t.memoizedState,i=i(r,e),i=i==null?e:De({},e,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var bl={isMounted:function(t){return(t=t._reactInternals)?Yr(t)===t:!1},enqueueSetState:function(t,e,i){t=t._reactInternals;var r=At(),n=or(t),s=sr(r,n);s.payload=e,i!=null&&(s.callback=i),ar(t,s),ur(t,n,r)},enqueueReplaceState:function(t,e,i){t=t._reactInternals;var r=At(),n=or(t),s=sr(r,n);s.tag=1,s.payload=e,i!=null&&(s.callback=i),ar(t,s),ur(t,n,r)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var i=At(),r=or(t),n=sr(i,r);n.tag=2,e!=null&&(n.callback=e),ar(t,n),ur(t,r,i)}};function fg(t,e,i,r,n,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!Oa(i,r)||!Oa(n,s):!0}function I_(t,e,i){var r=!1,n=hr,s=e.contextType;return typeof s=="object"&&s!==null?s=Ut(s):(n=Tt(e)?Hr:tt.current,r=e.contextTypes,s=(r=r!=null)?Vn(t,n):hr),e=new e(i,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=bl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=s),e}function pg(t,e,i,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(i,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(i,r),e.state!==t&&bl.enqueueReplaceState(e,e.state,null)}function Rd(t,e,i,r){var n=t.stateNode;n.props=i,n.state=t.memoizedState,n.refs=k_,of(t);var s=e.contextType;typeof s=="object"&&s!==null?n.context=Ut(s):(s=Tt(e)?Hr:tt.current,n.context=Vn(t,s)),Ra(t,i,n,r),n.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(ku(t,e,s,i),n.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(e=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),e!==n.state&&bl.enqueueReplaceState(n,n.state,null),Ra(t,i,n,r),n.state=t.memoizedState),typeof n.componentDidMount=="function"&&(t.flags|=4)}var $o=Array.isArray;function Ms(t,e,i){if(t=i.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error($(309));var r=i.stateNode}if(!r)throw Error($(147,t));var n=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===n?e.ref:(e=function(s){var a=r.refs;a===k_&&(a=r.refs={}),s===null?delete a[n]:a[n]=s},e._stringRef=n,e)}if(typeof t!="string")throw Error($(284));if(!i._owner)throw Error($(290,t))}return t}function Vo(t,e){if(t.type!=="textarea")throw Error($(31,Object.prototype.toString.call(e)==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function P_(t){function e(T,_){if(t){var x=T.lastEffect;x!==null?(x.nextEffect=_,T.lastEffect=_):T.firstEffect=T.lastEffect=_,_.nextEffect=null,_.flags=8}}function i(T,_){if(!t)return null;for(;_!==null;)e(T,_),_=_.sibling;return null}function r(T,_){for(T=new Map;_!==null;)_.key!==null?T.set(_.key,_):T.set(_.index,_),_=_.sibling;return T}function n(T,_){return T=pr(T,_),T.index=0,T.sibling=null,T}function s(T,_,x){return T.index=x,t?(x=T.alternate,x!==null?(x=x.index,x<_?(T.flags=2,_):x):(T.flags=2,_)):_}function a(T){return t&&T.alternate===null&&(T.flags=2),T}function o(T,_,x,I){return _===null||_.tag!==6?(_=Hc(x,T.mode,I),_.return=T,_):(_=n(_,x),_.return=T,_)}function l(T,_,x,I){return _!==null&&_.elementType===x.type?(I=n(_,x.props),I.ref=Ms(T,_,x),I.return=T,I):(I=du(x.type,x.key,x.props,null,T.mode,I),I.ref=Ms(T,_,x),I.return=T,I)}function d(T,_,x,I){return _===null||_.tag!==4||_.stateNode.containerInfo!==x.containerInfo||_.stateNode.implementation!==x.implementation?(_=qc(x,T.mode,I),_.return=T,_):(_=n(_,x.children||[]),_.return=T,_)}function m(T,_,x,I,D){return _===null||_.tag!==7?(_=Nn(x,T.mode,I,D),_.return=T,_):(_=n(_,x),_.return=T,_)}function y(T,_,x){if(typeof _=="string"||typeof _=="number")return _=Hc(""+_,T.mode,x),_.return=T,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ys:return x=du(_.type,_.key,_.props,null,T.mode,x),x.ref=Ms(T,null,_),x.return=T,x;case Lr:return _=qc(_,T.mode,x),_.return=T,_}if($o(_)||Is(_))return _=Nn(_,T.mode,x,null),_.return=T,_;Vo(T,_)}return null}function v(T,_,x,I){var D=_!==null?_.key:null;if(typeof x=="string"||typeof x=="number")return D!==null?null:o(T,_,""+x,I);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ys:return x.key===D?x.type===Ji?m(T,_,x.props.children,I,D):l(T,_,x,I):null;case Lr:return x.key===D?d(T,_,x,I):null}if($o(x)||Is(x))return D!==null?null:m(T,_,x,I,null);Vo(T,x)}return null}function b(T,_,x,I,D){if(typeof I=="string"||typeof I=="number")return T=T.get(x)||null,o(_,T,""+I,D);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Ys:return T=T.get(I.key===null?x:I.key)||null,I.type===Ji?m(_,T,I.props.children,D,I.key):l(_,T,I,D);case Lr:return T=T.get(I.key===null?x:I.key)||null,d(_,T,I,D)}if($o(I)||Is(I))return T=T.get(x)||null,m(_,T,I,D,null);Vo(_,I)}return null}function S(T,_,x,I){for(var D=null,O=null,N=_,U=_=0,H=null;N!==null&&U<x.length;U++){N.index>U?(H=N,N=null):H=N.sibling;var j=v(T,N,x[U],I);if(j===null){N===null&&(N=H);break}t&&N&&j.alternate===null&&e(T,N),_=s(j,_,U),O===null?D=j:O.sibling=j,O=j,N=H}if(U===x.length)return i(T,N),D;if(N===null){for(;U<x.length;U++)N=y(T,x[U],I),N!==null&&(_=s(N,_,U),O===null?D=N:O.sibling=N,O=N);return D}for(N=r(T,N);U<x.length;U++)H=b(N,T,U,x[U],I),H!==null&&(t&&H.alternate!==null&&N.delete(H.key===null?U:H.key),_=s(H,_,U),O===null?D=H:O.sibling=H,O=H);return t&&N.forEach(function(ee){return e(T,ee)}),D}function A(T,_,x,I){var D=Is(x);if(typeof D!="function")throw Error($(150));if(x=D.call(x),x==null)throw Error($(151));for(var O=D=null,N=_,U=_=0,H=null,j=x.next();N!==null&&!j.done;U++,j=x.next()){N.index>U?(H=N,N=null):H=N.sibling;var ee=v(T,N,j.value,I);if(ee===null){N===null&&(N=H);break}t&&N&&ee.alternate===null&&e(T,N),_=s(ee,_,U),O===null?D=ee:O.sibling=ee,O=ee,N=H}if(j.done)return i(T,N),D;if(N===null){for(;!j.done;U++,j=x.next())j=y(T,j.value,I),j!==null&&(_=s(j,_,U),O===null?D=j:O.sibling=j,O=j);return D}for(N=r(T,N);!j.done;U++,j=x.next())j=b(N,T,U,j.value,I),j!==null&&(t&&j.alternate!==null&&N.delete(j.key===null?U:j.key),_=s(j,_,U),O===null?D=j:O.sibling=j,O=j);return t&&N.forEach(function(oe){return e(T,oe)}),D}return function(T,_,x,I){var D=typeof x=="object"&&x!==null&&x.type===Ji&&x.key===null;D&&(x=x.props.children);var O=typeof x=="object"&&x!==null;if(O)switch(x.$$typeof){case Ys:e:{for(O=x.key,D=_;D!==null;){if(D.key===O){switch(D.tag){case 7:if(x.type===Ji){i(T,D.sibling),_=n(D,x.props.children),_.return=T,T=_;break e}break;default:if(D.elementType===x.type){i(T,D.sibling),_=n(D,x.props),_.ref=Ms(T,D,x),_.return=T,T=_;break e}}i(T,D);break}else e(T,D);D=D.sibling}x.type===Ji?(_=Nn(x.props.children,T.mode,I,x.key),_.return=T,T=_):(I=du(x.type,x.key,x.props,null,T.mode,I),I.ref=Ms(T,_,x),I.return=T,T=I)}return a(T);case Lr:e:{for(D=x.key;_!==null;){if(_.key===D)if(_.tag===4&&_.stateNode.containerInfo===x.containerInfo&&_.stateNode.implementation===x.implementation){i(T,_.sibling),_=n(_,x.children||[]),_.return=T,T=_;break e}else{i(T,_);break}else e(T,_);_=_.sibling}_=qc(x,T.mode,I),_.return=T,T=_}return a(T)}if(typeof x=="string"||typeof x=="number")return x=""+x,_!==null&&_.tag===6?(i(T,_.sibling),_=n(_,x),_.return=T,T=_):(i(T,_),_=Hc(x,T.mode,I),_.return=T,T=_),a(T);if($o(x))return S(T,_,x,I);if(Is(x))return A(T,_,x,I);if(O&&Vo(T,x),typeof x>"u"&&!D)switch(T.tag){case 1:case 22:case 0:case 11:case 15:throw Error($(152,Cn(T.type)||"Component"))}return i(T,_)}}var Iu=P_(!0),O_=P_(!1),Qa={},ci=_r(Qa),Ma=_r(Qa),Ba=_r(Qa);function Mr(t){if(t===Qa)throw Error($(174));return t}function Md(t,e){switch(Pe(Ba,e),Pe(Ma,t),Pe(ci,Qa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Td(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Td(e,t)}Ee(ci),Pe(ci,e)}function qn(){Ee(ci),Ee(Ma),Ee(Ba)}function mg(t){Mr(Ba.current);var e=Mr(ci.current),i=Td(e,t.type);e!==i&&(Pe(Ma,t),Pe(ci,i))}function uf(t){Ma.current===t&&(Ee(ci),Ee(Ma))}var ke=_r(0);function Pu(t){for(var e=t;e!==null;){if(e.tag===13){var i=e.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&64)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Li=null,tr=null,di=!1;function L_(t,e){var i=Mt(5,null,null,0);i.elementType="DELETED",i.type="DELETED",i.stateNode=e,i.return=t,i.flags=8,t.lastEffect!==null?(t.lastEffect.nextEffect=i,t.lastEffect=i):t.firstEffect=t.lastEffect=i}function gg(t,e){switch(t.tag){case 5:var i=t.type;return e=e.nodeType!==1||i.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,!0):!1;case 13:return!1;default:return!1}}function Bd(t){if(di){var e=tr;if(e){var i=e;if(!gg(t,e)){if(e=kn(i.nextSibling),!e||!gg(t,e)){t.flags=t.flags&-1025|2,di=!1,Li=t;return}L_(Li,i)}Li=t,tr=kn(e.firstChild)}else t.flags=t.flags&-1025|2,di=!1,Li=t}}function yg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Li=t}function Ho(t){if(t!==Li)return!1;if(!di)return yg(t),di=!0,!1;var e=t.type;if(t.tag!==5||e!=="head"&&e!=="body"&&!Pd(e,t.memoizedProps))for(e=tr;e;)L_(t,e),e=kn(e.nextSibling);if(yg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var i=t.data;if(i==="/$"){if(e===0){tr=kn(t.nextSibling);break e}e--}else i!=="$"&&i!=="$!"&&i!=="$?"||e++}t=t.nextSibling}tr=null}}else tr=Li?kn(t.stateNode.nextSibling):null;return!0}function Uc(){tr=Li=null,di=!1}var Pn=[];function lf(){for(var t=0;t<Pn.length;t++)Pn[t]._workInProgressVersionPrimary=null;Pn.length=0}var pa=Kr.ReactCurrentDispatcher,Bt=Kr.ReactCurrentBatchConfig,Fa=0,Me=null,Ke=null,Ge=null,Ou=!1,ma=!1;function pt(){throw Error($(321))}function cf(t,e){if(e===null)return!1;for(var i=0;i<e.length&&i<t.length;i++)if(!Rt(t[i],e[i]))return!1;return!0}function df(t,e,i,r,n,s){if(Fa=s,Me=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,pa.current=t===null||t.memoizedState===null?e1:t1,t=i(r,n),ma){s=0;do{if(ma=!1,!(25>s))throw Error($(301));s+=1,Ge=Ke=null,e.updateQueue=null,pa.current=i1,t=i(r,n)}while(ma)}if(pa.current=Mu,e=Ke!==null&&Ke.next!==null,Fa=0,Ge=Ke=Me=null,Ou=!1,e)throw Error($(300));return t}function Br(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?Me.memoizedState=Ge=t:Ge=Ge.next=t,Ge}function Qr(){if(Ke===null){var t=Me.alternate;t=t!==null?t.memoizedState:null}else t=Ke.next;var e=Ge===null?Me.memoizedState:Ge.next;if(e!==null)Ge=e,Ke=t;else{if(t===null)throw Error($(310));Ke=t,t={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},Ge===null?Me.memoizedState=Ge=t:Ge=Ge.next=t}return Ge}function si(t,e){return typeof e=="function"?e(t):e}function Bs(t){var e=Qr(),i=e.queue;if(i===null)throw Error($(311));i.lastRenderedReducer=t;var r=Ke,n=r.baseQueue,s=i.pending;if(s!==null){if(n!==null){var a=n.next;n.next=s.next,s.next=a}r.baseQueue=n=s,i.pending=null}if(n!==null){n=n.next,r=r.baseState;var o=a=s=null,l=n;do{var d=l.lane;if((Fa&d)===d)o!==null&&(o=o.next={lane:0,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),r=l.eagerReducer===t?l.eagerState:t(r,l.action);else{var m={lane:d,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};o===null?(a=o=m,s=r):o=o.next=m,Me.lanes|=d,Ja|=d}l=l.next}while(l!==null&&l!==n);o===null?s=r:o.next=a,Rt(r,e.memoizedState)||(Yt=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=o,i.lastRenderedState=r}return[e.memoizedState,i.dispatch]}function Fs(t){var e=Qr(),i=e.queue;if(i===null)throw Error($(311));i.lastRenderedReducer=t;var r=i.dispatch,n=i.pending,s=e.memoizedState;if(n!==null){i.pending=null;var a=n=n.next;do s=t(s,a.action),a=a.next;while(a!==n);Rt(s,e.memoizedState)||(Yt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),i.lastRenderedState=s}return[s,r]}function _g(t,e,i){var r=e._getVersion;r=r(e._source);var n=e._workInProgressVersionPrimary;if(n!==null?t=n===r:(t=t.mutableReadLanes,(t=(Fa&t)===t)&&(e._workInProgressVersionPrimary=r,Pn.push(e))),t)return i(e._source);throw Pn.push(e),Error($(350))}function N_(t,e,i,r){var n=ct;if(n===null)throw Error($(349));var s=e._getVersion,a=s(e._source),o=pa.current,l=o.useState(function(){return _g(n,e,i)}),d=l[1],m=l[0];l=Ge;var y=t.memoizedState,v=y.refs,b=v.getSnapshot,S=y.source;y=y.subscribe;var A=Me;return t.memoizedState={refs:v,source:e,subscribe:r},o.useEffect(function(){v.getSnapshot=i,v.setSnapshot=d;var T=s(e._source);if(!Rt(a,T)){T=i(e._source),Rt(m,T)||(d(T),T=or(A),n.mutableReadLanes|=T&n.pendingLanes),T=n.mutableReadLanes,n.entangledLanes|=T;for(var _=n.entanglements,x=T;0<x;){var I=31-dr(x),D=1<<I;_[I]|=T,x&=~D}}},[i,e,r]),o.useEffect(function(){return r(e._source,function(){var T=v.getSnapshot,_=v.setSnapshot;try{_(T(e._source));var x=or(A);n.mutableReadLanes|=x&n.pendingLanes}catch(I){_(function(){throw I})}})},[e,r]),Rt(b,i)&&Rt(S,e)&&Rt(y,r)||(t={pending:null,dispatch:null,lastRenderedReducer:si,lastRenderedState:m},t.dispatch=d=pf.bind(null,Me,t),l.queue=t,l.baseQueue=null,m=_g(n,e,i),l.memoizedState=l.baseState=m),m}function R_(t,e,i){var r=Qr();return N_(r,t,e,i)}function Us(t){var e=Br();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t=e.queue={pending:null,dispatch:null,lastRenderedReducer:si,lastRenderedState:t},t=t.dispatch=pf.bind(null,Me,t),[e.memoizedState,t]}function Lu(t,e,i,r){return t={tag:t,create:e,destroy:i,deps:r,next:null},e=Me.updateQueue,e===null?(e={lastEffect:null},Me.updateQueue=e,e.lastEffect=t.next=t):(i=e.lastEffect,i===null?e.lastEffect=t.next=t:(r=i.next,i.next=t,t.next=r,e.lastEffect=t)),t}function vg(t){var e=Br();return t={current:t},e.memoizedState=t}function Nu(){return Qr().memoizedState}function Fd(t,e,i,r){var n=Br();Me.flags|=t,n.memoizedState=Lu(1|e,i,void 0,r===void 0?null:r)}function hf(t,e,i,r){var n=Qr();r=r===void 0?null:r;var s=void 0;if(Ke!==null){var a=Ke.memoizedState;if(s=a.destroy,r!==null&&cf(r,a.deps)){Lu(e,i,s,r);return}}Me.flags|=t,n.memoizedState=Lu(1|e,i,s,r)}function Tg(t,e){return Fd(516,4,t,e)}function Ru(t,e){return hf(516,4,t,e)}function M_(t,e){return hf(4,2,t,e)}function B_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function F_(t,e,i){return i=i!=null?i.concat([t]):null,hf(4,2,B_.bind(null,e,t),i)}function ff(){}function U_(t,e){var i=Qr();e=e===void 0?null:e;var r=i.memoizedState;return r!==null&&e!==null&&cf(e,r[1])?r[0]:(i.memoizedState=[t,e],t)}function j_(t,e){var i=Qr();e=e===void 0?null:e;var r=i.memoizedState;return r!==null&&e!==null&&cf(e,r[1])?r[0]:(t=t(),i.memoizedState=[t,e],t)}function Zb(t,e){var i=Hn();qr(98>i?98:i,function(){t(!0)}),qr(97<i?97:i,function(){var r=Bt.transition;Bt.transition=1;try{t(!1),e()}finally{Bt.transition=r}})}function pf(t,e,i){var r=At(),n=or(t),s={lane:n,action:i,eagerReducer:null,eagerState:null,next:null},a=e.pending;if(a===null?s.next=s:(s.next=a.next,a.next=s),e.pending=s,a=t.alternate,t===Me||a!==null&&a===Me)ma=Ou=!0;else{if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,i);if(s.eagerReducer=a,s.eagerState=l,Rt(l,o))return}catch{}finally{}ur(t,n,r)}}var Mu={readContext:Ut,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useLayoutEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useMutableSource:pt,useOpaqueIdentifier:pt,unstable_isNewReconciler:!1},e1={readContext:Ut,useCallback:function(t,e){return Br().memoizedState=[t,e===void 0?null:e],t},useContext:Ut,useEffect:Tg,useImperativeHandle:function(t,e,i){return i=i!=null?i.concat([t]):null,Fd(4,2,B_.bind(null,e,t),i)},useLayoutEffect:function(t,e){return Fd(4,2,t,e)},useMemo:function(t,e){var i=Br();return e=e===void 0?null:e,t=t(),i.memoizedState=[t,e],t},useReducer:function(t,e,i){var r=Br();return e=i!==void 0?i(e):e,r.memoizedState=r.baseState=e,t=r.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},t=t.dispatch=pf.bind(null,Me,t),[r.memoizedState,t]},useRef:vg,useState:Us,useDebugValue:ff,useDeferredValue:function(t){var e=Us(t),i=e[0],r=e[1];return Tg(function(){var n=Bt.transition;Bt.transition=1;try{r(t)}finally{Bt.transition=n}},[t]),i},useTransition:function(){var t=Us(!1),e=t[0];return t=Zb.bind(null,t[1]),vg(t),[t,e]},useMutableSource:function(t,e,i){var r=Br();return r.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:t,subscribe:i},N_(r,t,e,i)},useOpaqueIdentifier:function(){if(di){var t=!1,e=Wb(function(){throw t||(t=!0,i("r:"+(Mc++).toString(36))),Error($(355))}),i=Us(e)[1];return!(Me.mode&2)&&(Me.flags|=516,Lu(5,function(){i("r:"+(Mc++).toString(36))},void 0,null)),e}return e="r:"+(Mc++).toString(36),Us(e),e},unstable_isNewReconciler:!1},t1={readContext:Ut,useCallback:U_,useContext:Ut,useEffect:Ru,useImperativeHandle:F_,useLayoutEffect:M_,useMemo:j_,useReducer:Bs,useRef:Nu,useState:function(){return Bs(si)},useDebugValue:ff,useDeferredValue:function(t){var e=Bs(si),i=e[0],r=e[1];return Ru(function(){var n=Bt.transition;Bt.transition=1;try{r(t)}finally{Bt.transition=n}},[t]),i},useTransition:function(){var t=Bs(si)[0];return[Nu().current,t]},useMutableSource:R_,useOpaqueIdentifier:function(){return Bs(si)[0]},unstable_isNewReconciler:!1},i1={readContext:Ut,useCallback:U_,useContext:Ut,useEffect:Ru,useImperativeHandle:F_,useLayoutEffect:M_,useMemo:j_,useReducer:Fs,useRef:Nu,useState:function(){return Fs(si)},useDebugValue:ff,useDeferredValue:function(t){var e=Fs(si),i=e[0],r=e[1];return Ru(function(){var n=Bt.transition;Bt.transition=1;try{r(t)}finally{Bt.transition=n}},[t]),i},useTransition:function(){var t=Fs(si)[0];return[Nu().current,t]},useMutableSource:R_,useOpaqueIdentifier:function(){return Fs(si)[0]},unstable_isNewReconciler:!1},r1=Kr.ReactCurrentOwner,Yt=!1;function gt(t,e,i,r){e.child=t===null?O_(e,null,i,r):Iu(e,t.child,i,r)}function xg(t,e,i,r,n){i=i.render;var s=e.ref;return In(e,n),r=df(t,e,i,r,s,n),t!==null&&!Yt?(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~n,Ni(t,e,n)):(e.flags|=1,gt(t,e,r,n),e.child)}function Sg(t,e,i,r,n,s){if(t===null){var a=i.type;return typeof a=="function"&&!Tf(a)&&a.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(e.tag=15,e.type=a,$_(t,e,a,r,n,s)):(t=du(i.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}return a=t.child,!(n&s)&&(n=a.memoizedProps,i=i.compare,i=i!==null?i:Oa,i(n,r)&&t.ref===e.ref)?Ni(t,e,s):(e.flags|=1,t=pr(a,r),t.ref=e.ref,t.return=e,e.child=t)}function $_(t,e,i,r,n,s){if(t!==null&&Oa(t.memoizedProps,r)&&t.ref===e.ref)if(Yt=!1,(s&n)!==0)t.flags&16384&&(Yt=!0);else return e.lanes=t.lanes,Ni(t,e,s);return Ud(t,e,i,r,s)}function jc(t,e,i){var r=e.pendingProps,n=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden"||r.mode==="unstable-defer-without-hiding")if(!(e.mode&4))e.memoizedState={baseLanes:0},zo(e,i);else if(i&1073741824)e.memoizedState={baseLanes:0},zo(e,s!==null?s.baseLanes:i);else return t=s!==null?s.baseLanes|i:i,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t},zo(e,t),null;else s!==null?(r=s.baseLanes|i,e.memoizedState=null):r=i,zo(e,r);return gt(t,e,n,i),e.child}function V_(t,e){var i=e.ref;(t===null&&i!==null||t!==null&&t.ref!==i)&&(e.flags|=128)}function Ud(t,e,i,r,n){var s=Tt(i)?Hr:tt.current;return s=Vn(e,s),In(e,n),i=df(t,e,i,r,s,n),t!==null&&!Yt?(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~n,Ni(t,e,n)):(e.flags|=1,gt(t,e,i,n),e.child)}function Eg(t,e,i,r,n){if(Tt(i)){var s=!0;au(e)}else s=!1;if(In(e,n),e.stateNode===null)t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),I_(e,i,r),Rd(e,i,r,n),r=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,d=i.contextType;typeof d=="object"&&d!==null?d=Ut(d):(d=Tt(i)?Hr:tt.current,d=Vn(e,d));var m=i.getDerivedStateFromProps,y=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function";y||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||l!==d)&&pg(e,a,r,d),Yi=!1;var v=e.memoizedState;a.state=v,Ra(e,r,a,n),l=e.memoizedState,o!==r||v!==l||vt.current||Yi?(typeof m=="function"&&(ku(e,i,m,r),l=e.memoizedState),(o=Yi||fg(e,i,o,r,v,l,d))?(y||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4)):(typeof a.componentDidMount=="function"&&(e.flags|=4),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=d,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4),r=!1)}else{a=e.stateNode,A_(t,e),o=e.memoizedProps,d=e.type===e.elementType?o:Xt(e.type,o),a.props=d,y=e.pendingProps,v=a.context,l=i.contextType,typeof l=="object"&&l!==null?l=Ut(l):(l=Tt(i)?Hr:tt.current,l=Vn(e,l));var b=i.getDerivedStateFromProps;(m=typeof b=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==y||v!==l)&&pg(e,a,r,l),Yi=!1,v=e.memoizedState,a.state=v,Ra(e,r,a,n);var S=e.memoizedState;o!==y||v!==S||vt.current||Yi?(typeof b=="function"&&(ku(e,i,b,r),S=e.memoizedState),(d=Yi||fg(e,i,d,r,v,S,l))?(m||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,S,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,S,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=256)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&v===t.memoizedState||(e.flags|=256),e.memoizedProps=r,e.memoizedState=S),a.props=r,a.state=S,a.context=l,r=d):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&v===t.memoizedState||(e.flags|=256),r=!1)}return jd(t,e,i,r,s,n)}function jd(t,e,i,r,n,s){V_(t,e);var a=(e.flags&64)!==0;if(!r&&!a)return n&&ug(e,i,!1),Ni(t,e,s);r=e.stateNode,r1.current=e;var o=a&&typeof i.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Iu(e,t.child,null,s),e.child=Iu(e,null,o,s)):gt(t,e,o,s),e.memoizedState=r.state,n&&ug(e,i,!0),e.child}function bg(t){var e=t.stateNode;e.pendingContext?og(t,e.pendingContext,e.pendingContext!==e.context):e.context&&og(t,e.context,!1),Md(t,e.containerInfo)}var qo={dehydrated:null,retryLane:0};function Cg(t,e,i){var r=e.pendingProps,n=ke.current,s=!1,a;return(a=(e.flags&64)!==0)||(a=t!==null&&t.memoizedState===null?!1:(n&2)!==0),a?(s=!0,e.flags&=-65):t!==null&&t.memoizedState===null||r.fallback===void 0||r.unstable_avoidThisFallback===!0||(n|=1),Pe(ke,n&1),t===null?(r.fallback!==void 0&&Bd(e),t=r.children,n=r.fallback,s?(t=wg(e,t,n,i),e.child.memoizedState={baseLanes:i},e.memoizedState=qo,t):typeof r.unstable_expectedLoadTime=="number"?(t=wg(e,t,n,i),e.child.memoizedState={baseLanes:i},e.memoizedState=qo,e.lanes=33554432,t):(i=xf({mode:"visible",children:t},e.mode,i,null),i.return=e,e.child=i)):t.memoizedState!==null?s?(r=Ag(t,e,r.children,r.fallback,i),s=e.child,n=t.child.memoizedState,s.memoizedState=n===null?{baseLanes:i}:{baseLanes:n.baseLanes|i},s.childLanes=t.childLanes&~i,e.memoizedState=qo,r):(i=Dg(t,e,r.children,i),e.memoizedState=null,i):s?(r=Ag(t,e,r.children,r.fallback,i),s=e.child,n=t.child.memoizedState,s.memoizedState=n===null?{baseLanes:i}:{baseLanes:n.baseLanes|i},s.childLanes=t.childLanes&~i,e.memoizedState=qo,r):(i=Dg(t,e,r.children,i),e.memoizedState=null,i)}function wg(t,e,i,r){var n=t.mode,s=t.child;return e={mode:"hidden",children:e},!(n&2)&&s!==null?(s.childLanes=0,s.pendingProps=e):s=xf(e,n,0,null),i=Nn(i,n,r,null),s.return=t,i.return=t,s.sibling=i,t.child=s,i}function Dg(t,e,i,r){var n=t.child;return t=n.sibling,i=pr(n,{mode:"visible",children:i}),!(e.mode&2)&&(i.lanes=r),i.return=e,i.sibling=null,t!==null&&(t.nextEffect=null,t.flags=8,e.firstEffect=e.lastEffect=t),e.child=i}function Ag(t,e,i,r,n){var s=e.mode,a=t.child;t=a.sibling;var o={mode:"hidden",children:i};return!(s&2)&&e.child!==a?(i=e.child,i.childLanes=0,i.pendingProps=o,a=i.lastEffect,a!==null?(e.firstEffect=i.firstEffect,e.lastEffect=a,a.nextEffect=null):e.firstEffect=e.lastEffect=null):i=pr(a,o),t!==null?r=pr(t,r):(r=Nn(r,s,n,null),r.flags|=2),r.return=e,i.return=e,i.sibling=r,e.child=i,r}function kg(t,e){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),D_(t.return,e)}function $c(t,e,i,r,n,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:i,tailMode:n,lastEffect:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=i,a.tailMode=n,a.lastEffect=s)}function Ig(t,e,i){var r=e.pendingProps,n=r.revealOrder,s=r.tail;if(gt(t,e,r.children,i),r=ke.current,r&2)r=r&1|2,e.flags|=64;else{if(t!==null&&t.flags&64)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&kg(t,i);else if(t.tag===19)kg(t,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Pe(ke,r),!(e.mode&2))e.memoizedState=null;else switch(n){case"forwards":for(i=e.child,n=null;i!==null;)t=i.alternate,t!==null&&Pu(t)===null&&(n=i),i=i.sibling;i=n,i===null?(n=e.child,e.child=null):(n=i.sibling,i.sibling=null),$c(e,!1,n,i,s,e.lastEffect);break;case"backwards":for(i=null,n=e.child,e.child=null;n!==null;){if(t=n.alternate,t!==null&&Pu(t)===null){e.child=n;break}t=n.sibling,n.sibling=i,i=n,n=t}$c(e,!0,i,null,s,e.lastEffect);break;case"together":$c(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function Ni(t,e,i){if(t!==null&&(e.dependencies=t.dependencies),Ja|=e.lanes,i&e.childLanes){if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,i=pr(t,t.pendingProps),e.child=i,i.return=e;t.sibling!==null;)t=t.sibling,i=i.sibling=pr(t,t.pendingProps),i.return=e;i.sibling=null}return e.child}return null}var H_,$d,q_,z_;H_=function(t,e){for(var i=e.child;i!==null;){if(i.tag===5||i.tag===6)t.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};$d=function(){};q_=function(t,e,i,r){var n=t.memoizedProps;if(n!==r){t=e.stateNode,Mr(ci.current);var s=null;switch(i){case"input":n=pd(t,n),r=pd(t,r),s=[];break;case"option":n=yd(t,n),r=yd(t,r),s=[];break;case"select":n=De({},n,{value:void 0}),r=De({},r,{value:void 0}),s=[];break;case"textarea":n=_d(t,n),r=_d(t,r),s=[];break;default:typeof n.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Eu)}xd(i,r);var a;i=null;for(d in n)if(!r.hasOwnProperty(d)&&n.hasOwnProperty(d)&&n[d]!=null)if(d==="style"){var o=n[d];for(a in o)o.hasOwnProperty(a)&&(i||(i={}),i[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ca.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var l=r[d];if(o=n!=null?n[d]:void 0,r.hasOwnProperty(d)&&l!==o&&(l!=null||o!=null))if(d==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(i||(i={}),i[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(i||(i={}),i[a]=l[a])}else i||(s||(s=[]),s.push(d,i)),i=l;else d==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(d,l)):d==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(d,""+l):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ca.hasOwnProperty(d)?(l!=null&&d==="onScroll"&&Se("scroll",t),s||o===l||(s=[])):typeof l=="object"&&l!==null&&l.$$typeof===jh?l.toString():(s=s||[]).push(d,l))}i&&(s=s||[]).push("style",i);var d=s;(e.updateQueue=d)&&(e.flags|=4)}};z_=function(t,e,i,r){i!==r&&(e.flags|=4)};function js(t,e){if(!di)switch(t.tailMode){case"hidden":e=t.tail;for(var i=null;e!==null;)e.alternate!==null&&(i=e),e=e.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function n1(t,e,i){var r=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Tt(e.type)&&Cu(),null;case 3:return qn(),Ee(vt),Ee(tt),lf(),r=e.stateNode,r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ho(e)?e.flags|=4:r.hydrate||(e.flags|=256)),$d(e),null;case 5:uf(e);var n=Mr(Ba.current);if(i=e.type,t!==null&&e.stateNode!=null)q_(t,e,i,r,n),t.ref!==e.ref&&(e.flags|=128);else{if(!r){if(e.stateNode===null)throw Error($(166));return null}if(t=Mr(ci.current),Ho(e)){r=e.stateNode,i=e.type;var s=e.memoizedProps;switch(r[er]=e,r[bu]=s,i){case"dialog":Se("cancel",r),Se("close",r);break;case"iframe":case"object":case"embed":Se("load",r);break;case"video":case"audio":for(t=0;t<Js.length;t++)Se(Js[t],r);break;case"source":Se("error",r);break;case"img":case"image":case"link":Se("error",r),Se("load",r);break;case"details":Se("toggle",r);break;case"input":Im(r,s),Se("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Se("invalid",r);break;case"textarea":Om(r,s),Se("invalid",r)}xd(i,s),t=null;for(var a in s)s.hasOwnProperty(a)&&(n=s[a],a==="children"?typeof n=="string"?r.textContent!==n&&(t=["children",n]):typeof n=="number"&&r.textContent!==""+n&&(t=["children",""+n]):Ca.hasOwnProperty(a)&&n!=null&&a==="onScroll"&&Se("scroll",r));switch(i){case"input":Bo(r),Pm(r,s,!0);break;case"textarea":Bo(r),Lm(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Eu)}r=t,e.updateQueue=r,r!==null&&(e.flags|=4)}else{switch(a=n.nodeType===9?n:n.ownerDocument,t===vd.html&&(t=Fy(i)),t===vd.html?i==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(i,{is:r.is}):(t=a.createElement(i),i==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,i),t[er]=e,t[bu]=r,H_(t,e,!1,!1),e.stateNode=t,a=Sd(i,r),i){case"dialog":Se("cancel",t),Se("close",t),n=r;break;case"iframe":case"object":case"embed":Se("load",t),n=r;break;case"video":case"audio":for(n=0;n<Js.length;n++)Se(Js[n],t);n=r;break;case"source":Se("error",t),n=r;break;case"img":case"image":case"link":Se("error",t),Se("load",t),n=r;break;case"details":Se("toggle",t),n=r;break;case"input":Im(t,r),n=pd(t,r),Se("invalid",t);break;case"option":n=yd(t,r);break;case"select":t._wrapperState={wasMultiple:!!r.multiple},n=De({},r,{value:void 0}),Se("invalid",t);break;case"textarea":Om(t,r),n=_d(t,r),Se("invalid",t);break;default:n=r}xd(i,n);var o=n;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?$y(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Uy(t,l)):s==="children"?typeof l=="string"?(i!=="textarea"||l!=="")&&wa(t,l):typeof l=="number"&&wa(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ca.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Se("scroll",t):l!=null&&Nh(t,s,l,a))}switch(i){case"input":Bo(t),Pm(t,r,!1);break;case"textarea":Bo(t),Lm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+cr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?wn(t,!!r.multiple,s,!1):r.defaultValue!=null&&wn(t,!!r.multiple,r.defaultValue,!0);break;default:typeof n.onClick=="function"&&(t.onclick=Eu)}__(i,r)&&(e.flags|=4)}e.ref!==null&&(e.flags|=128)}return null;case 6:if(t&&e.stateNode!=null)z_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));i=Mr(Ba.current),Mr(ci.current),Ho(e)?(r=e.stateNode,i=e.memoizedProps,r[er]=e,r.nodeValue!==i&&(e.flags|=4)):(r=(i.nodeType===9?i:i.ownerDocument).createTextNode(r),r[er]=e,e.stateNode=r)}return null;case 13:return Ee(ke),r=e.memoizedState,e.flags&64?(e.lanes=i,e):(r=r!==null,i=!1,t===null?e.memoizedProps.fallback!==void 0&&Ho(e):i=t.memoizedState!==null,r&&!i&&e.mode&2&&(t===null&&e.memoizedProps.unstable_avoidThisFallback!==!0||ke.current&1?We===0&&(We=3):((We===0||We===3)&&(We=4),ct===null||!(Ja&134217727)&&!(us&134217727)||On(ct,Ze))),(r||i)&&(e.flags|=4),null);case 4:return qn(),$d(e),t===null&&m_(e.stateNode.containerInfo),null;case 10:return af(e),null;case 17:return Tt(e.type)&&Cu(),null;case 19:if(Ee(ke),r=e.memoizedState,r===null)return null;if(s=(e.flags&64)!==0,a=r.rendering,a===null)if(s)js(r,!1);else{if(We!==0||t!==null&&t.flags&64)for(t=e.child;t!==null;){if(a=Pu(t),a!==null){for(e.flags|=64,js(r,!1),s=a.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),r.lastEffect===null&&(e.firstEffect=null),e.lastEffect=r.lastEffect,r=i,i=e.child;i!==null;)s=i,t=r,s.flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),i=i.sibling;return Pe(ke,ke.current&1|2),e.child}t=t.sibling}r.tail!==null&&Qe()>Wd&&(e.flags|=64,s=!0,js(r,!1),e.lanes=33554432)}else{if(!s)if(t=Pu(a),t!==null){if(e.flags|=64,s=!0,i=t.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),js(r,!0),r.tail===null&&r.tailMode==="hidden"&&!a.alternate&&!di)return e=e.lastEffect=r.lastEffect,e!==null&&(e.nextEffect=null),null}else 2*Qe()-r.renderingStartTime>Wd&&i!==1073741824&&(e.flags|=64,s=!0,js(r,!1),e.lanes=33554432);r.isBackwards?(a.sibling=e.child,e.child=a):(i=r.last,i!==null?i.sibling=a:e.child=a,r.last=a)}return r.tail!==null?(i=r.tail,r.rendering=i,r.tail=i.sibling,r.lastEffect=e.lastEffect,r.renderingStartTime=Qe(),i.sibling=null,e=ke.current,Pe(ke,s?e&1|2:e&1),i):null;case 23:case 24:return vf(),t!==null&&t.memoizedState!==null!=(e.memoizedState!==null)&&r.mode!=="unstable-defer-without-hiding"&&(e.flags|=4),null}throw Error($(156,e.tag))}function s1(t){switch(t.tag){case 1:Tt(t.type)&&Cu();var e=t.flags;return e&4096?(t.flags=e&-4097|64,t):null;case 3:if(qn(),Ee(vt),Ee(tt),lf(),e=t.flags,e&64)throw Error($(285));return t.flags=e&-4097|64,t;case 5:return uf(t),null;case 13:return Ee(ke),e=t.flags,e&4096?(t.flags=e&-4097|64,t):null;case 19:return Ee(ke),null;case 4:return qn(),null;case 10:return af(t),null;case 23:case 24:return vf(),null;default:return null}}function mf(t,e){try{var i="",r=e;do i+=UE(r),r=r.return;while(r);var n=i}catch(s){n=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:n}}function Vd(t,e){try{console.error(e.value)}catch(i){setTimeout(function(){throw i})}}var a1=typeof WeakMap=="function"?WeakMap:Map;function G_(t,e,i){i=sr(-1,i),i.tag=3,i.payload={element:null};var r=e.value;return i.callback=function(){Fu||(Fu=!0,Xd=r),Vd(t,e)},i}function W_(t,e,i){i=sr(-1,i),i.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var n=e.value;i.payload=function(){return Vd(t,e),r(n)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(i.callback=function(){typeof r!="function"&&(ai===null?ai=new Set([this]):ai.add(this),Vd(t,e));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),i}var o1=typeof WeakSet=="function"?WeakSet:Set;function Pg(t){var e=t.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(i){lr(t,i)}else e.current=null}function u1(t,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(e.flags&256&&t!==null){var i=t.memoizedProps,r=t.memoizedState;t=e.stateNode,e=t.getSnapshotBeforeUpdate(e.elementType===e.type?i:Xt(e.type,i),r),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:e.flags&256&&tf(e.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error($(163))}function l1(t,e,i){switch(i.tag){case 0:case 11:case 15:case 22:if(e=i.updateQueue,e=e!==null?e.lastEffect:null,e!==null){t=e=e.next;do{if((t.tag&3)===3){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}if(e=i.updateQueue,e=e!==null?e.lastEffect:null,e!==null){t=e=e.next;do{var n=t;r=n.next,n=n.tag,n&4&&n&1&&(iv(i,t),y1(i,t)),t=r}while(t!==e)}return;case 1:t=i.stateNode,i.flags&4&&(e===null?t.componentDidMount():(r=i.elementType===i.type?e.memoizedProps:Xt(i.type,e.memoizedProps),t.componentDidUpdate(r,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate))),e=i.updateQueue,e!==null&&hg(i,e,t);return;case 3:if(e=i.updateQueue,e!==null){if(t=null,i.child!==null)switch(i.child.tag){case 5:t=i.child.stateNode;break;case 1:t=i.child.stateNode}hg(i,e,t)}return;case 5:t=i.stateNode,e===null&&i.flags&4&&__(i.type,i.memoizedProps)&&t.focus();return;case 6:return;case 4:return;case 12:return;case 13:i.memoizedState===null&&(i=i.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&Qy(i))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error($(163))}function Og(t,e){for(var i=t;;){if(i.tag===5){var r=i.stateNode;if(e)r=r.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{r=i.stateNode;var n=i.memoizedProps.style;n=n!=null&&n.hasOwnProperty("display")?n.display:null,r.style.display=jy("display",n)}}else if(i.tag===6)i.stateNode.nodeValue=e?"":i.memoizedProps;else if((i.tag!==23&&i.tag!==24||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function Lg(t,e){if(Ur&&typeof Ur.onCommitFiberUnmount=="function")try{Ur.onCommitFiberUnmount(rf,e)}catch{}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(t=e.updateQueue,t!==null&&(t=t.lastEffect,t!==null)){var i=t=t.next;do{var r=i,n=r.destroy;if(r=r.tag,n!==void 0)if(r&4)iv(e,i);else{r=e;try{n()}catch(s){lr(r,s)}}i=i.next}while(i!==t)}break;case 1:if(Pg(e),t=e.stateNode,typeof t.componentWillUnmount=="function")try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(s){lr(e,s)}break;case 5:Pg(e);break;case 4:X_(t,e)}}function Ng(t){t.alternate=null,t.child=null,t.dependencies=null,t.firstEffect=null,t.lastEffect=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.return=null,t.updateQueue=null}function Rg(t){return t.tag===5||t.tag===3||t.tag===4}function Mg(t){e:{for(var e=t.return;e!==null;){if(Rg(e))break e;e=e.return}throw Error($(160))}var i=e;switch(e=i.stateNode,i.tag){case 5:var r=!1;break;case 3:e=e.containerInfo,r=!0;break;case 4:e=e.containerInfo,r=!0;break;default:throw Error($(161))}i.flags&16&&(wa(e,""),i.flags&=-17);e:t:for(i=t;;){for(;i.sibling===null;){if(i.return===null||Rg(i.return)){i=null;break e}i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2)){i=i.stateNode;break e}}r?Hd(t,i,e):qd(t,i,e)}function Hd(t,e,i){var r=t.tag,n=r===5||r===6;if(n)t=n?t.stateNode:t.stateNode.instance,e?i.nodeType===8?i.parentNode.insertBefore(t,e):i.insertBefore(t,e):(i.nodeType===8?(e=i.parentNode,e.insertBefore(t,i)):(e=i,e.appendChild(t)),i=i._reactRootContainer,i!=null||e.onclick!==null||(e.onclick=Eu));else if(r!==4&&(t=t.child,t!==null))for(Hd(t,e,i),t=t.sibling;t!==null;)Hd(t,e,i),t=t.sibling}function qd(t,e,i){var r=t.tag,n=r===5||r===6;if(n)t=n?t.stateNode:t.stateNode.instance,e?i.insertBefore(t,e):i.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(qd(t,e,i),t=t.sibling;t!==null;)qd(t,e,i),t=t.sibling}function X_(t,e){for(var i=e,r=!1,n,s;;){if(!r){r=i.return;e:for(;;){if(r===null)throw Error($(160));switch(n=r.stateNode,r.tag){case 5:s=!1;break e;case 3:n=n.containerInfo,s=!0;break e;case 4:n=n.containerInfo,s=!0;break e}r=r.return}r=!0}if(i.tag===5||i.tag===6){e:for(var a=t,o=i,l=o;;)if(Lg(a,l),l.child!==null&&l.tag!==4)l.child.return=l,l=l.child;else{if(l===o)break e;for(;l.sibling===null;){if(l.return===null||l.return===o)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}s?(a=n,o=i.stateNode,a.nodeType===8?a.parentNode.removeChild(o):a.removeChild(o)):n.removeChild(i.stateNode)}else if(i.tag===4){if(i.child!==null){n=i.stateNode.containerInfo,s=!0,i.child.return=i,i=i.child;continue}}else if(Lg(t,i),i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return;i=i.return,i.tag===4&&(r=!1)}i.sibling.return=i.return,i=i.sibling}}function Vc(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do(r.tag&3)===3&&(t=r.destroy,r.destroy=void 0,t!==void 0&&t()),r=r.next;while(r!==i)}return;case 1:return;case 5:if(i=e.stateNode,i!=null){r=e.memoizedProps;var n=t!==null?t.memoizedProps:r;t=e.type;var s=e.updateQueue;if(e.updateQueue=null,s!==null){for(i[bu]=r,t==="input"&&r.type==="radio"&&r.name!=null&&My(i,r),Sd(t,n),e=Sd(t,r),n=0;n<s.length;n+=2){var a=s[n],o=s[n+1];a==="style"?$y(i,o):a==="dangerouslySetInnerHTML"?Uy(i,o):a==="children"?wa(i,o):Nh(i,a,o,e)}switch(t){case"input":md(i,r);break;case"textarea":By(i,r);break;case"select":t=i._wrapperState.wasMultiple,i._wrapperState.wasMultiple=!!r.multiple,s=r.value,s!=null?wn(i,!!r.multiple,s,!1):t!==!!r.multiple&&(r.defaultValue!=null?wn(i,!!r.multiple,r.defaultValue,!0):wn(i,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(e.stateNode===null)throw Error($(162));e.stateNode.nodeValue=e.memoizedProps;return;case 3:i=e.stateNode,i.hydrate&&(i.hydrate=!1,Qy(i.containerInfo));return;case 12:return;case 13:e.memoizedState!==null&&(_f=Qe(),Og(e.child,!0)),Bg(e);return;case 19:Bg(e);return;case 17:return;case 23:case 24:Og(e,e.memoizedState!==null);return}throw Error($(163))}function Bg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var i=t.stateNode;i===null&&(i=t.stateNode=new o1),e.forEach(function(r){var n=T1.bind(null,t,r);i.has(r)||(i.add(r),r.then(n,n))})}}function c1(t,e){return t!==null&&(t=t.memoizedState,t===null||t.dehydrated!==null)?(e=e.memoizedState,e!==null&&e.dehydrated===null):!1}var d1=Math.ceil,Bu=Kr.ReactCurrentDispatcher,gf=Kr.ReactCurrentOwner,Z=0,ct=null,Ue=null,Ze=0,zr=0,zd=_r(0),We=0,Cl=null,os=0,Ja=0,us=0,yf=0,Gd=null,_f=0,Wd=1/0;function ls(){Wd=Qe()+500}var X=null,Fu=!1,Xd=null,ai=null,fr=!1,ga=null,Zs=90,Kd=[],Yd=[],Ri=null,ya=0,Qd=null,uu=-1,Ii=0,lu=0,_a=null,cu=!1;function At(){return Z&48?Qe():uu!==-1?uu:uu=Qe()}function or(t){if(t=t.mode,!(t&2))return 1;if(!(t&4))return Hn()===99?1:2;if(Ii===0&&(Ii=os),Jb.transition!==0){lu!==0&&(lu=Gd!==null?Gd.pendingLanes:0),t=Ii;var e=4186112&~lu;return e&=-e,e===0&&(t=4186112&~t,e=t&-t,e===0&&(e=8192)),e}return t=Hn(),Z&4&&t===98?t=xu(12,Ii):(t=tb(t),t=xu(t,Ii)),t}function ur(t,e,i){if(50<ya)throw ya=0,Qd=null,Error($(185));if(t=wl(t,e),t===null)return null;_l(t,e,i),t===ct&&(us|=e,We===4&&On(t,Ze));var r=Hn();e===1?Z&8&&!(Z&48)?Jd(t):(jt(t,i),Z===0&&(ls(),Si())):(!(Z&4)||r!==98&&r!==99||(Ri===null?Ri=new Set([t]):Ri.add(t)),jt(t,i)),Gd=t}function wl(t,e){t.lanes|=e;var i=t.alternate;for(i!==null&&(i.lanes|=e),i=t,t=t.return;t!==null;)t.childLanes|=e,i=t.alternate,i!==null&&(i.childLanes|=e),i=t,t=t.return;return i.tag===3?i.stateNode:null}function jt(t,e){for(var i=t.callbackNode,r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-dr(a),l=1<<o,d=s[o];if(d===-1){if(!(l&r)||l&n){d=e,hn(l);var m=me;s[o]=10<=m?d+250:6<=m?d+5e3:-1}}else d<=e&&(t.expiredLanes|=l);a&=~l}if(r=Ia(t,t===ct?Ze:0),e=me,r===0)i!==null&&(i!==Bc&&Ld(i),t.callbackNode=null,t.callbackPriority=0);else{if(i!==null){if(t.callbackPriority===e)return;i!==Bc&&Ld(i)}e===15?(i=Jd.bind(null,t),Ai===null?(Ai=[i],ou=nf(El,w_)):Ai.push(i),i=Bc):e===14?i=Na(99,Jd.bind(null,t)):(i=ib(e),i=Na(i,K_.bind(null,t))),t.callbackPriority=e,t.callbackNode=i}}function K_(t){if(uu=-1,lu=Ii=0,Z&48)throw Error($(327));var e=t.callbackNode;if(vr()&&t.callbackNode!==e)return null;var i=Ia(t,t===ct?Ze:0);if(i===0)return null;var r=i,n=Z;Z|=16;var s=Z_();(ct!==t||Ze!==r)&&(ls(),Ln(t,r));do try{p1();break}catch(o){J_(t,o)}while(1);if(sf(),Bu.current=s,Z=n,Ue!==null?r=0:(ct=null,Ze=0,r=We),os&us)Ln(t,0);else if(r!==0){if(r===2&&(Z|=64,t.hydrate&&(t.hydrate=!1,tf(t.containerInfo)),i=n_(t),i!==0&&(r=ea(t,i))),r===1)throw e=Cl,Ln(t,0),On(t,i),jt(t,Qe()),e;switch(t.finishedWork=t.current.alternate,t.finishedLanes=i,r){case 0:case 1:throw Error($(345));case 2:Ir(t);break;case 3:if(On(t,i),(i&62914560)===i&&(r=_f+500-Qe(),10<r)){if(Ia(t,0)!==0)break;if(n=t.suspendedLanes,(n&i)!==i){At(),t.pingedLanes|=t.suspendedLanes&n;break}t.timeoutHandle=ng(Ir.bind(null,t),r);break}Ir(t);break;case 4:if(On(t,i),(i&4186112)===i)break;for(r=t.eventTimes,n=-1;0<i;){var a=31-dr(i);s=1<<a,a=r[a],a>n&&(n=a),i&=~s}if(i=n,i=Qe()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*d1(i/1960))-i,10<i){t.timeoutHandle=ng(Ir.bind(null,t),i);break}Ir(t);break;case 5:Ir(t);break;default:throw Error($(329))}}return jt(t,Qe()),t.callbackNode===e?K_.bind(null,t):null}function On(t,e){for(e&=~yf,e&=~us,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var i=31-dr(e),r=1<<i;t[i]=-1,e&=~r}}function Jd(t){if(Z&48)throw Error($(327));if(vr(),t===ct&&t.expiredLanes&Ze){var e=Ze,i=ea(t,e);os&us&&(e=Ia(t,e),i=ea(t,e))}else e=Ia(t,0),i=ea(t,e);if(t.tag!==0&&i===2&&(Z|=64,t.hydrate&&(t.hydrate=!1,tf(t.containerInfo)),e=n_(t),e!==0&&(i=ea(t,e))),i===1)throw i=Cl,Ln(t,0),On(t,e),jt(t,Qe()),i;return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ir(t),jt(t,Qe()),null}function h1(){if(Ri!==null){var t=Ri;Ri=null,t.forEach(function(e){e.expiredLanes|=24&e.pendingLanes,jt(e,Qe())})}Si()}function Y_(t,e){var i=Z;Z|=1;try{return t(e)}finally{Z=i,Z===0&&(ls(),Si())}}function Q_(t,e){var i=Z;Z&=-2,Z|=8;try{return t(e)}finally{Z=i,Z===0&&(ls(),Si())}}function zo(t,e){Pe(zd,zr),zr|=e,os|=e}function vf(){zr=zd.current,Ee(zd)}function Ln(t,e){t.finishedWork=null,t.finishedLanes=0;var i=t.timeoutHandle;if(i!==-1&&(t.timeoutHandle=-1,Gb(i)),Ue!==null)for(i=Ue.return;i!==null;){var r=i;switch(r.tag){case 1:r=r.type.childContextTypes,r!=null&&Cu();break;case 3:qn(),Ee(vt),Ee(tt),lf();break;case 5:uf(r);break;case 4:qn();break;case 13:Ee(ke);break;case 19:Ee(ke);break;case 10:af(r);break;case 23:case 24:vf()}i=i.return}ct=t,Ue=pr(t.current,null),Ze=zr=os=e,We=0,Cl=null,yf=us=Ja=0}function J_(t,e){do{var i=Ue;try{if(sf(),pa.current=Mu,Ou){for(var r=Me.memoizedState;r!==null;){var n=r.queue;n!==null&&(n.pending=null),r=r.next}Ou=!1}if(Fa=0,Ge=Ke=Me=null,ma=!1,gf.current=null,i===null||i.return===null){We=1,Cl=e,Ue=null;break}e:{var s=t,a=i.return,o=i,l=e;if(e=Ze,o.flags|=2048,o.firstEffect=o.lastEffect=null,l!==null&&typeof l=="object"&&typeof l.then=="function"){var d=l;if(!(o.mode&2)){var m=o.alternate;m?(o.updateQueue=m.updateQueue,o.memoizedState=m.memoizedState,o.lanes=m.lanes):(o.updateQueue=null,o.memoizedState=null)}var y=(ke.current&1)!==0,v=a;do{var b;if(b=v.tag===13){var S=v.memoizedState;if(S!==null)b=S.dehydrated!==null;else{var A=v.memoizedProps;b=A.fallback===void 0?!1:A.unstable_avoidThisFallback!==!0?!0:!y}}if(b){var T=v.updateQueue;if(T===null){var _=new Set;_.add(d),v.updateQueue=_}else T.add(d);if(!(v.mode&2)){if(v.flags|=64,o.flags|=16384,o.flags&=-2981,o.tag===1)if(o.alternate===null)o.tag=17;else{var x=sr(-1,1);x.tag=2,ar(o,x)}o.lanes|=1;break e}l=void 0,o=e;var I=s.pingCache;if(I===null?(I=s.pingCache=new a1,l=new Set,I.set(d,l)):(l=I.get(d),l===void 0&&(l=new Set,I.set(d,l))),!l.has(o)){l.add(o);var D=v1.bind(null,s,d,o);d.then(D,D)}v.flags|=4096,v.lanes=e;break e}v=v.return}while(v!==null);l=Error((Cn(o.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}We!==5&&(We=2),l=mf(l,o),v=a;do{switch(v.tag){case 3:s=l,v.flags|=4096,e&=-e,v.lanes|=e;var O=G_(v,s,e);dg(v,O);break e;case 1:s=l;var N=v.type,U=v.stateNode;if(!(v.flags&64)&&(typeof N.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(ai===null||!ai.has(U)))){v.flags|=4096,e&=-e,v.lanes|=e;var H=W_(v,s,e);dg(v,H);break e}}v=v.return}while(v!==null)}tv(i)}catch(j){e=j,Ue===i&&i!==null&&(Ue=i=i.return);continue}break}while(1)}function Z_(){var t=Bu.current;return Bu.current=Mu,t===null?Mu:t}function ea(t,e){var i=Z;Z|=16;var r=Z_();ct===t&&Ze===e||Ln(t,e);do try{f1();break}catch(n){J_(t,n)}while(1);if(sf(),Z=i,Bu.current=r,Ue!==null)throw Error($(261));return ct=null,Ze=0,We}function f1(){for(;Ue!==null;)ev(Ue)}function p1(){for(;Ue!==null&&!Kb();)ev(Ue)}function ev(t){var e=rv(t.alternate,t,zr);t.memoizedProps=t.pendingProps,e===null?tv(t):Ue=e,gf.current=null}function tv(t){var e=t;do{var i=e.alternate;if(t=e.return,e.flags&2048){if(i=s1(e),i!==null){i.flags&=2047,Ue=i;return}t!==null&&(t.firstEffect=t.lastEffect=null,t.flags|=2048)}else{if(i=n1(i,e,zr),i!==null){Ue=i;return}if(i=e,i.tag!==24&&i.tag!==23||i.memoizedState===null||zr&1073741824||!(i.mode&4)){for(var r=0,n=i.child;n!==null;)r|=n.lanes|n.childLanes,n=n.sibling;i.childLanes=r}t!==null&&!(t.flags&2048)&&(t.firstEffect===null&&(t.firstEffect=e.firstEffect),e.lastEffect!==null&&(t.lastEffect!==null&&(t.lastEffect.nextEffect=e.firstEffect),t.lastEffect=e.lastEffect),1<e.flags&&(t.lastEffect!==null?t.lastEffect.nextEffect=e:t.firstEffect=e,t.lastEffect=e))}if(e=e.sibling,e!==null){Ue=e;return}Ue=e=t}while(e!==null);We===0&&(We=5)}function Ir(t){var e=Hn();return qr(99,m1.bind(null,t,e)),null}function m1(t,e){do vr();while(ga!==null);if(Z&48)throw Error($(327));var i=t.finishedWork;if(i===null)return null;if(t.finishedWork=null,t.finishedLanes=0,i===t.current)throw Error($(177));t.callbackNode=null;var r=i.lanes|i.childLanes,n=r,s=t.pendingLanes&~n;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=n,t.mutableReadLanes&=n,t.entangledLanes&=n,n=t.entanglements;for(var a=t.eventTimes,o=t.expirationTimes;0<s;){var l=31-dr(s),d=1<<l;n[l]=0,a[l]=-1,o[l]=-1,s&=~d}if(Ri!==null&&!(r&24)&&Ri.has(t)&&Ri.delete(t),t===ct&&(Ue=ct=null,Ze=0),1<i.flags?i.lastEffect!==null?(i.lastEffect.nextEffect=i,r=i.firstEffect):r=i:r=i.firstEffect,r!==null){if(n=Z,Z|=32,gf.current=null,Nc=ru,a=Qm(),Ad(a)){if("selectionStart"in a)o={start:a.selectionStart,end:a.selectionEnd};else e:if(o=(o=a.ownerDocument)&&o.defaultView||window,(d=o.getSelection&&o.getSelection())&&d.rangeCount!==0){o=d.anchorNode,s=d.anchorOffset,l=d.focusNode,d=d.focusOffset;try{o.nodeType,l.nodeType}catch{o=null;break e}var m=0,y=-1,v=-1,b=0,S=0,A=a,T=null;t:for(;;){for(var _;A!==o||s!==0&&A.nodeType!==3||(y=m+s),A!==l||d!==0&&A.nodeType!==3||(v=m+d),A.nodeType===3&&(m+=A.nodeValue.length),(_=A.firstChild)!==null;)T=A,A=_;for(;;){if(A===a)break t;if(T===o&&++b===s&&(y=m),T===l&&++S===d&&(v=m),(_=A.nextSibling)!==null)break;A=T,T=A.parentNode}A=_}o=y===-1||v===-1?null:{start:y,end:v}}else o=null;o=o||{start:0,end:0}}else o=null;Rc={focusedElem:a,selectionRange:o},ru=!1,_a=null,cu=!1,X=r;do try{g1()}catch(j){if(X===null)throw Error($(330));lr(X,j),X=X.nextEffect}while(X!==null);_a=null,X=r;do try{for(a=t;X!==null;){var x=X.flags;if(x&16&&wa(X.stateNode,""),x&128){var I=X.alternate;if(I!==null){var D=I.ref;D!==null&&(typeof D=="function"?D(null):D.current=null)}}switch(x&1038){case 2:Mg(X),X.flags&=-3;break;case 6:Mg(X),X.flags&=-3,Vc(X.alternate,X);break;case 1024:X.flags&=-1025;break;case 1028:X.flags&=-1025,Vc(X.alternate,X);break;case 4:Vc(X.alternate,X);break;case 8:o=X,X_(a,o);var O=o.alternate;Ng(o),O!==null&&Ng(O)}X=X.nextEffect}}catch(j){if(X===null)throw Error($(330));lr(X,j),X=X.nextEffect}while(X!==null);if(D=Rc,I=Qm(),x=D.focusedElem,a=D.selectionRange,I!==x&&x&&x.ownerDocument&&h_(x.ownerDocument.documentElement,x)){for(a!==null&&Ad(x)&&(I=a.start,D=a.end,D===void 0&&(D=I),"selectionStart"in x?(x.selectionStart=I,x.selectionEnd=Math.min(D,x.value.length)):(D=(I=x.ownerDocument||document)&&I.defaultView||window,D.getSelection&&(D=D.getSelection(),o=x.textContent.length,O=Math.min(a.start,o),a=a.end===void 0?O:Math.min(a.end,o),!D.extend&&O>a&&(o=a,a=O,O=o),o=Ym(x,O),s=Ym(x,a),o&&s&&(D.rangeCount!==1||D.anchorNode!==o.node||D.anchorOffset!==o.offset||D.focusNode!==s.node||D.focusOffset!==s.offset)&&(I=I.createRange(),I.setStart(o.node,o.offset),D.removeAllRanges(),O>a?(D.addRange(I),D.extend(s.node,s.offset)):(I.setEnd(s.node,s.offset),D.addRange(I)))))),I=[],D=x;D=D.parentNode;)D.nodeType===1&&I.push({element:D,left:D.scrollLeft,top:D.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<I.length;x++)D=I[x],D.element.scrollLeft=D.left,D.element.scrollTop=D.top}ru=!!Nc,Rc=Nc=null,t.current=i,X=r;do try{for(x=t;X!==null;){var N=X.flags;if(N&36&&l1(x,X.alternate,X),N&128){I=void 0;var U=X.ref;if(U!==null){var H=X.stateNode;switch(X.tag){case 5:I=H;break;default:I=H}typeof U=="function"?U(I):U.current=I}}X=X.nextEffect}}catch(j){if(X===null)throw Error($(330));lr(X,j),X=X.nextEffect}while(X!==null);X=null,Qb(),Z=n}else t.current=i;if(fr)fr=!1,ga=t,Zs=e;else for(X=r;X!==null;)e=X.nextEffect,X.nextEffect=null,X.flags&8&&(N=X,N.sibling=null,N.stateNode=null),X=e;if(r=t.pendingLanes,r===0&&(ai=null),r===1?t===Qd?ya++:(ya=0,Qd=t):ya=0,i=i.stateNode,Ur&&typeof Ur.onCommitFiberRoot=="function")try{Ur.onCommitFiberRoot(rf,i,void 0,(i.current.flags&64)===64)}catch{}if(jt(t,Qe()),Fu)throw Fu=!1,t=Xd,Xd=null,t;return Z&8||Si(),null}function g1(){for(;X!==null;){var t=X.alternate;cu||_a===null||(X.flags&8?Mm(X,_a)&&(cu=!0):X.tag===13&&c1(t,X)&&Mm(X,_a)&&(cu=!0));var e=X.flags;e&256&&u1(t,X),!(e&512)||fr||(fr=!0,Na(97,function(){return vr(),null})),X=X.nextEffect}}function vr(){if(Zs!==90){var t=97<Zs?97:Zs;return Zs=90,qr(t,_1)}return!1}function y1(t,e){Kd.push(e,t),fr||(fr=!0,Na(97,function(){return vr(),null}))}function iv(t,e){Yd.push(e,t),fr||(fr=!0,Na(97,function(){return vr(),null}))}function _1(){if(ga===null)return!1;var t=ga;if(ga=null,Z&48)throw Error($(331));var e=Z;Z|=32;var i=Yd;Yd=[];for(var r=0;r<i.length;r+=2){var n=i[r],s=i[r+1],a=n.destroy;if(n.destroy=void 0,typeof a=="function")try{a()}catch(l){if(s===null)throw Error($(330));lr(s,l)}}for(i=Kd,Kd=[],r=0;r<i.length;r+=2){n=i[r],s=i[r+1];try{var o=n.create;n.destroy=o()}catch(l){if(s===null)throw Error($(330));lr(s,l)}}for(o=t.current.firstEffect;o!==null;)t=o.nextEffect,o.nextEffect=null,o.flags&8&&(o.sibling=null,o.stateNode=null),o=t;return Z=e,Si(),!0}function Fg(t,e,i){e=mf(i,e),e=G_(t,e,1),ar(t,e),e=At(),t=wl(t,1),t!==null&&(_l(t,1,e),jt(t,e))}function lr(t,e){if(t.tag===3)Fg(t,t,e);else for(var i=t.return;i!==null;){if(i.tag===3){Fg(i,t,e);break}else if(i.tag===1){var r=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ai===null||!ai.has(r))){t=mf(e,t);var n=W_(i,t,1);if(ar(i,n),n=At(),i=wl(i,1),i!==null)_l(i,1,n),jt(i,n);else if(typeof r.componentDidCatch=="function"&&(ai===null||!ai.has(r)))try{r.componentDidCatch(e,t)}catch{}break}}i=i.return}}function v1(t,e,i){var r=t.pingCache;r!==null&&r.delete(e),e=At(),t.pingedLanes|=t.suspendedLanes&i,ct===t&&(Ze&i)===i&&(We===4||We===3&&(Ze&62914560)===Ze&&500>Qe()-_f?Ln(t,0):yf|=i),jt(t,e)}function T1(t,e){var i=t.stateNode;i!==null&&i.delete(e),e=0,e===0&&(e=t.mode,e&2?e&4?(Ii===0&&(Ii=os),e=fn(62914560&~Ii),e===0&&(e=4194304)):e=Hn()===99?1:2:e=1),i=At(),t=wl(t,e),t!==null&&(_l(t,e,i),jt(t,i))}var rv;rv=function(t,e,i){var r=e.lanes;if(t!==null)if(t.memoizedProps!==e.pendingProps||vt.current)Yt=!0;else if(i&r)Yt=!!(t.flags&16384);else{switch(Yt=!1,e.tag){case 3:bg(e),Uc();break;case 5:mg(e);break;case 1:Tt(e.type)&&au(e);break;case 4:Md(e,e.stateNode.containerInfo);break;case 10:r=e.memoizedProps.value;var n=e.type._context;Pe(wu,n._currentValue),n._currentValue=r;break;case 13:if(e.memoizedState!==null)return i&e.child.childLanes?Cg(t,e,i):(Pe(ke,ke.current&1),e=Ni(t,e,i),e!==null?e.sibling:null);Pe(ke,ke.current&1);break;case 19:if(r=(i&e.childLanes)!==0,t.flags&64){if(r)return Ig(t,e,i);e.flags|=64}if(n=e.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Pe(ke,ke.current),r)break;return null;case 23:case 24:return e.lanes=0,jc(t,e,i)}return Ni(t,e,i)}else Yt=!1;switch(e.lanes=0,e.tag){case 2:if(r=e.type,t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,n=Vn(e,tt.current),In(e,i),n=df(null,e,r,t,n,i),e.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,Tt(r)){var s=!0;au(e)}else s=!1;e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,of(e);var a=r.getDerivedStateFromProps;typeof a=="function"&&ku(e,r,a,t),n.updater=bl,e.stateNode=n,n._reactInternals=e,Rd(e,r,t,i),e=jd(null,e,r,!0,s,i)}else e.tag=0,gt(null,e,n,i),e=e.child;return e;case 16:n=e.elementType;e:{switch(t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=S1(n),t=Xt(n,t),s){case 0:e=Ud(null,e,n,t,i);break e;case 1:e=Eg(null,e,n,t,i);break e;case 11:e=xg(null,e,n,t,i);break e;case 14:e=Sg(null,e,n,Xt(n.type,t),r,i);break e}throw Error($(306,n,""))}return e;case 0:return r=e.type,n=e.pendingProps,n=e.elementType===r?n:Xt(r,n),Ud(t,e,r,n,i);case 1:return r=e.type,n=e.pendingProps,n=e.elementType===r?n:Xt(r,n),Eg(t,e,r,n,i);case 3:if(bg(e),r=e.updateQueue,t===null||r===null)throw Error($(282));if(r=e.pendingProps,n=e.memoizedState,n=n!==null?n.element:null,A_(t,e),Ra(e,r,null,i),r=e.memoizedState.element,r===n)Uc(),e=Ni(t,e,i);else{if(n=e.stateNode,(s=n.hydrate)&&(tr=kn(e.stateNode.containerInfo.firstChild),Li=e,s=di=!0),s){if(t=n.mutableSourceEagerHydrationData,t!=null)for(n=0;n<t.length;n+=2)s=t[n],s._workInProgressVersionPrimary=t[n+1],Pn.push(s);for(i=O_(e,null,r,i),e.child=i;i;)i.flags=i.flags&-3|1024,i=i.sibling}else gt(t,e,r,i),Uc();e=e.child}return e;case 5:return mg(e),t===null&&Bd(e),r=e.type,n=e.pendingProps,s=t!==null?t.memoizedProps:null,a=n.children,Pd(r,n)?a=null:s!==null&&Pd(r,s)&&(e.flags|=16),V_(t,e),gt(t,e,a,i),e.child;case 6:return t===null&&Bd(e),null;case 13:return Cg(t,e,i);case 4:return Md(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Iu(e,null,r,i):gt(t,e,r,i),e.child;case 11:return r=e.type,n=e.pendingProps,n=e.elementType===r?n:Xt(r,n),xg(t,e,r,n,i);case 7:return gt(t,e,e.pendingProps,i),e.child;case 8:return gt(t,e,e.pendingProps.children,i),e.child;case 12:return gt(t,e,e.pendingProps.children,i),e.child;case 10:e:{r=e.type._context,n=e.pendingProps,a=e.memoizedProps,s=n.value;var o=e.type._context;if(Pe(wu,o._currentValue),o._currentValue=s,a!==null)if(o=a.value,s=Rt(o,s)?0:(typeof r._calculateChangedBits=="function"?r._calculateChangedBits(o,s):1073741823)|0,s===0){if(a.children===n.children&&!vt.current){e=Ni(t,e,i);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){a=o.child;for(var d=l.firstContext;d!==null;){if(d.context===r&&d.observedBits&s){o.tag===1&&(d=sr(-1,i&-i),d.tag=2,ar(o,d)),o.lanes|=i,d=o.alternate,d!==null&&(d.lanes|=i),D_(o.return,i),l.lanes|=i;break}d=d.next}}else a=o.tag===10&&o.type===e.type?null:o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}gt(t,e,n.children,i),e=e.child}return e;case 9:return n=e.type,s=e.pendingProps,r=s.children,In(e,i),n=Ut(n,s.unstable_observedBits),r=r(n),e.flags|=1,gt(t,e,r,i),e.child;case 14:return n=e.type,s=Xt(n,e.pendingProps),s=Xt(n.type,s),Sg(t,e,n,s,r,i);case 15:return $_(t,e,e.type,e.pendingProps,r,i);case 17:return r=e.type,n=e.pendingProps,n=e.elementType===r?n:Xt(r,n),t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,Tt(r)?(t=!0,au(e)):t=!1,In(e,i),I_(e,r,n),Rd(e,r,n,i),jd(null,e,r,!0,t,i);case 19:return Ig(t,e,i);case 23:return jc(t,e,i);case 24:return jc(t,e,i)}throw Error($(156,e.tag))};function x1(t,e,i,r){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Mt(t,e,i,r){return new x1(t,e,i,r)}function Tf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function S1(t){if(typeof t=="function")return Tf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ml)return 11;if(t===gl)return 14}return 2}function pr(t,e){var i=t.alternate;return i===null?(i=Mt(t.tag,e,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=e,i.type=t.type,i.flags=0,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null),i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,e=t.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i}function du(t,e,i,r,n,s){var a=2;if(r=t,typeof t=="function")Tf(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Ji:return Nn(i.children,n,s,e);case Ly:a=8,n|=16;break;case Rh:a=8,n|=1;break;case oa:return t=Mt(12,i,e,n|8),t.elementType=oa,t.type=oa,t.lanes=s,t;case ua:return t=Mt(13,i,e,n),t.type=ua,t.elementType=ua,t.lanes=s,t;case yu:return t=Mt(19,i,e,n),t.elementType=yu,t.lanes=s,t;case $h:return xf(i,n,s,e);case fd:return t=Mt(24,i,e,n),t.elementType=fd,t.lanes=s,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Mh:a=10;break e;case Bh:a=9;break e;case ml:a=11;break e;case gl:a=14;break e;case Fh:a=16,r=null;break e;case Uh:a=22;break e}throw Error($(130,t==null?t:typeof t,""))}return e=Mt(a,i,e,n),e.elementType=t,e.type=r,e.lanes=s,e}function Nn(t,e,i,r){return t=Mt(7,t,r,e),t.lanes=i,t}function xf(t,e,i,r){return t=Mt(23,t,r,e),t.elementType=$h,t.lanes=i,t}function Hc(t,e,i){return t=Mt(6,t,null,e),t.lanes=i,t}function qc(t,e,i){return e=Mt(4,t.children!==null?t.children:[],t.key,e),e.lanes=i,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function E1(t,e,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=i,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Dc(0),this.expirationTimes=Dc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dc(0),this.mutableSourceEagerHydrationData=null}function b1(t,e,i){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Lr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:i}}function Uu(t,e,i,r){var n=e.current,s=At(),a=or(n);e:if(i){i=i._reactInternals;t:{if(Yr(i)!==i||i.tag!==1)throw Error($(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break t;case 1:if(Tt(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break t}}o=o.return}while(o!==null);throw Error($(171))}if(i.tag===1){var l=i.type;if(Tt(l)){i=T_(i,l,o);break e}}i=o}else i=hr;return e.context===null?e.context=i:e.pendingContext=i,e=sr(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),ar(n,e),ur(n,a,s),a}function zc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ug(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<e?i:e}}function Sf(t,e){Ug(t,e),(t=t.alternate)&&Ug(t,e)}function C1(){return null}function Ef(t,e,i){var r=i!=null&&i.hydrationOptions!=null&&i.hydrationOptions.mutableSources||null;if(i=new E1(t,e,i!=null&&i.hydrate===!0),e=Mt(3,null,null,e===2?7:e===1?3:0),i.current=e,e.stateNode=i,of(e),t[as]=i.current,m_(t.nodeType===8?t.parentNode:t),r)for(t=0;t<r.length;t++){e=r[t];var n=e._getVersion;n=n(e._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[e,n]:i.mutableSourceEagerHydrationData.push(e,n)}this._internalRoot=i}Ef.prototype.render=function(t){Uu(t,this._internalRoot,null,null)};Ef.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;Uu(null,t,null,function(){e[as]=null})};function Za(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function w1(t,e){if(e||(e=t?t.nodeType===9?t.documentElement:t.firstChild:null,e=!(!e||e.nodeType!==1||!e.hasAttribute("data-reactroot"))),!e)for(var i;i=t.lastChild;)t.removeChild(i);return new Ef(t,0,e?{hydrate:!0}:void 0)}function Dl(t,e,i,r,n){var s=i._reactRootContainer;if(s){var a=s._internalRoot;if(typeof n=="function"){var o=n;n=function(){var d=zc(a);o.call(d)}}Uu(e,a,t,n)}else{if(s=i._reactRootContainer=w1(i,r),a=s._internalRoot,typeof n=="function"){var l=n;n=function(){var d=zc(a);l.call(d)}}Q_(function(){Uu(e,a,t,n)})}return zc(a)}Xy=function(t){if(t.tag===13){var e=At();ur(t,4,e),Sf(t,4)}};Gh=function(t){if(t.tag===13){var e=At();ur(t,67108864,e),Sf(t,67108864)}};Ky=function(t){if(t.tag===13){var e=At(),i=or(t);ur(t,i,e),Sf(t,i)}};Yy=function(t,e){return e()};Ed=function(t,e,i){switch(e){case"input":if(md(t,i),e=i.name,i.type==="radio"&&e!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<i.length;e++){var r=i[e];if(r!==t&&r.form===t.form){var n=Sl(r);if(!n)throw Error($(90));Ry(r),md(r,n)}}}break;case"textarea":By(t,i);break;case"select":e=i.value,e!=null&&wn(t,!!i.multiple,e,!1)}};Hh=Y_;qy=function(t,e,i,r,n){var s=Z;Z|=4;try{return qr(98,t.bind(null,e,i,r,n))}finally{Z=s,Z===0&&(ls(),Si())}};qh=function(){!(Z&49)&&(h1(),vr())};zy=function(t,e){var i=Z;Z|=2;try{return t(e)}finally{Z=i,Z===0&&(ls(),Si())}};function nv(t,e){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Za(e))throw Error($(200));return b1(t,e,null,i)}var D1={Events:[Ya,yn,Sl,Vy,Hy,vr,{current:!1}]},$s={findFiberByHostInstance:Rr,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},A1={bundleType:$s.bundleType,version:$s.version,rendererPackageName:$s.rendererPackageName,rendererConfig:$s.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Kr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Wy(t),t===null?null:t.stateNode},findFiberByHostInstance:$s.findFiberByHostInstance||C1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Go=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Go.isDisabled&&Go.supportsFiber)try{rf=Go.inject(A1),Ur=Go}catch{}}Ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D1;Ht.createPortal=nv;Ht.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):Error($(268,Object.keys(t)));return t=Wy(e),t=t===null?null:t.stateNode,t};Ht.flushSync=function(t,e){var i=Z;if(i&48)return t(e);Z|=1;try{if(t)return qr(99,t.bind(null,e))}finally{Z=i,Si()}};Ht.hydrate=function(t,e,i){if(!Za(e))throw Error($(200));return Dl(null,t,e,!0,i)};Ht.render=function(t,e,i){if(!Za(e))throw Error($(200));return Dl(null,t,e,!1,i)};Ht.unmountComponentAtNode=function(t){if(!Za(t))throw Error($(40));return t._reactRootContainer?(Q_(function(){Dl(null,null,t,!1,function(){t._reactRootContainer=null,t[as]=null})}),!0):!1};Ht.unstable_batchedUpdates=Y_;Ht.unstable_createPortal=function(t,e){return nv(t,e,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};Ht.unstable_renderSubtreeIntoContainer=function(t,e,i,r){if(!Za(i))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return Dl(t,e,i,!1,r)};Ht.version="17.0.2";function sv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(sv)}catch(t){console.error(t)}}sv(),ky.exports=Ht;var k1=ky.exports;const I1=xi(k1);var ta;typeof window<"u"?ta=window:typeof gu<"u"?ta=gu:typeof self<"u"?ta=self:ta={};var Al=ta;const k=xi(Al),P1={},O1=Object.freeze(Object.defineProperty({__proto__:null,default:P1},Symbol.toStringTag,{value:"Module"})),L1=cy(O1);var jg=typeof gu<"u"?gu:typeof window<"u"?window:{},N1=L1,ia;typeof document<"u"?ia=document:(ia=jg["__GLOBAL_DOCUMENT_CACHE@4"],ia||(ia=jg["__GLOBAL_DOCUMENT_CACHE@4"]=N1));var av=ia;const V=xi(av);var Zd={exports:{}};(function(t,e){function i(l){if(l&&typeof l=="object"){var d=l.which||l.keyCode||l.charCode;d&&(l=d)}if(typeof l=="number")return a[l];var m=String(l),y=r[m.toLowerCase()];if(y)return y;var y=n[m.toLowerCase()];if(y)return y;if(m.length===1)return m.charCodeAt(0)}i.isEventKey=function(d,m){if(d&&typeof d=="object"){var y=d.which||d.keyCode||d.charCode;if(y==null)return!1;if(typeof m=="string"){var v=r[m.toLowerCase()];if(v)return v===y;var v=n[m.toLowerCase()];if(v)return v===y}else if(typeof m=="number")return m===y;return!1}},e=t.exports=i;var r=e.code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},n=e.aliases={windows:91,"":16,"":18,"":17,"":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};/*!
 * Programatically add the following
 */for(s=97;s<123;s++)r[String.fromCharCode(s)]=s-32;for(var s=48;s<58;s++)r[s-48]=s;for(s=1;s<13;s++)r["f"+s]=s+111;for(s=0;s<10;s++)r["numpad "+s]=s+96;var a=e.names=e.title={};for(s in r)a[r[s]]=s;for(var o in n)r[o]=n[o]})(Zd,Zd.exports);var R1=Zd.exports;const te=xi(R1);var M1=B1;function B1(t,e){var i,r=null;try{i=JSON.parse(t,e)}catch(n){r=n}return[r,i]}const F1=xi(M1);var bf={exports:{}};function Ui(){return Ui=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},Ui.apply(this,arguments)}const U1=Object.freeze(Object.defineProperty({__proto__:null,default:Ui},Symbol.toStringTag,{value:"Module"})),j1=cy(U1);var $1=H1,V1=Object.prototype.toString;function H1(t){if(!t)return!1;var e=V1.call(t);return e==="[object Function]"||typeof t=="function"&&e!=="[object RegExp]"||typeof window<"u"&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)}var q1=Al,z1=function(e,i){return i===void 0&&(i=!1),function(r,n,s){if(r){e(r);return}if(n.statusCode>=400&&n.statusCode<=599){var a=s;if(i)if(q1.TextDecoder){var o=G1(n.headers&&n.headers["content-type"]);try{a=new TextDecoder(o).decode(s)}catch{}}else a=String.fromCharCode.apply(null,new Uint8Array(s));e({cause:a});return}e(null,s)}};function G1(t){return t===void 0&&(t=""),t.toLowerCase().split(";").reduce(function(e,i){var r=i.split("="),n=r[0],s=r[1];return n.trim()==="charset"?s.trim():e},"utf-8")}var W1=z1,ov=Al,X1=j1,K1=$1;hi.httpHandler=W1;/**
 * @license
 * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 * Copyright (c) 2014 David Bjrklund
 * Available under the MIT license
 * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 */var Y1=function(e){var i={};return e&&e.trim().split(`
`).forEach(function(r){var n=r.indexOf(":"),s=r.slice(0,n).trim().toLowerCase(),a=r.slice(n+1).trim();typeof i[s]>"u"?i[s]=a:Array.isArray(i[s])?i[s].push(a):i[s]=[i[s],a]}),i};bf.exports=hi;bf.exports.default=hi;hi.XMLHttpRequest=ov.XMLHttpRequest||eC;hi.XDomainRequest="withCredentials"in new hi.XMLHttpRequest?hi.XMLHttpRequest:ov.XDomainRequest;Q1(["get","put","post","patch","head","delete"],function(t){hi[t==="delete"?"del":t]=function(e,i,r){return i=uv(e,i,r),i.method=t.toUpperCase(),lv(i)}});function Q1(t,e){for(var i=0;i<t.length;i++)e(t[i])}function J1(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function uv(t,e,i){var r=t;return K1(e)?(i=e,typeof t=="string"&&(r={uri:t})):r=X1({},e,{uri:t}),r.callback=i,r}function hi(t,e,i){return e=uv(t,e,i),lv(e)}function lv(t){if(typeof t.callback>"u")throw new Error("callback argument missing");var e=!1,i=function(I,D,O){e||(e=!0,t.callback(I,D,O))};function r(){o.readyState===4&&setTimeout(a,0)}function n(){var x=void 0;if(o.response?x=o.response:x=o.responseText||Z1(o),A)try{x=JSON.parse(x)}catch{}return x}function s(x){return clearTimeout(T),x instanceof Error||(x=new Error(""+(x||"Unknown XMLHttpRequest Error"))),x.statusCode=0,i(x,_)}function a(){if(!d){var x;clearTimeout(T),t.useXDR&&o.status===void 0?x=200:x=o.status===1223?204:o.status;var I=_,D=null;return x!==0?(I={body:n(),statusCode:x,method:y,headers:{},url:m,rawRequest:o},o.getAllResponseHeaders&&(I.headers=Y1(o.getAllResponseHeaders()))):D=new Error("Internal XMLHttpRequest Error"),i(D,I,I.body)}}var o=t.xhr||null;o||(t.cors||t.useXDR?o=new hi.XDomainRequest:o=new hi.XMLHttpRequest);var l,d,m=o.url=t.uri||t.url,y=o.method=t.method||"GET",v=t.body||t.data,b=o.headers=t.headers||{},S=!!t.sync,A=!1,T,_={body:void 0,headers:{},statusCode:0,method:y,url:m,rawRequest:o};if("json"in t&&t.json!==!1&&(A=!0,b.accept||b.Accept||(b.Accept="application/json"),y!=="GET"&&y!=="HEAD"&&(b["content-type"]||b["Content-Type"]||(b["Content-Type"]="application/json"),v=JSON.stringify(t.json===!0?v:t.json))),o.onreadystatechange=r,o.onload=a,o.onerror=s,o.onprogress=function(){},o.onabort=function(){d=!0},o.ontimeout=s,o.open(y,m,!S,t.username,t.password),S||(o.withCredentials=!!t.withCredentials),!S&&t.timeout>0&&(T=setTimeout(function(){if(!d){d=!0,o.abort("timeout");var x=new Error("XMLHttpRequest timeout");x.code="ETIMEDOUT",s(x)}},t.timeout)),o.setRequestHeader)for(l in b)b.hasOwnProperty(l)&&o.setRequestHeader(l,b[l]);else if(t.headers&&!J1(t.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(o.responseType=t.responseType),"beforeSend"in t&&typeof t.beforeSend=="function"&&t.beforeSend(o),o.send(v||null),o}function Z1(t){try{if(t.responseType==="document")return t.responseXML;var e=t.responseXML&&t.responseXML.documentElement.nodeName==="parsererror";if(t.responseType===""&&!e)return t.responseXML}catch{}return null}function eC(){}var tC=bf.exports;const cv=xi(tC);var dv={exports:{}},$g=av,Cf=Object.create||function(){function t(){}return function(e){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return t.prototype=e,new t}}();function Dt(t,e){this.name="ParsingError",this.code=t.code,this.message=e||t.message}Dt.prototype=Cf(Error.prototype);Dt.prototype.constructor=Dt;Dt.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function wf(t){function e(r,n,s,a){return(r|0)*3600+(n|0)*60+(s|0)+(a|0)/1e3}var i=t.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return i?i[3]?e(i[1],i[2],i[3].replace(":",""),i[4]):i[1]>59?e(i[1],i[2],0,i[4]):e(0,i[1],i[2],i[4]):null}function va(){this.values=Cf(null)}va.prototype={set:function(t,e){!this.get(t)&&e!==""&&(this.values[t]=e)},get:function(t,e,i){return i?this.has(t)?this.values[t]:e[i]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,i){for(var r=0;r<i.length;++r)if(e===i[r]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){return e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(e=parseFloat(e),e>=0&&e<=100)?(this.set(t,e),!0):!1}};function ra(t,e,i,r){var n=r?t.split(r):[t];for(var s in n)if(typeof n[s]=="string"){var a=n[s].split(i);if(a.length===2){var o=a[0].trim(),l=a[1].trim();e(o,l)}}}function iC(t,e,i){var r=t;function n(){var o=wf(t);if(o===null)throw new Dt(Dt.Errors.BadTimeStamp,"Malformed timestamp: "+r);return t=t.replace(/^[^\sa-zA-Z-]+/,""),o}function s(o,l){var d=new va;ra(o,function(m,y){switch(m){case"region":for(var v=i.length-1;v>=0;v--)if(i[v].id===y){d.set(m,i[v].region);break}break;case"vertical":d.alt(m,y,["rl","lr"]);break;case"line":var b=y.split(","),S=b[0];d.integer(m,S),d.percent(m,S)&&d.set("snapToLines",!1),d.alt(m,S,["auto"]),b.length===2&&d.alt("lineAlign",b[1],["start","center","end"]);break;case"position":b=y.split(","),d.percent(m,b[0]),b.length===2&&d.alt("positionAlign",b[1],["start","center","end"]);break;case"size":d.percent(m,y);break;case"align":d.alt(m,y,["start","center","end","left","right"]);break}},/:/,/\s/),l.region=d.get("region",null),l.vertical=d.get("vertical","");try{l.line=d.get("line","auto")}catch{}l.lineAlign=d.get("lineAlign","start"),l.snapToLines=d.get("snapToLines",!0),l.size=d.get("size",100);try{l.align=d.get("align","center")}catch{l.align=d.get("align","middle")}try{l.position=d.get("position","auto")}catch{l.position=d.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},l.align)}l.positionAlign=d.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},l.align)}function a(){t=t.replace(/^\s+/,"")}if(a(),e.startTime=n(),a(),t.substr(0,3)!=="-->")throw new Dt(Dt.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+r);t=t.substr(3),a(),e.endTime=n(),a(),s(t,e)}var Gc=$g.createElement&&$g.createElement("textarea"),rC={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},Vg={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},nC={v:"title",lang:"lang"},Hg={rt:"ruby"};function hv(t,e){function i(){if(!e)return null;function S(T){return e=e.substr(T.length),T}var A=e.match(/^([^<]*)(<[^>]*>?)?/);return S(A[1]?A[1]:A[2])}function r(S){return Gc.innerHTML=S,S=Gc.textContent,Gc.textContent="",S}function n(S,A){return!Hg[A.localName]||Hg[A.localName]===S.localName}function s(S,A){var T=rC[S];if(!T)return null;var _=t.document.createElement(T),x=nC[S];return x&&A&&(_[x]=A.trim()),_}for(var a=t.document.createElement("div"),o=a,l,d=[];(l=i())!==null;){if(l[0]==="<"){if(l[1]==="/"){d.length&&d[d.length-1]===l.substr(2).replace(">","")&&(d.pop(),o=o.parentNode);continue}var m=wf(l.substr(1,l.length-2)),y;if(m){y=t.document.createProcessingInstruction("timestamp",m),o.appendChild(y);continue}var v=l.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!v||(y=s(v[1],v[3]),!y)||!n(o,y))continue;if(v[2]){var b=v[2].split(".");b.forEach(function(S){var A=/^bg_/.test(S),T=A?S.slice(3):S;if(Vg.hasOwnProperty(T)){var _=A?"background-color":"color",x=Vg[T];y.style[_]=x}}),y.className=b.join(" ")}d.push(v[1]),o.appendChild(y),o=y;continue}o.appendChild(t.document.createTextNode(r(l)))}return a}var qg=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function sC(t){for(var e=0;e<qg.length;e++){var i=qg[e];if(t>=i[0]&&t<=i[1])return!0}return!1}function aC(t){var e=[],i="",r;if(!t||!t.childNodes)return"ltr";function n(o,l){for(var d=l.childNodes.length-1;d>=0;d--)o.push(l.childNodes[d])}function s(o){if(!o||!o.length)return null;var l=o.pop(),d=l.textContent||l.innerText;if(d){var m=d.match(/^.*(\n|\r)/);return m?(o.length=0,m[0]):d}if(l.tagName==="ruby")return s(o);if(l.childNodes)return n(o,l),s(o)}for(n(e,t);i=s(e);)for(var a=0;a<i.length;a++)if(r=i.charCodeAt(a),sC(r))return"rtl";return"ltr"}function oC(t){if(typeof t.line=="number"&&(t.snapToLines||t.line>=0&&t.line<=100))return t.line;if(!t.track||!t.track.textTrackList||!t.track.textTrackList.mediaElement)return-1;for(var e=t.track,i=e.textTrackList,r=0,n=0;n<i.length&&i[n]!==e;n++)i[n].mode==="showing"&&r++;return++r*-1}function kl(){}kl.prototype.applyStyles=function(t,e){e=e||this.div;for(var i in t)t.hasOwnProperty(i)&&(e.style[i]=t[i])};kl.prototype.formatStyle=function(t,e){return t===0?0:t+e};function ju(t,e,i){kl.call(this),this.cue=e,this.cueDiv=hv(t,e.text);var r={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:e.vertical===""?"horizontal-tb":e.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(r,this.cueDiv),this.div=t.document.createElement("div"),r={direction:aC(this.cueDiv),writingMode:e.vertical===""?"horizontal-tb":e.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:e.align==="middle"?"center":e.align,font:i.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(r),this.div.appendChild(this.cueDiv);var n=0;switch(e.positionAlign){case"start":n=e.position;break;case"center":n=e.position-e.size/2;break;case"end":n=e.position-e.size;break}e.vertical===""?this.applyStyles({left:this.formatStyle(n,"%"),width:this.formatStyle(e.size,"%")}):this.applyStyles({top:this.formatStyle(n,"%"),height:this.formatStyle(e.size,"%")}),this.move=function(s){this.applyStyles({top:this.formatStyle(s.top,"px"),bottom:this.formatStyle(s.bottom,"px"),left:this.formatStyle(s.left,"px"),right:this.formatStyle(s.right,"px"),height:this.formatStyle(s.height,"px"),width:this.formatStyle(s.width,"px")})}}ju.prototype=Cf(kl.prototype);ju.prototype.constructor=ju;function at(t){var e,i,r,n;if(t.div){i=t.div.offsetHeight,r=t.div.offsetWidth,n=t.div.offsetTop;var s=(s=t.div.childNodes)&&(s=s[0])&&s.getClientRects&&s.getClientRects();t=t.div.getBoundingClientRect(),e=s?Math.max(s[0]&&s[0].height||0,t.height/s.length):0}this.left=t.left,this.right=t.right,this.top=t.top||n,this.height=t.height||i,this.bottom=t.bottom||n+(t.height||i),this.width=t.width||r,this.lineHeight=e!==void 0?e:t.lineHeight}at.prototype.move=function(t,e){switch(e=e!==void 0?e:this.lineHeight,t){case"+x":this.left+=e,this.right+=e;break;case"-x":this.left-=e,this.right-=e;break;case"+y":this.top+=e,this.bottom+=e;break;case"-y":this.top-=e,this.bottom-=e;break}};at.prototype.overlaps=function(t){return this.left<t.right&&this.right>t.left&&this.top<t.bottom&&this.bottom>t.top};at.prototype.overlapsAny=function(t){for(var e=0;e<t.length;e++)if(this.overlaps(t[e]))return!0;return!1};at.prototype.within=function(t){return this.top>=t.top&&this.bottom<=t.bottom&&this.left>=t.left&&this.right<=t.right};at.prototype.overlapsOppositeAxis=function(t,e){switch(e){case"+x":return this.left<t.left;case"-x":return this.right>t.right;case"+y":return this.top<t.top;case"-y":return this.bottom>t.bottom}};at.prototype.intersectPercentage=function(t){var e=Math.max(0,Math.min(this.right,t.right)-Math.max(this.left,t.left)),i=Math.max(0,Math.min(this.bottom,t.bottom)-Math.max(this.top,t.top)),r=e*i;return r/(this.height*this.width)};at.prototype.toCSSCompatValues=function(t){return{top:this.top-t.top,bottom:t.bottom-this.bottom,left:this.left-t.left,right:t.right-this.right,height:this.height,width:this.width}};at.getSimpleBoxPosition=function(t){var e=t.div?t.div.offsetHeight:t.tagName?t.offsetHeight:0,i=t.div?t.div.offsetWidth:t.tagName?t.offsetWidth:0,r=t.div?t.div.offsetTop:t.tagName?t.offsetTop:0;t=t.div?t.div.getBoundingClientRect():t.tagName?t.getBoundingClientRect():t;var n={left:t.left,right:t.right,top:t.top||r,height:t.height||e,bottom:t.bottom||r+(t.height||e),width:t.width||i};return n};function uC(t,e,i,r){function n(T,_){for(var x,I=new at(T),D=1,O=0;O<_.length;O++){for(;T.overlapsOppositeAxis(i,_[O])||T.within(i)&&T.overlapsAny(r);)T.move(_[O]);if(T.within(i))return T;var N=T.intersectPercentage(i);D>N&&(x=new at(T),D=N),T=new at(I)}return x||I}var s=new at(e),a=e.cue,o=oC(a),l=[];if(a.snapToLines){var d;switch(a.vertical){case"":l=["+y","-y"],d="height";break;case"rl":l=["+x","-x"],d="width";break;case"lr":l=["-x","+x"],d="width";break}var m=s.lineHeight,y=m*Math.round(o),v=i[d]+m,b=l[0];Math.abs(y)>v&&(y=y<0?-1:1,y*=Math.ceil(v/m)*m),o<0&&(y+=a.vertical===""?i.height:i.width,l=l.reverse()),s.move(b,y)}else{var S=s.lineHeight/i.height*100;switch(a.lineAlign){case"center":o-=S/2;break;case"end":o-=S;break}switch(a.vertical){case"":e.applyStyles({top:e.formatStyle(o,"%")});break;case"rl":e.applyStyles({left:e.formatStyle(o,"%")});break;case"lr":e.applyStyles({right:e.formatStyle(o,"%")});break}l=["+y","-x","+x","-y"],s=new at(e)}var A=n(s,l);e.move(A.toCSSCompatValues(i))}function cs(){}cs.StringDecoder=function(){return{decode:function(t){if(!t)return"";if(typeof t!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}};cs.convertCueToDOMTree=function(t,e){return!t||!e?null:hv(t,e)};var lC=.05,cC="sans-serif",dC="1.5%";cs.processCues=function(t,e,i){if(!t||!e||!i)return null;for(;i.firstChild;)i.removeChild(i.firstChild);var r=t.document.createElement("div");r.style.position="absolute",r.style.left="0",r.style.right="0",r.style.top="0",r.style.bottom="0",r.style.margin=dC,i.appendChild(r);function n(m){for(var y=0;y<m.length;y++)if(m[y].hasBeenReset||!m[y].displayState)return!0;return!1}if(!n(e)){for(var s=0;s<e.length;s++)r.appendChild(e[s].displayState);return}var a=[],o=at.getSimpleBoxPosition(r),l=Math.round(o.height*lC*100)/100,d={font:l+"px "+cC};(function(){for(var m,y,v=0;v<e.length;v++)y=e[v],m=new ju(t,y,d),r.appendChild(m.div),uC(t,m,o,a),y.displayState=m.div,a.push(at.getSimpleBoxPosition(m))})()};cs.Parser=function(t,e,i){i||(i=e,e={}),e||(e={}),this.window=t,this.vttjs=e,this.state="INITIAL",this.buffer="",this.decoder=i||new TextDecoder("utf8"),this.regionList=[]};cs.Parser.prototype={reportOrThrowError:function(t){if(t instanceof Dt)this.onparsingerror&&this.onparsingerror(t);else throw t},parse:function(t){var e=this;t&&(e.buffer+=e.decoder.decode(t,{stream:!0}));function i(){for(var m=e.buffer,y=0;y<m.length&&m[y]!=="\r"&&m[y]!==`
`;)++y;var v=m.substr(0,y);return m[y]==="\r"&&++y,m[y]===`
`&&++y,e.buffer=m.substr(y),v}function r(m){var y=new va;if(ra(m,function(b,S){switch(b){case"id":y.set(b,S);break;case"width":y.percent(b,S);break;case"lines":y.integer(b,S);break;case"regionanchor":case"viewportanchor":var A=S.split(",");if(A.length!==2)break;var T=new va;if(T.percent("x",A[0]),T.percent("y",A[1]),!T.has("x")||!T.has("y"))break;y.set(b+"X",T.get("x")),y.set(b+"Y",T.get("y"));break;case"scroll":y.alt(b,S,["up"]);break}},/=/,/\s/),y.has("id")){var v=new(e.vttjs.VTTRegion||e.window.VTTRegion);v.width=y.get("width",100),v.lines=y.get("lines",3),v.regionAnchorX=y.get("regionanchorX",0),v.regionAnchorY=y.get("regionanchorY",100),v.viewportAnchorX=y.get("viewportanchorX",0),v.viewportAnchorY=y.get("viewportanchorY",100),v.scroll=y.get("scroll",""),e.onregion&&e.onregion(v),e.regionList.push({id:y.get("id"),region:v})}}function n(m){var y=new va;ra(m,function(v,b){switch(v){case"MPEGT":y.integer(v+"S",b);break;case"LOCA":y.set(v+"L",wf(b));break}},/[^\d]:/,/,/),e.ontimestampmap&&e.ontimestampmap({MPEGTS:y.get("MPEGTS"),LOCAL:y.get("LOCAL")})}function s(m){m.match(/X-TIMESTAMP-MAP/)?ra(m,function(y,v){switch(y){case"X-TIMESTAMP-MAP":n(v);break}},/=/):ra(m,function(y,v){switch(y){case"Region":r(v);break}},/:/)}try{var a;if(e.state==="INITIAL"){if(!/\r\n|\n/.test(e.buffer))return this;a=i();var o=a.match(/^WEBVTT([ \t].*)?$/);if(!o||!o[0])throw new Dt(Dt.Errors.BadSignature);e.state="HEADER"}for(var l=!1;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;switch(l?l=!1:a=i(),e.state){case"HEADER":/:/.test(a)?s(a):a||(e.state="ID");continue;case"NOTE":a||(e.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(a)){e.state="NOTE";break}if(!a)continue;e.cue=new(e.vttjs.VTTCue||e.window.VTTCue)(0,0,"");try{e.cue.align="center"}catch{e.cue.align="middle"}if(e.state="CUE",a.indexOf("-->")===-1){e.cue.id=a;continue}case"CUE":try{iC(a,e.cue,e.regionList)}catch(m){e.reportOrThrowError(m),e.cue=null,e.state="BADCUE";continue}e.state="CUETEXT";continue;case"CUETEXT":var d=a.indexOf("-->")!==-1;if(!a||d&&(l=!0)){e.oncue&&e.oncue(e.cue),e.cue=null,e.state="ID";continue}e.cue.text&&(e.cue.text+=`
`),e.cue.text+=a.replace(/\u2028/g,`
`).replace(/u2029/g,`
`);continue;case"BADCUE":a||(e.state="ID");continue}}}catch(m){e.reportOrThrowError(m),e.state==="CUETEXT"&&e.cue&&e.oncue&&e.oncue(e.cue),e.cue=null,e.state=e.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),(t.cue||t.state==="HEADER")&&(t.buffer+=`

`,t.parse()),t.state==="INITIAL")throw new Dt(Dt.Errors.BadSignature)}catch(e){t.reportOrThrowError(e)}return t.onflush&&t.onflush(),this}};var hC=cs,fC="auto",pC={"":1,lr:1,rl:1},mC={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function gC(t){if(typeof t!="string")return!1;var e=pC[t.toLowerCase()];return e?t.toLowerCase():!1}function Wc(t){if(typeof t!="string")return!1;var e=mC[t.toLowerCase()];return e?t.toLowerCase():!1}function fv(t,e,i){this.hasBeenReset=!1;var r="",n=!1,s=t,a=e,o=i,l=null,d="",m=!0,y="auto",v="start",b="auto",S="auto",A=100,T="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return r},set:function(_){r=""+_}},pauseOnExit:{enumerable:!0,get:function(){return n},set:function(_){n=!!_}},startTime:{enumerable:!0,get:function(){return s},set:function(_){if(typeof _!="number")throw new TypeError("Start time must be set to a number.");s=_,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return a},set:function(_){if(typeof _!="number")throw new TypeError("End time must be set to a number.");a=_,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return o},set:function(_){o=""+_,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return l},set:function(_){l=_,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return d},set:function(_){var x=gC(_);if(x===!1)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");d=x,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return m},set:function(_){m=!!_,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return y},set:function(_){if(typeof _!="number"&&_!==fC)throw new SyntaxError("Line: an invalid number or illegal string was specified.");y=_,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return v},set:function(_){var x=Wc(_);x?(v=x,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return b},set:function(_){if(_<0||_>100)throw new Error("Position must be between 0 and 100.");b=_,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return S},set:function(_){var x=Wc(_);x?(S=x,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return A},set:function(_){if(_<0||_>100)throw new Error("Size must be between 0 and 100.");A=_,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return T},set:function(_){var x=Wc(_);if(!x)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");T=x,this.hasBeenReset=!0}}}),this.displayState=void 0}fv.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var yC=fv,_C={"":!0,up:!0};function vC(t){if(typeof t!="string")return!1;var e=_C[t.toLowerCase()];return e?t.toLowerCase():!1}function Vs(t){return typeof t=="number"&&t>=0&&t<=100}function TC(){var t=100,e=3,i=0,r=100,n=0,s=100,a="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return t},set:function(o){if(!Vs(o))throw new Error("Width must be between 0 and 100.");t=o}},lines:{enumerable:!0,get:function(){return e},set:function(o){if(typeof o!="number")throw new TypeError("Lines must be set to a number.");e=o}},regionAnchorY:{enumerable:!0,get:function(){return r},set:function(o){if(!Vs(o))throw new Error("RegionAnchorX must be between 0 and 100.");r=o}},regionAnchorX:{enumerable:!0,get:function(){return i},set:function(o){if(!Vs(o))throw new Error("RegionAnchorY must be between 0 and 100.");i=o}},viewportAnchorY:{enumerable:!0,get:function(){return s},set:function(o){if(!Vs(o))throw new Error("ViewportAnchorY must be between 0 and 100.");s=o}},viewportAnchorX:{enumerable:!0,get:function(){return n},set:function(o){if(!Vs(o))throw new Error("ViewportAnchorX must be between 0 and 100.");n=o}},scroll:{enumerable:!0,get:function(){return a},set:function(o){var l=vC(o);l===!1?console.warn("Scroll: an invalid or illegal string was specified."):a=l}}})}var xC=TC,ji=Al,Jr=dv.exports={WebVTT:hC,VTTCue:yC,VTTRegion:xC};ji.vttjs=Jr;ji.WebVTT=Jr.WebVTT;var SC=Jr.VTTCue,EC=Jr.VTTRegion,bC=ji.VTTCue,CC=ji.VTTRegion;Jr.shim=function(){ji.VTTCue=SC,ji.VTTRegion=EC};Jr.restore=function(){ji.VTTCue=bC,ji.VTTRegion=CC};ji.VTTCue||Jr.shim();var wC=dv.exports;const zg=xi(wC);var pv={exports:{}};(function(t,e){(function(i){var r=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,n=/^(?=([^\/?#]*))\1([^]*)$/,s=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(l,d,m){if(m=m||{},l=l.trim(),d=d.trim(),!d){if(!m.alwaysNormalize)return l;var y=o.parseURL(l);if(!y)throw new Error("Error trying to parse base URL.");return y.path=o.normalizePath(y.path),o.buildURLFromParts(y)}var v=o.parseURL(d);if(!v)throw new Error("Error trying to parse relative URL.");if(v.scheme)return m.alwaysNormalize?(v.path=o.normalizePath(v.path),o.buildURLFromParts(v)):d;var b=o.parseURL(l);if(!b)throw new Error("Error trying to parse base URL.");if(!b.netLoc&&b.path&&b.path[0]!=="/"){var S=n.exec(b.path);b.netLoc=S[1],b.path=S[2]}b.netLoc&&!b.path&&(b.path="/");var A={scheme:b.scheme,netLoc:v.netLoc,path:null,params:v.params,query:v.query,fragment:v.fragment};if(!v.netLoc&&(A.netLoc=b.netLoc,v.path[0]!=="/"))if(!v.path)A.path=b.path,v.params||(A.params=b.params,v.query||(A.query=b.query));else{var T=b.path,_=T.substring(0,T.lastIndexOf("/")+1)+v.path;A.path=o.normalizePath(_)}return A.path===null&&(A.path=m.alwaysNormalize?o.normalizePath(v.path):v.path),o.buildURLFromParts(A)},parseURL:function(l){var d=r.exec(l);return d?{scheme:d[1]||"",netLoc:d[2]||"",path:d[3]||"",params:d[4]||"",query:d[5]||"",fragment:d[6]||""}:null},normalizePath:function(l){for(l=l.split("").reverse().join("").replace(s,"");l.length!==(l=l.replace(a,"")).length;);return l.split("").reverse().join("")},buildURLFromParts:function(l){return l.scheme+l.netLoc+l.path+l.params+l.query+l.fragment}};t.exports=o})()})(pv);var DC=pv.exports;const $u=xi(DC);var Gg="http://example.com",AC=function(e,i){if(/^[a-z]+:/i.test(i))return i;/^data:/.test(e)&&(e=k.location&&k.location.href||"");var r=typeof k.URL=="function",n=/^\/\//.test(e),s=!k.location&&!/\/\//i.test(e);if(r?e=new k.URL(e,k.location||Gg):/\/\//i.test(e)||(e=$u.buildAbsoluteURL(k.location&&k.location.href||"",e)),r){var a=new URL(i,e);return s?a.href.slice(Gg.length):n?a.href.slice(a.protocol.length):a.href}return $u.buildAbsoluteURL(e,i)},Df=function(){function t(){this.listeners={}}var e=t.prototype;return e.on=function(r,n){this.listeners[r]||(this.listeners[r]=[]),this.listeners[r].push(n)},e.off=function(r,n){if(!this.listeners[r])return!1;var s=this.listeners[r].indexOf(n);return this.listeners[r]=this.listeners[r].slice(0),this.listeners[r].splice(s,1),s>-1},e.trigger=function(r){var n=this.listeners[r];if(n)if(arguments.length===2)for(var s=n.length,a=0;a<s;++a)n[a].call(this,arguments[1]);else for(var o=Array.prototype.slice.call(arguments,1),l=n.length,d=0;d<l;++d)n[d].apply(this,o)},e.dispose=function(){this.listeners={}},e.pipe=function(r){this.on("data",function(n){r.push(n)})},t}(),kC=function(e){return k.atob?k.atob(e):Buffer.from(e,"base64").toString("binary")};function IC(t){for(var e=kC(t),i=new Uint8Array(e.length),r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}/*! @name m3u8-parser @version 6.2.0 @license Apache-2.0 */class PC extends Df{constructor(){super(),this.buffer=""}push(e){let i;for(this.buffer+=e,i=this.buffer.indexOf(`
`);i>-1;i=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,i)),this.buffer=this.buffer.substring(i+1)}}const OC=String.fromCharCode(9),Xc=function(t){const e=/([0-9.]*)?@?([0-9.]*)?/.exec(t||""),i={};return e[1]&&(i.length=parseInt(e[1],10)),e[2]&&(i.offset=parseInt(e[2],10)),i},LC=function(){const t="[^=]*",e='"[^"]*"|[^,]*',i="(?:"+t+")=(?:"+e+")";return new RegExp("(?:^|,)("+i+")")},Lt=function(t){const e={};if(!t)return e;const i=t.split(LC());let r=i.length,n;for(;r--;)i[r]!==""&&(n=/([^=]*)=(.*)/.exec(i[r]).slice(1),n[0]=n[0].replace(/^\s+|\s+$/g,""),n[1]=n[1].replace(/^\s+|\s+$/g,""),n[1]=n[1].replace(/^['"](.*)['"]$/g,"$1"),e[n[0]]=n[1]);return e};class NC extends Df{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(e){let i,r;if(e=e.trim(),e.length===0)return;if(e[0]!=="#"){this.trigger("data",{type:"uri",uri:e});return}this.tagMappers.reduce((s,a)=>{const o=a(e);return o===e?s:s.concat([o])},[e]).forEach(s=>{for(let a=0;a<this.customParsers.length;a++)if(this.customParsers[a].call(this,s))return;if(s.indexOf("#EXT")!==0){this.trigger("data",{type:"comment",text:s.slice(1)});return}if(s=s.replace("\r",""),i=/^#EXTM3U/.exec(s),i){this.trigger("data",{type:"tag",tagType:"m3u"});return}if(i=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(s),i){r={type:"tag",tagType:"inf"},i[1]&&(r.duration=parseFloat(i[1])),i[2]&&(r.title=i[2]),this.trigger("data",r);return}if(i=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(s),i){r={type:"tag",tagType:"targetduration"},i[1]&&(r.duration=parseInt(i[1],10)),this.trigger("data",r);return}if(i=/^#EXT-X-VERSION:([0-9.]*)?/.exec(s),i){r={type:"tag",tagType:"version"},i[1]&&(r.version=parseInt(i[1],10)),this.trigger("data",r);return}if(i=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(s),i){r={type:"tag",tagType:"media-sequence"},i[1]&&(r.number=parseInt(i[1],10)),this.trigger("data",r);return}if(i=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(s),i){r={type:"tag",tagType:"discontinuity-sequence"},i[1]&&(r.number=parseInt(i[1],10)),this.trigger("data",r);return}if(i=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(s),i){r={type:"tag",tagType:"playlist-type"},i[1]&&(r.playlistType=i[1]),this.trigger("data",r);return}if(i=/^#EXT-X-BYTERANGE:(.*)?$/.exec(s),i){r=Ui(Xc(i[1]),{type:"tag",tagType:"byterange"}),this.trigger("data",r);return}if(i=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(s),i){r={type:"tag",tagType:"allow-cache"},i[1]&&(r.allowed=!/NO/.test(i[1])),this.trigger("data",r);return}if(i=/^#EXT-X-MAP:(.*)$/.exec(s),i){if(r={type:"tag",tagType:"map"},i[1]){const a=Lt(i[1]);a.URI&&(r.uri=a.URI),a.BYTERANGE&&(r.byterange=Xc(a.BYTERANGE))}this.trigger("data",r);return}if(i=/^#EXT-X-STREAM-INF:(.*)$/.exec(s),i){if(r={type:"tag",tagType:"stream-inf"},i[1]){if(r.attributes=Lt(i[1]),r.attributes.RESOLUTION){const a=r.attributes.RESOLUTION.split("x"),o={};a[0]&&(o.width=parseInt(a[0],10)),a[1]&&(o.height=parseInt(a[1],10)),r.attributes.RESOLUTION=o}r.attributes.BANDWIDTH&&(r.attributes.BANDWIDTH=parseInt(r.attributes.BANDWIDTH,10)),r.attributes["FRAME-RATE"]&&(r.attributes["FRAME-RATE"]=parseFloat(r.attributes["FRAME-RATE"])),r.attributes["PROGRAM-ID"]&&(r.attributes["PROGRAM-ID"]=parseInt(r.attributes["PROGRAM-ID"],10))}this.trigger("data",r);return}if(i=/^#EXT-X-MEDIA:(.*)$/.exec(s),i){r={type:"tag",tagType:"media"},i[1]&&(r.attributes=Lt(i[1])),this.trigger("data",r);return}if(i=/^#EXT-X-ENDLIST/.exec(s),i){this.trigger("data",{type:"tag",tagType:"endlist"});return}if(i=/^#EXT-X-DISCONTINUITY/.exec(s),i){this.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(i=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(s),i){r={type:"tag",tagType:"program-date-time"},i[1]&&(r.dateTimeString=i[1],r.dateTimeObject=new Date(i[1])),this.trigger("data",r);return}if(i=/^#EXT-X-KEY:(.*)$/.exec(s),i){r={type:"tag",tagType:"key"},i[1]&&(r.attributes=Lt(i[1]),r.attributes.IV&&(r.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(r.attributes.IV=r.attributes.IV.substring(2)),r.attributes.IV=r.attributes.IV.match(/.{8}/g),r.attributes.IV[0]=parseInt(r.attributes.IV[0],16),r.attributes.IV[1]=parseInt(r.attributes.IV[1],16),r.attributes.IV[2]=parseInt(r.attributes.IV[2],16),r.attributes.IV[3]=parseInt(r.attributes.IV[3],16),r.attributes.IV=new Uint32Array(r.attributes.IV))),this.trigger("data",r);return}if(i=/^#EXT-X-START:(.*)$/.exec(s),i){r={type:"tag",tagType:"start"},i[1]&&(r.attributes=Lt(i[1]),r.attributes["TIME-OFFSET"]=parseFloat(r.attributes["TIME-OFFSET"]),r.attributes.PRECISE=/YES/.test(r.attributes.PRECISE)),this.trigger("data",r);return}if(i=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(s),i){r={type:"tag",tagType:"cue-out-cont"},i[1]?r.data=i[1]:r.data="",this.trigger("data",r);return}if(i=/^#EXT-X-CUE-OUT:(.*)?$/.exec(s),i){r={type:"tag",tagType:"cue-out"},i[1]?r.data=i[1]:r.data="",this.trigger("data",r);return}if(i=/^#EXT-X-CUE-IN:(.*)?$/.exec(s),i){r={type:"tag",tagType:"cue-in"},i[1]?r.data=i[1]:r.data="",this.trigger("data",r);return}if(i=/^#EXT-X-SKIP:(.*)$/.exec(s),i&&i[1]){r={type:"tag",tagType:"skip"},r.attributes=Lt(i[1]),r.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(r.attributes["SKIPPED-SEGMENTS"]=parseInt(r.attributes["SKIPPED-SEGMENTS"],10)),r.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(r.attributes["RECENTLY-REMOVED-DATERANGES"]=r.attributes["RECENTLY-REMOVED-DATERANGES"].split(OC)),this.trigger("data",r);return}if(i=/^#EXT-X-PART:(.*)$/.exec(s),i&&i[1]){r={type:"tag",tagType:"part"},r.attributes=Lt(i[1]),["DURATION"].forEach(function(a){r.attributes.hasOwnProperty(a)&&(r.attributes[a]=parseFloat(r.attributes[a]))}),["INDEPENDENT","GAP"].forEach(function(a){r.attributes.hasOwnProperty(a)&&(r.attributes[a]=/YES/.test(r.attributes[a]))}),r.attributes.hasOwnProperty("BYTERANGE")&&(r.attributes.byterange=Xc(r.attributes.BYTERANGE)),this.trigger("data",r);return}if(i=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(s),i&&i[1]){r={type:"tag",tagType:"server-control"},r.attributes=Lt(i[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(a){r.attributes.hasOwnProperty(a)&&(r.attributes[a]=parseFloat(r.attributes[a]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(a){r.attributes.hasOwnProperty(a)&&(r.attributes[a]=/YES/.test(r.attributes[a]))}),this.trigger("data",r);return}if(i=/^#EXT-X-PART-INF:(.*)$/.exec(s),i&&i[1]){r={type:"tag",tagType:"part-inf"},r.attributes=Lt(i[1]),["PART-TARGET"].forEach(function(a){r.attributes.hasOwnProperty(a)&&(r.attributes[a]=parseFloat(r.attributes[a]))}),this.trigger("data",r);return}if(i=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(s),i&&i[1]){r={type:"tag",tagType:"preload-hint"},r.attributes=Lt(i[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(a){if(r.attributes.hasOwnProperty(a)){r.attributes[a]=parseInt(r.attributes[a],10);const o=a==="BYTERANGE-LENGTH"?"length":"offset";r.attributes.byterange=r.attributes.byterange||{},r.attributes.byterange[o]=r.attributes[a],delete r.attributes[a]}}),this.trigger("data",r);return}if(i=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(s),i&&i[1]){r={type:"tag",tagType:"rendition-report"},r.attributes=Lt(i[1]),["LAST-MSN","LAST-PART"].forEach(function(a){r.attributes.hasOwnProperty(a)&&(r.attributes[a]=parseInt(r.attributes[a],10))}),this.trigger("data",r);return}if(i=/^#EXT-X-DATERANGE:(.*)$/.exec(s),i&&i[1]){r={type:"tag",tagType:"daterange"},r.attributes=Lt(i[1]),["ID","CLASS"].forEach(function(o){r.attributes.hasOwnProperty(o)&&(r.attributes[o]=String(r.attributes[o]))}),["START-DATE","END-DATE"].forEach(function(o){r.attributes.hasOwnProperty(o)&&(r.attributes[o]=new Date(r.attributes[o]))}),["DURATION","PLANNED-DURATION"].forEach(function(o){r.attributes.hasOwnProperty(o)&&(r.attributes[o]=parseFloat(r.attributes[o]))}),["END-ON-NEXT"].forEach(function(o){r.attributes.hasOwnProperty(o)&&(r.attributes[o]=/YES/i.test(r.attributes[o]))}),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach(function(o){r.attributes.hasOwnProperty(o)&&(r.attributes[o]=r.attributes[o].toString(16))});const a=/^X-([A-Z]+-)+[A-Z]+$/;for(const o in r.attributes){if(!a.test(o))continue;const l=/[0-9A-Fa-f]{6}/g.test(r.attributes[o]),d=/^\d+(\.\d+)?$/.test(r.attributes[o]);r.attributes[o]=l?r.attributes[o].toString(16):d?parseFloat(r.attributes[o]):String(r.attributes[o])}this.trigger("data",r);return}if(i=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(s),i){this.trigger("data",{type:"tag",tagType:"independent-segments"});return}this.trigger("data",{type:"tag",data:s.slice(4)})})}addParser({expression:e,customType:i,dataParser:r,segment:n}){typeof r!="function"&&(r=s=>s),this.customParsers.push(s=>{if(e.exec(s))return this.trigger("data",{type:"custom",data:r(s),customType:i,segment:n}),!0})}addTagMapper({expression:e,map:i}){const r=n=>e.test(n)?i(n):n;this.tagMappers.push(r)}}const RC=t=>t.toLowerCase().replace(/-(\w)/g,e=>e[1].toUpperCase()),Ar=function(t){const e={};return Object.keys(t).forEach(function(i){e[RC(i)]=t[i]}),e},Kc=function(t){const{serverControl:e,targetDuration:i,partTargetDuration:r}=t;if(!e)return;const n="#EXT-X-SERVER-CONTROL",s="holdBack",a="partHoldBack",o=i&&i*3,l=r&&r*2;i&&!e.hasOwnProperty(s)&&(e[s]=o,this.trigger("info",{message:`${n} defaulting HOLD-BACK to targetDuration * 3 (${o}).`})),o&&e[s]<o&&(this.trigger("warn",{message:`${n} clamping HOLD-BACK (${e[s]}) to targetDuration * 3 (${o})`}),e[s]=o),r&&!e.hasOwnProperty(a)&&(e[a]=r*3,this.trigger("info",{message:`${n} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${e[a]}).`})),r&&e[a]<l&&(this.trigger("warn",{message:`${n} clamping PART-HOLD-BACK (${e[a]}) to partTargetDuration * 2 (${l}).`}),e[a]=l)};class MC extends Df{constructor(){super(),this.lineStream=new PC,this.parseStream=new NC,this.lineStream.pipe(this.parseStream);const e=this,i=[];let r={},n,s,a=!1;const o=function(){},l={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},d="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";let m=0;this.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};let y=0,v=0;const b={};this.on("end",()=>{r.uri||!r.parts&&!r.preloadHints||(!r.map&&n&&(r.map=n),!r.key&&s&&(r.key=s),!r.timeline&&typeof m=="number"&&(r.timeline=m),this.manifest.preloadSegment=r)}),this.parseStream.on("data",function(S){let A,T;({tag(){({version(){S.version&&(this.manifest.version=S.version)},"allow-cache"(){this.manifest.allowCache=S.allowed,"allowed"in S||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const _={};"length"in S&&(r.byterange=_,_.length=S.length,"offset"in S||(S.offset=y)),"offset"in S&&(r.byterange=_,_.offset=S.offset),y=_.offset+_.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),S.duration>0&&(r.duration=S.duration),S.duration===0&&(r.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=i},key(){if(!S.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(S.attributes.METHOD==="NONE"){s=null;return}if(!S.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(S.attributes.KEYFORMAT==="com.apple.streamingkeydelivery"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:S.attributes};return}if(S.attributes.KEYFORMAT==="com.microsoft.playready"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:S.attributes.URI};return}if(S.attributes.KEYFORMAT===d){if(["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(S.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(S.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),S.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(S.attributes.KEYID&&S.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:S.attributes.KEYFORMAT,keyId:S.attributes.KEYID.substring(2)},pssh:IC(S.attributes.URI.split(",")[1])};return}S.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),s={method:S.attributes.METHOD||"AES-128",uri:S.attributes.URI},typeof S.attributes.IV<"u"&&(s.iv=S.attributes.IV)},"media-sequence"(){if(!isFinite(S.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+S.number});return}this.manifest.mediaSequence=S.number},"discontinuity-sequence"(){if(!isFinite(S.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+S.number});return}this.manifest.discontinuitySequence=S.number,m=S.number},"playlist-type"(){if(!/VOD|EVENT/.test(S.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+S.playlist});return}this.manifest.playlistType=S.playlistType},map(){n={},S.uri&&(n.uri=S.uri),S.byterange&&(n.byterange=S.byterange),s&&(n.key=s)},"stream-inf"(){if(this.manifest.playlists=i,this.manifest.mediaGroups=this.manifest.mediaGroups||l,!S.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}r.attributes||(r.attributes={}),Ui(r.attributes,S.attributes)},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||l,!(S.attributes&&S.attributes.TYPE&&S.attributes["GROUP-ID"]&&S.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}const _=this.manifest.mediaGroups[S.attributes.TYPE];_[S.attributes["GROUP-ID"]]=_[S.attributes["GROUP-ID"]]||{},A=_[S.attributes["GROUP-ID"]],T={default:/yes/i.test(S.attributes.DEFAULT)},T.default?T.autoselect=!0:T.autoselect=/yes/i.test(S.attributes.AUTOSELECT),S.attributes.LANGUAGE&&(T.language=S.attributes.LANGUAGE),S.attributes.URI&&(T.uri=S.attributes.URI),S.attributes["INSTREAM-ID"]&&(T.instreamId=S.attributes["INSTREAM-ID"]),S.attributes.CHARACTERISTICS&&(T.characteristics=S.attributes.CHARACTERISTICS),S.attributes.FORCED&&(T.forced=/yes/i.test(S.attributes.FORCED)),A[S.attributes.NAME]=T},discontinuity(){m+=1,r.discontinuity=!0,this.manifest.discontinuityStarts.push(i.length)},"program-date-time"(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=S.dateTimeString,this.manifest.dateTimeObject=S.dateTimeObject),r.dateTimeString=S.dateTimeString,r.dateTimeObject=S.dateTimeObject},targetduration(){if(!isFinite(S.duration)||S.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+S.duration});return}this.manifest.targetDuration=S.duration,Kc.call(this,this.manifest)},start(){if(!S.attributes||isNaN(S.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:S.attributes["TIME-OFFSET"],precise:S.attributes.PRECISE}},"cue-out"(){r.cueOut=S.data},"cue-out-cont"(){r.cueOutCont=S.data},"cue-in"(){r.cueIn=S.data},skip(){this.manifest.skip=Ar(S.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",S.attributes,["SKIPPED-SEGMENTS"])},part(){a=!0;const _=this.manifest.segments.length,x=Ar(S.attributes);r.parts=r.parts||[],r.parts.push(x),x.byterange&&(x.byterange.hasOwnProperty("offset")||(x.byterange.offset=v),v=x.byterange.offset+x.byterange.length);const I=r.parts.length-1;this.warnOnMissingAttributes_(`#EXT-X-PART #${I} for segment #${_}`,S.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((D,O)=>{D.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${O} lacks required attribute(s): LAST-PART`})})},"server-control"(){const _=this.manifest.serverControl=Ar(S.attributes);_.hasOwnProperty("canBlockReload")||(_.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),Kc.call(this,this.manifest),_.canSkipDateranges&&!_.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){const _=this.manifest.segments.length,x=Ar(S.attributes),I=x.type&&x.type==="PART";r.preloadHints=r.preloadHints||[],r.preloadHints.push(x),x.byterange&&(x.byterange.hasOwnProperty("offset")||(x.byterange.offset=I?v:0,I&&(v=x.byterange.offset+x.byterange.length)));const D=r.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${D} for segment #${_}`,S.attributes,["TYPE","URI"]),!!x.type)for(let O=0;O<r.preloadHints.length-1;O++){const N=r.preloadHints[O];N.type&&N.type===x.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${D} for segment #${_} has the same TYPE ${x.type} as preload hint #${O}`})}},"rendition-report"(){const _=Ar(S.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(_);const x=this.manifest.renditionReports.length-1,I=["LAST-MSN","URI"];a&&I.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${x}`,S.attributes,I)},"part-inf"(){this.manifest.partInf=Ar(S.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",S.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),Kc.call(this,this.manifest)},daterange(){this.manifest.daterange=this.manifest.daterange||[],this.manifest.daterange.push(Ar(S.attributes));const _=this.manifest.daterange.length-1;this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${_}`,S.attributes,["ID","START-DATE"]);const x=this.manifest.daterange[_];x.endDate&&x.startDate&&new Date(x.endDate)<new Date(x.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),x.duration&&x.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),x.plannedDuration&&x.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});const I=!!x.endOnNext;if(I&&!x.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),I&&(x.duration||x.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),x.duration&&x.endDate){const D=x.startDate,O=D.setSeconds(D.getSeconds()+x.duration);this.manifest.daterange[_].endDate=new Date(O)}if(x&&!this.manifest.dateTimeString&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),!b[x.id])b[x.id]=x;else for(const D in b[x.id])if(b[x.id][D]!==x[D]){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes and same attribute values"});break}},"independent-segments"(){this.manifest.independentSegments=!0}}[S.tagType]||o).call(e)},uri(){r.uri=S.uri,i.push(r),this.manifest.targetDuration&&!("duration"in r)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),r.duration=this.manifest.targetDuration),s&&(r.key=s),r.timeline=m,n&&(r.map=n),v=0,r={}},comment(){},custom(){S.segment?(r.custom=r.custom||{},r.custom[S.customType]=S.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[S.customType]=S.data)}})[S.type].call(e)})}warnOnMissingAttributes_(e,i,r){const n=[];r.forEach(function(s){i.hasOwnProperty(s)||n.push(s)}),n.length&&this.trigger("warn",{message:`${e} lacks required attribute(s): ${n.join(", ")}`})}push(e){this.lineStream.push(e)}end(){this.lineStream.push(`
`),this.trigger("end")}addParser(e){this.parseStream.addParser(e)}addTagMapper(e){this.parseStream.addTagMapper(e)}}var jr={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},BC=["video","audio","text"],Wg=["Video","Audio","Text"],mv=function(e){return e&&e.replace(/avc1\.(\d+)\.(\d+)/i,function(i,r,n){var s=("00"+Number(r).toString(16)).slice(-2),a=("00"+Number(n).toString(16)).slice(-2);return"avc1."+s+"00"+a})},ii=function(e){e===void 0&&(e="");var i=e.split(","),r=[];return i.forEach(function(n){n=n.trim();var s;BC.forEach(function(a){var o=jr[a].exec(n.toLowerCase());if(!(!o||o.length<=1)){s=a;var l=n.substring(0,o[1].length),d=n.replace(l,"");r.push({type:l,details:d,mediaType:a})}}),s||r.push({type:n,details:"",mediaType:"unknown"})}),r},FC=function(e,i){if(!e.mediaGroups.AUDIO||!i)return null;var r=e.mediaGroups.AUDIO[i];if(!r)return null;for(var n in r){var s=r[n];if(s.default&&s.playlists)return ii(s.playlists[0].attributes.CODECS)}return null},gv=function(e){return e===void 0&&(e=""),jr.audio.test(e.trim().toLowerCase())},UC=function(e){return e===void 0&&(e=""),jr.text.test(e.trim().toLowerCase())},Ua=function(e){if(!(!e||typeof e!="string")){var i=e.toLowerCase().split(",").map(function(s){return mv(s.trim())}),r="video";i.length===1&&gv(i[0])?r="audio":i.length===1&&UC(i[0])&&(r="application");var n="mp4";return i.every(function(s){return jr.mp4.test(s)})?n="mp4":i.every(function(s){return jr.webm.test(s)})?n="webm":i.every(function(s){return jr.ogg.test(s)})&&(n="ogg"),r+"/"+n+';codecs="'+e+'"'}},hu=function(e){return e===void 0&&(e=""),k.MediaSource&&k.MediaSource.isTypeSupported&&k.MediaSource.isTypeSupported(Ua(e))||!1},Yc=function(e){return e===void 0&&(e=""),e.toLowerCase().split(",").every(function(i){i=i.trim();for(var r=0;r<Wg.length;r++){var n=Wg[r];if(jr["muxer"+n].test(i))return!0}return!1})},Xg="mp4a.40.2",jC="avc1.4d400d",$C=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,VC=/^application\/dash\+xml/i,yv=function(e){return $C.test(e)?"hls":VC.test(e)?"dash":e==="application/vnd.videojs.vhs+json"?"vhs-json":null},HC=function(e){return e.toString(2).length},qC=function(e){return Math.ceil(HC(e)/8)},_v=function(e){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},zC=function(e){return _v(e)},Y=function(e){return e instanceof Uint8Array?e:(!Array.isArray(e)&&!zC(e)&&!(e instanceof ArrayBuffer)&&(typeof e!="number"||typeof e=="number"&&e!==e?e=0:e=[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},ze=k.BigInt||Number,eh=[ze("0x1"),ze("0x100"),ze("0x10000"),ze("0x1000000"),ze("0x100000000"),ze("0x10000000000"),ze("0x1000000000000"),ze("0x100000000000000"),ze("0x10000000000000000")];(function(){var t=new Uint16Array([65484]),e=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return e[0]===255?"big":e[0]===204?"little":"unknown"})();var GC=function(e,i){var r=i===void 0?{}:i,n=r.signed,s=n===void 0?!1:n,a=r.le,o=a===void 0?!1:a;e=Y(e);var l=o?"reduce":"reduceRight",d=e[l]?e[l]:Array.prototype[l],m=d.call(e,function(v,b,S){var A=o?S:Math.abs(S+1-e.length);return v+ze(b)*eh[A]},ze(0));if(s){var y=eh[e.length]/ze(2)-ze(1);m=ze(m),m>y&&(m-=y,m-=y,m-=ze(2))}return Number(m)},WC=function(e,i){var r=i===void 0?{}:i,n=r.le,s=n===void 0?!1:n;(typeof e!="bigint"&&typeof e!="number"||typeof e=="number"&&e!==e)&&(e=0),e=ze(e);for(var a=qC(e),o=new Uint8Array(new ArrayBuffer(a)),l=0;l<a;l++){var d=s?l:Math.abs(l+1-o.length);o[d]=Number(e/eh[l]&ze(255)),e<0&&(o[d]=Math.abs(~o[d]),o[d]-=l===0?1:2)}return o},vv=function(e,i){if(typeof e!="string"&&e&&typeof e.toString=="function"&&(e=e.toString()),typeof e!="string")return new Uint8Array;i||(e=unescape(encodeURIComponent(e)));for(var r=new Uint8Array(e.length),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return r},XC=function(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];if(i=i.filter(function(o){return o&&(o.byteLength||o.length)&&typeof o!="string"}),i.length<=1)return Y(i[0]);var n=i.reduce(function(o,l,d){return o+(l.byteLength||l.length)},0),s=new Uint8Array(n),a=0;return i.forEach(function(o){o=Y(o),s.set(o,a),a+=o.byteLength}),s},we=function(e,i,r){var n=r===void 0?{}:r,s=n.offset,a=s===void 0?0:s,o=n.mask,l=o===void 0?[]:o;e=Y(e),i=Y(i);var d=i.every?i.every:Array.prototype.every;return i.length&&e.length-a>=i.length&&d.call(i,function(m,y){var v=l[y]?l[y]&e[a+y]:e[a+y];return m===v})},Kg="http://example.com",Af=function(e,i){if(/^[a-z]+:/i.test(i))return i;/^data:/.test(e)&&(e=k.location&&k.location.href||"");var r=typeof k.URL=="function",n=/^\/\//.test(e),s=!k.location&&!/\/\//i.test(e);if(r?e=new k.URL(e,k.location||Kg):/\/\//i.test(e)||(e=$u.buildAbsoluteURL(k.location&&k.location.href||"",e)),r){var a=new URL(i,e);return s?a.href.slice(Kg.length):n?a.href.slice(a.protocol.length):a.href}return $u.buildAbsoluteURL(e,i)},KC=function(e,i,r){i.forEach(function(n){for(var s in e.mediaGroups[n])for(var a in e.mediaGroups[n][s]){var o=e.mediaGroups[n][s][a];r(o,n,s,a)}})},YC=function(e){return k.atob?k.atob(e):Buffer.from(e,"base64").toString("binary")};function QC(t){for(var e=YC(t),i=new Uint8Array(e.length),r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}var Tr={},zi={};function JC(t,e,i){if(i===void 0&&(i=Array.prototype),t&&typeof i.find=="function")return i.find.call(t,e);for(var r=0;r<t.length;r++)if(Object.prototype.hasOwnProperty.call(t,r)){var n=t[r];if(e.call(void 0,n,r,t))return n}}function kf(t,e){return e===void 0&&(e=Object),e&&typeof e.freeze=="function"?e.freeze(t):t}function ZC(t,e){if(t===null||typeof t!="object")throw new TypeError("target is not an object");for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}var Tv=kf({HTML:"text/html",isHTML:function(t){return t===Tv.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),xv=kf({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(t){return t===xv.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});zi.assign=ZC;zi.find=JC;zi.freeze=kf;zi.MIME_TYPE=Tv;zi.NAMESPACE=xv;var Sv=zi,fi=Sv.find,ja=Sv.NAMESPACE;function ew(t){return t!==""}function tw(t){return t?t.split(/[\t\n\f\r ]+/).filter(ew):[]}function iw(t,e){return t.hasOwnProperty(e)||(t[e]=!0),t}function Yg(t){if(!t)return[];var e=tw(t);return Object.keys(e.reduce(iw,{}))}function rw(t){return function(e){return t&&t.indexOf(e)!==-1}}function eo(t,e){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}function St(t,e){var i=t.prototype;if(!(i instanceof e)){let n=function(){};var r=n;n.prototype=e.prototype,n=new n,eo(i,n),t.prototype=i=n}i.constructor!=t&&(typeof t!="function"&&console.error("unknown Class:"+t),i.constructor=t)}var Et={},Qt=Et.ELEMENT_NODE=1,zn=Et.ATTRIBUTE_NODE=2,Vu=Et.TEXT_NODE=3,Ev=Et.CDATA_SECTION_NODE=4,bv=Et.ENTITY_REFERENCE_NODE=5,nw=Et.ENTITY_NODE=6,Cv=Et.PROCESSING_INSTRUCTION_NODE=7,wv=Et.COMMENT_NODE=8,Dv=Et.DOCUMENT_NODE=9,Av=Et.DOCUMENT_TYPE_NODE=10,$i=Et.DOCUMENT_FRAGMENT_NODE=11,sw=Et.NOTATION_NODE=12,it={},qe={};it.INDEX_SIZE_ERR=(qe[1]="Index size error",1);it.DOMSTRING_SIZE_ERR=(qe[2]="DOMString size error",2);var yt=it.HIERARCHY_REQUEST_ERR=(qe[3]="Hierarchy request error",3);it.WRONG_DOCUMENT_ERR=(qe[4]="Wrong document",4);it.INVALID_CHARACTER_ERR=(qe[5]="Invalid character",5);it.NO_DATA_ALLOWED_ERR=(qe[6]="No data allowed",6);it.NO_MODIFICATION_ALLOWED_ERR=(qe[7]="No modification allowed",7);var kv=it.NOT_FOUND_ERR=(qe[8]="Not found",8);it.NOT_SUPPORTED_ERR=(qe[9]="Not supported",9);var Qg=it.INUSE_ATTRIBUTE_ERR=(qe[10]="Attribute in use",10);it.INVALID_STATE_ERR=(qe[11]="Invalid state",11);it.SYNTAX_ERR=(qe[12]="Syntax error",12);it.INVALID_MODIFICATION_ERR=(qe[13]="Invalid modification",13);it.NAMESPACE_ERR=(qe[14]="Invalid namespace",14);it.INVALID_ACCESS_ERR=(qe[15]="Invalid access",15);function Re(t,e){if(e instanceof Error)var i=e;else i=this,Error.call(this,qe[t]),this.message=qe[t],Error.captureStackTrace&&Error.captureStackTrace(this,Re);return i.code=t,e&&(this.message=this.message+": "+e),i}Re.prototype=Error.prototype;eo(it,Re);function Mi(){}Mi.prototype={length:0,item:function(t){return this[t]||null},toString:function(t,e){for(var i=[],r=0;r<this.length;r++)Tn(this[r],i,t,e);return i.join("")},filter:function(t){return Array.prototype.filter.call(this,t)},indexOf:function(t){return Array.prototype.indexOf.call(this,t)}};function Gn(t,e){this._node=t,this._refresh=e,If(this)}function If(t){var e=t._node._inc||t._node.ownerDocument._inc;if(t._inc!=e){var i=t._refresh(t._node);$v(t,"length",i.length),eo(i,t),t._inc=e}}Gn.prototype.item=function(t){return If(this),this[t]};St(Gn,Mi);function Hu(){}function Iv(t,e){for(var i=t.length;i--;)if(t[i]===e)return i}function Jg(t,e,i,r){if(r?e[Iv(e,r)]=i:e[e.length++]=i,t){i.ownerElement=t;var n=t.ownerDocument;n&&(r&&Lv(n,t,r),aw(n,t,i))}}function Zg(t,e,i){var r=Iv(e,i);if(r>=0){for(var n=e.length-1;r<n;)e[r]=e[++r];if(e.length=n,t){var s=t.ownerDocument;s&&(Lv(s,t,i),i.ownerElement=null)}}else throw new Re(kv,new Error(t.tagName+"@"+i))}Hu.prototype={length:0,item:Mi.prototype.item,getNamedItem:function(t){for(var e=this.length;e--;){var i=this[e];if(i.nodeName==t)return i}},setNamedItem:function(t){var e=t.ownerElement;if(e&&e!=this._ownerElement)throw new Re(Qg);var i=this.getNamedItem(t.nodeName);return Jg(this._ownerElement,this,t,i),i},setNamedItemNS:function(t){var e=t.ownerElement,i;if(e&&e!=this._ownerElement)throw new Re(Qg);return i=this.getNamedItemNS(t.namespaceURI,t.localName),Jg(this._ownerElement,this,t,i),i},removeNamedItem:function(t){var e=this.getNamedItem(t);return Zg(this._ownerElement,this,e),e},removeNamedItemNS:function(t,e){var i=this.getNamedItemNS(t,e);return Zg(this._ownerElement,this,i),i},getNamedItemNS:function(t,e){for(var i=this.length;i--;){var r=this[i];if(r.localName==e&&r.namespaceURI==t)return r}return null}};function Pv(){}Pv.prototype={hasFeature:function(t,e){return!0},createDocument:function(t,e,i){var r=new to;if(r.implementation=this,r.childNodes=new Mi,r.doctype=i||null,i&&r.appendChild(i),e){var n=r.createElementNS(t,e);r.appendChild(n)}return r},createDocumentType:function(t,e,i){var r=new Il;return r.name=t,r.nodeName=t,r.publicId=e||"",r.systemId=i||"",r}};function fe(){}fe.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(t,e){return qu(this,t,e)},replaceChild:function(t,e){qu(this,t,e,Rv),e&&this.removeChild(e)},removeChild:function(t){return Nv(this,t)},appendChild:function(t){return this.insertBefore(t,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(t){return th(this.ownerDocument||this,this,t)},normalize:function(){for(var t=this.firstChild;t;){var e=t.nextSibling;e&&e.nodeType==Vu&&t.nodeType==Vu?(this.removeChild(e),t.appendData(e.data)):(t.normalize(),t=e)}},isSupported:function(t,e){return this.ownerDocument.implementation.hasFeature(t,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(t){for(var e=this;e;){var i=e._nsMap;if(i){for(var r in i)if(Object.prototype.hasOwnProperty.call(i,r)&&i[r]===t)return r}e=e.nodeType==zn?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(t){for(var e=this;e;){var i=e._nsMap;if(i&&Object.prototype.hasOwnProperty.call(i,t))return i[t];e=e.nodeType==zn?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(t){var e=this.lookupPrefix(t);return e==null}};function Ov(t){return t=="<"&&"&lt;"||t==">"&&"&gt;"||t=="&"&&"&amp;"||t=='"'&&"&quot;"||"&#"+t.charCodeAt()+";"}eo(Et,fe);eo(Et,fe.prototype);function $a(t,e){if(e(t))return!0;if(t=t.firstChild)do if($a(t,e))return!0;while(t=t.nextSibling)}function to(){this.ownerDocument=this}function aw(t,e,i){t&&t._inc++;var r=i.namespaceURI;r===ja.XMLNS&&(e._nsMap[i.prefix?i.localName:""]=i.value)}function Lv(t,e,i,r){t&&t._inc++;var n=i.namespaceURI;n===ja.XMLNS&&delete e._nsMap[i.prefix?i.localName:""]}function Pf(t,e,i){if(t&&t._inc){t._inc++;var r=e.childNodes;if(i)r[r.length++]=i;else{for(var n=e.firstChild,s=0;n;)r[s++]=n,n=n.nextSibling;r.length=s,delete r[r.length]}}}function Nv(t,e){var i=e.previousSibling,r=e.nextSibling;return i?i.nextSibling=r:t.firstChild=r,r?r.previousSibling=i:t.lastChild=i,e.parentNode=null,e.previousSibling=null,e.nextSibling=null,Pf(t.ownerDocument,t),e}function ow(t){return t&&(t.nodeType===fe.DOCUMENT_NODE||t.nodeType===fe.DOCUMENT_FRAGMENT_NODE||t.nodeType===fe.ELEMENT_NODE)}function uw(t){return t&&(pi(t)||Of(t)||Vi(t)||t.nodeType===fe.DOCUMENT_FRAGMENT_NODE||t.nodeType===fe.COMMENT_NODE||t.nodeType===fe.PROCESSING_INSTRUCTION_NODE)}function Vi(t){return t&&t.nodeType===fe.DOCUMENT_TYPE_NODE}function pi(t){return t&&t.nodeType===fe.ELEMENT_NODE}function Of(t){return t&&t.nodeType===fe.TEXT_NODE}function e0(t,e){var i=t.childNodes||[];if(fi(i,pi)||Vi(e))return!1;var r=fi(i,Vi);return!(e&&r&&i.indexOf(r)>i.indexOf(e))}function t0(t,e){var i=t.childNodes||[];function r(s){return pi(s)&&s!==e}if(fi(i,r))return!1;var n=fi(i,Vi);return!(e&&n&&i.indexOf(n)>i.indexOf(e))}function lw(t,e,i){if(!ow(t))throw new Re(yt,"Unexpected parent node type "+t.nodeType);if(i&&i.parentNode!==t)throw new Re(kv,"child not in parent");if(!uw(e)||Vi(e)&&t.nodeType!==fe.DOCUMENT_NODE)throw new Re(yt,"Unexpected node type "+e.nodeType+" for parent node type "+t.nodeType)}function cw(t,e,i){var r=t.childNodes||[],n=e.childNodes||[];if(e.nodeType===fe.DOCUMENT_FRAGMENT_NODE){var s=n.filter(pi);if(s.length>1||fi(n,Of))throw new Re(yt,"More than one element or text in fragment");if(s.length===1&&!e0(t,i))throw new Re(yt,"Element in fragment can not be inserted before doctype")}if(pi(e)&&!e0(t,i))throw new Re(yt,"Only one element can be added and only after doctype");if(Vi(e)){if(fi(r,Vi))throw new Re(yt,"Only one doctype is allowed");var a=fi(r,pi);if(i&&r.indexOf(a)<r.indexOf(i))throw new Re(yt,"Doctype can only be inserted before an element");if(!i&&a)throw new Re(yt,"Doctype can not be appended since element is present")}}function Rv(t,e,i){var r=t.childNodes||[],n=e.childNodes||[];if(e.nodeType===fe.DOCUMENT_FRAGMENT_NODE){var s=n.filter(pi);if(s.length>1||fi(n,Of))throw new Re(yt,"More than one element or text in fragment");if(s.length===1&&!t0(t,i))throw new Re(yt,"Element in fragment can not be inserted before doctype")}if(pi(e)&&!t0(t,i))throw new Re(yt,"Only one element can be added and only after doctype");if(Vi(e)){let l=function(d){return Vi(d)&&d!==i};var o=l;if(fi(r,l))throw new Re(yt,"Only one doctype is allowed");var a=fi(r,pi);if(i&&r.indexOf(a)<r.indexOf(i))throw new Re(yt,"Doctype can only be inserted before an element")}}function qu(t,e,i,r){lw(t,e,i),t.nodeType===fe.DOCUMENT_NODE&&(r||cw)(t,e,i);var n=e.parentNode;if(n&&n.removeChild(e),e.nodeType===$i){var s=e.firstChild;if(s==null)return e;var a=e.lastChild}else s=a=e;var o=i?i.previousSibling:t.lastChild;s.previousSibling=o,a.nextSibling=i,o?o.nextSibling=s:t.firstChild=s,i==null?t.lastChild=a:i.previousSibling=a;do s.parentNode=t;while(s!==a&&(s=s.nextSibling));return Pf(t.ownerDocument||t,t),e.nodeType==$i&&(e.firstChild=e.lastChild=null),e}function dw(t,e){return e.parentNode&&e.parentNode.removeChild(e),e.parentNode=t,e.previousSibling=t.lastChild,e.nextSibling=null,e.previousSibling?e.previousSibling.nextSibling=e:t.firstChild=e,t.lastChild=e,Pf(t.ownerDocument,t,e),e}to.prototype={nodeName:"#document",nodeType:Dv,doctype:null,documentElement:null,_inc:1,insertBefore:function(t,e){if(t.nodeType==$i){for(var i=t.firstChild;i;){var r=i.nextSibling;this.insertBefore(i,e),i=r}return t}return qu(this,t,e),t.ownerDocument=this,this.documentElement===null&&t.nodeType===Qt&&(this.documentElement=t),t},removeChild:function(t){return this.documentElement==t&&(this.documentElement=null),Nv(this,t)},replaceChild:function(t,e){qu(this,t,e,Rv),t.ownerDocument=this,e&&this.removeChild(e),pi(t)&&(this.documentElement=t)},importNode:function(t,e){return jv(this,t,e)},getElementById:function(t){var e=null;return $a(this.documentElement,function(i){if(i.nodeType==Qt&&i.getAttribute("id")==t)return e=i,!0}),e},getElementsByClassName:function(t){var e=Yg(t);return new Gn(this,function(i){var r=[];return e.length>0&&$a(i.documentElement,function(n){if(n!==i&&n.nodeType===Qt){var s=n.getAttribute("class");if(s){var a=t===s;if(!a){var o=Yg(s);a=e.every(rw(o))}a&&r.push(n)}}}),r})},createElement:function(t){var e=new Gr;e.ownerDocument=this,e.nodeName=t,e.tagName=t,e.localName=t,e.childNodes=new Mi;var i=e.attributes=new Hu;return i._ownerElement=e,e},createDocumentFragment:function(){var t=new Pl;return t.ownerDocument=this,t.childNodes=new Mi,t},createTextNode:function(t){var e=new Lf;return e.ownerDocument=this,e.appendData(t),e},createComment:function(t){var e=new Nf;return e.ownerDocument=this,e.appendData(t),e},createCDATASection:function(t){var e=new Rf;return e.ownerDocument=this,e.appendData(t),e},createProcessingInstruction:function(t,e){var i=new Bf;return i.ownerDocument=this,i.tagName=i.target=t,i.nodeValue=i.data=e,i},createAttribute:function(t){var e=new zu;return e.ownerDocument=this,e.name=t,e.nodeName=t,e.localName=t,e.specified=!0,e},createEntityReference:function(t){var e=new Mf;return e.ownerDocument=this,e.nodeName=t,e},createElementNS:function(t,e){var i=new Gr,r=e.split(":"),n=i.attributes=new Hu;return i.childNodes=new Mi,i.ownerDocument=this,i.nodeName=e,i.tagName=e,i.namespaceURI=t,r.length==2?(i.prefix=r[0],i.localName=r[1]):i.localName=e,n._ownerElement=i,i},createAttributeNS:function(t,e){var i=new zu,r=e.split(":");return i.ownerDocument=this,i.nodeName=e,i.name=e,i.namespaceURI=t,i.specified=!0,r.length==2?(i.prefix=r[0],i.localName=r[1]):i.localName=e,i}};St(to,fe);function Gr(){this._nsMap={}}Gr.prototype={nodeType:Qt,hasAttribute:function(t){return this.getAttributeNode(t)!=null},getAttribute:function(t){var e=this.getAttributeNode(t);return e&&e.value||""},getAttributeNode:function(t){return this.attributes.getNamedItem(t)},setAttribute:function(t,e){var i=this.ownerDocument.createAttribute(t);i.value=i.nodeValue=""+e,this.setAttributeNode(i)},removeAttribute:function(t){var e=this.getAttributeNode(t);e&&this.removeAttributeNode(e)},appendChild:function(t){return t.nodeType===$i?this.insertBefore(t,null):dw(this,t)},setAttributeNode:function(t){return this.attributes.setNamedItem(t)},setAttributeNodeNS:function(t){return this.attributes.setNamedItemNS(t)},removeAttributeNode:function(t){return this.attributes.removeNamedItem(t.nodeName)},removeAttributeNS:function(t,e){var i=this.getAttributeNodeNS(t,e);i&&this.removeAttributeNode(i)},hasAttributeNS:function(t,e){return this.getAttributeNodeNS(t,e)!=null},getAttributeNS:function(t,e){var i=this.getAttributeNodeNS(t,e);return i&&i.value||""},setAttributeNS:function(t,e,i){var r=this.ownerDocument.createAttributeNS(t,e);r.value=r.nodeValue=""+i,this.setAttributeNode(r)},getAttributeNodeNS:function(t,e){return this.attributes.getNamedItemNS(t,e)},getElementsByTagName:function(t){return new Gn(this,function(e){var i=[];return $a(e,function(r){r!==e&&r.nodeType==Qt&&(t==="*"||r.tagName==t)&&i.push(r)}),i})},getElementsByTagNameNS:function(t,e){return new Gn(this,function(i){var r=[];return $a(i,function(n){n!==i&&n.nodeType===Qt&&(t==="*"||n.namespaceURI===t)&&(e==="*"||n.localName==e)&&r.push(n)}),r})}};to.prototype.getElementsByTagName=Gr.prototype.getElementsByTagName;to.prototype.getElementsByTagNameNS=Gr.prototype.getElementsByTagNameNS;St(Gr,fe);function zu(){}zu.prototype.nodeType=zn;St(zu,fe);function io(){}io.prototype={data:"",substringData:function(t,e){return this.data.substring(t,t+e)},appendData:function(t){t=this.data+t,this.nodeValue=this.data=t,this.length=t.length},insertData:function(t,e){this.replaceData(t,0,e)},appendChild:function(t){throw new Error(qe[yt])},deleteData:function(t,e){this.replaceData(t,e,"")},replaceData:function(t,e,i){var r=this.data.substring(0,t),n=this.data.substring(t+e);i=r+i+n,this.nodeValue=this.data=i,this.length=i.length}};St(io,fe);function Lf(){}Lf.prototype={nodeName:"#text",nodeType:Vu,splitText:function(t){var e=this.data,i=e.substring(t);e=e.substring(0,t),this.data=this.nodeValue=e,this.length=e.length;var r=this.ownerDocument.createTextNode(i);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}};St(Lf,io);function Nf(){}Nf.prototype={nodeName:"#comment",nodeType:wv};St(Nf,io);function Rf(){}Rf.prototype={nodeName:"#cdata-section",nodeType:Ev};St(Rf,io);function Il(){}Il.prototype.nodeType=Av;St(Il,fe);function Mv(){}Mv.prototype.nodeType=sw;St(Mv,fe);function Bv(){}Bv.prototype.nodeType=nw;St(Bv,fe);function Mf(){}Mf.prototype.nodeType=bv;St(Mf,fe);function Pl(){}Pl.prototype.nodeName="#document-fragment";Pl.prototype.nodeType=$i;St(Pl,fe);function Bf(){}Bf.prototype.nodeType=Cv;St(Bf,fe);function Fv(){}Fv.prototype.serializeToString=function(t,e,i){return Uv.call(t,e,i)};fe.prototype.toString=Uv;function Uv(t,e){var i=[],r=this.nodeType==9&&this.documentElement||this,n=r.prefix,s=r.namespaceURI;if(s&&n==null){var n=r.lookupPrefix(s);if(n==null)var a=[{namespace:s,prefix:null}]}return Tn(this,i,t,e,a),i.join("")}function i0(t,e,i){var r=t.prefix||"",n=t.namespaceURI;if(!n||r==="xml"&&n===ja.XML||n===ja.XMLNS)return!1;for(var s=i.length;s--;){var a=i[s];if(a.prefix===r)return a.namespace!==n}return!0}function Qc(t,e,i){t.push(" ",e,'="',i.replace(/[<>&"\t\n\r]/g,Ov),'"')}function Tn(t,e,i,r,n){if(n||(n=[]),r)if(t=r(t),t){if(typeof t=="string"){e.push(t);return}}else return;switch(t.nodeType){case Qt:var s=t.attributes,a=s.length,_=t.firstChild,o=t.tagName;i=ja.isHTML(t.namespaceURI)||i;var l=o;if(!i&&!t.prefix&&t.namespaceURI){for(var d,m=0;m<s.length;m++)if(s.item(m).name==="xmlns"){d=s.item(m).value;break}if(!d)for(var y=n.length-1;y>=0;y--){var v=n[y];if(v.prefix===""&&v.namespace===t.namespaceURI){d=v.namespace;break}}if(d!==t.namespaceURI)for(var y=n.length-1;y>=0;y--){var v=n[y];if(v.namespace===t.namespaceURI){v.prefix&&(l=v.prefix+":"+o);break}}}e.push("<",l);for(var b=0;b<a;b++){var S=s.item(b);S.prefix=="xmlns"?n.push({prefix:S.localName,namespace:S.value}):S.nodeName=="xmlns"&&n.push({prefix:"",namespace:S.value})}for(var b=0;b<a;b++){var S=s.item(b);if(i0(S,i,n)){var A=S.prefix||"",T=S.namespaceURI;Qc(e,A?"xmlns:"+A:"xmlns",T),n.push({prefix:A,namespace:T})}Tn(S,e,i,r,n)}if(o===l&&i0(t,i,n)){var A=t.prefix||"",T=t.namespaceURI;Qc(e,A?"xmlns:"+A:"xmlns",T),n.push({prefix:A,namespace:T})}if(_||i&&!/^(?:meta|link|img|br|hr|input)$/i.test(o)){if(e.push(">"),i&&/^script$/i.test(o))for(;_;)_.data?e.push(_.data):Tn(_,e,i,r,n.slice()),_=_.nextSibling;else for(;_;)Tn(_,e,i,r,n.slice()),_=_.nextSibling;e.push("</",l,">")}else e.push("/>");return;case Dv:case $i:for(var _=t.firstChild;_;)Tn(_,e,i,r,n.slice()),_=_.nextSibling;return;case zn:return Qc(e,t.name,t.value);case Vu:return e.push(t.data.replace(/[<&>]/g,Ov));case Ev:return e.push("<![CDATA[",t.data,"]]>");case wv:return e.push("<!--",t.data,"-->");case Av:var x=t.publicId,I=t.systemId;if(e.push("<!DOCTYPE ",t.name),x)e.push(" PUBLIC ",x),I&&I!="."&&e.push(" ",I),e.push(">");else if(I&&I!=".")e.push(" SYSTEM ",I,">");else{var D=t.internalSubset;D&&e.push(" [",D,"]"),e.push(">")}return;case Cv:return e.push("<?",t.target," ",t.data,"?>");case bv:return e.push("&",t.nodeName,";");default:e.push("??",t.nodeName)}}function jv(t,e,i){var r;switch(e.nodeType){case Qt:r=e.cloneNode(!1),r.ownerDocument=t;case $i:break;case zn:i=!0;break}if(r||(r=e.cloneNode(!1)),r.ownerDocument=t,r.parentNode=null,i)for(var n=e.firstChild;n;)r.appendChild(jv(t,n,i)),n=n.nextSibling;return r}function th(t,e,i){var r=new e.constructor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var s=e[n];typeof s!="object"&&s!=r[n]&&(r[n]=s)}switch(e.childNodes&&(r.childNodes=new Mi),r.ownerDocument=t,r.nodeType){case Qt:var a=e.attributes,o=r.attributes=new Hu,l=a.length;o._ownerElement=r;for(var d=0;d<l;d++)r.setAttributeNode(th(t,a.item(d),!0));break;case zn:i=!0}if(i)for(var m=e.firstChild;m;)r.appendChild(th(t,m,i)),m=m.nextSibling;return r}function $v(t,e,i){t[e]=i}try{if(Object.defineProperty){let t=function(e){switch(e.nodeType){case Qt:case $i:var i=[];for(e=e.firstChild;e;)e.nodeType!==7&&e.nodeType!==8&&i.push(t(e)),e=e.nextSibling;return i.join("");default:return e.nodeValue}};var getTextContent=t;Object.defineProperty(Gn.prototype,"length",{get:function(){return If(this),this.$$length}}),Object.defineProperty(fe.prototype,"textContent",{get:function(){return t(this)},set:function(e){switch(this.nodeType){case Qt:case $i:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),$v=function(e,i,r){e["$$"+i]=r}}}catch{}Tr.DocumentType=Il;Tr.DOMException=Re;Tr.DOMImplementation=Pv;Tr.Element=Gr;Tr.Node=fe;Tr.NodeList=Mi;Tr.XMLSerializer=Fv;var Ol={},Vv={};(function(t){var e=zi.freeze;t.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=e({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),t.entityMap=t.HTML_ENTITIES})(Vv);var Ff={},Va=zi.NAMESPACE,ih=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,r0=new RegExp("[\\-\\.0-9"+ih.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),n0=new RegExp("^"+ih.source+r0.source+"*(?::"+ih.source+r0.source+"*)?$"),Hs=0,Ki=1,sn=2,qs=3,an=4,on=5,zs=6,Wo=7;function Wn(t,e){this.message=t,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,Wn)}Wn.prototype=new Error;Wn.prototype.name=Wn.name;function Hv(){}Hv.prototype={parse:function(t,e,i){var r=this.domBuilder;r.startDocument(),qv(e,e={}),hw(t,e,i,r,this.errorHandler),r.endDocument()}};function hw(t,e,i,r,n){function s(ae){if(ae>65535){ae-=65536;var Te=55296+(ae>>10),bt=56320+(ae&1023);return String.fromCharCode(Te,bt)}else return String.fromCharCode(ae)}function a(ae){var Te=ae.slice(1,-1);return Object.hasOwnProperty.call(i,Te)?i[Te]:Te.charAt(0)==="#"?s(parseInt(Te.substr(1).replace("x","0x"))):(n.error("entity not found:"+ae),ae)}function o(ae){if(ae>A){var Te=t.substring(A,ae).replace(/&#?\w+;/g,a);v&&l(A),r.characters(Te,0,ae-A),A=ae}}function l(ae,Te){for(;ae>=m&&(Te=y.exec(t));)d=Te.index,m=d+Te[0].length,v.lineNumber++;v.columnNumber=ae-d+1}for(var d=0,m=0,y=/.*(?:\r\n?|\n)|.*$/g,v=r.locator,b=[{currentNSMap:e}],S={},A=0;;){try{var T=t.indexOf("<",A);if(T<0){if(!t.substr(A).match(/^\s*$/)){var _=r.doc,x=_.createTextNode(t.substr(A));_.appendChild(x),r.currentElement=x}return}switch(T>A&&o(T),t.charAt(T+1)){case"/":var oe=t.indexOf(">",T+3),I=t.substring(T+2,oe).replace(/[ \t\n\r]+$/g,""),D=b.pop();oe<0?(I=t.substring(T+2).replace(/[\s<].*/,""),n.error("end tag name: "+I+" is not complete:"+D.tagName),oe=T+1+I.length):I.match(/\s</)&&(I=I.replace(/[\s<].*/,""),n.error("end tag name: "+I+" maybe not complete"),oe=T+1+I.length);var O=D.localNSMap,N=D.tagName==I,U=N||D.tagName&&D.tagName.toLowerCase()==I.toLowerCase();if(U){if(r.endElement(D.uri,D.localName,I),O)for(var H in O)Object.prototype.hasOwnProperty.call(O,H)&&r.endPrefixMapping(H);N||n.fatalError("end tag name: "+I+" is not match the current start tagName:"+D.tagName)}else b.push(D);oe++;break;case"?":v&&l(T),oe=yw(t,T,r);break;case"!":v&&l(T),oe=gw(t,T,r,n);break;default:v&&l(T);var j=new zv,ee=b[b.length-1].currentNSMap,oe=fw(t,T,j,ee,a,n),se=j.length;if(!j.closed&&mw(t,oe,j.tagName,S)&&(j.closed=!0,i.nbsp||n.warning("unclosed xml attribute")),v&&se){for(var z=s0(v,{}),ue=0;ue<se;ue++){var Oe=j[ue];l(Oe.offset),Oe.locator=s0(v,{})}r.locator=z,a0(j,r,ee)&&b.push(j),r.locator=v}else a0(j,r,ee)&&b.push(j);Va.isHTML(j.uri)&&!j.closed?oe=pw(t,oe,j.tagName,a,r):oe++}}catch(ae){if(ae instanceof Wn)throw ae;n.error("element parse error: "+ae),oe=-1}oe>A?A=oe:o(Math.max(T,A)+1)}}function s0(t,e){return e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber,e}function fw(t,e,i,r,n,s){function a(v,b,S){i.attributeNames.hasOwnProperty(v)&&s.fatalError("Attribute "+v+" redefined"),i.addValue(v,b.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,n),S)}for(var o,l,d=++e,m=Hs;;){var y=t.charAt(d);switch(y){case"=":if(m===Ki)o=t.slice(e,d),m=qs;else if(m===sn)m=qs;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(m===qs||m===Ki)if(m===Ki&&(s.warning('attribute value must after "="'),o=t.slice(e,d)),e=d+1,d=t.indexOf(y,e),d>0)l=t.slice(e,d),a(o,l,e-1),m=on;else throw new Error("attribute value no end '"+y+"' match");else if(m==an)l=t.slice(e,d),a(o,l,e),s.warning('attribute "'+o+'" missed start quot('+y+")!!"),e=d+1,m=on;else throw new Error('attribute value must after "="');break;case"/":switch(m){case Hs:i.setTagName(t.slice(e,d));case on:case zs:case Wo:m=Wo,i.closed=!0;case an:case Ki:break;case sn:i.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return s.error("unexpected end of input"),m==Hs&&i.setTagName(t.slice(e,d)),d;case">":switch(m){case Hs:i.setTagName(t.slice(e,d));case on:case zs:case Wo:break;case an:case Ki:l=t.slice(e,d),l.slice(-1)==="/"&&(i.closed=!0,l=l.slice(0,-1));case sn:m===sn&&(l=o),m==an?(s.warning('attribute "'+l+'" missed quot(")!'),a(o,l,e)):((!Va.isHTML(r[""])||!l.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+l+'" missed value!! "'+l+'" instead!!'),a(l,l,e));break;case qs:throw new Error("attribute value missed!!")}return d;case"":y=" ";default:if(y<=" ")switch(m){case Hs:i.setTagName(t.slice(e,d)),m=zs;break;case Ki:o=t.slice(e,d),m=sn;break;case an:var l=t.slice(e,d);s.warning('attribute "'+l+'" missed quot(")!!'),a(o,l,e);case on:m=zs;break}else switch(m){case sn:i.tagName,(!Va.isHTML(r[""])||!o.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+o+'" missed value!! "'+o+'" instead2!!'),a(o,o,e),e=d,m=Ki;break;case on:s.warning('attribute space is required"'+o+'"!!');case zs:m=Ki,e=d;break;case qs:m=an,e=d;break;case Wo:throw new Error("elements closed character '/' and '>' must be connected to")}}d++}}function a0(t,e,i){for(var r=t.tagName,n=null,y=t.length;y--;){var s=t[y],a=s.qName,o=s.value,v=a.indexOf(":");if(v>0)var l=s.prefix=a.slice(0,v),d=a.slice(v+1),m=l==="xmlns"&&d;else d=a,l=null,m=a==="xmlns"&&"";s.localName=d,m!==!1&&(n==null&&(n={},qv(i,i={})),i[m]=n[m]=o,s.uri=Va.XMLNS,e.startPrefixMapping(m,o))}for(var y=t.length;y--;){s=t[y];var l=s.prefix;l&&(l==="xml"&&(s.uri=Va.XML),l!=="xmlns"&&(s.uri=i[l||""]))}var v=r.indexOf(":");v>0?(l=t.prefix=r.slice(0,v),d=t.localName=r.slice(v+1)):(l=null,d=t.localName=r);var b=t.uri=i[l||""];if(e.startElement(b,d,r,t),t.closed){if(e.endElement(b,d,r),n)for(l in n)Object.prototype.hasOwnProperty.call(n,l)&&e.endPrefixMapping(l)}else return t.currentNSMap=i,t.localNSMap=n,!0}function pw(t,e,i,r,n){if(/^(?:script|textarea)$/i.test(i)){var s=t.indexOf("</"+i+">",e),a=t.substring(e+1,s);if(/[&<]/.test(a))return/^script$/i.test(i)?(n.characters(a,0,a.length),s):(a=a.replace(/&#?\w+;/g,r),n.characters(a,0,a.length),s)}return e+1}function mw(t,e,i,r){var n=r[i];return n==null&&(n=t.lastIndexOf("</"+i+">"),n<e&&(n=t.lastIndexOf("</"+i)),r[i]=n),n<e}function qv(t,e){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}function gw(t,e,i,r){var n=t.charAt(e+2);switch(n){case"-":if(t.charAt(e+3)==="-"){var s=t.indexOf("-->",e+4);return s>e?(i.comment(t,e+4,s-e-4),s+3):(r.error("Unclosed comment"),-1)}else return-1;default:if(t.substr(e+3,6)=="CDATA["){var s=t.indexOf("]]>",e+9);return i.startCDATA(),i.characters(t,e+9,s-e-9),i.endCDATA(),s+3}var a=_w(t,e),o=a.length;if(o>1&&/!doctype/i.test(a[0][0])){var l=a[1][0],d=!1,m=!1;o>3&&(/^public$/i.test(a[2][0])?(d=a[3][0],m=o>4&&a[4][0]):/^system$/i.test(a[2][0])&&(m=a[3][0]));var y=a[o-1];return i.startDTD(l,d,m),i.endDTD(),y.index+y[0].length}}return-1}function yw(t,e,i){var r=t.indexOf("?>",e);if(r){var n=t.substring(e,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return n?(n[0].length,i.processingInstruction(n[1],n[2]),r+2):-1}return-1}function zv(){this.attributeNames={}}zv.prototype={setTagName:function(t){if(!n0.test(t))throw new Error("invalid tagName:"+t);this.tagName=t},addValue:function(t,e,i){if(!n0.test(t))throw new Error("invalid attribute:"+t);this.attributeNames[t]=this.length,this[this.length++]={qName:t,value:e,offset:i}},length:0,getLocalName:function(t){return this[t].localName},getLocator:function(t){return this[t].locator},getQName:function(t){return this[t].qName},getURI:function(t){return this[t].uri},getValue:function(t){return this[t].value}};function _w(t,e){var i,r=[],n=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(n.lastIndex=e,n.exec(t);i=n.exec(t);)if(r.push(i),i[1])return r}Ff.XMLReader=Hv;Ff.ParseError=Wn;var vw=zi,Tw=Tr,o0=Vv,Gv=Ff,xw=Tw.DOMImplementation,u0=vw.NAMESPACE,Sw=Gv.ParseError,Ew=Gv.XMLReader;function Wv(t){return t.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function Xv(t){this.options=t||{locator:{}}}Xv.prototype.parseFromString=function(t,e){var i=this.options,r=new Ew,n=i.domBuilder||new ro,s=i.errorHandler,a=i.locator,o=i.xmlns||{},l=/\/x?html?$/.test(e),d=l?o0.HTML_ENTITIES:o0.XML_ENTITIES;a&&n.setDocumentLocator(a),r.errorHandler=bw(s,n,a),r.domBuilder=i.domBuilder||n,l&&(o[""]=u0.HTML),o.xml=o.xml||u0.XML;var m=i.normalizeLineEndings||Wv;return t&&typeof t=="string"?r.parse(m(t),o,d):r.errorHandler.error("invalid doc source"),n.doc};function bw(t,e,i){if(!t){if(e instanceof ro)return e;t=e}var r={},n=t instanceof Function;i=i||{};function s(a){var o=t[a];!o&&n&&(o=t.length==2?function(l){t(a,l)}:t),r[a]=o&&function(l){o("[xmldom "+a+"]	"+l+rh(i))}||function(){}}return s("warning"),s("error"),s("fatalError"),r}function ro(){this.cdata=!1}function un(t,e){e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber}ro.prototype={startDocument:function(){this.doc=new xw().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(t,e,i,r){var n=this.doc,s=n.createElementNS(t,i||e),a=r.length;Xo(this,s),this.currentElement=s,this.locator&&un(this.locator,s);for(var o=0;o<a;o++){var t=r.getURI(o),l=r.getValue(o),i=r.getQName(o),d=n.createAttributeNS(t,i);this.locator&&un(r.getLocator(o),d),d.value=d.nodeValue=l,s.setAttributeNode(d)}},endElement:function(t,e,i){var r=this.currentElement;r.tagName,this.currentElement=r.parentNode},startPrefixMapping:function(t,e){},endPrefixMapping:function(t){},processingInstruction:function(t,e){var i=this.doc.createProcessingInstruction(t,e);this.locator&&un(this.locator,i),Xo(this,i)},ignorableWhitespace:function(t,e,i){},characters:function(t,e,i){if(t=l0.apply(this,arguments),t){if(this.cdata)var r=this.doc.createCDATASection(t);else var r=this.doc.createTextNode(t);this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(t)&&this.doc.appendChild(r),this.locator&&un(this.locator,r)}},skippedEntity:function(t){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(t){(this.locator=t)&&(t.lineNumber=0)},comment:function(t,e,i){t=l0.apply(this,arguments);var r=this.doc.createComment(t);this.locator&&un(this.locator,r),Xo(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,e,i){var r=this.doc.implementation;if(r&&r.createDocumentType){var n=r.createDocumentType(t,e,i);this.locator&&un(this.locator,n),Xo(this,n),this.doc.doctype=n}},warning:function(t){console.warn("[xmldom warning]	"+t,rh(this.locator))},error:function(t){console.error("[xmldom error]	"+t,rh(this.locator))},fatalError:function(t){throw new Sw(t,this.locator)}};function rh(t){if(t)return`
@`+(t.systemId||"")+"#[line:"+t.lineNumber+",col:"+t.columnNumber+"]"}function l0(t,e,i){return typeof t=="string"?t.substr(e,i):t.length>=e+i||e?new java.lang.String(t,e,i)+"":t}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(t){ro.prototype[t]=function(){return null}});function Xo(t,e){t.currentElement?t.currentElement.appendChild(e):t.doc.appendChild(e)}Ol.__DOMHandler=ro;Ol.normalizeLineEndings=Wv;Ol.DOMParser=Xv;var Cw=Ol.DOMParser;/*! @name mpd-parser @version 1.1.1 @license Apache-2.0 */const c0=t=>!!t&&typeof t=="object",Ye=(...t)=>t.reduce((e,i)=>(typeof i!="object"||Object.keys(i).forEach(r=>{Array.isArray(e[r])&&Array.isArray(i[r])?e[r]=e[r].concat(i[r]):c0(e[r])&&c0(i[r])?e[r]=Ye(e[r],i[r]):e[r]=i[r]}),e),{}),Kv=t=>Object.keys(t).map(e=>t[e]),ww=(t,e)=>{const i=[];for(let r=t;r<e;r++)i.push(r);return i},Xn=t=>t.reduce((e,i)=>e.concat(i),[]),Yv=t=>{if(!t.length)return[];const e=[];for(let i=0;i<t.length;i++)e.push(t[i]);return e},Dw=(t,e)=>t.reduce((i,r,n)=>(r[e]&&i.push(n),i),[]),Aw=(t,e)=>Kv(t.reduce((i,r)=>(r.forEach(n=>{i[e(n)]=n}),i),{}));var Kn={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"};const Ha=({baseUrl:t="",source:e="",range:i="",indexRange:r=""})=>{const n={uri:e,resolvedUri:Af(t||"",e)};if(i||r){const a=(i||r).split("-");let o=k.BigInt?k.BigInt(a[0]):parseInt(a[0],10),l=k.BigInt?k.BigInt(a[1]):parseInt(a[1],10);o<Number.MAX_SAFE_INTEGER&&typeof o=="bigint"&&(o=Number(o)),l<Number.MAX_SAFE_INTEGER&&typeof l=="bigint"&&(l=Number(l));let d;typeof l=="bigint"||typeof o=="bigint"?d=k.BigInt(l)-k.BigInt(o)+k.BigInt(1):d=l-o+1,typeof d=="bigint"&&d<Number.MAX_SAFE_INTEGER&&(d=Number(d)),n.byterange={length:d,offset:o}}return n},kw=t=>{let e;return typeof t.offset=="bigint"||typeof t.length=="bigint"?e=k.BigInt(t.offset)+k.BigInt(t.length)-k.BigInt(1):e=t.offset+t.length-1,`${t.offset}-${e}`},d0=t=>(t&&typeof t!="number"&&(t=parseInt(t,10)),isNaN(t)?null:t),Iw={static(t){const{duration:e,timescale:i=1,sourceDuration:r,periodDuration:n}=t,s=d0(t.endNumber),a=e/i;return typeof s=="number"?{start:0,end:s}:typeof n=="number"?{start:0,end:n/a}:{start:0,end:r/a}},dynamic(t){const{NOW:e,clientOffset:i,availabilityStartTime:r,timescale:n=1,duration:s,periodStart:a=0,minimumUpdatePeriod:o=0,timeShiftBufferDepth:l=1/0}=t,d=d0(t.endNumber),m=(e+i)/1e3,y=r+a,b=m+o-y,S=Math.ceil(b*n/s),A=Math.floor((m-y-l)*n/s),T=Math.floor((m-y)*n/s);return{start:Math.max(0,A),end:typeof d=="number"?d:Math.min(S,T)}}},Pw=t=>e=>{const{duration:i,timescale:r=1,periodStart:n,startNumber:s=1}=t;return{number:s+e,duration:i/r,timeline:n,time:e*i}},Uf=t=>{const{type:e,duration:i,timescale:r=1,periodDuration:n,sourceDuration:s}=t,{start:a,end:o}=Iw[e](t),l=ww(a,o).map(Pw(t));if(e==="static"){const d=l.length-1,m=typeof n=="number"?n:s;l[d].duration=m-i/r*d}return l},Qv=t=>{const{baseUrl:e,initialization:i={},sourceDuration:r,indexRange:n="",periodStart:s,presentationTime:a,number:o=0,duration:l}=t;if(!e)throw new Error(Kn.NO_BASE_URL);const d=Ha({baseUrl:e,source:i.sourceURL,range:i.range}),m=Ha({baseUrl:e,source:e,indexRange:n});if(m.map=d,l){const y=Uf(t);y.length&&(m.duration=y[0].duration,m.timeline=y[0].timeline)}else r&&(m.duration=r,m.timeline=s);return m.presentationTime=a||s,m.number=o,[m]},jf=(t,e,i)=>{const r=t.sidx.map?t.sidx.map:null,n=t.sidx.duration,s=t.timeline||0,a=t.sidx.byterange,o=a.offset+a.length,l=e.timescale,d=e.references.filter(T=>T.referenceType!==1),m=[],y=t.endList?"static":"dynamic",v=t.sidx.timeline;let b=v,S=t.mediaSequence||0,A;typeof e.firstOffset=="bigint"?A=k.BigInt(o)+e.firstOffset:A=o+e.firstOffset;for(let T=0;T<d.length;T++){const _=e.references[T],x=_.referencedSize,I=_.subsegmentDuration;let D;typeof A=="bigint"?D=A+k.BigInt(x)-k.BigInt(1):D=A+x-1;const O=`${A}-${D}`,U=Qv({baseUrl:i,timescale:l,timeline:s,periodStart:v,presentationTime:b,number:S,duration:I,sourceDuration:n,indexRange:O,type:y})[0];r&&(U.map=r),m.push(U),typeof A=="bigint"?A+=k.BigInt(x):A+=x,b+=I/l,S++}return t.segments=m,t},Ow=["AUDIO","SUBTITLES"],Lw=1/60,Jv=t=>Aw(t,({timeline:e})=>e).sort((e,i)=>e.timeline>i.timeline?1:-1),Nw=(t,e)=>{for(let i=0;i<t.length;i++)if(t[i].attributes.NAME===e)return t[i];return null},h0=t=>{let e=[];return KC(t,Ow,(i,r,n,s)=>{e=e.concat(i.playlists||[])}),e},f0=({playlist:t,mediaSequence:e})=>{t.mediaSequence=e,t.segments.forEach((i,r)=>{i.number=t.mediaSequence+r})},Rw=({oldPlaylists:t,newPlaylists:e,timelineStarts:i})=>{e.forEach(r=>{r.discontinuitySequence=i.findIndex(function({timeline:l}){return l===r.timeline});const n=Nw(t,r.attributes.NAME);if(!n||r.sidx)return;const s=r.segments[0],a=n.segments.findIndex(function(l){return Math.abs(l.presentationTime-s.presentationTime)<Lw});if(a===-1){f0({playlist:r,mediaSequence:n.mediaSequence+n.segments.length}),r.segments[0].discontinuity=!0,r.discontinuityStarts.unshift(0),(!n.segments.length&&r.timeline>n.timeline||n.segments.length&&r.timeline>n.segments[n.segments.length-1].timeline)&&r.discontinuitySequence--;return}n.segments[a].discontinuity&&!s.discontinuity&&(s.discontinuity=!0,r.discontinuityStarts.unshift(0),r.discontinuitySequence--),f0({playlist:r,mediaSequence:n.segments[a].number})})},Mw=({oldManifest:t,newManifest:e})=>{const i=t.playlists.concat(h0(t)),r=e.playlists.concat(h0(e));return e.timelineStarts=Jv([t.timelineStarts,e.timelineStarts]),Rw({oldPlaylists:i,newPlaylists:r,timelineStarts:e.timelineStarts}),e},Ll=t=>t&&t.uri+"-"+kw(t.byterange),Jc=t=>Kv(t.reduce((i,r)=>{const n=r.attributes.id+(r.attributes.lang||"");return i[n]?(r.segments&&(r.segments[0]&&(r.segments[0].discontinuity=!0),i[n].segments.push(...r.segments)),r.attributes.contentProtection&&(i[n].attributes.contentProtection=r.attributes.contentProtection)):(i[n]=r,i[n].attributes.timelineStarts=[]),i[n].attributes.timelineStarts.push({start:r.attributes.periodStart,timeline:r.attributes.periodStart}),i},{})).map(i=>(i.discontinuityStarts=Dw(i.segments||[],"discontinuity"),i)),$f=(t,e)=>{const i=Ll(t.sidx),r=i&&e[i]&&e[i].sidx;return r&&jf(t,r,t.sidx.resolvedUri),t},Bw=(t,e={})=>{if(!Object.keys(e).length)return t;for(const i in t)t[i]=$f(t[i],e);return t},Fw=({attributes:t,segments:e,sidx:i,mediaSequence:r,discontinuitySequence:n,discontinuityStarts:s},a)=>{const o={attributes:{NAME:t.id,BANDWIDTH:t.bandwidth,CODECS:t.codecs,["PROGRAM-ID"]:1},uri:"",endList:t.type==="static",timeline:t.periodStart,resolvedUri:"",targetDuration:t.duration,discontinuitySequence:n,discontinuityStarts:s,timelineStarts:t.timelineStarts,mediaSequence:r,segments:e};return t.contentProtection&&(o.contentProtection=t.contentProtection),i&&(o.sidx=i),a&&(o.attributes.AUDIO="audio",o.attributes.SUBTITLES="subs"),o},Uw=({attributes:t,segments:e,mediaSequence:i,discontinuityStarts:r,discontinuitySequence:n})=>{typeof e>"u"&&(e=[{uri:t.baseUrl,timeline:t.periodStart,resolvedUri:t.baseUrl||"",duration:t.sourceDuration,number:0}],t.duration=t.sourceDuration);const s={NAME:t.id,BANDWIDTH:t.bandwidth,["PROGRAM-ID"]:1};return t.codecs&&(s.CODECS=t.codecs),{attributes:s,uri:"",endList:t.type==="static",timeline:t.periodStart,resolvedUri:t.baseUrl||"",targetDuration:t.duration,timelineStarts:t.timelineStarts,discontinuityStarts:r,discontinuitySequence:n,mediaSequence:i,segments:e}},jw=(t,e={},i=!1)=>{let r;const n=t.reduce((s,a)=>{const o=a.attributes.role&&a.attributes.role.value||"",l=a.attributes.lang||"";let d=a.attributes.label||"main";if(l&&!a.attributes.label){const y=o?` (${o})`:"";d=`${a.attributes.lang}${y}`}s[d]||(s[d]={language:l,autoselect:!0,default:o==="main",playlists:[],uri:""});const m=$f(Fw(a,i),e);return s[d].playlists.push(m),typeof r>"u"&&o==="main"&&(r=a,r.default=!0),s},{});if(!r){const s=Object.keys(n)[0];n[s].default=!0}return n},$w=(t,e={})=>t.reduce((i,r)=>{const n=r.attributes.label||r.attributes.lang||"text";return i[n]||(i[n]={language:n,default:!1,autoselect:!1,playlists:[],uri:""}),i[n].playlists.push($f(Uw(r),e)),i},{}),Vw=t=>t.reduce((e,i)=>(i&&i.forEach(r=>{const{channel:n,language:s}=r;e[s]={autoselect:!1,default:!1,instreamId:n,language:s},r.hasOwnProperty("aspectRatio")&&(e[s].aspectRatio=r.aspectRatio),r.hasOwnProperty("easyReader")&&(e[s].easyReader=r.easyReader),r.hasOwnProperty("3D")&&(e[s]["3D"]=r["3D"])}),e),{}),Hw=({attributes:t,segments:e,sidx:i,discontinuityStarts:r})=>{const n={attributes:{NAME:t.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:t.width,height:t.height},CODECS:t.codecs,BANDWIDTH:t.bandwidth,["PROGRAM-ID"]:1},uri:"",endList:t.type==="static",timeline:t.periodStart,resolvedUri:"",targetDuration:t.duration,discontinuityStarts:r,timelineStarts:t.timelineStarts,segments:e};return t.frameRate&&(n.attributes["FRAME-RATE"]=t.frameRate),t.contentProtection&&(n.contentProtection=t.contentProtection),i&&(n.sidx=i),n},qw=({attributes:t})=>t.mimeType==="video/mp4"||t.mimeType==="video/webm"||t.contentType==="video",zw=({attributes:t})=>t.mimeType==="audio/mp4"||t.mimeType==="audio/webm"||t.contentType==="audio",Gw=({attributes:t})=>t.mimeType==="text/vtt"||t.contentType==="text",Ww=(t,e)=>{t.forEach(i=>{i.mediaSequence=0,i.discontinuitySequence=e.findIndex(function({timeline:r}){return r===i.timeline}),i.segments&&i.segments.forEach((r,n)=>{r.number=n})})},p0=t=>t?Object.keys(t).reduce((e,i)=>{const r=t[i];return e.concat(r.playlists)},[]):[],Xw=({dashPlaylists:t,locations:e,sidxMapping:i={},previousManifest:r,eventStream:n})=>{if(!t.length)return{};const{sourceDuration:s,type:a,suggestedPresentationDelay:o,minimumUpdatePeriod:l}=t[0].attributes,d=Jc(t.filter(qw)).map(Hw),m=Jc(t.filter(zw)),y=Jc(t.filter(Gw)),v=t.map(I=>I.attributes.captionServices).filter(Boolean),b={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},["CLOSED-CAPTIONS"]:{},SUBTITLES:{}},uri:"",duration:s,playlists:Bw(d,i)};l>=0&&(b.minimumUpdatePeriod=l*1e3),e&&(b.locations=e),a==="dynamic"&&(b.suggestedPresentationDelay=o),n&&n.length>0&&(b.eventStream=n);const S=b.playlists.length===0,A=m.length?jw(m,i,S):null,T=y.length?$w(y,i):null,_=d.concat(p0(A),p0(T)),x=_.map(({timelineStarts:I})=>I);return b.timelineStarts=Jv(x),Ww(_,b.timelineStarts),A&&(b.mediaGroups.AUDIO.audio=A),T&&(b.mediaGroups.SUBTITLES.subs=T),v.length&&(b.mediaGroups["CLOSED-CAPTIONS"].cc=Vw(v)),r?Mw({oldManifest:r,newManifest:b}):b},Kw=(t,e,i)=>{const{NOW:r,clientOffset:n,availabilityStartTime:s,timescale:a=1,periodStart:o=0,minimumUpdatePeriod:l=0}=t,d=(r+n)/1e3,m=s+o,v=d+l-m;return Math.ceil((v*a-e)/i)},Zv=(t,e)=>{const{type:i,minimumUpdatePeriod:r=0,media:n="",sourceDuration:s,timescale:a=1,startNumber:o=1,periodStart:l}=t,d=[];let m=-1;for(let y=0;y<e.length;y++){const v=e[y],b=v.d,S=v.r||0,A=v.t||0;m<0&&(m=A),A&&A>m&&(m=A);let T;if(S<0){const I=y+1;I===e.length?i==="dynamic"&&r>0&&n.indexOf("$Number$")>0?T=Kw(t,m,b):T=(s*a-m)/b:T=(e[I].t-m)/b}else T=S+1;const _=o+d.length+T;let x=o+d.length;for(;x<_;)d.push({number:x,duration:b/a,time:m,timeline:l}),m+=b,x++}return d},Yw=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Qw=t=>(e,i,r,n)=>{if(e==="$$")return"$";if(typeof t[i]>"u")return e;const s=""+t[i];return i==="RepresentationID"||(r?n=parseInt(n,10):n=1,s.length>=n)?s:`${new Array(n-s.length+1).join("0")}${s}`},m0=(t,e)=>t.replace(Yw,Qw(e)),Jw=(t,e)=>!t.duration&&!e?[{number:t.startNumber||1,duration:t.sourceDuration,time:0,timeline:t.periodStart}]:t.duration?Uf(t):Zv(t,e),Zw=(t,e)=>{const i={RepresentationID:t.id,Bandwidth:t.bandwidth||0},{initialization:r={sourceURL:"",range:""}}=t,n=Ha({baseUrl:t.baseUrl,source:m0(r.sourceURL,i),range:r.range});return Jw(t,e).map(a=>{i.Number=a.number,i.Time=a.time;const o=m0(t.media||"",i),l=t.timescale||1,d=t.presentationTimeOffset||0,m=t.periodStart+(a.time-d)/l;return{uri:o,timeline:a.timeline,duration:a.duration,resolvedUri:Af(t.baseUrl||"",o),map:n,number:a.number,presentationTime:m}})},eD=(t,e)=>{const{baseUrl:i,initialization:r={}}=t,n=Ha({baseUrl:i,source:r.sourceURL,range:r.range}),s=Ha({baseUrl:i,source:e.media,range:e.mediaRange});return s.map=n,s},tD=(t,e)=>{const{duration:i,segmentUrls:r=[],periodStart:n}=t;if(!i&&!e||i&&e)throw new Error(Kn.SEGMENT_TIME_UNSPECIFIED);const s=r.map(l=>eD(t,l));let a;return i&&(a=Uf(t)),e&&(a=Zv(t,e)),a.map((l,d)=>{if(s[d]){const m=s[d],y=t.timescale||1,v=t.presentationTimeOffset||0;return m.timeline=l.timeline,m.duration=l.duration,m.number=l.number,m.presentationTime=n+(l.time-v)/y,m}}).filter(l=>l)},iD=({attributes:t,segmentInfo:e})=>{let i,r;e.template?(r=Zw,i=Ye(t,e.template)):e.base?(r=Qv,i=Ye(t,e.base)):e.list&&(r=tD,i=Ye(t,e.list));const n={attributes:t};if(!r)return n;const s=r(i,e.segmentTimeline);if(i.duration){const{duration:a,timescale:o=1}=i;i.duration=a/o}else s.length?i.duration=s.reduce((a,o)=>Math.max(a,Math.ceil(o.duration)),0):i.duration=0;return n.attributes=i,n.segments=s,e.base&&i.indexRange&&(n.sidx=s[0],n.segments=[]),n},rD=t=>t.map(iD),Ae=(t,e)=>Yv(t.childNodes).filter(({tagName:i})=>i===e),Nl=t=>t.textContent.trim(),nD=t=>parseFloat(t.split("/").reduce((e,i)=>e/i)),ln=t=>{const o=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(t);if(!o)return 0;const[l,d,m,y,v,b]=o.slice(1);return parseFloat(l||0)*31536e3+parseFloat(d||0)*2592e3+parseFloat(m||0)*86400+parseFloat(y||0)*3600+parseFloat(v||0)*60+parseFloat(b||0)},sD=t=>(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t)&&(t+="Z"),Date.parse(t)),g0={mediaPresentationDuration(t){return ln(t)},availabilityStartTime(t){return sD(t)/1e3},minimumUpdatePeriod(t){return ln(t)},suggestedPresentationDelay(t){return ln(t)},type(t){return t},timeShiftBufferDepth(t){return ln(t)},start(t){return ln(t)},width(t){return parseInt(t,10)},height(t){return parseInt(t,10)},bandwidth(t){return parseInt(t,10)},frameRate(t){return nD(t)},startNumber(t){return parseInt(t,10)},timescale(t){return parseInt(t,10)},presentationTimeOffset(t){return parseInt(t,10)},duration(t){const e=parseInt(t,10);return isNaN(e)?ln(t):e},d(t){return parseInt(t,10)},t(t){return parseInt(t,10)},r(t){return parseInt(t,10)},presentationTime(t){return parseInt(t,10)},DEFAULT(t){return t}},$e=t=>t&&t.attributes?Yv(t.attributes).reduce((e,i)=>{const r=g0[i.name]||g0.DEFAULT;return e[i.name]=r(i.value),e},{}):{},aD={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},Rl=(t,e)=>e.length?Xn(t.map(function(i){return e.map(function(r){return Af(i,Nl(r))})})):t,Vf=t=>{const e=Ae(t,"SegmentTemplate")[0],i=Ae(t,"SegmentList")[0],r=i&&Ae(i,"SegmentURL").map(y=>Ye({tag:"SegmentURL"},$e(y))),n=Ae(t,"SegmentBase")[0],s=i||e,a=s&&Ae(s,"SegmentTimeline")[0],o=i||n||e,l=o&&Ae(o,"Initialization")[0],d=e&&$e(e);d&&l?d.initialization=l&&$e(l):d&&d.initialization&&(d.initialization={sourceURL:d.initialization});const m={template:d,segmentTimeline:a&&Ae(a,"S").map(y=>$e(y)),list:i&&Ye($e(i),{segmentUrls:r,initialization:$e(l)}),base:n&&Ye($e(n),{initialization:$e(l)})};return Object.keys(m).forEach(y=>{m[y]||delete m[y]}),m},oD=(t,e,i)=>r=>{const n=Ae(r,"BaseURL"),s=Rl(e,n),a=Ye(t,$e(r)),o=Vf(r);return s.map(l=>({segmentInfo:Ye(i,o),attributes:Ye(a,{baseUrl:l})}))},uD=t=>t.reduce((e,i)=>{const r=$e(i);r.schemeIdUri&&(r.schemeIdUri=r.schemeIdUri.toLowerCase());const n=aD[r.schemeIdUri];if(n){e[n]={attributes:r};const s=Ae(i,"cenc:pssh")[0];if(s){const a=Nl(s);e[n].pssh=a&&QC(a)}}return e},{}),lD=t=>{if(t.schemeIdUri==="urn:scte:dash:cc:cea-608:2015")return(typeof t.value!="string"?[]:t.value.split(";")).map(i=>{let r,n;return n=i,/^CC\d=/.test(i)?[r,n]=i.split("="):/^CC\d$/.test(i)&&(r=i),{channel:r,language:n}});if(t.schemeIdUri==="urn:scte:dash:cc:cea-708:2015")return(typeof t.value!="string"?[]:t.value.split(";")).map(i=>{const r={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(i)){const[n,s=""]=i.split("=");r.channel=n,r.language=i,s.split(",").forEach(a=>{const[o,l]=a.split(":");o==="lang"?r.language=l:o==="er"?r.easyReader=Number(l):o==="war"?r.aspectRatio=Number(l):o==="3D"&&(r["3D"]=Number(l))})}else r.language=i;return r.channel&&(r.channel="SERVICE"+r.channel),r})},cD=t=>Xn(Ae(t.node,"EventStream").map(e=>{const i=$e(e),r=i.schemeIdUri;return Ae(e,"Event").map(n=>{const s=$e(n),a=s.presentationTime||0,o=i.timescale||1,l=s.duration||0,d=a/o+t.attributes.start;return{schemeIdUri:r,value:i.value,id:s.id,start:d,end:d+l/o,messageData:Nl(n)||s.messageData,contentEncoding:i.contentEncoding,presentationTimeOffset:i.presentationTimeOffset||0}})})),dD=(t,e,i)=>r=>{const n=$e(r),s=Rl(e,Ae(r,"BaseURL")),a=Ae(r,"Role")[0],o={role:$e(a)};let l=Ye(t,n,o);const d=Ae(r,"Accessibility")[0],m=lD($e(d));m&&(l=Ye(l,{captionServices:m}));const y=Ae(r,"Label")[0];if(y&&y.childNodes.length){const T=y.childNodes[0].nodeValue.trim();l=Ye(l,{label:T})}const v=uD(Ae(r,"ContentProtection"));Object.keys(v).length&&(l=Ye(l,{contentProtection:v}));const b=Vf(r),S=Ae(r,"Representation"),A=Ye(i,b);return Xn(S.map(oD(l,s,A)))},hD=(t,e)=>(i,r)=>{const n=Rl(e,Ae(i.node,"BaseURL")),s=Ye(t,{periodStart:i.attributes.start});typeof i.attributes.duration=="number"&&(s.periodDuration=i.attributes.duration);const a=Ae(i.node,"AdaptationSet"),o=Vf(i.node);return Xn(a.map(dD(s,n,o)))},fD=({attributes:t,priorPeriodAttributes:e,mpdType:i})=>typeof t.start=="number"?t.start:e&&typeof e.start=="number"&&typeof e.duration=="number"?e.start+e.duration:!e&&i==="static"?0:null,pD=(t,e={})=>{const{manifestUri:i="",NOW:r=Date.now(),clientOffset:n=0}=e,s=Ae(t,"Period");if(!s.length)throw new Error(Kn.INVALID_NUMBER_OF_PERIOD);const a=Ae(t,"Location"),o=$e(t),l=Rl([i],Ae(t,"BaseURL"));o.type=o.type||"static",o.sourceDuration=o.mediaPresentationDuration||0,o.NOW=r,o.clientOffset=n,a.length&&(o.locations=a.map(Nl));const d=[];return s.forEach((m,y)=>{const v=$e(m),b=d[y-1];v.start=fD({attributes:v,priorPeriodAttributes:b?b.attributes:null,mpdType:o.type}),d.push({node:m,attributes:v})}),{locations:o.locations,representationInfo:Xn(d.map(hD(o,l))),eventStream:Xn(d.map(cD))}},eT=t=>{if(t==="")throw new Error(Kn.DASH_EMPTY_MANIFEST);const e=new Cw;let i,r;try{i=e.parseFromString(t,"application/xml"),r=i&&i.documentElement.tagName==="MPD"?i.documentElement:null}catch{}if(!r||r&&r.getElementsByTagName("parsererror").length>0)throw new Error(Kn.DASH_INVALID_XML);return r},mD=t=>{const e=Ae(t,"UTCTiming")[0];if(!e)return null;const i=$e(e);switch(i.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":i.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":i.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":i.method="DIRECT",i.value=Date.parse(i.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(Kn.UNSUPPORTED_UTC_TIMING_SCHEME)}return i},gD=(t,e={})=>{const i=pD(eT(t),e),r=rD(i.representationInfo);return Xw({dashPlaylists:r,locations:i.locations,sidxMapping:e.sidxMapping,previousManifest:e.previousManifest,eventStream:i.eventStream})},yD=t=>mD(eT(t));var tT=Math.pow(2,32),_D=function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),i;return e.getBigUint64?(i=e.getBigUint64(0),i<Number.MAX_SAFE_INTEGER?Number(i):i):e.getUint32(0)*tT+e.getUint32(4)},vD={getUint64:_D,MAX_UINT32:tT},y0=vD.getUint64,TD=function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),i={version:t[0],flags:new Uint8Array(t.subarray(1,4)),references:[],referenceId:e.getUint32(4),timescale:e.getUint32(8)},r=12;i.version===0?(i.earliestPresentationTime=e.getUint32(r),i.firstOffset=e.getUint32(r+4),r+=8):(i.earliestPresentationTime=y0(t.subarray(r)),i.firstOffset=y0(t.subarray(r+8)),r+=16),r+=2;var n=e.getUint16(r);for(r+=2;n>0;r+=12,n--)i.references.push({referenceType:(t[r]&128)>>>7,referencedSize:e.getUint32(r)&2147483647,subsegmentDuration:e.getUint32(r+4),startsWithSap:!!(t[r+8]&128),sapType:(t[r+8]&112)>>>4,sapDeltaTime:e.getUint32(r+8)&268435455});return i},xD=TD;const SD=xi(xD);var ED=Y([73,68,51]),bD=function(e,i){i===void 0&&(i=0),e=Y(e);var r=e[i+5],n=e[i+6]<<21|e[i+7]<<14|e[i+8]<<7|e[i+9],s=(r&16)>>4;return s?n+20:n+10},na=function t(e,i){return i===void 0&&(i=0),e=Y(e),e.length-i<10||!we(e,ED,{offset:i})?i:(i+=bD(e,i),t(e,i))},_0=function(e){return typeof e=="string"?vv(e):e},CD=function(e){return Array.isArray(e)?e.map(function(i){return _0(i)}):[_0(e)]},wD=function t(e,i,r){r===void 0&&(r=!1),i=CD(i),e=Y(e);var n=[];if(!i.length)return n;for(var s=0;s<e.length;){var a=(e[s]<<24|e[s+1]<<16|e[s+2]<<8|e[s+3])>>>0,o=e.subarray(s+4,s+8);if(a===0)break;var l=s+a;if(l>e.length){if(r)break;l=e.length}var d=e.subarray(s+8,l);we(o,i[0])&&(i.length===1?n.push(d):n.push.apply(n,t(d,i.slice(1),r))),s=l}return n},Ko={EBML:Y([26,69,223,163]),DocType:Y([66,130]),Segment:Y([24,83,128,103]),SegmentInfo:Y([21,73,169,102]),Tracks:Y([22,84,174,107]),Track:Y([174]),TrackNumber:Y([215]),DefaultDuration:Y([35,227,131]),TrackEntry:Y([174]),TrackType:Y([131]),FlagDefault:Y([136]),CodecID:Y([134]),CodecPrivate:Y([99,162]),VideoTrack:Y([224]),AudioTrack:Y([225]),Cluster:Y([31,67,182,117]),Timestamp:Y([231]),TimestampScale:Y([42,215,177]),BlockGroup:Y([160]),BlockDuration:Y([155]),Block:Y([161]),SimpleBlock:Y([163])},nh=[128,64,32,16,8,4,2,1],DD=function(e){for(var i=1,r=0;r<nh.length&&!(e&nh[r]);r++)i++;return i},Gu=function(e,i,r,n){r===void 0&&(r=!0),n===void 0&&(n=!1);var s=DD(e[i]),a=e.subarray(i,i+s);return r&&(a=Array.prototype.slice.call(e,i,i+s),a[0]^=nh[s-1]),{length:s,value:GC(a,{signed:n}),bytes:a}},v0=function t(e){return typeof e=="string"?e.match(/.{1,2}/g).map(function(i){return t(i)}):typeof e=="number"?WC(e):e},AD=function(e){return Array.isArray(e)?e.map(function(i){return v0(i)}):[v0(e)]},kD=function t(e,i,r){if(r>=i.length)return i.length;var n=Gu(i,r,!1);if(we(e.bytes,n.bytes))return r;var s=Gu(i,r+n.length);return t(e,i,r+s.length+s.value+n.length)},T0=function t(e,i){i=AD(i),e=Y(e);var r=[];if(!i.length)return r;for(var n=0;n<e.length;){var s=Gu(e,n,!1),a=Gu(e,n+s.length),o=n+s.length+a.length;a.value===127&&(a.value=kD(s,e,o),a.value!==e.length&&(a.value-=o));var l=o+a.value>e.length?e.length:o+a.value,d=e.subarray(o,l);we(i[0],s.bytes)&&(i.length===1?r.push(d):r=r.concat(t(d,i.slice(1))));var m=s.length+a.length+d.length;n+=m}return r},ID=Y([0,0,0,1]),PD=Y([0,0,1]),OD=Y([0,0,3]),LD=function(e){for(var i=[],r=1;r<e.length-2;)we(e.subarray(r,r+3),OD)&&(i.push(r+2),r++),r++;if(i.length===0)return e;var n=e.length-i.length,s=new Uint8Array(n),a=0;for(r=0;r<n;a++,r++)a===i[0]&&(a++,i.shift()),s[r]=e[a];return s},iT=function(e,i,r,n){n===void 0&&(n=1/0),e=Y(e),r=[].concat(r);for(var s=0,a,o=0;s<e.length&&(o<n||a);){var l=void 0;if(we(e.subarray(s),ID)?l=4:we(e.subarray(s),PD)&&(l=3),!l){s++;continue}if(o++,a)return LD(e.subarray(a,s));var d=void 0;i==="h264"?d=e[s+l]&31:i==="h265"&&(d=e[s+l]>>1&63),r.indexOf(d)!==-1&&(a=s+l),s+=l+(i==="h264"?1:2)}return e.subarray(0,0)},ND=function(e,i,r){return iT(e,"h264",i,r)},RD=function(e,i,r){return iT(e,"h265",i,r)},nt={webm:Y([119,101,98,109]),matroska:Y([109,97,116,114,111,115,107,97]),flac:Y([102,76,97,67]),ogg:Y([79,103,103,83]),ac3:Y([11,119]),riff:Y([82,73,70,70]),avi:Y([65,86,73]),wav:Y([87,65,86,69]),"3gp":Y([102,116,121,112,51,103]),mp4:Y([102,116,121,112]),fmp4:Y([115,116,121,112]),mov:Y([102,116,121,112,113,116]),moov:Y([109,111,111,118]),moof:Y([109,111,111,102])},Yn={aac:function(e){var i=na(e);return we(e,[255,16],{offset:i,mask:[255,22]})},mp3:function(e){var i=na(e);return we(e,[255,2],{offset:i,mask:[255,6]})},webm:function(e){var i=T0(e,[Ko.EBML,Ko.DocType])[0];return we(i,nt.webm)},mkv:function(e){var i=T0(e,[Ko.EBML,Ko.DocType])[0];return we(i,nt.matroska)},mp4:function(e){if(Yn["3gp"](e)||Yn.mov(e))return!1;if(we(e,nt.mp4,{offset:4})||we(e,nt.fmp4,{offset:4})||we(e,nt.moof,{offset:4})||we(e,nt.moov,{offset:4}))return!0},mov:function(e){return we(e,nt.mov,{offset:4})},"3gp":function(e){return we(e,nt["3gp"],{offset:4})},ac3:function(e){var i=na(e);return we(e,nt.ac3,{offset:i})},ts:function(e){if(e.length<189&&e.length>=1)return e[0]===71;for(var i=0;i+188<e.length&&i<188;){if(e[i]===71&&e[i+188]===71)return!0;i+=1}return!1},flac:function(e){var i=na(e);return we(e,nt.flac,{offset:i})},ogg:function(e){return we(e,nt.ogg)},avi:function(e){return we(e,nt.riff)&&we(e,nt.avi,{offset:8})},wav:function(e){return we(e,nt.riff)&&we(e,nt.wav,{offset:8})},h264:function(e){return ND(e,7,3).length},h265:function(e){return RD(e,[32,33],3).length}},sh=Object.keys(Yn).filter(function(t){return t!=="ts"&&t!=="h264"&&t!=="h265"}).concat(["ts","h264","h265"]);sh.forEach(function(t){var e=Yn[t];Yn[t]=function(i){return e(Y(i))}});var MD=Yn,Hf=function(e){e=Y(e);for(var i=0;i<sh.length;i++){var r=sh[i];if(MD[r](e))return r}return""},BD=function(e){return wD(e,["moof"]).length>0},qf=9e4,zf,Gf,Ml,Wf,rT,nT,sT;zf=function(t){return t*qf};Gf=function(t,e){return t*e};Ml=function(t){return t/qf};Wf=function(t,e){return t/e};rT=function(t,e){return zf(Wf(t,e))};nT=function(t,e){return Gf(Ml(t),e)};sT=function(t,e,i){return Ml(i?t:t-e)};var Wu={ONE_SECOND_IN_TS:qf,secondsToVideoTs:zf,secondsToAudioTs:Gf,videoTsToSeconds:Ml,audioTsToSeconds:Wf,audioTsToVideoTs:rT,videoTsToAudioTs:nT,metadataTsToSeconds:sT};/**
 * @license
 * Video.js 8.3.0 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */var aT="8.3.0";const Pi={},mr=function(t,e){return Pi[t]=Pi[t]||[],e&&(Pi[t]=Pi[t].concat(e)),Pi[t]},FD=function(t,e){mr(t,e)},oT=function(t,e){const i=mr(t).indexOf(e);return i<=-1?!1:(Pi[t]=Pi[t].slice(),Pi[t].splice(i,1),!0)},UD=function(t,e){mr(t,[].concat(e).map(i=>{const r=(...n)=>(oT(t,r),i(...n));return r}))},Xu={prefixed:!0},fu=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],x0=fu[0];let sa;for(let t=0;t<fu.length;t++)if(fu[t][1]in V){sa=fu[t];break}if(sa){for(let t=0;t<sa.length;t++)Xu[x0[t]]=sa[t];Xu.prefixed=sa[0]!==x0[0]}let mt=[];const jD=(t,e)=>(i,r,n)=>{const s=e.levels[r],a=new RegExp(`^(${s})$`);if(i!=="log"&&n.unshift(i.toUpperCase()+":"),n.unshift(t+":"),mt){mt.push([].concat(n));const l=mt.length-1e3;mt.splice(0,l>0?l:0)}if(!k.console)return;let o=k.console[i];!o&&i==="debug"&&(o=k.console.info||k.console.log),!(!o||!s||!a.test(i))&&o[Array.isArray(n)?"apply":"call"](k.console,n)};function uT(t){let e="info",i;const r=function(...n){i("log",e,n)};return i=jD(t,r),r.createLogger=n=>uT(t+": "+n),r.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:e},r.level=n=>{if(typeof n=="string"){if(!r.levels.hasOwnProperty(n))throw new Error(`"${n}" in not a valid log level`);e=n}return e},r.history=()=>mt?[].concat(mt):[],r.history.filter=n=>(mt||[]).filter(s=>new RegExp(`.*${n}.*`).test(s[0])),r.history.clear=()=>{mt&&(mt.length=0)},r.history.disable=()=>{mt!==null&&(mt.length=0,mt=null)},r.history.enable=()=>{mt===null&&(mt=[])},r.error=(...n)=>i("error",e,n),r.warn=(...n)=>i("warn",e,n),r.debug=(...n)=>i("debug",e,n),r}const le=uT("VIDEOJS"),lT=le.createLogger,$D=Object.prototype.toString,cT=function(t){return gi(t)?Object.keys(t):[]};function Rn(t,e){cT(t).forEach(i=>e(t[i],i))}function dT(t,e,i=0){return cT(t).reduce((r,n)=>e(r,t[n],n),i)}function gi(t){return!!t&&typeof t=="object"}function Qn(t){return gi(t)&&$D.call(t)==="[object Object]"&&t.constructor===Object}function ge(...t){const e={};return t.forEach(i=>{i&&Rn(i,(r,n)=>{if(!Qn(r)){e[n]=r;return}Qn(e[n])||(e[n]={}),e[n]=ge(e[n],r)})}),e}function Bl(t,e,i,r=!0){const n=a=>Object.defineProperty(t,e,{value:a,enumerable:!0,writable:!0}),s={configurable:!0,enumerable:!0,get(){const a=i();return n(a),a}};return r&&(s.set=n),Object.defineProperty(t,e,s)}var VD=Object.freeze({__proto__:null,each:Rn,reduce:dT,isObject:gi,isPlain:Qn,merge:ge,defineLazyProperty:Bl});let Xf=!1,hT=null,yi=!1,fT,pT=!1,Mn=!1,Bn=!1,_i=!1,Kf=null,Fl=null,mT=null,Ku=!1,Ul=!1,Yu=!1,jl=!1;const qa=!!(ds()&&("ontouchstart"in k||k.navigator.maxTouchPoints||k.DocumentTouch&&k.document instanceof k.DocumentTouch)),cn=k.navigator&&k.navigator.userAgentData;cn&&(yi=cn.platform==="Android",Mn=!!cn.brands.find(t=>t.brand==="Microsoft Edge"),Bn=!!cn.brands.find(t=>t.brand==="Chromium"),_i=!Mn&&Bn,Kf=Fl=(cn.brands.find(t=>t.brand==="Chromium")||{}).version||null,Ul=cn.platform==="Windows");if(!Bn){const t=k.navigator&&k.navigator.userAgent||"";Xf=/iPod/i.test(t),hT=function(){const e=t.match(/OS (\d+)_/i);return e&&e[1]?e[1]:null}(),yi=/Android/i.test(t),fT=function(){const e=t.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;const i=e[1]&&parseFloat(e[1]),r=e[2]&&parseFloat(e[2]);return i&&r?parseFloat(e[1]+"."+e[2]):i||null}(),pT=/Firefox/i.test(t),Mn=/Edg/i.test(t),Bn=/Chrome/i.test(t)||/CriOS/i.test(t),_i=!Mn&&Bn,Kf=Fl=function(){const e=t.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null}(),mT=function(){const e=/MSIE\s(\d+)\.\d/.exec(t);let i=e&&parseFloat(e[1]);return!i&&/Trident\/7.0/i.test(t)&&/rv:11.0/.test(t)&&(i=11),i}(),Ku=/Safari/i.test(t)&&!_i&&!yi&&!Mn,Ul=/Windows/i.test(t),Yu=/iPad/i.test(t)||Ku&&qa&&!/iPhone/i.test(t),jl=/iPhone/i.test(t)&&!Yu}const dt=jl||Yu||Xf,$l=(Ku||dt)&&!_i;var HD=Object.freeze({__proto__:null,get IS_IPOD(){return Xf},get IOS_VERSION(){return hT},get IS_ANDROID(){return yi},get ANDROID_VERSION(){return fT},get IS_FIREFOX(){return pT},get IS_EDGE(){return Mn},get IS_CHROMIUM(){return Bn},get IS_CHROME(){return _i},get CHROMIUM_VERSION(){return Kf},get CHROME_VERSION(){return Fl},get IE_VERSION(){return mT},get IS_SAFARI(){return Ku},get IS_WINDOWS(){return Ul},get IS_IPAD(){return Yu},get IS_IPHONE(){return jl},TOUCH_ENABLED:qa,IS_IOS:dt,IS_ANY_SAFARI:$l});function S0(t){return typeof t=="string"&&!!t.trim()}function qD(t){if(t.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function ds(){return V===k.document}function hs(t){return gi(t)&&t.nodeType===1}function gT(){try{return k.parent!==k.self}catch{return!0}}function yT(t){return function(e,i){if(!S0(e))return V[t](null);S0(i)&&(i=V.querySelector(i));const r=hs(i)?i:V;return r[t]&&r[t](e)}}function ne(t="div",e={},i={},r){const n=V.createElement(t);return Object.getOwnPropertyNames(e).forEach(function(s){const a=e[s];s==="textContent"?xr(n,a):(n[s]!==a||s==="tabIndex")&&(n[s]=a)}),Object.getOwnPropertyNames(i).forEach(function(s){n.setAttribute(s,i[s])}),r&&Yf(n,r),n}function xr(t,e){return typeof t.textContent>"u"?t.innerText=e:t.textContent=e,t}function ah(t,e){e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}function Ta(t,e){return qD(e),t.classList.contains(e)}function $r(t,...e){return t.classList.add(...e.reduce((i,r)=>i.concat(r.split(/\s+/)),[])),t}function Vl(t,...e){return t?(t.classList.remove(...e.reduce((i,r)=>i.concat(r.split(/\s+/)),[])),t):(le.warn("removeClass was called with an element that doesn't exist"),null)}function _T(t,e,i){return typeof i=="function"&&(i=i(t,e)),typeof i!="boolean"&&(i=void 0),e.split(/\s+/).forEach(r=>t.classList.toggle(r,i)),t}function vT(t,e){Object.getOwnPropertyNames(e).forEach(function(i){const r=e[i];r===null||typeof r>"u"||r===!1?t.removeAttribute(i):t.setAttribute(i,r===!0?"":r)})}function Qi(t){const e={},i=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(t&&t.attributes&&t.attributes.length>0){const r=t.attributes;for(let n=r.length-1;n>=0;n--){const s=r[n].name;let a=r[n].value;(typeof t[s]=="boolean"||i.indexOf(","+s+",")!==-1)&&(a=a!==null),e[s]=a}}return e}function TT(t,e){return t.getAttribute(e)}function Jn(t,e,i){t.setAttribute(e,i)}function Hl(t,e){t.removeAttribute(e)}function xT(){V.body.focus(),V.onselectstart=function(){return!1}}function ST(){V.onselectstart=function(){return!0}}function Zn(t){if(t&&t.getBoundingClientRect&&t.parentNode){const e=t.getBoundingClientRect(),i={};return["bottom","height","left","right","top","width"].forEach(r=>{e[r]!==void 0&&(i[r]=e[r])}),i.height||(i.height=parseFloat(es(t,"height"))),i.width||(i.width=parseFloat(es(t,"width"))),i}}function za(t){if(!t||t&&!t.offsetParent)return{left:0,top:0,width:0,height:0};const e=t.offsetWidth,i=t.offsetHeight;let r=0,n=0;for(;t.offsetParent&&t!==V[Xu.fullscreenElement];)r+=t.offsetLeft,n+=t.offsetTop,t=t.offsetParent;return{left:r,top:n,width:e,height:i}}function ql(t,e){const i={x:0,y:0};if(dt){let m=t;for(;m&&m.nodeName.toLowerCase()!=="html";){const y=es(m,"transform");if(/^matrix/.test(y)){const v=y.slice(7,-1).split(/,\s/).map(Number);i.x+=v[4],i.y+=v[5]}else if(/^matrix3d/.test(y)){const v=y.slice(9,-1).split(/,\s/).map(Number);i.x+=v[12],i.y+=v[13]}m=m.parentNode}}const r={},n=za(e.target),s=za(t),a=s.width,o=s.height;let l=e.offsetY-(s.top-n.top),d=e.offsetX-(s.left-n.left);return e.changedTouches&&(d=e.changedTouches[0].pageX-s.left,l=e.changedTouches[0].pageY+s.top,dt&&(d-=i.x,l-=i.y)),r.y=1-Math.max(0,Math.min(1,l/o)),r.x=Math.max(0,Math.min(1,d/a)),r}function ET(t){return gi(t)&&t.nodeType===3}function zl(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t}function bT(t){return typeof t=="function"&&(t=t()),(Array.isArray(t)?t:[t]).map(e=>{if(typeof e=="function"&&(e=e()),hs(e)||ET(e))return e;if(typeof e=="string"&&/\S/.test(e))return V.createTextNode(e)}).filter(e=>e)}function Yf(t,e){return bT(e).forEach(i=>t.appendChild(i)),t}function CT(t,e){return Yf(zl(t),e)}function Ga(t){return t.button===void 0&&t.buttons===void 0||t.button===0&&t.buttons===void 0||t.type==="mouseup"&&t.button===0&&t.buttons===0?!0:!(t.button!==0||t.buttons!==1)}const gr=yT("querySelector"),wT=yT("querySelectorAll");function es(t,e){if(!t||!e)return"";if(typeof k.getComputedStyle=="function"){let i;try{i=k.getComputedStyle(t)}catch{return""}return i?i.getPropertyValue(e)||i[e]:""}return""}var DT=Object.freeze({__proto__:null,isReal:ds,isEl:hs,isInFrame:gT,createEl:ne,textContent:xr,prependTo:ah,hasClass:Ta,addClass:$r,removeClass:Vl,toggleClass:_T,setAttributes:vT,getAttributes:Qi,getAttribute:TT,setAttribute:Jn,removeAttribute:Hl,blockTextSelection:xT,unblockTextSelection:ST,getBoundingClientRect:Zn,findPosition:za,getPointerPosition:ql,isTextNode:ET,emptyEl:zl,normalizeContent:bT,appendContent:Yf,insertContent:CT,isSingleLeftClick:Ga,$:gr,$$:wT,computedStyle:es});let AT=!1,oh;const zD=function(){if(oh.options.autoSetup===!1)return;const t=Array.prototype.slice.call(V.getElementsByTagName("video")),e=Array.prototype.slice.call(V.getElementsByTagName("audio")),i=Array.prototype.slice.call(V.getElementsByTagName("video-js")),r=t.concat(e,i);if(r&&r.length>0)for(let n=0,s=r.length;n<s;n++){const a=r[n];if(a&&a.getAttribute)a.player===void 0&&a.getAttribute("data-setup")!==null&&oh(a);else{uh(1);break}}else AT||uh(1)};function uh(t,e){ds()&&(e&&(oh=e),k.setTimeout(zD,t))}function lh(){AT=!0,k.removeEventListener("load",lh)}ds()&&(V.readyState==="complete"?lh():k.addEventListener("load",lh));const kT=function(t){const e=V.createElement("style");return e.className=t,e},IT=function(t,e){t.styleSheet?t.styleSheet.cssText=e:t.textContent=e};var ot=new WeakMap;const GD=3;let WD=GD;function vi(){return WD++}function E0(t,e){if(!ot.has(t))return;const i=ot.get(t);i.handlers[e].length===0&&(delete i.handlers[e],t.removeEventListener?t.removeEventListener(e,i.dispatcher,!1):t.detachEvent&&t.detachEvent("on"+e,i.dispatcher)),Object.getOwnPropertyNames(i.handlers).length<=0&&(delete i.handlers,delete i.dispatcher,delete i.disabled),Object.getOwnPropertyNames(i).length===0&&ot.delete(t)}function Qf(t,e,i,r){i.forEach(function(n){t(e,n,r)})}function Gl(t){if(t.fixed_)return t;function e(){return!0}function i(){return!1}if(!t||!t.isPropagationStopped||!t.isImmediatePropagationStopped){const r=t||k.event;t={};for(const n in r)n!=="layerX"&&n!=="layerY"&&n!=="keyLocation"&&n!=="webkitMovementX"&&n!=="webkitMovementY"&&n!=="path"&&(n==="returnValue"&&r.preventDefault||(t[n]=r[n]));if(t.target||(t.target=t.srcElement||V),t.relatedTarget||(t.relatedTarget=t.fromElement===t.target?t.toElement:t.fromElement),t.preventDefault=function(){r.preventDefault&&r.preventDefault(),t.returnValue=!1,r.returnValue=!1,t.defaultPrevented=!0},t.defaultPrevented=!1,t.stopPropagation=function(){r.stopPropagation&&r.stopPropagation(),t.cancelBubble=!0,r.cancelBubble=!0,t.isPropagationStopped=e},t.isPropagationStopped=i,t.stopImmediatePropagation=function(){r.stopImmediatePropagation&&r.stopImmediatePropagation(),t.isImmediatePropagationStopped=e,t.stopPropagation()},t.isImmediatePropagationStopped=i,t.clientX!==null&&t.clientX!==void 0){const n=V.documentElement,s=V.body;t.pageX=t.clientX+(n&&n.scrollLeft||s&&s.scrollLeft||0)-(n&&n.clientLeft||s&&s.clientLeft||0),t.pageY=t.clientY+(n&&n.scrollTop||s&&s.scrollTop||0)-(n&&n.clientTop||s&&s.clientTop||0)}t.which=t.charCode||t.keyCode,t.button!==null&&t.button!==void 0&&(t.button=t.button&1?0:t.button&4?1:t.button&2?2:0)}return t.fixed_=!0,t}let Yo;const XD=function(){if(typeof Yo!="boolean"){Yo=!1;try{const t=Object.defineProperty({},"passive",{get(){Yo=!0}});k.addEventListener("test",null,t),k.removeEventListener("test",null,t)}catch{}}return Yo},KD=["touchstart","touchmove"];function It(t,e,i){if(Array.isArray(e))return Qf(It,t,e,i);ot.has(t)||ot.set(t,{});const r=ot.get(t);if(r.handlers||(r.handlers={}),r.handlers[e]||(r.handlers[e]=[]),i.guid||(i.guid=vi()),r.handlers[e].push(i),r.dispatcher||(r.disabled=!1,r.dispatcher=function(n,s){if(r.disabled)return;n=Gl(n);const a=r.handlers[n.type];if(a){const o=a.slice(0);for(let l=0,d=o.length;l<d&&!n.isImmediatePropagationStopped();l++)try{o[l].call(t,n,s)}catch(m){le.error(m)}}}),r.handlers[e].length===1)if(t.addEventListener){let n=!1;XD()&&KD.indexOf(e)>-1&&(n={passive:!0}),t.addEventListener(e,r.dispatcher,n)}else t.attachEvent&&t.attachEvent("on"+e,r.dispatcher)}function et(t,e,i){if(!ot.has(t))return;const r=ot.get(t);if(!r.handlers)return;if(Array.isArray(e))return Qf(et,t,e,i);const n=function(a,o){r.handlers[o]=[],E0(a,o)};if(e===void 0){for(const a in r.handlers)Object.prototype.hasOwnProperty.call(r.handlers||{},a)&&n(t,a);return}const s=r.handlers[e];if(s){if(!i){n(t,e);return}if(i.guid)for(let a=0;a<s.length;a++)s[a].guid===i.guid&&s.splice(a--,1);E0(t,e)}}function fs(t,e,i){const r=ot.has(t)?ot.get(t):{},n=t.parentNode||t.ownerDocument;if(typeof e=="string"?e={type:e,target:t}:e.target||(e.target=t),e=Gl(e),r.dispatcher&&r.dispatcher.call(t,e,i),n&&!e.isPropagationStopped()&&e.bubbles===!0)fs.call(null,n,e,i);else if(!n&&!e.defaultPrevented&&e.target&&e.target[e.type]){ot.has(e.target)||ot.set(e.target,{});const s=ot.get(e.target);e.target[e.type]&&(s.disabled=!0,typeof e.target[e.type]=="function"&&e.target[e.type](),s.disabled=!1)}return!e.defaultPrevented}function Wl(t,e,i){if(Array.isArray(e))return Qf(Wl,t,e,i);const r=function(){et(t,e,r),i.apply(this,arguments)};r.guid=i.guid=i.guid||vi(),It(t,e,r)}function Jf(t,e,i){const r=function(){et(t,e,r),i.apply(this,arguments)};r.guid=i.guid=i.guid||vi(),It(t,e,r)}var YD=Object.freeze({__proto__:null,fixEvent:Gl,on:It,off:et,trigger:fs,one:Wl,any:Jf});const $t=30,ye=function(t,e,i){e.guid||(e.guid=vi());const r=e.bind(t);return r.guid=i?i+"_"+e.guid:e.guid,r},Ti=function(t,e){let i=k.performance.now();return function(...n){const s=k.performance.now();s-i>=e&&(t(...n),i=s)}},PT=function(t,e,i,r=k){let n;const s=()=>{r.clearTimeout(n),n=null},a=function(){const o=this,l=arguments;let d=function(){n=null,d=null,i||t.apply(o,l)};!n&&i&&t.apply(o,l),r.clearTimeout(n),n=r.setTimeout(d,e)};return a.cancel=s,a};var QD=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:$t,bind_:ye,throttle:Ti,debounce:PT});let Gs;class Vt{on(e,i){const r=this.addEventListener;this.addEventListener=()=>{},It(this,e,i),this.addEventListener=r}off(e,i){et(this,e,i)}one(e,i){const r=this.addEventListener;this.addEventListener=()=>{},Wl(this,e,i),this.addEventListener=r}any(e,i){const r=this.addEventListener;this.addEventListener=()=>{},Jf(this,e,i),this.addEventListener=r}trigger(e){const i=e.type||e;typeof e=="string"&&(e={type:i}),e=Gl(e),this.allowedEvents_[i]&&this["on"+i]&&this["on"+i](e),fs(this,e)}queueTrigger(e){Gs||(Gs=new Map);const i=e.type||e;let r=Gs.get(this);r||(r=new Map,Gs.set(this,r));const n=r.get(i);r.delete(i),k.clearTimeout(n);const s=k.setTimeout(()=>{r.delete(i),r.size===0&&(r=null,Gs.delete(this)),this.trigger(e)},0);r.set(i,s)}}Vt.prototype.allowedEvents_={};Vt.prototype.addEventListener=Vt.prototype.on;Vt.prototype.removeEventListener=Vt.prototype.off;Vt.prototype.dispatchEvent=Vt.prototype.trigger;const Xl=t=>typeof t.name=="function"?t.name():typeof t.name=="string"?t.name:t.name_?t.name_:t.constructor&&t.constructor.name?t.constructor.name:typeof t,Bi=t=>t instanceof Vt||!!t.eventBusEl_&&["on","one","off","trigger"].every(e=>typeof t[e]=="function"),JD=(t,e)=>{Bi(t)?e():(t.eventedCallbacks||(t.eventedCallbacks=[]),t.eventedCallbacks.push(e))},ch=t=>typeof t=="string"&&/\S/.test(t)||Array.isArray(t)&&!!t.length,Qu=(t,e,i)=>{if(!t||!t.nodeName&&!Bi(t))throw new Error(`Invalid target for ${Xl(e)}#${i}; must be a DOM node or evented object.`)},OT=(t,e,i)=>{if(!ch(t))throw new Error(`Invalid event type for ${Xl(e)}#${i}; must be a non-empty string or array.`)},LT=(t,e,i)=>{if(typeof t!="function")throw new Error(`Invalid listener for ${Xl(e)}#${i}; must be a function.`)},Zc=(t,e,i)=>{const r=e.length<3||e[0]===t||e[0]===t.eventBusEl_;let n,s,a;return r?(n=t.eventBusEl_,e.length>=3&&e.shift(),[s,a]=e):[n,s,a]=e,Qu(n,t,i),OT(s,t,i),LT(a,t,i),a=ye(t,a),{isTargetingSelf:r,target:n,type:s,listener:a}},kr=(t,e,i,r)=>{Qu(t,t,e),t.nodeName?YD[e](t,i,r):t[e](i,r)},ZD={on(...t){const{isTargetingSelf:e,target:i,type:r,listener:n}=Zc(this,t,"on");if(kr(i,"on",r,n),!e){const s=()=>this.off(i,r,n);s.guid=n.guid;const a=()=>this.off("dispose",s);a.guid=n.guid,kr(this,"on","dispose",s),kr(i,"on","dispose",a)}},one(...t){const{isTargetingSelf:e,target:i,type:r,listener:n}=Zc(this,t,"one");if(e)kr(i,"one",r,n);else{const s=(...a)=>{this.off(i,r,s),n.apply(null,a)};s.guid=n.guid,kr(i,"one",r,s)}},any(...t){const{isTargetingSelf:e,target:i,type:r,listener:n}=Zc(this,t,"any");if(e)kr(i,"any",r,n);else{const s=(...a)=>{this.off(i,r,s),n.apply(null,a)};s.guid=n.guid,kr(i,"any",r,s)}},off(t,e,i){if(!t||ch(t))et(this.eventBusEl_,t,e);else{const r=t,n=e;Qu(r,this,"off"),OT(n,this,"off"),LT(i,this,"off"),i=ye(this,i),this.off("dispose",i),r.nodeName?(et(r,n,i),et(r,"dispose",i)):Bi(r)&&(r.off(n,i),r.off("dispose",i))}},trigger(t,e){Qu(this.eventBusEl_,this,"trigger");const i=t&&typeof t!="string"?t.type:t;if(!ch(i))throw new Error(`Invalid event type for ${Xl(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);return fs(this.eventBusEl_,t,e)}};function Zf(t,e={}){const{eventBusKey:i}=e;if(i){if(!t[i].nodeName)throw new Error(`The eventBusKey "${i}" does not refer to an element.`);t.eventBusEl_=t[i]}else t.eventBusEl_=ne("span",{className:"vjs-event-bus"});return Object.assign(t,ZD),t.eventedCallbacks&&t.eventedCallbacks.forEach(r=>{r()}),t.on("dispose",()=>{t.off(),[t,t.el_,t.eventBusEl_].forEach(function(r){r&&ot.has(r)&&ot.delete(r)}),k.setTimeout(()=>{t.eventBusEl_=null},0)}),t}const eA={state:{},setState(t){typeof t=="function"&&(t=t());let e;return Rn(t,(i,r)=>{this.state[r]!==i&&(e=e||{},e[r]={from:this.state[r],to:i}),this.state[r]=i}),e&&Bi(this)&&this.trigger({changes:e,type:"statechanged"}),e}};function NT(t,e){return Object.assign(t,eA),t.state=Object.assign({},t.state,e),typeof t.handleStateChanged=="function"&&Bi(t)&&t.on("statechanged",t.handleStateChanged),t}const xa=function(t){return typeof t!="string"?t:t.replace(/./,e=>e.toLowerCase())},Ie=function(t){return typeof t!="string"?t:t.replace(/./,e=>e.toUpperCase())},RT=function(t,e){return Ie(t)===Ie(e)};var tA=Object.freeze({__proto__:null,toLowerCase:xa,toTitleCase:Ie,titleCaseEquals:RT});class B{constructor(e,i,r){if(!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=ge({},this.options_),i=this.options_=ge(this.options_,i),this.id_=i.id||i.el&&i.el.id,!this.id_){const n=e&&e.id&&e.id()||"no_player";this.id_=`${n}_component_${vi()}`}this.name_=i.name||null,i.el?this.el_=i.el:i.createEl!==!1&&(this.el_=this.createEl()),i.className&&this.el_&&i.className.split(" ").forEach(n=>this.addClass(n)),["on","off","one","any","trigger"].forEach(n=>{this[n]=void 0}),i.evented!==!1&&(Zf(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),NT(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,i.initChildren!==!1&&this.initChildren(),this.ready(r),i.reportTouchActivity!==!1&&this.enableTouchActivity()}on(e,i){}off(e,i){}one(e,i){}any(e,i){}trigger(e){}dispose(e={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let i=this.children_.length-1;i>=0;i--)this.children_[i].dispose&&this.children_[i].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return!!this.isDisposed_}player(){return this.player_}options(e){return e?(this.options_=ge(this.options_,e),this.options_):this.options_}el(){return this.el_}createEl(e,i,r){return ne(e,i,r)}localize(e,i,r=e){const n=this.player_.language&&this.player_.language(),s=this.player_.languages&&this.player_.languages(),a=s&&s[n],o=n&&n.split("-")[0],l=s&&s[o];let d=r;return a&&a[e]?d=a[e]:l&&l[e]&&(d=l[e]),i&&(d=d.replace(/\{(\d+)\}/g,function(m,y){const v=i[y-1];let b=v;return typeof v>"u"&&(b=m),b})),d}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(e){return this.childIndex_[e]}getChild(e){if(e)return this.childNameIndex_[e]}getDescendant(...e){e=e.reduce((r,n)=>r.concat(n),[]);let i=this;for(let r=0;r<e.length;r++)if(i=i.getChild(e[r]),!i||!i.getChild)return;return i}addChild(e,i={},r=this.children_.length){let n,s;if(typeof e=="string"){s=Ie(e);const a=i.componentClass||s;i.name=s;const o=B.getComponent(a);if(!o)throw new Error(`Component ${a} does not exist`);if(typeof o!="function")return null;n=new o(this.player_||this,i)}else n=e;if(n.parentComponent_&&n.parentComponent_.removeChild(n),this.children_.splice(r,0,n),n.parentComponent_=this,typeof n.id=="function"&&(this.childIndex_[n.id()]=n),s=s||n.name&&Ie(n.name()),s&&(this.childNameIndex_[s]=n,this.childNameIndex_[xa(s)]=n),typeof n.el=="function"&&n.el()){let a=null;this.children_[r+1]&&(this.children_[r+1].el_?a=this.children_[r+1].el_:hs(this.children_[r+1])&&(a=this.children_[r+1])),this.contentEl().insertBefore(n.el(),a)}return n}removeChild(e){if(typeof e=="string"&&(e=this.getChild(e)),!e||!this.children_)return;let i=!1;for(let n=this.children_.length-1;n>=0;n--)if(this.children_[n]===e){i=!0,this.children_.splice(n,1);break}if(!i)return;e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[Ie(e.name())]=null,this.childNameIndex_[xa(e.name())]=null;const r=e.el();r&&r.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}initChildren(){const e=this.options_.children;if(e){const i=this.options_,r=a=>{const o=a.name;let l=a.opts;if(i[o]!==void 0&&(l=i[o]),l===!1)return;l===!0&&(l={}),l.playerOptions=this.options_.playerOptions;const d=this.addChild(o,l);d&&(this[o]=d)};let n;const s=B.getComponent("Tech");Array.isArray(e)?n=e:n=Object.keys(e),n.concat(Object.keys(this.options_).filter(function(a){return!n.some(function(o){return typeof o=="string"?a===o:a===o.name})})).map(a=>{let o,l;return typeof a=="string"?(o=a,l=e[o]||this.options_[o]||{}):(o=a.name,l=a),{name:o,opts:l}}).filter(a=>{const o=B.getComponent(a.opts.componentClass||Ie(a.name));return o&&!s.isTech(o)}).forEach(r)}}buildCSSClass(){return""}ready(e,i=!1){if(e){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(e);return}i?e.call(this):this.setTimeout(e,1)}}triggerReady(){this.isReady_=!0,this.setTimeout(function(){const e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach(function(i){i.call(this)},this),this.trigger("ready")},1)}$(e,i){return gr(e,i||this.contentEl())}$$(e,i){return wT(e,i||this.contentEl())}hasClass(e){return Ta(this.el_,e)}addClass(...e){$r(this.el_,...e)}removeClass(...e){Vl(this.el_,...e)}toggleClass(e,i){_T(this.el_,e,i)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(e){return TT(this.el_,e)}setAttribute(e,i){Jn(this.el_,e,i)}removeAttribute(e){Hl(this.el_,e)}width(e,i){return this.dimension("width",e,i)}height(e,i){return this.dimension("height",e,i)}dimensions(e,i){this.width(e,!0),this.height(i)}dimension(e,i,r){if(i!==void 0){(i===null||i!==i)&&(i=0),(""+i).indexOf("%")!==-1||(""+i).indexOf("px")!==-1?this.el_.style[e]=i:i==="auto"?this.el_.style[e]="":this.el_.style[e]=i+"px",r||this.trigger("componentresize");return}if(!this.el_)return 0;const n=this.el_.style[e],s=n.indexOf("px");return parseInt(s!==-1?n.slice(0,s):this.el_["offset"+Ie(e)],10)}currentDimension(e){let i=0;if(e!=="width"&&e!=="height")throw new Error("currentDimension only accepts width or height value");if(i=es(this.el_,e),i=parseFloat(i),i===0||isNaN(i)){const r=`offset${Ie(e)}`;i=this.el_[r]}return i}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(e){this.player_&&(te.isEventKey(e,"Tab")||e.stopPropagation(),this.player_.handleKeyDown(e))}handleKeyPress(e){this.handleKeyDown(e)}emitTapEvents(){let e=0,i=null;const r=10,n=200;let s;this.on("touchstart",function(o){o.touches.length===1&&(i={pageX:o.touches[0].pageX,pageY:o.touches[0].pageY},e=k.performance.now(),s=!0)}),this.on("touchmove",function(o){if(o.touches.length>1)s=!1;else if(i){const l=o.touches[0].pageX-i.pageX,d=o.touches[0].pageY-i.pageY;Math.sqrt(l*l+d*d)>r&&(s=!1)}});const a=function(){s=!1};this.on("touchleave",a),this.on("touchcancel",a),this.on("touchend",function(o){i=null,s===!0&&k.performance.now()-e<n&&(o.preventDefault(),this.trigger("tap"))})}enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity)return;const e=ye(this.player(),this.player().reportUserActivity);let i;this.on("touchstart",function(){e(),this.clearInterval(i),i=this.setInterval(e,250)});const r=function(n){e(),this.clearInterval(i)};this.on("touchmove",e),this.on("touchend",r),this.on("touchcancel",r)}setTimeout(e,i){var r;return e=ye(this,e),this.clearTimersOnDispose_(),r=k.setTimeout(()=>{this.setTimeoutIds_.has(r)&&this.setTimeoutIds_.delete(r),e()},i),this.setTimeoutIds_.add(r),r}clearTimeout(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),k.clearTimeout(e)),e}setInterval(e,i){e=ye(this,e),this.clearTimersOnDispose_();const r=k.setInterval(e,i);return this.setIntervalIds_.add(r),r}clearInterval(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),k.clearInterval(e)),e}requestAnimationFrame(e){this.clearTimersOnDispose_();var i;return e=ye(this,e),i=k.requestAnimationFrame(()=>{this.rafIds_.has(i)&&this.rafIds_.delete(i),e()}),this.rafIds_.add(i),i}requestNamedAnimationFrame(e,i){if(this.namedRafs_.has(e))return;this.clearTimersOnDispose_(),i=ye(this,i);const r=this.requestAnimationFrame(()=>{i(),this.namedRafs_.has(e)&&this.namedRafs_.delete(e)});return this.namedRafs_.set(e,r),e}cancelNamedAnimationFrame(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))}cancelAnimationFrame(e){return this.rafIds_.has(e)&&(this.rafIds_.delete(e),k.cancelAnimationFrame(e)),e}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(([e,i])=>{this[e].forEach((r,n)=>this[i](n))}),this.clearingTimersOnDispose_=!1}))}static registerComponent(e,i){if(typeof e!="string"||!e)throw new Error(`Illegal component name, "${e}"; must be a non-empty string.`);const r=B.getComponent("Tech"),n=r&&r.isTech(i),s=B===i||B.prototype.isPrototypeOf(i.prototype);if(n||!s){let o;throw n?o="techs must be registered using Tech.registerTech()":o="must be a Component subclass",new Error(`Illegal component, "${e}"; ${o}.`)}e=Ie(e),B.components_||(B.components_={});const a=B.getComponent("Player");if(e==="Player"&&a&&a.players){const o=a.players,l=Object.keys(o);if(o&&l.length>0&&l.map(d=>o[d]).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return B.components_[e]=i,B.components_[xa(e)]=i,i}static getComponent(e){if(!(!e||!B.components_))return B.components_[e]}}B.registerComponent("Component",B);function iA(t,e,i){if(typeof e!="number"||e<0||e>i)throw new Error(`Failed to execute '${t}' on 'TimeRanges': The index provided (${e}) is non-numeric or out of bounds (0-${i}).`)}function b0(t,e,i,r){return iA(t,r,i.length-1),i[r][e]}function ed(t){let e;return t===void 0||t.length===0?e={length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:e={length:t.length,start:b0.bind(null,"start",0,t),end:b0.bind(null,"end",1,t)},k.Symbol&&k.Symbol.iterator&&(e[k.Symbol.iterator]=()=>(t||[]).values()),e}function mi(t,e){return Array.isArray(t)?ed(t):t===void 0||e===void 0?ed():ed([[t,e]])}const MT=function(t,e){t=t<0?0:t;let i=Math.floor(t%60),r=Math.floor(t/60%60),n=Math.floor(t/3600);const s=Math.floor(e/60%60),a=Math.floor(e/3600);return(isNaN(t)||t===1/0)&&(n=r=i="-"),n=n>0||a>0?n+":":"",r=((n||s>=10)&&r<10?"0"+r:r)+":",i=i<10?"0"+i:i,n+r+i};let ep=MT;function BT(t){ep=t}function FT(){ep=MT}function Wr(t,e=t){return ep(t,e)}var rA=Object.freeze({__proto__:null,createTimeRanges:mi,createTimeRange:mi,setFormatTime:BT,resetFormatTime:FT,formatTime:Wr});function UT(t,e){let i=0,r,n;if(!e)return 0;(!t||!t.length)&&(t=mi(0,0));for(let s=0;s<t.length;s++)r=t.start(s),n=t.end(s),n>e&&(n=e),i+=n-r;return i/e}function ut(t){if(t instanceof ut)return t;typeof t=="number"?this.code=t:typeof t=="string"?this.message=t:gi(t)&&(typeof t.code=="number"&&(this.code=t.code),Object.assign(this,t)),this.message||(this.message=ut.defaultMessages[this.code]||"")}ut.prototype.code=0;ut.prototype.message="";ut.prototype.status=null;ut.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];ut.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(let t=0;t<ut.errorTypes.length;t++)ut[ut.errorTypes[t]]=t,ut.prototype[ut.errorTypes[t]]=t;function Sa(t){return t!=null&&typeof t.then=="function"}function oi(t){Sa(t)&&t.then(null,e=>{})}const dh=function(t){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((i,r,n)=>(t[r]&&(i[r]=t[r]),i),{cues:t.cues&&Array.prototype.map.call(t.cues,function(i){return{startTime:i.startTime,endTime:i.endTime,text:i.text,id:i.id}})})},nA=function(t){const e=t.$$("track"),i=Array.prototype.map.call(e,n=>n.track);return Array.prototype.map.call(e,function(n){const s=dh(n.track);return n.src&&(s.src=n.src),s}).concat(Array.prototype.filter.call(t.textTracks(),function(n){return i.indexOf(n)===-1}).map(dh))},sA=function(t,e){return t.forEach(function(i){const r=e.addRemoteTextTrack(i).track;!i.src&&i.cues&&i.cues.forEach(n=>r.addCue(n))}),e.textTracks()};var C0={textTracksToJson:nA,jsonToTextTracks:sA,trackToJson_:dh};const td="vjs-modal-dialog";class ps extends B{constructor(e,i){super(e,i),this.handleKeyDown_=r=>this.handleKeyDown(r),this.close_=r=>this.close(r),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=ne("div",{className:`${td}-content`},{role:"document"}),this.descEl_=ne("p",{className:`${td}-description vjs-control-text`,id:this.el().getAttribute("aria-describedby")}),xr(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return`${td} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||"Modal Window")}description(){let e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e}open(){if(!this.opened_){const e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}}opened(e){return typeof e=="boolean"&&this[e?"open":"close"](),this.opened_}close(){if(!this.opened_)return;const e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}closeable(e){if(typeof e=="boolean"){const i=this.closeable_=!!e;let r=this.getChild("closeButton");if(i&&!r){const n=this.contentEl_;this.contentEl_=this.el_,r=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=n,this.on(r,"close",this.close_)}!i&&r&&(this.off(r,"close",this.close_),this.removeChild(r),r.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(e){const i=this.contentEl(),r=i.parentNode,n=i.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,r.removeChild(i),this.empty(),CT(i,e),this.trigger("modalfill"),n?r.insertBefore(i,n):r.appendChild(i);const s=this.getChild("closeButton");s&&r.appendChild(s.el_)}empty(){this.trigger("beforemodalempty"),zl(this.contentEl()),this.trigger("modalempty")}content(e){return typeof e<"u"&&(this.content_=e),this.content_}conditionalFocus_(){const e=V.activeElement,i=this.player_.el_;this.previouslyActiveEl_=null,(i.contains(e)||i===e)&&(this.previouslyActiveEl_=e,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(e){if(e.stopPropagation(),te.isEventKey(e,"Escape")&&this.closeable()){e.preventDefault(),this.close();return}if(!te.isEventKey(e,"Tab"))return;const i=this.focusableEls_(),r=this.el_.querySelector(":focus");let n;for(let s=0;s<i.length;s++)if(r===i[s]){n=s;break}V.activeElement===this.el_&&(n=0),e.shiftKey&&n===0?(i[i.length-1].focus(),e.preventDefault()):!e.shiftKey&&n===i.length-1&&(i[0].focus(),e.preventDefault())}focusableEls_(){const e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,i=>(i instanceof k.HTMLAnchorElement||i instanceof k.HTMLAreaElement)&&i.hasAttribute("href")||(i instanceof k.HTMLInputElement||i instanceof k.HTMLSelectElement||i instanceof k.HTMLTextAreaElement||i instanceof k.HTMLButtonElement)&&!i.hasAttribute("disabled")||i instanceof k.HTMLIFrameElement||i instanceof k.HTMLObjectElement||i instanceof k.HTMLEmbedElement||i.hasAttribute("tabindex")&&i.getAttribute("tabindex")!==-1||i.hasAttribute("contenteditable"))}}ps.prototype.options_={pauseOnOpen:!0,temporary:!0};B.registerComponent("ModalDialog",ps);class ts extends Vt{constructor(e=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let i=0;i<e.length;i++)this.addTrack(e[i])}addTrack(e){const i=this.tracks_.length;""+i in this||Object.defineProperty(this,i,{get(){return this.tracks_[i]}}),this.tracks_.indexOf(e)===-1&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=()=>{this.trigger({track:e,type:"labelchange",target:this})},Bi(e)&&e.addEventListener("labelchange",e.labelchange_)}removeTrack(e){let i;for(let r=0,n=this.length;r<n;r++)if(this[r]===e){i=this[r],i.off&&i.off(),this.tracks_.splice(r,1);break}i&&this.trigger({track:i,type:"removetrack",target:this})}getTrackById(e){let i=null;for(let r=0,n=this.length;r<n;r++){const s=this[r];if(s.id===e){i=s;break}}return i}}ts.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(const t in ts.prototype.allowedEvents_)ts.prototype["on"+t]=null;const id=function(t,e){for(let i=0;i<t.length;i++)!Object.keys(t[i]).length||e.id===t[i].id||(t[i].enabled=!1)};class aA extends ts{constructor(e=[]){for(let i=e.length-1;i>=0;i--)if(e[i].enabled){id(e,e[i]);break}super(e),this.changing_=!1}addTrack(e){e.enabled&&id(this,e),super.addTrack(e),e.addEventListener&&(e.enabledChange_=()=>{this.changing_||(this.changing_=!0,id(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)}}const rd=function(t,e){for(let i=0;i<t.length;i++)!Object.keys(t[i]).length||e.id===t[i].id||(t[i].selected=!1)};class oA extends ts{constructor(e=[]){for(let i=e.length-1;i>=0;i--)if(e[i].selected){rd(e,e[i]);break}super(e),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let i=0;i<this.length;i++)if(this[i].selected)return i;return-1},set(){}})}addTrack(e){e.selected&&rd(this,e),super.addTrack(e),e.addEventListener&&(e.selectedChange_=()=>{this.changing_||(this.changing_=!0,rd(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)}}class jT extends ts{addTrack(e){super.addTrack(e),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),e.addEventListener("modechange",this.queueChange_),["metadata","chapters"].indexOf(e.kind)===-1&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(e){super.removeTrack(e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}}class uA{constructor(e=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let i=0,r=e.length;i<r;i++)this.addTrackElement_(e[i])}addTrackElement_(e){const i=this.trackElements_.length;""+i in this||Object.defineProperty(this,i,{get(){return this.trackElements_[i]}}),this.trackElements_.indexOf(e)===-1&&this.trackElements_.push(e)}getTrackElementByTrack_(e){let i;for(let r=0,n=this.trackElements_.length;r<n;r++)if(e===this.trackElements_[r].track){i=this.trackElements_[r];break}return i}removeTrackElement_(e){for(let i=0,r=this.trackElements_.length;i<r;i++)if(e===this.trackElements_[i]){this.trackElements_[i].track&&typeof this.trackElements_[i].track.off=="function"&&this.trackElements_[i].track.off(),typeof this.trackElements_[i].off=="function"&&this.trackElements_[i].off(),this.trackElements_.splice(i,1);break}}}class Ju{constructor(e){Ju.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(e){const i=this.length||0;let r=0;const n=e.length;this.cues_=e,this.length_=e.length;const s=function(a){""+a in this||Object.defineProperty(this,""+a,{get(){return this.cues_[a]}})};if(i<n)for(r=i;r<n;r++)s.call(this,r)}getCueById(e){let i=null;for(let r=0,n=this.length;r<n;r++){const s=this[r];if(s.id===e){i=s;break}}return i}}const lA={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},cA={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},dA={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},w0={disabled:"disabled",hidden:"hidden",showing:"showing"};class tp extends Vt{constructor(e={}){super();const i={id:e.id||"vjs_track_"+vi(),kind:e.kind||"",language:e.language||""};let r=e.label||"";for(const n in i)Object.defineProperty(this,n,{get(){return i[n]},set(){}});Object.defineProperty(this,"label",{get(){return r},set(n){n!==r&&(r=n,this.trigger("labelchange"))}})}}const ip=function(t){const e=["protocol","hostname","port","pathname","search","hash","host"],i=V.createElement("a");i.href=t;const r={};for(let n=0;n<e.length;n++)r[e[n]]=i[e[n]];return r.protocol==="http:"&&(r.host=r.host.replace(/:80$/,"")),r.protocol==="https:"&&(r.host=r.host.replace(/:443$/,"")),r.protocol||(r.protocol=k.location.protocol),r.host||(r.host=k.location.host),r},$T=function(t){if(!t.match(/^https?:\/\//)){const e=V.createElement("a");e.href=t,t=e.href}return t},rp=function(t){if(typeof t=="string"){const i=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(t);if(i)return i.pop().toLowerCase()}return""},Kl=function(t,e=k.location){const i=ip(t);return(i.protocol===":"?e.protocol:i.protocol)+i.host!==e.protocol+e.host};var hA=Object.freeze({__proto__:null,parseUrl:ip,getAbsoluteURL:$T,getFileExtension:rp,isCrossOrigin:Kl});const D0=function(t,e){const i=new k.WebVTT.Parser(k,k.vttjs,k.WebVTT.StringDecoder()),r=[];i.oncue=function(n){e.addCue(n)},i.onparsingerror=function(n){r.push(n)},i.onflush=function(){e.trigger({type:"loadeddata",target:e})},i.parse(t),r.length>0&&(k.console&&k.console.groupCollapsed&&k.console.groupCollapsed(`Text Track parsing errors for ${e.src}`),r.forEach(n=>le.error(n)),k.console&&k.console.groupEnd&&k.console.groupEnd()),i.flush()},A0=function(t,e){const i={uri:t},r=Kl(t);r&&(i.cors=r);const n=e.tech_.crossOrigin()==="use-credentials";n&&(i.withCredentials=n),cv(i,ye(this,function(s,a,o){if(s)return le.error(s,a);e.loaded_=!0,typeof k.WebVTT!="function"?e.tech_&&e.tech_.any(["vttjsloaded","vttjserror"],l=>{if(l.type==="vttjserror"){le.error(`vttjs failed to load, stopping trying to process ${e.src}`);return}return D0(o,e)}):D0(o,e)}))};class no extends tp{constructor(e={}){if(!e.tech)throw new Error("A tech was not provided.");const i=ge(e,{kind:dA[e.kind]||"subtitles",language:e.language||e.srclang||""});let r=w0[i.mode]||"disabled";const n=i.default;(i.kind==="metadata"||i.kind==="chapters")&&(r="hidden"),super(i),this.tech_=i.tech,this.cues_=[],this.activeCues_=[],this.preload_=this.tech_.preloadTextTracks!==!1;const s=new Ju(this.cues_),a=new Ju(this.activeCues_);let o=!1;this.timeupdateHandler=ye(this,function(d={}){if(!this.tech_.isDisposed()){if(!this.tech_.isReady_){d.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler));return}this.activeCues=this.activeCues,o&&(this.trigger("cuechange"),o=!1),d.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}});const l=()=>{this.stopTracking()};this.tech_.one("dispose",l),r!=="disabled"&&this.startTracking(),Object.defineProperties(this,{default:{get(){return n},set(){}},mode:{get(){return r},set(d){w0[d]&&r!==d&&(r=d,!this.preload_&&r!=="disabled"&&this.cues.length===0&&A0(this.src,this),this.stopTracking(),r!=="disabled"&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?s:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(this.cues.length===0)return a;const d=this.tech_.currentTime(),m=[];for(let y=0,v=this.cues.length;y<v;y++){const b=this.cues[y];b.startTime<=d&&b.endTime>=d&&m.push(b)}if(o=!1,m.length!==this.activeCues_.length)o=!0;else for(let y=0;y<m.length;y++)this.activeCues_.indexOf(m[y])===-1&&(o=!0);return this.activeCues_=m,a.setCues_(this.activeCues_),a},set(){}}}),i.src?(this.src=i.src,this.preload_||(this.loaded_=!0),(this.preload_||i.kind!=="subtitles"&&i.kind!=="captions")&&A0(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(e){let i=e;if(k.vttjs&&!(e instanceof k.vttjs.VTTCue)){i=new k.vttjs.VTTCue(e.startTime,e.endTime,e.text);for(const n in e)n in i||(i[n]=e[n]);i.id=e.id,i.originalCue_=e}const r=this.tech_.textTracks();for(let n=0;n<r.length;n++)r[n]!==this&&r[n].removeCue(i);this.cues_.push(i),this.cues.setCues_(this.cues_)}removeCue(e){let i=this.cues_.length;for(;i--;){const r=this.cues_[i];if(r===e||r.originalCue_&&r.originalCue_===e){this.cues_.splice(i,1),this.cues.setCues_(this.cues_);break}}}}no.prototype.allowedEvents_={cuechange:"cuechange"};class VT extends tp{constructor(e={}){const i=ge(e,{kind:cA[e.kind]||""});super(i);let r=!1;Object.defineProperty(this,"enabled",{get(){return r},set(n){typeof n!="boolean"||n===r||(r=n,this.trigger("enabledchange"))}}),i.enabled&&(this.enabled=i.enabled),this.loaded_=!0}}class HT extends tp{constructor(e={}){const i=ge(e,{kind:lA[e.kind]||""});super(i);let r=!1;Object.defineProperty(this,"selected",{get(){return r},set(n){typeof n!="boolean"||n===r||(r=n,this.trigger("selectedchange"))}}),i.selected&&(this.selected=i.selected)}}class Hi extends Vt{constructor(e={}){super();let i;const r=new no(e);this.kind=r.kind,this.src=r.src,this.srclang=r.language,this.label=r.label,this.default=r.default,Object.defineProperties(this,{readyState:{get(){return i}},track:{get(){return r}}}),i=Hi.NONE,r.addEventListener("loadeddata",()=>{i=Hi.LOADED,this.trigger({type:"load",target:this})})}}Hi.prototype.allowedEvents_={load:"load"};Hi.NONE=0;Hi.LOADING=1;Hi.LOADED=2;Hi.ERROR=3;const Ft={audio:{ListClass:aA,TrackClass:VT,capitalName:"Audio"},video:{ListClass:oA,TrackClass:HT,capitalName:"Video"},text:{ListClass:jT,TrackClass:no,capitalName:"Text"}};Object.keys(Ft).forEach(function(t){Ft[t].getterName=`${t}Tracks`,Ft[t].privateName=`${t}Tracks_`});const is={remoteText:{ListClass:jT,TrackClass:no,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:uA,TrackClass:Hi,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},st=Object.assign({},Ft,is);is.names=Object.keys(is);Ft.names=Object.keys(Ft);st.names=[].concat(is.names).concat(Ft.names);function fA(t,e,i,r,n={}){const s=t.textTracks();n.kind=e,i&&(n.label=i),r&&(n.language=r),n.tech=t;const a=new st.text.TrackClass(n);return s.addTrack(a),a}class ie extends B{constructor(e={},i=function(){}){e.reportTouchActivity=!1,super(null,e,i),this.onDurationChange_=r=>this.onDurationChange(r),this.trackProgress_=r=>this.trackProgress(r),this.trackCurrentTime_=r=>this.trackCurrentTime(r),this.stopTrackingCurrentTime_=r=>this.stopTrackingCurrentTime(r),this.disposeSourceHandler_=r=>this.disposeSourceHandler(r),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),st.names.forEach(r=>{const n=st[r];e&&e[n.getterName]&&(this[n.privateName]=e[n.getterName])}),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(r=>{e[`native${r}Tracks`]===!1&&(this[`featuresNative${r}Tracks`]=!1)}),e.nativeCaptions===!1||e.nativeTextTracks===!1?this.featuresNativeTextTracks=!1:(e.nativeCaptions===!0||e.nativeTextTracks===!0)&&(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=e.preloadTextTracks!==!1,this.autoRemoteTextTracks_=new st.text.ListClass,this.initTrackListeners(),e.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(e){this.isReady_||this.one("ready",()=>this.setTimeout(()=>this.triggerSourceset(e),1)),this.trigger({src:e,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(ye(this,function(){const i=this.bufferedPercent();this.bufferedPercent_!==i&&this.trigger("progress"),this.bufferedPercent_=i,i===1&&this.stopTrackingProgress()}),500)}onDurationChange(e){this.duration_=this.duration()}buffered(){return mi(0,0)}bufferedPercent(){return UT(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(Ft.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(e){e=[].concat(e),e.forEach(i=>{const r=this[`${i}Tracks`]()||[];let n=r.length;for(;n--;){const s=r[n];i==="text"&&this.removeRemoteTextTrack(s),r.removeTrack(s)}})}cleanupAutoTextTracks(){const e=this.autoRemoteTextTracks_||[];let i=e.length;for(;i--;){const r=e[i];this.removeRemoteTextTrack(r)}}reset(){}crossOrigin(){}setCrossOrigin(){}error(e){return e!==void 0&&(this.error_=new ut(e),this.trigger("error")),this.error_}played(){return this.hasStarted_?mi(0,0):mi()}play(){}setScrubbing(e){}scrubbing(){}setCurrentTime(e){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){Ft.names.forEach(e=>{const i=Ft[e],r=()=>{this.trigger(`${e}trackchange`)},n=this[i.getterName]();n.addEventListener("removetrack",r),n.addEventListener("addtrack",r),this.on("dispose",()=>{n.removeEventListener("removetrack",r),n.removeEventListener("addtrack",r)})})}addWebVttScript_(){if(!k.WebVTT)if(V.body.contains(this.el())){if(!this.options_["vtt.js"]&&Qn(zg)&&Object.keys(zg).length>0){this.trigger("vttjsloaded");return}const e=V.createElement("script");e.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=()=>{this.trigger("vttjsloaded")},e.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",()=>{e.onload=null,e.onerror=null}),k.WebVTT=!0,this.el().parentNode.appendChild(e)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){const e=this.textTracks(),i=this.remoteTextTracks(),r=o=>e.addTrack(o.track),n=o=>e.removeTrack(o.track);i.on("addtrack",r),i.on("removetrack",n),this.addWebVttScript_();const s=()=>this.trigger("texttrackchange"),a=()=>{s();for(let o=0;o<e.length;o++){const l=e[o];l.removeEventListener("cuechange",s),l.mode==="showing"&&l.addEventListener("cuechange",s)}};a(),e.addEventListener("change",a),e.addEventListener("addtrack",a),e.addEventListener("removetrack",a),this.on("dispose",function(){i.off("addtrack",r),i.off("removetrack",n),e.removeEventListener("change",a),e.removeEventListener("addtrack",a),e.removeEventListener("removetrack",a);for(let o=0;o<e.length;o++)e[o].removeEventListener("cuechange",s)})}addTextTrack(e,i,r){if(!e)throw new Error("TextTrack kind is required but was not provided");return fA(this,e,i,r)}createRemoteTextTrack(e){const i=ge(e,{tech:this});return new is.remoteTextEl.TrackClass(i)}addRemoteTextTrack(e={},i){const r=this.createRemoteTextTrack(e);return typeof i!="boolean"&&(i=!1),this.remoteTextTrackEls().addTrackElement_(r),this.remoteTextTracks().addTrack(r.track),i===!1&&this.ready(()=>this.autoRemoteTextTracks_.addTrack(r.track)),r}removeRemoteTextTrack(e){const i=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(i),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(e){const i=vi();return!this.isReady_||this.paused()?(this.queuedHanders_.add(i),this.one("playing",()=>{this.queuedHanders_.has(i)&&(this.queuedHanders_.delete(i),e())})):this.requestNamedAnimationFrame(i,e),i}cancelVideoFrameCallback(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(e){}overrideNativeVideoTracks(e){}canPlayType(e){return""}static canPlayType(e){return""}static canPlaySource(e,i){return ie.canPlayType(e.type)}static isTech(e){return e.prototype instanceof ie||e instanceof ie||e===ie}static registerTech(e,i){if(ie.techs_||(ie.techs_={}),!ie.isTech(i))throw new Error(`Tech ${e} must be a Tech`);if(!ie.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!ie.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=Ie(e),ie.techs_[e]=i,ie.techs_[xa(e)]=i,e!=="Tech"&&ie.defaultTechOrder_.push(e),i}static getTech(e){if(e){if(ie.techs_&&ie.techs_[e])return ie.techs_[e];if(e=Ie(e),k&&k.videojs&&k.videojs[e])return le.warn(`The ${e} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),k.videojs[e]}}}st.names.forEach(function(t){const e=st[t];ie.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}});ie.prototype.featuresVolumeControl=!0;ie.prototype.featuresMuteControl=!0;ie.prototype.featuresFullscreenResize=!1;ie.prototype.featuresPlaybackRate=!1;ie.prototype.featuresProgressEvents=!1;ie.prototype.featuresSourceset=!1;ie.prototype.featuresTimeupdateEvents=!1;ie.prototype.featuresNativeTextTracks=!1;ie.prototype.featuresVideoFrameCallback=!1;ie.withSourceHandlers=function(t){t.registerSourceHandler=function(i,r){let n=t.sourceHandlers;n||(n=t.sourceHandlers=[]),r===void 0&&(r=n.length),n.splice(r,0,i)},t.canPlayType=function(i){const r=t.sourceHandlers||[];let n;for(let s=0;s<r.length;s++)if(n=r[s].canPlayType(i),n)return n;return""},t.selectSourceHandler=function(i,r){const n=t.sourceHandlers||[];let s;for(let a=0;a<n.length;a++)if(s=n[a].canHandleSource(i,r),s)return n[a];return null},t.canPlaySource=function(i,r){const n=t.selectSourceHandler(i,r);return n?n.canHandleSource(i,r):""},["seekable","seeking","duration"].forEach(function(i){const r=this[i];typeof r=="function"&&(this[i]=function(){return this.sourceHandler_&&this.sourceHandler_[i]?this.sourceHandler_[i].apply(this.sourceHandler_,arguments):r.apply(this,arguments)})},t.prototype),t.prototype.setSource=function(i){let r=t.selectSourceHandler(i,this.options_);r||(t.nativeSourceHandler?r=t.nativeSourceHandler:le.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),r!==t.nativeSourceHandler&&(this.currentSource_=i),this.sourceHandler_=r.handleSource(i,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},t.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};B.registerComponent("Tech",ie);ie.registerTech("Tech",ie);ie.defaultTechOrder_=[];const Vr={},hh={},Zu={};function pA(t,e){Vr[t]=Vr[t]||[],Vr[t].push(e)}function mA(t,e,i){t.setTimeout(()=>Pr(e,Vr[e.type],i,t),1)}function gA(t,e){t.forEach(i=>i.setTech&&i.setTech(e))}function yA(t,e,i){return t.reduceRight(np(i),e[i]())}function _A(t,e,i,r){return e[i](t.reduce(np(i),r))}function k0(t,e,i,r=null){const n="call"+Ie(i),s=t.reduce(np(n),r),a=s===Zu,o=a?null:e[i](s);return xA(t,i,o,a),o}const vA={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},TA={setCurrentTime:1,setMuted:1,setVolume:1},I0={play:1,pause:1};function np(t){return(e,i)=>e===Zu?Zu:i[t]?i[t](e):e}function xA(t,e,i,r){for(let n=t.length-1;n>=0;n--){const s=t[n];s[e]&&s[e](r,i)}}function SA(t){hh[t.id()]=null}function EA(t,e){const i=hh[t.id()];let r=null;if(i==null)return r=e(t),hh[t.id()]=[[e,r]],r;for(let n=0;n<i.length;n++){const[s,a]=i[n];s===e&&(r=a)}return r===null&&(r=e(t),i.push([e,r])),r}function Pr(t={},e=[],i,r,n=[],s=!1){const[a,...o]=e;if(typeof a=="string")Pr(t,Vr[a],i,r,n,s);else if(a){const l=EA(r,a);if(!l.setSource)return n.push(l),Pr(t,o,i,r,n,s);l.setSource(Object.assign({},t),function(d,m){if(d)return Pr(t,o,i,r,n,s);n.push(l),Pr(m,t.type===m.type?o:Vr[m.type],i,r,n,s)})}else o.length?Pr(t,o,i,r,n,s):s?i(t,n):Pr(t,Vr["*"],i,r,n,!0)}const bA={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},el=function(t=""){const e=rp(t);return bA[e.toLowerCase()]||""},CA=(t,e)=>{if(!e)return"";if(t.cache_.source.src===e&&t.cache_.source.type)return t.cache_.source.type;const i=t.cache_.sources.filter(n=>n.src===e);if(i.length)return i[0].type;const r=t.$$("source");for(let n=0;n<r.length;n++){const s=r[n];if(s.type&&s.src&&s.src===e)return s.type}return el(e)},qT=function(t){if(Array.isArray(t)){let e=[];t.forEach(function(i){i=qT(i),Array.isArray(i)?e=e.concat(i):gi(i)&&e.push(i)}),t=e}else typeof t=="string"&&t.trim()?t=[P0({src:t})]:gi(t)&&typeof t.src=="string"&&t.src&&t.src.trim()?t=[P0(t)]:t=[];return t};function P0(t){if(!t.type){const e=el(t.src);e&&(t.type=e)}return t}class wA extends B{constructor(e,i,r){const n=ge({createEl:!1},i);if(super(e,n,r),!i.playerOptions.sources||i.playerOptions.sources.length===0)for(let s=0,a=i.playerOptions.techOrder;s<a.length;s++){const o=Ie(a[s]);let l=ie.getTech(o);if(o||(l=B.getComponent(o)),l&&l.isSupported()){e.loadTech_(o);break}}else e.src(i.playerOptions.sources)}}B.registerComponent("MediaLoader",wA);class Yl extends B{constructor(e,i){super(e,i),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=r=>this.handleMouseOver(r),this.handleMouseOut_=r=>this.handleMouseOut(r),this.handleClick_=r=>this.handleClick(r),this.handleKeyDown_=r=>this.handleKeyDown(r),this.emitTapEvents(),this.enable()}createEl(e="div",i={},r={}){i=Object.assign({className:this.buildCSSClass(),tabIndex:0},i),e==="button"&&le.error(`Creating a ClickableComponent with an HTML element of ${e} is not supported; use a Button instead.`),r=Object.assign({role:"button"},r),this.tabIndex_=i.tabIndex;const n=ne(e,i,r);return n.appendChild(ne("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(n),n}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(e){return this.controlTextEl_=ne("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_}controlText(e,i=this.el()){if(e===void 0)return this.controlText_||"Need Text";const r=this.localize(e);this.controlText_=e,xr(this.controlTextEl_,r),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&i.setAttribute("title",r)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(e){te.isEventKey(e,"Space")||te.isEventKey(e,"Enter")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}B.registerComponent("ClickableComponent",Yl);class fh extends Yl{constructor(e,i){super(e,i),this.update(),this.update_=r=>this.update(r),e.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return ne("div",{className:"vjs-poster"})}crossOrigin(e){if(typeof e>"u")return this.$("img")?this.$("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`);return}this.$("img")&&(this.$("img").crossOrigin=e)}update(e){const i=this.player().poster();this.setSrc(i),i?this.show():this.hide()}setSrc(e){if(!e){this.el_.textContent="";return}this.$("img")||this.el_.appendChild(ne("picture",{className:"vjs-poster",tabIndex:-1},{},ne("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))),this.$("img").src=e}handleClick(e){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?oi(this.player_.play()):this.player_.pause())}}fh.prototype.crossorigin=fh.prototype.crossOrigin;B.registerComponent("PosterImage",fh);const Nt="#222",O0="#ccc",DA={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function nd(t,e){let i;if(t.length===4)i=t[1]+t[1]+t[2]+t[2]+t[3]+t[3];else if(t.length===7)i=t.slice(1);else throw new Error("Invalid color code provided, "+t+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(i.slice(0,2),16)+","+parseInt(i.slice(2,4),16)+","+parseInt(i.slice(4,6),16)+","+e+")"}function sd(t,e,i){try{t.style[e]=i}catch{return}}class AA extends B{constructor(e,i,r){super(e,i,r);const n=s=>this.updateDisplay(s);e.on("loadstart",s=>this.toggleDisplay(s)),e.on("texttrackchange",n),e.on("loadedmetadata",s=>this.preselectTrack(s)),e.ready(ye(this,function(){if(e.tech_&&e.tech_.featuresNativeTextTracks){this.hide();return}e.on("fullscreenchange",n),e.on("playerresize",n);const s=k.screen.orientation||k,a=k.screen.orientation?"change":"orientationchange";s.addEventListener(a,n),e.on("dispose",()=>s.removeEventListener(a,n));const o=this.options_.playerOptions.tracks||[];for(let l=0;l<o.length;l++)this.player_.addRemoteTextTrack(o[l],!0);this.preselectTrack()}))}preselectTrack(){const e={captions:1,subtitles:1},i=this.player_.textTracks(),r=this.player_.cache_.selectedLanguage;let n,s,a;for(let o=0;o<i.length;o++){const l=i[o];r&&r.enabled&&r.language&&r.language===l.language&&l.kind in e?l.kind===r.kind?a=l:a||(a=l):r&&!r.enabled?(a=null,n=null,s=null):l.default&&(l.kind==="descriptions"&&!n?n=l:l.kind in e&&!s&&(s=l))}a?a.mode="showing":s?s.mode="showing":n&&(n.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){typeof k.WebVTT=="function"&&k.WebVTT.processCues(k,[],this.el_)}updateDisplay(){const e=this.player_.textTracks(),i=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),i){const a=[];for(let o=0;o<e.length;++o){const l=e[o];l.mode==="showing"&&a.push(l)}this.updateForTrack(a);return}let r=null,n=null,s=e.length;for(;s--;){const a=e[s];a.mode==="showing"&&(a.kind==="descriptions"?r=a:n=a)}n?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(n)):r&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(r))}updateDisplayState(e){const i=this.player_.textTrackSettings.getValues(),r=e.activeCues;let n=r.length;for(;n--;){const s=r[n];if(!s)continue;const a=s.displayState;if(i.color&&(a.firstChild.style.color=i.color),i.textOpacity&&sd(a.firstChild,"color",nd(i.color||"#fff",i.textOpacity)),i.backgroundColor&&(a.firstChild.style.backgroundColor=i.backgroundColor),i.backgroundOpacity&&sd(a.firstChild,"backgroundColor",nd(i.backgroundColor||"#000",i.backgroundOpacity)),i.windowColor&&(i.windowOpacity?sd(a,"backgroundColor",nd(i.windowColor,i.windowOpacity)):a.style.backgroundColor=i.windowColor),i.edgeStyle&&(i.edgeStyle==="dropshadow"?a.firstChild.style.textShadow=`2px 2px 3px ${Nt}, 2px 2px 4px ${Nt}, 2px 2px 5px ${Nt}`:i.edgeStyle==="raised"?a.firstChild.style.textShadow=`1px 1px ${Nt}, 2px 2px ${Nt}, 3px 3px ${Nt}`:i.edgeStyle==="depressed"?a.firstChild.style.textShadow=`1px 1px ${O0}, 0 1px ${O0}, -1px -1px ${Nt}, 0 -1px ${Nt}`:i.edgeStyle==="uniform"&&(a.firstChild.style.textShadow=`0 0 4px ${Nt}, 0 0 4px ${Nt}, 0 0 4px ${Nt}, 0 0 4px ${Nt}`)),i.fontPercent&&i.fontPercent!==1){const o=k.parseFloat(a.style.fontSize);a.style.fontSize=o*i.fontPercent+"px",a.style.height="auto",a.style.top="auto"}i.fontFamily&&i.fontFamily!=="default"&&(i.fontFamily==="small-caps"?a.firstChild.style.fontVariant="small-caps":a.firstChild.style.fontFamily=DA[i.fontFamily])}}updateForTrack(e){if(Array.isArray(e)||(e=[e]),typeof k.WebVTT!="function"||e.every(r=>!r.activeCues))return;const i=[];for(let r=0;r<e.length;++r){const n=e[r];for(let s=0;s<n.activeCues.length;++s)i.push(n.activeCues[s])}k.WebVTT.processCues(k,i,this.el_);for(let r=0;r<e.length;++r){const n=e[r];for(let s=0;s<n.activeCues.length;++s){const a=n.activeCues[s].displayState;$r(a,"vjs-text-track-cue","vjs-text-track-cue-"+(n.language?n.language:r)),n.language&&Jn(a,"lang",n.language)}this.player_.textTrackSettings&&this.updateDisplayState(n)}}}B.registerComponent("TextTrackDisplay",AA);class kA extends B{createEl(){const e=this.player_.isAudio(),i=this.localize(e?"Audio Player":"Video Player"),r=ne("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[i])}),n=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return n.appendChild(r),n}handleLanguagechange(){this.$(".vjs-control-text").textContent=this.localize("{1} is loading.",[this.player_.isAudio()?"Audio Player":"Video Player"])}}B.registerComponent("LoadingSpinner",kA);class kt extends Yl{createEl(e,i={},r={}){e="button",i=Object.assign({className:this.buildCSSClass()},i),r=Object.assign({type:"button"},r);const n=ne(e,i,r);return n.appendChild(ne("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(n),n}addChild(e,i={}){const r=this.constructor.name;return le.warn(`Adding an actionable (user controllable) child to a Button (${r}) is not supported; use a ClickableComponent instead.`),B.prototype.addChild.call(this,e,i)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(e){if(te.isEventKey(e,"Space")||te.isEventKey(e,"Enter")){e.stopPropagation();return}super.handleKeyDown(e)}}B.registerComponent("Button",kt);class zT extends kt{constructor(e,i){super(e,i),this.mouseused_=!1,this.on("mousedown",r=>this.handleMouseDown(r))}buildCSSClass(){return"vjs-big-play-button"}handleClick(e){const i=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY){oi(i),this.player_.tech(!0)&&this.player_.tech(!0).focus();return}const r=this.player_.getChild("controlBar"),n=r&&r.getChild("playToggle");if(!n){this.player_.tech(!0).focus();return}const s=()=>n.focus();Sa(i)?i.then(s,()=>{}):this.setTimeout(s,1)}handleKeyDown(e){this.mouseused_=!1,super.handleKeyDown(e)}handleMouseDown(e){this.mouseused_=!0}}zT.prototype.controlText_="Play Video";B.registerComponent("BigPlayButton",zT);class IA extends kt{constructor(e,i){super(e,i),this.controlText(i&&i.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(e){this.trigger({type:"close",bubbles:!1})}handleKeyDown(e){te.isEventKey(e,"Esc")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}B.registerComponent("CloseButton",IA);class GT extends kt{constructor(e,i={}){super(e,i),i.replay=i.replay===void 0||i.replay,this.on(e,"play",r=>this.handlePlay(r)),this.on(e,"pause",r=>this.handlePause(r)),i.replay&&this.on(e,"ended",r=>this.handleEnded(r))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(e){this.player_.paused()?oi(this.player_.play()):this.player_.pause()}handleSeeked(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)}handlePlay(e){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")}handlePause(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")}handleEnded(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",i=>this.handleSeeked(i))}}GT.prototype.controlText_="Play";B.registerComponent("PlayToggle",GT);class ms extends B{constructor(e,i){super(e,i),this.on(e,["timeupdate","ended"],r=>this.updateContent(r)),this.updateTextNode_()}createEl(){const e=this.buildCSSClass(),i=super.createEl("div",{className:`${e} vjs-time-control vjs-control`}),r=ne("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)}`},{role:"presentation"});return i.appendChild(r),this.contentEl_=ne("span",{className:`${e}-display`},{role:"presentation"}),i.appendChild(this.contentEl_),i}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}updateTextNode_(e=0){e=Wr(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",()=>{if(!this.contentEl_)return;let i=this.textNode_;i&&this.contentEl_.firstChild!==i&&(i=null,le.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=V.createTextNode(this.formattedTime_),this.textNode_&&(i?this.contentEl_.replaceChild(this.textNode_,i):this.contentEl_.appendChild(this.textNode_))}))}updateContent(e){}}ms.prototype.labelText_="Time";ms.prototype.controlText_="Time";B.registerComponent("TimeDisplay",ms);class sp extends ms{buildCSSClass(){return"vjs-current-time"}updateContent(e){let i;this.player_.ended()?i=this.player_.duration():i=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(i)}}sp.prototype.labelText_="Current Time";sp.prototype.controlText_="Current Time";B.registerComponent("CurrentTimeDisplay",sp);class ap extends ms{constructor(e,i){super(e,i);const r=n=>this.updateContent(n);this.on(e,"durationchange",r),this.on(e,"loadstart",r),this.on(e,"loadedmetadata",r)}buildCSSClass(){return"vjs-duration"}updateContent(e){const i=this.player_.duration();this.updateTextNode_(i)}}ap.prototype.labelText_="Duration";ap.prototype.controlText_="Duration";B.registerComponent("DurationDisplay",ap);class PA extends B{createEl(){const e=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),i=super.createEl("div"),r=super.createEl("span",{textContent:"/"});return i.appendChild(r),e.appendChild(i),e}}B.registerComponent("TimeDivider",PA);class op extends ms{constructor(e,i){super(e,i),this.on(e,"durationchange",r=>this.updateContent(r))}buildCSSClass(){return"vjs-remaining-time"}createEl(){const e=super.createEl();return this.options_.displayNegative!==!1&&e.insertBefore(ne("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e}updateContent(e){if(typeof this.player_.duration()!="number")return;let i;this.player_.ended()?i=0:this.player_.remainingTimeDisplay?i=this.player_.remainingTimeDisplay():i=this.player_.remainingTime(),this.updateTextNode_(i)}}op.prototype.labelText_="Remaining Time";op.prototype.controlText_="Remaining Time";B.registerComponent("RemainingTimeDisplay",op);class OA extends B{constructor(e,i){super(e,i),this.updateShowing(),this.on(this.player(),"durationchange",r=>this.updateShowing(r))}createEl(){const e=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=ne("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(ne("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")}`})),this.contentEl_.appendChild(V.createTextNode(this.localize("LIVE"))),e.appendChild(this.contentEl_),e}dispose(){this.contentEl_=null,super.dispose()}updateShowing(e){this.player().duration()===1/0?this.show():this.hide()}}B.registerComponent("LiveDisplay",OA);class WT extends kt{constructor(e,i){super(e,i),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=r=>this.updateLiveEdgeStatus(r),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){const e=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=ne("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}}WT.prototype.controlText_="Seek to live, currently playing live";B.registerComponent("SeekToLive",WT);function so(t,e,i){return t=Number(t),Math.min(i,Math.max(e,isNaN(t)?e:t))}var LA=Object.freeze({__proto__:null,clamp:so});class up extends B{constructor(e,i){super(e,i),this.handleMouseDown_=r=>this.handleMouseDown(r),this.handleMouseUp_=r=>this.handleMouseUp(r),this.handleKeyDown_=r=>this.handleKeyDown(r),this.handleClick_=r=>this.handleClick(r),this.handleMouseMove_=r=>this.handleMouseMove(r),this.update_=r=>this.update(r),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;const e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(e,i={},r={}){return i.className=i.className+" vjs-slider",i=Object.assign({tabIndex:0},i),r=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},r),super.createEl(e,i,r)}handleMouseDown(e){const i=this.bar.el_.ownerDocument;e.type==="mousedown"&&e.preventDefault(),e.type==="touchstart"&&!_i&&e.preventDefault(),xT(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(i,"mousemove",this.handleMouseMove_),this.on(i,"mouseup",this.handleMouseUp_),this.on(i,"touchmove",this.handleMouseMove_),this.on(i,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)}handleMouseMove(e){}handleMouseUp(e){const i=this.bar.el_.ownerDocument;ST(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(i,"mousemove",this.handleMouseMove_),this.off(i,"mouseup",this.handleMouseUp_),this.off(i,"touchmove",this.handleMouseMove_),this.off(i,"touchend",this.handleMouseUp_),this.update()}update(){if(!this.el_||!this.bar)return;const e=this.getProgress();return e===this.progress_||(this.progress_=e,this.requestNamedAnimationFrame("Slider#update",()=>{const i=this.vertical()?"height":"width";this.bar.el().style[i]=(e*100).toFixed(2)+"%"})),e}getProgress(){return Number(so(this.getPercent(),0,1).toFixed(4))}calculateDistance(e){const i=ql(this.el_,e);return this.vertical()?i.y:i.x}handleKeyDown(e){te.isEventKey(e,"Left")||te.isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepBack()):te.isEventKey(e,"Right")||te.isEventKey(e,"Up")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e)}handleClick(e){e.stopPropagation(),e.preventDefault()}vertical(e){if(e===void 0)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}}B.registerComponent("Slider",up);const ad=(t,e)=>so(t/e*100,0,100).toFixed(2)+"%";class NA extends B{constructor(e,i){super(e,i),this.partEls_=[],this.on(e,"progress",r=>this.update(r))}createEl(){const e=super.createEl("div",{className:"vjs-load-progress"}),i=ne("span",{className:"vjs-control-text"}),r=ne("span",{textContent:this.localize("Loaded")}),n=V.createTextNode(": ");return this.percentageEl_=ne("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(i),i.appendChild(r),i.appendChild(n),i.appendChild(this.percentageEl_),e}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(e){this.requestNamedAnimationFrame("LoadProgressBar#update",()=>{const i=this.player_.liveTracker,r=this.player_.buffered(),n=i&&i.isLive()?i.seekableEnd():this.player_.duration(),s=this.player_.bufferedEnd(),a=this.partEls_,o=ad(s,n);this.percent_!==o&&(this.el_.style.width=o,xr(this.percentageEl_,o),this.percent_=o);for(let l=0;l<r.length;l++){const d=r.start(l),m=r.end(l);let y=a[l];y||(y=this.el_.appendChild(ne()),a[l]=y),!(y.dataset.start===d&&y.dataset.end===m)&&(y.dataset.start=d,y.dataset.end=m,y.style.left=ad(d,s),y.style.width=ad(m-d,s))}for(let l=a.length;l>r.length;l--)this.el_.removeChild(a[l-1]);a.length=r.length})}}B.registerComponent("LoadProgressBar",NA);class RA extends B{constructor(e,i){super(e,i),this.update=Ti(ye(this,this.update),$t)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(e,i,r){const n=za(this.el_),s=Zn(this.player_.el()),a=e.width*i;if(!s||!n)return;const o=e.left-s.left+a,l=e.width-a+(s.right-e.right);let d=n.width/2;o<d?d+=d-o:l<d&&(d=l),d<0?d=0:d>n.width&&(d=n.width),d=Math.round(d),this.el_.style.right=`-${d}px`,this.write(r)}write(e){xr(this.el_,e)}updateTime(e,i,r,n){this.requestNamedAnimationFrame("TimeTooltip#updateTime",()=>{let s;const a=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){const o=this.player_.liveTracker.liveWindow(),l=o-i*o;s=(l<1?"":"-")+Wr(l,o)}else s=Wr(r,a);this.update(e,i,s),n&&n()})}}B.registerComponent("TimeTooltip",RA);class lp extends B{constructor(e,i){super(e,i),this.update=Ti(ye(this,this.update),$t)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(e,i){const r=this.getChild("timeTooltip");if(!r)return;const n=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();r.updateTime(e,i,n)}}lp.prototype.options_={children:[]};!dt&&!yi&&lp.prototype.options_.children.push("timeTooltip");B.registerComponent("PlayProgressBar",lp);class XT extends B{constructor(e,i){super(e,i),this.update=Ti(ye(this,this.update),$t)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,i){const r=i*this.player_.duration();this.getChild("timeTooltip").updateTime(e,i,r,()=>{this.el_.style.left=`${e.width*i}px`})}}XT.prototype.options_={children:["timeTooltip"]};B.registerComponent("MouseTimeDisplay",XT);const Qo=5,L0=12;class cp extends up{constructor(e,i){super(e,i),this.setEventHandlers_()}setEventHandlers_(){this.update_=ye(this,this.update),this.update=Ti(this.update_,$t),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=e=>this.enableInterval_(e),this.disableIntervalHandler_=e=>this.disableInterval_(e),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in V&&"visibilityState"in V&&this.on(V,"visibilitychange",this.toggleVisibility_)}toggleVisibility_(e){V.visibilityState==="hidden"?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,$t))}disableInterval_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&e.type!=="ended"||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(e){if(V.visibilityState==="hidden")return;const i=super.update();return this.requestNamedAnimationFrame("SeekBar#update",()=>{const r=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),n=this.player_.liveTracker;let s=this.player_.duration();n&&n.isLive()&&(s=this.player_.liveTracker.liveCurrentTime()),this.percent_!==i&&(this.el_.setAttribute("aria-valuenow",(i*100).toFixed(2)),this.percent_=i),(this.currentTime_!==r||this.duration_!==s)&&(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[Wr(r,s),Wr(s,s)],"{1} of {2}")),this.currentTime_=r,this.duration_=s),this.bar&&this.bar.update(Zn(this.el()),this.getProgress())}),i}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}getPercent(){const e=this.getCurrentTime_();let i;const r=this.player_.liveTracker;return r&&r.isLive()?(i=(e-r.seekableStart())/r.liveWindow(),r.atLiveEdge()&&(i=1)):i=e/this.player_.duration(),i}handleMouseDown(e){Ga(e)&&(e.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),super.handleMouseDown(e))}handleMouseMove(e,i=!1){if(!Ga(e))return;!i&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);let r;const n=this.calculateDistance(e),s=this.player_.liveTracker;if(!s||!s.isLive())r=n*this.player_.duration(),r===this.player_.duration()&&(r=r-.1);else{if(n>=.99){s.seekToLiveEdge();return}const a=s.seekableStart(),o=s.liveCurrentTime();if(r=a+n*s.liveWindow(),r>=o&&(r=o),r<=a&&(r=a+.1),r===1/0)return}this.userSeek_(r)}enable(){super.enable();const e=this.getChild("mouseTimeDisplay");e&&e.show()}disable(){super.disable();const e=this.getChild("mouseTimeDisplay");e&&e.hide()}handleMouseUp(e){super.handleMouseUp(e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?oi(this.player_.play()):this.update_()}stepForward(){this.userSeek_(this.player_.currentTime()+Qo)}stepBack(){this.userSeek_(this.player_.currentTime()-Qo)}handleAction(e){this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(e){const i=this.player_.liveTracker;if(te.isEventKey(e,"Space")||te.isEventKey(e,"Enter"))e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(te.isEventKey(e,"Home"))e.preventDefault(),e.stopPropagation(),this.userSeek_(0);else if(te.isEventKey(e,"End"))e.preventDefault(),e.stopPropagation(),i&&i.isLive()?this.userSeek_(i.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(te(e))){e.preventDefault(),e.stopPropagation();const r=(te.codes[te(e)]-te.codes[0])*10/100;i&&i.isLive()?this.userSeek_(i.seekableStart()+i.liveWindow()*r):this.userSeek_(this.player_.duration()*r)}else te.isEventKey(e,"PgDn")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()-Qo*L0)):te.isEventKey(e,"PgUp")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()+Qo*L0)):super.handleKeyDown(e)}dispose(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in V&&"visibilityState"in V&&this.off(V,"visibilitychange",this.toggleVisibility_),super.dispose()}}cp.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};!dt&&!yi&&cp.prototype.options_.children.splice(1,0,"mouseTimeDisplay");B.registerComponent("SeekBar",cp);class KT extends B{constructor(e,i){super(e,i),this.handleMouseMove=Ti(ye(this,this.handleMouseMove),$t),this.throttledHandleMouseSeek=Ti(ye(this,this.handleMouseSeek),$t),this.handleMouseUpHandler_=r=>this.handleMouseUp(r),this.handleMouseDownHandler_=r=>this.handleMouseDown(r),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(e){const i=this.getChild("seekBar");if(!i)return;const r=i.getChild("playProgressBar"),n=i.getChild("mouseTimeDisplay");if(!r&&!n)return;const s=i.el(),a=za(s);let o=ql(s,e).x;o=so(o,0,1),n&&n.update(a,o),r&&r.update(a,i.getProgress())}handleMouseSeek(e){const i=this.getChild("seekBar");i&&i.handleMouseMove(e)}enabled(){return this.enabled_}disable(){if(this.children().forEach(e=>e.disable&&e.disable()),!!this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){const e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&oi(this.player_.play())}}enable(){this.children().forEach(e=>e.enable&&e.enable()),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){const e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)}handleMouseDown(e){const i=this.el_.ownerDocument,r=this.getChild("seekBar");r&&r.handleMouseDown(e),this.on(i,"mousemove",this.throttledHandleMouseSeek),this.on(i,"touchmove",this.throttledHandleMouseSeek),this.on(i,"mouseup",this.handleMouseUpHandler_),this.on(i,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const i=this.getChild("seekBar");i&&i.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()}}KT.prototype.options_={children:["seekBar"]};B.registerComponent("ProgressControl",KT);class YT extends kt{constructor(e,i){super(e,i),this.on(e,["enterpictureinpicture","leavepictureinpicture"],r=>this.handlePictureInPictureChange(r)),this.on(e,["disablepictureinpicturechanged","loadedmetadata"],r=>this.handlePictureInPictureEnabledChange(r)),this.on(e,["loadedmetadata","audioonlymodechange","audiopostermodechange"],()=>{e.currentType().substring(0,5)==="audio"||e.audioPosterMode()||e.audioOnlyMode()?(e.isInPictureInPicture()&&e.exitPictureInPicture(),this.hide()):this.show()}),this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control ${super.buildCSSClass()}`}handlePictureInPictureEnabledChange(){V.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1||this.player_.options_.enableDocumentPictureInPicture&&"documentPictureInPicture"in k?this.enable():this.disable()}handlePictureInPictureChange(e){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()}handleClick(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}}YT.prototype.controlText_="Picture-in-Picture";B.registerComponent("PictureInPictureToggle",YT);class QT extends kt{constructor(e,i){super(e,i),this.on(e,"fullscreenchange",r=>this.handleFullscreenChange(r)),V[e.fsApi_.fullscreenEnabled]===!1&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(e){this.player_.isFullscreen()?this.controlText("Exit Fullscreen"):this.controlText("Fullscreen")}handleClick(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}}QT.prototype.controlText_="Fullscreen";B.registerComponent("FullscreenToggle",QT);const MA=function(t,e){e.tech_&&!e.tech_.featuresVolumeControl&&t.addClass("vjs-hidden"),t.on(e,"loadstart",function(){e.tech_.featuresVolumeControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")})};class BA extends B{createEl(){const e=super.createEl("div",{className:"vjs-volume-level"});return e.appendChild(super.createEl("span",{className:"vjs-control-text"})),e}}B.registerComponent("VolumeLevel",BA);class FA extends B{constructor(e,i){super(e,i),this.update=Ti(ye(this,this.update),$t)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(e,i,r,n){if(!r){const s=Zn(this.el_),a=Zn(this.player_.el()),o=e.width*i;if(!a||!s)return;const l=e.left-a.left+o,d=e.width-o+(a.right-e.right);let m=s.width/2;l<m?m+=m-l:d<m&&(m=d),m<0?m=0:m>s.width&&(m=s.width),this.el_.style.right=`-${m}px`}this.write(`${n}%`)}write(e){xr(this.el_,e)}updateVolume(e,i,r,n,s){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",()=>{this.update(e,i,r,n.toFixed(0)),s&&s()})}}B.registerComponent("VolumeLevelTooltip",FA);class JT extends B{constructor(e,i){super(e,i),this.update=Ti(ye(this,this.update),$t)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,i,r){const n=100*i;this.getChild("volumeLevelTooltip").updateVolume(e,i,r,n,()=>{r?this.el_.style.bottom=`${e.height*i}px`:this.el_.style.left=`${e.width*i}px`})}}JT.prototype.options_={children:["volumeLevelTooltip"]};B.registerComponent("MouseVolumeLevelDisplay",JT);class Ql extends up{constructor(e,i){super(e,i),this.on("slideractive",r=>this.updateLastVolume_(r)),this.on(e,"volumechange",r=>this.updateARIAAttributes(r)),e.ready(()=>this.updateARIAAttributes())}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(e){Ga(e)&&super.handleMouseDown(e)}handleMouseMove(e){const i=this.getChild("mouseVolumeLevelDisplay");if(i){const r=this.el(),n=Zn(r),s=this.vertical();let a=ql(r,e);a=s?a.y:a.x,a=so(a,0,1),i.update(n,a,s)}Ga(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(e){const i=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",i),this.el_.setAttribute("aria-valuetext",i+"%")}volumeAsPercentage_(){return Math.round(this.player_.volume()*100)}updateLastVolume_(){const e=this.player_.volume();this.one("sliderinactive",()=>{this.player_.volume()===0&&this.player_.lastVolume_(e)})}}Ql.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};!dt&&!yi&&Ql.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay");Ql.prototype.playerEvent="volumechange";B.registerComponent("VolumeBar",Ql);class ZT extends B{constructor(e,i={}){i.vertical=i.vertical||!1,(typeof i.volumeBar>"u"||Qn(i.volumeBar))&&(i.volumeBar=i.volumeBar||{},i.volumeBar.vertical=i.vertical),super(e,i),MA(this,e),this.throttledHandleMouseMove=Ti(ye(this,this.handleMouseMove),$t),this.handleMouseUpHandler_=r=>this.handleMouseUp(r),this.on("mousedown",r=>this.handleMouseDown(r)),this.on("touchstart",r=>this.handleMouseDown(r)),this.on("mousemove",r=>this.handleMouseMove(r)),this.on(this.volumeBar,["focus","slideractive"],()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")}),this.on(this.volumeBar,["blur","sliderinactive"],()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")})}createEl(){let e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),super.createEl("div",{className:`vjs-volume-control vjs-control ${e}`})}handleMouseDown(e){const i=this.el_.ownerDocument;this.on(i,"mousemove",this.throttledHandleMouseMove),this.on(i,"touchmove",this.throttledHandleMouseMove),this.on(i,"mouseup",this.handleMouseUpHandler_),this.on(i,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const i=this.el_.ownerDocument;this.off(i,"mousemove",this.throttledHandleMouseMove),this.off(i,"touchmove",this.throttledHandleMouseMove),this.off(i,"mouseup",this.handleMouseUpHandler_),this.off(i,"touchend",this.handleMouseUpHandler_)}handleMouseMove(e){this.volumeBar.handleMouseMove(e)}}ZT.prototype.options_={children:["volumeBar"]};B.registerComponent("VolumeControl",ZT);const UA=function(t,e){e.tech_&&!e.tech_.featuresMuteControl&&t.addClass("vjs-hidden"),t.on(e,"loadstart",function(){e.tech_.featuresMuteControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")})};class e2 extends kt{constructor(e,i){super(e,i),UA(this,e),this.on(e,["loadstart","volumechange"],r=>this.update(r))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(e){const i=this.player_.volume(),r=this.player_.lastVolume_();if(i===0){const n=r<.1?.1:r;this.player_.volume(n),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())}update(e){this.updateIcon_(),this.updateControlText_()}updateIcon_(){const e=this.player_.volume();let i=3;dt&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),e===0||this.player_.muted()?i=0:e<.33?i=1:e<.67&&(i=2),Vl(this.el_,[0,1,2,3].reduce((r,n)=>r+`${n?" ":""}vjs-vol-${n}`,"")),$r(this.el_,`vjs-vol-${i}`)}updateControlText_(){const i=this.player_.muted()||this.player_.volume()===0?"Unmute":"Mute";this.controlText()!==i&&this.controlText(i)}}e2.prototype.controlText_="Mute";B.registerComponent("MuteToggle",e2);class t2 extends B{constructor(e,i={}){typeof i.inline<"u"?i.inline=i.inline:i.inline=!0,(typeof i.volumeControl>"u"||Qn(i.volumeControl))&&(i.volumeControl=i.volumeControl||{},i.volumeControl.vertical=!i.inline),super(e,i),this.handleKeyPressHandler_=r=>this.handleKeyPress(r),this.on(e,["loadstart"],r=>this.volumePanelState_(r)),this.on(this.muteToggle,"keyup",r=>this.handleKeyPress(r)),this.on(this.volumeControl,"keyup",r=>this.handleVolumeControlKeyUp(r)),this.on("keydown",r=>this.handleKeyPress(r)),this.on("mouseover",r=>this.handleMouseOver(r)),this.on("mouseout",r=>this.handleMouseOut(r)),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),super.createEl("div",{className:`vjs-volume-panel vjs-control ${e}`})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(e){te.isEventKey(e,"Esc")&&this.muteToggle.focus()}handleMouseOver(e){this.addClass("vjs-hover"),It(V,"keyup",this.handleKeyPressHandler_)}handleMouseOut(e){this.removeClass("vjs-hover"),et(V,"keyup",this.handleKeyPressHandler_)}handleKeyPress(e){te.isEventKey(e,"Esc")&&this.handleMouseOut()}}t2.prototype.options_={children:["muteToggle","volumeControl"]};B.registerComponent("VolumePanel",t2);class jA extends kt{constructor(e,i){super(e,i),this.validOptions=[5,10,30],this.skipTime=this.getSkipForwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime])),this.show()):this.hide()}getSkipForwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.forward}buildCSSClass(){return`vjs-skip-forward-${this.getSkipForwardTime()} ${super.buildCSSClass()}`}handleClick(e){const i=this.player_.currentTime(),r=this.player_.liveTracker,n=r&&r.isLive()?r.seekableEnd():this.player_.duration();let s;i+this.skipTime<=n?s=i+this.skipTime:s=n,this.player_.currentTime(s)}handleLanguagechange(){this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime]))}}B.registerComponent("SkipForward",jA);class i2 extends kt{constructor(e,i){super(e,i),this.validOptions=[5,10,30],this.skipTime=this.getSkipBackwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime])),this.show()):this.hide()}getSkipBackwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.backward}buildCSSClass(){return`vjs-skip-backward-${this.getSkipBackwardTime()} ${super.buildCSSClass()}`}handleClick(e){const i=this.player_.currentTime(),r=this.player_.liveTracker,n=r&&r.isLive()&&r.seekableStart();let s;n&&i-this.skipTime<=n?s=n:i>=this.skipTime?s=i-this.skipTime:s=0,this.player_.currentTime(s)}handleLanguagechange(){this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime]))}}i2.prototype.controlText_="Skip Backward";B.registerComponent("SkipBackward",i2);class r2 extends B{constructor(e,i){super(e,i),i&&(this.menuButton_=i.menuButton),this.focusedChild_=-1,this.on("keydown",r=>this.handleKeyDown(r)),this.boundHandleBlur_=r=>this.handleBlur(r),this.boundHandleTapClick_=r=>this.handleTapClick(r)}addEventListenerForItem(e){e instanceof B&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(e){e instanceof B&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))}removeChild(e){typeof e=="string"&&(e=this.getChild(e)),this.removeEventListenerForItem(e),super.removeChild(e)}addItem(e){const i=this.addChild(e);i&&this.addEventListenerForItem(i)}createEl(){const e=this.options_.contentElType||"ul";this.contentEl_=ne(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");const i=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});return i.appendChild(this.contentEl_),It(i,"click",function(r){r.preventDefault(),r.stopImmediatePropagation()}),i}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(e){const i=e.relatedTarget||V.activeElement;if(!this.children().some(r=>r.el()===i)){const r=this.menuButton_;r&&r.buttonPressed_&&i!==r.el().firstChild&&r.unpressButton()}}handleTapClick(e){if(this.menuButton_){this.menuButton_.unpressButton();const i=this.children();if(!Array.isArray(i))return;const r=i.filter(n=>n.el()===e.target)[0];if(!r)return;r.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus()}}handleKeyDown(e){te.isEventKey(e,"Left")||te.isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(te.isEventKey(e,"Right")||te.isEventKey(e,"Up"))&&(e.preventDefault(),e.stopPropagation(),this.stepBack())}stepForward(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_+1),this.focus(e)}stepBack(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_-1),this.focus(e)}focus(e=0){const i=this.children().slice();i.length&&i[0].hasClass("vjs-menu-title")&&i.shift(),i.length>0&&(e<0?e=0:e>=i.length&&(e=i.length-1),this.focusedChild_=e,i[e].el_.focus())}}B.registerComponent("Menu",r2);class dp extends B{constructor(e,i={}){super(e,i),this.menuButton_=new kt(e,i),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");const r=kt.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+r,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0;const n=s=>this.handleClick(s);this.handleMenuKeyUp_=s=>this.handleMenuKeyUp(s),this.on(this.menuButton_,"tap",n),this.on(this.menuButton_,"click",n),this.on(this.menuButton_,"keydown",s=>this.handleKeyDown(s)),this.on(this.menuButton_,"mouseenter",()=>{this.addClass("vjs-hover"),this.menu.show(),It(V,"keyup",this.handleMenuKeyUp_)}),this.on("mouseleave",s=>this.handleMouseLeave(s)),this.on("keydown",s=>this.handleSubmenuKeyDown(s))}update(){const e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){const e=new r2(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){const i=ne("li",{className:"vjs-menu-title",textContent:Ie(this.options_.title),tabIndex:-1}),r=new B(this.player_,{el:i});e.addItem(r)}if(this.items=this.createItems(),this.items)for(let i=0;i<this.items.length;i++)e.addItem(this.items[i]);return e}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}buildWrapperCSSClass(){let e="vjs-menu-button";this.options_.inline===!0?e+="-inline":e+="-popup";const i=kt.prototype.buildCSSClass();return`vjs-menu-button ${e} ${i} ${super.buildCSSClass()}`}buildCSSClass(){let e="vjs-menu-button";return this.options_.inline===!0?e+="-inline":e+="-popup",`vjs-menu-button ${e} ${super.buildCSSClass()}`}controlText(e,i=this.menuButton_.el()){return this.menuButton_.controlText(e,i)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(e){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(e){this.removeClass("vjs-hover"),et(V,"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(e){te.isEventKey(e,"Esc")||te.isEventKey(e,"Tab")?(this.buttonPressed_&&this.unpressButton(),te.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus())):(te.isEventKey(e,"Up")||te.isEventKey(e,"Down"))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))}handleMenuKeyUp(e){(te.isEventKey(e,"Esc")||te.isEventKey(e,"Tab"))&&this.removeClass("vjs-hover")}handleSubmenuKeyPress(e){this.handleSubmenuKeyDown(e)}handleSubmenuKeyDown(e){(te.isEventKey(e,"Esc")||te.isEventKey(e,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),te.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus()))}pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),dt&&gT())return;this.menu.focus()}}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}}B.registerComponent("MenuButton",dp);class hp extends dp{constructor(e,i){const r=i.tracks;if(super(e,i),this.items.length<=1&&this.hide(),!r)return;const n=ye(this,this.update);r.addEventListener("removetrack",n),r.addEventListener("addtrack",n),r.addEventListener("labelchange",n),this.player_.on("ready",n),this.player_.on("dispose",function(){r.removeEventListener("removetrack",n),r.removeEventListener("addtrack",n),r.removeEventListener("labelchange",n)})}}B.registerComponent("TrackButton",hp);const $A=["Tab","Esc","Up","Down","Right","Left"];class ao extends Yl{constructor(e,i){super(e,i),this.selectable=i.selectable,this.isSelected_=i.selected||!1,this.multiSelectable=i.multiSelectable,this.selected(this.isSelected_),this.selectable?this.multiSelectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitemradio"):this.el_.setAttribute("role","menuitem")}createEl(e,i,r){this.nonIconControl=!0;const n=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},i),r);return n.replaceChild(ne("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),n.querySelector(".vjs-icon-placeholder")),n}handleKeyDown(e){$A.some(i=>te.isEventKey(e,i))||super.handleKeyDown(e)}handleClick(e){this.selected(!0)}selected(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}}B.registerComponent("MenuItem",ao);class oo extends ao{constructor(e,i){const r=i.track,n=e.textTracks();i.label=r.label||r.language||"Unknown",i.selected=r.mode==="showing",super(e,i),this.track=r,this.kinds=(i.kinds||[i.kind||this.track.kind]).filter(Boolean);const s=(...o)=>{this.handleTracksChange.apply(this,o)},a=(...o)=>{this.handleSelectedLanguageChange.apply(this,o)};if(e.on(["loadstart","texttrackchange"],s),n.addEventListener("change",s),n.addEventListener("selectedlanguagechange",a),this.on("dispose",function(){e.off(["loadstart","texttrackchange"],s),n.removeEventListener("change",s),n.removeEventListener("selectedlanguagechange",a)}),n.onchange===void 0){let o;this.on(["tap","click"],function(){if(typeof k.Event!="object")try{o=new k.Event("change")}catch{}o||(o=V.createEvent("Event"),o.initEvent("change",!0,!0)),n.dispatchEvent(o)})}this.handleTracksChange()}handleClick(e){const i=this.track,r=this.player_.textTracks();if(super.handleClick(e),!!r)for(let n=0;n<r.length;n++){const s=r[n];this.kinds.indexOf(s.kind)!==-1&&(s===i?s.mode!=="showing"&&(s.mode="showing"):s.mode!=="disabled"&&(s.mode="disabled"))}}handleTracksChange(e){const i=this.track.mode==="showing";i!==this.isSelected_&&this.selected(i)}handleSelectedLanguageChange(e){if(this.track.mode==="showing"){const i=this.player_.cache_.selectedLanguage;if(i&&i.enabled&&i.language===this.track.language&&i.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}dispose(){this.track=null,super.dispose()}}B.registerComponent("TextTrackMenuItem",oo);class n2 extends oo{constructor(e,i){i.track={player:e,kind:i.kind,kinds:i.kinds,default:!1,mode:"disabled"},i.kinds||(i.kinds=[i.kind]),i.label?i.track.label=i.label:i.track.label=i.kinds.join(" and ")+" off",i.selectable=!0,i.multiSelectable=!1,super(e,i)}handleTracksChange(e){const i=this.player().textTracks();let r=!0;for(let n=0,s=i.length;n<s;n++){const a=i[n];if(this.options_.kinds.indexOf(a.kind)>-1&&a.mode==="showing"){r=!1;break}}r!==this.isSelected_&&this.selected(r)}handleSelectedLanguageChange(e){const i=this.player().textTracks();let r=!0;for(let n=0,s=i.length;n<s;n++){const a=i[n];if(["captions","descriptions","subtitles"].indexOf(a.kind)>-1&&a.mode==="showing"){r=!1;break}}r&&(this.player_.cache_.selectedLanguage={enabled:!1})}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.label),super.handleLanguagechange()}}B.registerComponent("OffTextTrackMenuItem",n2);class gs extends hp{constructor(e,i={}){i.tracks=e.textTracks(),super(e,i)}createItems(e=[],i=oo){let r;this.label_&&(r=`${this.label_} off`),e.push(new n2(this.player_,{kinds:this.kinds_,kind:this.kind_,label:r})),this.hideThreshold_+=1;const n=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let s=0;s<n.length;s++){const a=n[s];if(this.kinds_.indexOf(a.kind)>-1){const o=new i(this.player_,{track:a,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});o.addClass(`vjs-${a.kind}-menu-item`),e.push(o)}}return e}}B.registerComponent("TextTrackButton",gs);class s2 extends ao{constructor(e,i){const r=i.track,n=i.cue,s=e.currentTime();i.selectable=!0,i.multiSelectable=!1,i.label=n.text,i.selected=n.startTime<=s&&s<n.endTime,super(e,i),this.track=r,this.cue=n}handleClick(e){super.handleClick(),this.player_.currentTime(this.cue.startTime)}}B.registerComponent("ChaptersTrackMenuItem",s2);class fp extends gs{constructor(e,i,r){super(e,i,r),this.selectCurrentItem_=()=>{this.items.forEach(n=>{n.selected(this.track_.activeCues[0]===n.cue)})}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(e){if(e&&e.track&&e.track.kind!=="chapters")return;const i=this.findChaptersTrack();i!==this.track_?(this.setTrack(i),super.update()):(!this.items||i&&i.cues&&i.cues.length!==this.items.length)&&super.update()}setTrack(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){const i=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);i&&i.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";const i=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);i&&i.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}findChaptersTrack(){const e=this.player_.textTracks()||[];for(let i=e.length-1;i>=0;i--){const r=e[i];if(r.kind===this.kind_)return r}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(Ie(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){const e=[];if(!this.track_)return e;const i=this.track_.cues;if(!i)return e;for(let r=0,n=i.length;r<n;r++){const s=i[r],a=new s2(this.player_,{track:this.track_,cue:s});e.push(a)}return e}}fp.prototype.kind_="chapters";fp.prototype.controlText_="Chapters";B.registerComponent("ChaptersButton",fp);class pp extends gs{constructor(e,i,r){super(e,i,r);const n=e.textTracks(),s=ye(this,this.handleTracksChange);n.addEventListener("change",s),this.on("dispose",function(){n.removeEventListener("change",s)})}handleTracksChange(e){const i=this.player().textTracks();let r=!1;for(let n=0,s=i.length;n<s;n++){const a=i[n];if(a.kind!==this.kind_&&a.mode==="showing"){r=!0;break}}r?this.disable():this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}}pp.prototype.kind_="descriptions";pp.prototype.controlText_="Descriptions";B.registerComponent("DescriptionsButton",pp);class mp extends gs{constructor(e,i,r){super(e,i,r)}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}}mp.prototype.kind_="subtitles";mp.prototype.controlText_="Subtitles";B.registerComponent("SubtitlesButton",mp);class gp extends oo{constructor(e,i){i.track={player:e,kind:i.kind,label:i.kind+" settings",selectable:!1,default:!1,mode:"disabled"},i.selectable=!1,i.name="CaptionSettingsMenuItem",super(e,i),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+i.kind+" settings dialog")}handleClick(e){this.player().getChild("textTrackSettings").open()}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.kind+" settings"),super.handleLanguagechange()}}B.registerComponent("CaptionSettingsMenuItem",gp);class yp extends gs{constructor(e,i,r){super(e,i,r)}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){const e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new gp(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(e)}}yp.prototype.kind_="captions";yp.prototype.controlText_="Captions";B.registerComponent("CaptionsButton",yp);class a2 extends oo{createEl(e,i,r){const n=super.createEl(e,i,r),s=n.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="captions"&&(s.appendChild(ne("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),s.appendChild(ne("span",{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`}))),n}}B.registerComponent("SubsCapsMenuItem",a2);class _p extends gs{constructor(e,i={}){super(e,i),this.label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)>-1&&(this.label_="captions"),this.menuButton_.controlText(Ie(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new gp(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=super.createItems(e,a2),e}}_p.prototype.kinds_=["captions","subtitles"];_p.prototype.controlText_="Subtitles";B.registerComponent("SubsCapsButton",_p);class o2 extends ao{constructor(e,i){const r=i.track,n=e.audioTracks();i.label=r.label||r.language||"Unknown",i.selected=r.enabled,super(e,i),this.track=r,this.addClass(`vjs-${r.kind}-menu-item`);const s=(...a)=>{this.handleTracksChange.apply(this,a)};n.addEventListener("change",s),this.on("dispose",()=>{n.removeEventListener("change",s)})}createEl(e,i,r){const n=super.createEl(e,i,r),s=n.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="main-desc"&&(s.appendChild(ne("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),s.appendChild(ne("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),n}handleClick(e){if(super.handleClick(e),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){const i=this.player_.audioTracks();for(let r=0;r<i.length;r++){const n=i[r];n!==this.track&&(n.enabled=n===this.track)}}}handleTracksChange(e){this.selected(this.track.enabled)}}B.registerComponent("AudioTrackMenuItem",o2);class u2 extends hp{constructor(e,i={}){i.tracks=e.audioTracks(),super(e,i)}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(e=[]){this.hideThreshold_=1;const i=this.player_.audioTracks();for(let r=0;r<i.length;r++){const n=i[r];e.push(new o2(this.player_,{track:n,selectable:!0,multiSelectable:!1}))}return e}}u2.prototype.controlText_="Audio Track";B.registerComponent("AudioTrackButton",u2);class vp extends ao{constructor(e,i){const r=i.rate,n=parseFloat(r,10);i.label=r,i.selected=n===e.playbackRate(),i.selectable=!0,i.multiSelectable=!1,super(e,i),this.label=r,this.rate=n,this.on(e,"ratechange",s=>this.update(s))}handleClick(e){super.handleClick(),this.player().playbackRate(this.rate)}update(e){this.selected(this.player().playbackRate()===this.rate)}}vp.prototype.contentElType="button";B.registerComponent("PlaybackRateMenuItem",vp);class l2 extends dp{constructor(e,i){super(e,i),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(e,"loadstart",r=>this.updateVisibility(r)),this.on(e,"ratechange",r=>this.updateLabel(r)),this.on(e,"playbackrateschange",r=>this.handlePlaybackRateschange(r))}createEl(){const e=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=ne("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),e.appendChild(this.labelEl_),e}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){const e=this.playbackRates(),i=[];for(let r=e.length-1;r>=0;r--)i.push(new vp(this.player(),{rate:e[r]+"x"}));return i}handlePlaybackRateschange(e){this.update()}playbackRates(){const e=this.player();return e.playbackRates&&e.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}updateVisibility(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}}l2.prototype.controlText_="Playback Rate";B.registerComponent("PlaybackRateMenuButton",l2);class c2 extends B{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(e="div",i={},r={}){return i.className||(i.className=this.buildCSSClass()),super.createEl(e,i,r)}}B.registerComponent("Spacer",c2);class VA extends c2{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:""})}}B.registerComponent("CustomControlSpacer",VA);class tl extends B{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}}tl.prototype.options_={children:["playToggle","skipBackward","skipForward","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]};"exitPictureInPicture"in V&&tl.prototype.options_.children.splice(tl.prototype.options_.children.length-1,0,"pictureInPictureToggle");B.registerComponent("ControlBar",tl);class d2 extends ps{constructor(e,i){super(e,i),this.on(e,"error",r=>this.open(r))}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){const e=this.player().error();return e?this.localize(e.message):""}}d2.prototype.options_=Object.assign({},ps.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});B.registerComponent("ErrorDisplay",d2);const od="vjs-text-track-settings",N0=["#000","Black"],R0=["#00F","Blue"],M0=["#0FF","Cyan"],B0=["#0F0","Green"],F0=["#F0F","Magenta"],U0=["#F00","Red"],j0=["#FFF","White"],$0=["#FF0","Yellow"],ud=["1","Opaque"],ld=["0.5","Semi-Transparent"],V0=["0","Transparent"],Or={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[N0,j0,U0,B0,R0,$0,F0,M0]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Opacity",options:[ud,ld,V0]},color:{selector:".vjs-text-color > select",id:"captions-foreground-color-%s",label:"Color",options:[j0,N0,U0,B0,R0,$0,F0,M0]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:t=>t==="1.00"?null:Number(t)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Opacity",options:[ud,ld]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Opacity",options:[V0,ld,ud]}};Or.windowColor.options=Or.backgroundColor.options;function h2(t,e){if(e&&(t=e(t)),t&&t!=="none")return t}function HA(t,e){const i=t.options[t.options.selectedIndex].value;return h2(i,e)}function qA(t,e,i){if(e){for(let r=0;r<t.options.length;r++)if(h2(t.options[r].value,i)===e){t.selectedIndex=r;break}}}class zA extends ps{constructor(e,i){i.temporary=!1,super(e,i),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.endDialog=ne("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),i.persistTextTrackSettings===void 0&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.on(this.$(".vjs-done-button"),"click",()=>{this.saveSettings(),this.close()}),this.on(this.$(".vjs-default-button"),"click",()=>{this.setDefaults(),this.updateDisplay()}),Rn(Or,r=>{this.on(this.$(r.selector),"change",this.updateDisplay)}),this.options_.persistTextTrackSettings&&this.restoreSettings()}dispose(){this.endDialog=null,super.dispose()}createElSelect_(e,i="",r="label"){const n=Or[e],s=n.id.replace("%s",this.id_),a=[i,s].join(" ").trim();return[`<${r} id="${s}" class="${r==="label"?"vjs-label":""}">`,this.localize(n.label),`</${r}>`,`<select aria-labelledby="${a}">`].concat(n.options.map(o=>{const l=s+"-"+o[1].replace(/\W+/g,"");return[`<option id="${l}" value="${o[0]}" `,`aria-labelledby="${a} ${l}">`,this.localize(o[1]),"</option>"].join("")})).concat("</select>").join("")}createElFgColor_(){const e=`captions-text-legend-${this.id_}`;return['<fieldset class="vjs-fg vjs-track-setting">',`<legend id="${e}">`,this.localize("Text"),"</legend>",'<span class="vjs-text-color">',this.createElSelect_("color",e),"</span>",'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")}createElBgColor_(){const e=`captions-background-${this.id_}`;return['<fieldset class="vjs-bg vjs-track-setting">',`<legend id="${e}">`,this.localize("Text Background"),"</legend>",'<span class="vjs-bg-color">',this.createElSelect_("backgroundColor",e),"</span>",'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")}createElWinColor_(){const e=`captions-window-${this.id_}`;return['<fieldset class="vjs-window vjs-track-setting">',`<legend id="${e}">`,this.localize("Caption Area Background"),"</legend>",'<span class="vjs-window-color">',this.createElSelect_("windowColor",e),"</span>",'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")}createElColors_(){return ne("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})}createElFont_(){return ne("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})}createElControls_(){const e=this.localize("restore all settings to the default values");return ne("div",{className:"vjs-track-settings-controls",innerHTML:[`<button type="button" class="vjs-default-button" title="${e}">`,this.localize("Reset"),`<span class="vjs-control-text"> ${e}</span>`,"</button>",`<button type="button" class="vjs-done-button">${this.localize("Done")}</button>`].join("")})}content(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return dT(Or,(e,i,r)=>{const n=HA(this.$(i.selector),i.parser);return n!==void 0&&(e[r]=n),e},{})}setValues(e){Rn(Or,(i,r)=>{qA(this.$(i.selector),e[r],i.parser)})}setDefaults(){Rn(Or,e=>{const i=e.hasOwnProperty("default")?e.default:0;this.$(e.selector).selectedIndex=i})}restoreSettings(){let e;try{e=JSON.parse(k.localStorage.getItem(od))}catch(i){le.warn(i)}e&&this.setValues(e)}saveSettings(){if(!this.options_.persistTextTrackSettings)return;const e=this.getValues();try{Object.keys(e).length?k.localStorage.setItem(od,JSON.stringify(e)):k.localStorage.removeItem(od)}catch(i){le.warn(i)}}updateDisplay(){const e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()}conditionalBlur_(){this.previouslyActiveEl_=null;const e=this.player_.controlBar,i=e&&e.subsCapsButton,r=e&&e.captionsButton;i?i.focus():r&&r.focus()}handleLanguagechange(){this.fill()}}B.registerComponent("TextTrackSettings",zA);class GA extends B{constructor(e,i){let r=i.ResizeObserver||k.ResizeObserver;i.ResizeObserver===null&&(r=!1);const n=ge({createEl:!r,reportTouchActivity:!1},i);super(e,n),this.ResizeObserver=i.ResizeObserver||k.ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=PT(()=>{this.resizeHandler()},100,!1,this),r?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(e.el())):(this.loadListener_=()=>{if(!this.el_||!this.el_.contentWindow)return;const s=this.debouncedHandler_;let a=this.unloadListener_=function(){et(this,"resize",s),et(this,"unload",a),a=null};It(this.el_.contentWindow,"unload",a),It(this.el_.contentWindow,"resize",s)},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}}B.registerComponent("ResizeManager",GA);const WA={trackingThreshold:20,liveTolerance:15};class XA extends B{constructor(e,i){const r=ge(WA,i,{createEl:!1});super(e,r),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=n=>this.handlePlay(n),this.handleFirstTimeupdate_=n=>this.handleFirstTimeupdate(n),this.handleSeeked_=n=>this.handleSeeked(n),this.seekToLiveEdge_=n=>this.seekToLiveEdge(n),this.reset_(),this.on(this.player_,"durationchange",n=>this.handleDurationchange(n)),this.on(this.player_,"canplay",()=>this.toggleTracking())}trackLive_(){const e=this.player_.seekable();if(!e||!e.length)return;const i=Number(k.performance.now().toFixed(4)),r=this.lastTime_===-1?0:(i-this.lastTime_)/1e3;this.lastTime_=i,this.pastSeekEnd_=this.pastSeekEnd()+r;const n=this.liveCurrentTime(),s=this.player_.currentTime();let a=this.player_.paused()||this.seekedBehindLive_||Math.abs(n-s)>this.options_.liveTolerance;(!this.timeupdateSeen_||n===1/0)&&(a=!1),a!==this.behindLiveEdge_&&(this.behindLiveEdge_=a,this.trigger("liveedgechange"))}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,$t),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){const e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){const e=this.player_.seekable(),i=[];let r=e?e.length:0;for(;r--;)i.push(e.end(r));return i.length?i.sort()[i.length-1]:1/0}seekableStart(){const e=this.player_.seekable(),i=[];let r=e?e.length:0;for(;r--;)i.push(e.start(r));return i.length?i.sort()[0]:0}liveWindow(){const e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){const e=this.seekableEnd();return this.lastSeekEnd_!==-1&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return typeof this.trackingInterval_=="number"}seekToLiveEdge(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}}B.registerComponent("LiveTracker",XA);class KA extends B{constructor(e,i){super(e,i),this.on("statechanged",r=>this.updateDom_()),this.updateDom_()}createEl(){return this.els={title:ne("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${vi()}`}),description:ne("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${vi()}`})},ne("div",{className:"vjs-title-bar"},{},Object.values(this.els))}updateDom_(){const e=this.player_.tech_,i=e&&e.el_,r={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach(n=>{const s=this.state[n],a=this.els[n],o=r[n];zl(a),s&&xr(a,s),i&&(i.removeAttribute(o),s&&i.setAttribute(o,a.id))}),this.state.title||this.state.description?this.show():this.hide()}update(e){this.setState(e)}dispose(){const e=this.player_.tech_,i=e&&e.el_;i&&(i.removeAttribute("aria-labelledby"),i.removeAttribute("aria-describedby")),super.dispose(),this.els=null}}B.registerComponent("TitleBar",KA);const ph=t=>{const e=t.el();if(e.hasAttribute("src"))return t.triggerSourceset(e.src),!0;const i=t.$$("source"),r=[];let n="";if(!i.length)return!1;for(let s=0;s<i.length;s++){const a=i[s].src;a&&r.indexOf(a)===-1&&r.push(a)}return r.length?(r.length===1&&(n=r[0]),t.triggerSourceset(n),!0):!1},YA=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(t){const e=V.createElement(this.nodeName.toLowerCase());e.innerHTML=t;const i=V.createDocumentFragment();for(;e.childNodes.length;)i.appendChild(e.childNodes[0]);return this.innerText="",k.Element.prototype.appendChild.call(this,i),this.innerHTML}}),f2=(t,e)=>{let i={};for(let r=0;r<t.length&&(i=Object.getOwnPropertyDescriptor(t[r],e),!(i&&i.set&&i.get));r++);return i.enumerable=!0,i.configurable=!0,i},QA=t=>f2([t.el(),k.HTMLMediaElement.prototype,k.Element.prototype,YA],"innerHTML"),H0=function(t){const e=t.el();if(e.resetSourceWatch_)return;const i={},r=QA(t),n=s=>(...a)=>{const o=s.apply(e,a);return ph(t),o};["append","appendChild","insertAdjacentHTML"].forEach(s=>{e[s]&&(i[s]=e[s],e[s]=n(i[s]))}),Object.defineProperty(e,"innerHTML",ge(r,{set:n(r.set)})),e.resetSourceWatch_=()=>{e.resetSourceWatch_=null,Object.keys(i).forEach(s=>{e[s]=i[s]}),Object.defineProperty(e,"innerHTML",r)},t.one("sourceset",e.resetSourceWatch_)},JA=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?$T(k.Element.prototype.getAttribute.call(this,"src")):""},set(t){return k.Element.prototype.setAttribute.call(this,"src",t),t}}),ZA=t=>f2([t.el(),k.HTMLMediaElement.prototype,JA],"src"),ek=function(t){if(!t.featuresSourceset)return;const e=t.el();if(e.resetSourceset_)return;const i=ZA(t),r=e.setAttribute,n=e.load;Object.defineProperty(e,"src",ge(i,{set:s=>{const a=i.set.call(e,s);return t.triggerSourceset(e.src),a}})),e.setAttribute=(s,a)=>{const o=r.call(e,s,a);return/src/i.test(s)&&t.triggerSourceset(e.src),o},e.load=()=>{const s=n.call(e);return ph(t)||(t.triggerSourceset(""),H0(t)),s},e.currentSrc?t.triggerSourceset(e.currentSrc):ph(t)||H0(t),e.resetSourceset_=()=>{e.resetSourceset_=null,e.load=n,e.setAttribute=r,Object.defineProperty(e,"src",i),e.resetSourceWatch_&&e.resetSourceWatch_()}};class W extends ie{constructor(e,i){super(e,i);const r=e.source;let n=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&this.el_.tagName==="VIDEO",r&&(this.el_.currentSrc!==r.src||e.tag&&e.tag.initNetworkState_===3)?this.setSource(r):this.handleLateInit_(this.el_),e.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){const s=this.el_.childNodes;let a=s.length;const o=[];for(;a--;){const l=s[a];l.nodeName.toLowerCase()==="track"&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(l),this.remoteTextTracks().addTrack(l.track),this.textTracks().addTrack(l.track),!n&&!this.el_.hasAttribute("crossorigin")&&Kl(l.src)&&(n=!0)):o.push(l))}for(let l=0;l<o.length;l++)this.el_.removeChild(o[l])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&n&&le.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`),this.restoreMetadataTracksInIOSNativePlayer_(),(qa||jl)&&e.nativeControlsForTouch===!0&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),W.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){ek(this)}restoreMetadataTracksInIOSNativePlayer_(){const e=this.textTracks();let i;const r=()=>{i=[];for(let s=0;s<e.length;s++){const a=e[s];a.kind==="metadata"&&i.push({track:a,storedMode:a.mode})}};r(),e.addEventListener("change",r),this.on("dispose",()=>e.removeEventListener("change",r));const n=()=>{for(let s=0;s<i.length;s++){const a=i[s];a.track.mode==="disabled"&&a.track.mode!==a.storedMode&&(a.track.mode=a.storedMode)}e.removeEventListener("change",n)};this.on("webkitbeginfullscreen",()=>{e.removeEventListener("change",r),e.removeEventListener("change",n),e.addEventListener("change",n)}),this.on("webkitendfullscreen",()=>{e.removeEventListener("change",r),e.addEventListener("change",r),e.removeEventListener("change",n)})}overrideNative_(e,i){if(i!==this[`featuresNative${e}Tracks`])return;const r=e.toLowerCase();this[`${r}TracksListeners_`]&&Object.keys(this[`${r}TracksListeners_`]).forEach(n=>{this.el()[`${r}Tracks`].removeEventListener(n,this[`${r}TracksListeners_`][n])}),this[`featuresNative${e}Tracks`]=!i,this[`${r}TracksListeners_`]=null,this.proxyNativeTracksForType_(r)}overrideNativeAudioTracks(e){this.overrideNative_("Audio",e)}overrideNativeVideoTracks(e){this.overrideNative_("Video",e)}proxyNativeTracksForType_(e){const i=Ft[e],r=this.el()[i.getterName],n=this[i.getterName]();if(!this[`featuresNative${i.capitalName}Tracks`]||!r||!r.addEventListener)return;const s={change:o=>{const l={type:"change",target:n,currentTarget:n,srcElement:n};n.trigger(l),e==="text"&&this[is.remoteText.getterName]().trigger(l)},addtrack(o){n.addTrack(o.track)},removetrack(o){n.removeTrack(o.track)}},a=function(){const o=[];for(let l=0;l<n.length;l++){let d=!1;for(let m=0;m<r.length;m++)if(r[m]===n[l]){d=!0;break}d||o.push(n[l])}for(;o.length;)n.removeTrack(o.shift())};this[i.getterName+"Listeners_"]=s,Object.keys(s).forEach(o=>{const l=s[o];r.addEventListener(o,l),this.on("dispose",d=>r.removeEventListener(o,l))}),this.on("loadstart",a),this.on("dispose",o=>this.off("loadstart",a))}proxyNativeTracks_(){Ft.names.forEach(e=>{this.proxyNativeTracksForType_(e)})}createEl(){let e=this.options_.tag;if(!e||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(e){const r=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(r,e),W.disposeMediaElement(e),e=r}else{e=V.createElement("video");const r=this.options_.tag&&Qi(this.options_.tag),n=ge({},r);(!qa||this.options_.nativeControlsForTouch!==!0)&&delete n.controls,vT(e,Object.assign(n,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&Jn(e,"preload",this.options_.preload),this.options_.disablePictureInPicture!==void 0&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);const i=["loop","muted","playsinline","autoplay"];for(let r=0;r<i.length;r++){const n=i[r],s=this.options_[n];typeof s<"u"&&(s?Jn(e,n,n):Hl(e,n),e[n]=s)}return e}handleLateInit_(e){if(e.networkState===0||e.networkState===3)return;if(e.readyState===0){let r=!1;const n=function(){r=!0};this.on("loadstart",n);const s=function(){r||this.trigger("loadstart")};this.on("loadedmetadata",s),this.ready(function(){this.off("loadstart",n),this.off("loadedmetadata",s),r||this.trigger("loadstart")});return}const i=["loadstart"];i.push("loadedmetadata"),e.readyState>=2&&i.push("loadeddata"),e.readyState>=3&&i.push("canplay"),e.readyState>=4&&i.push("canplaythrough"),this.ready(function(){i.forEach(function(r){this.trigger(r)},this)})}setScrubbing(e){this.isScrubbing_=e}scrubbing(){return this.isScrubbing_}setCurrentTime(e){try{this.isScrubbing_&&this.el_.fastSeek&&$l?this.el_.fastSeek(e):this.el_.currentTime=e}catch(i){le(i,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&yi&&_i&&this.el_.currentTime===0){const e=()=>{this.el_.currentTime>0&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",e))};return this.on("timeupdate",e),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if(!("webkitDisplayingFullscreen"in this.el_))return;const e=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},i=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",i),this.on("dispose",()=>{this.off("webkitbeginfullscreen",i),this.off("webkitendfullscreen",e)})}supportsFullScreen(){return typeof this.el_.webkitEnterFullScreen=="function"}enterFullScreen(){const e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)oi(this.el_.play()),this.setTimeout(function(){e.pause();try{e.webkitEnterFullScreen()}catch(i){this.trigger("fullscreenerror",i)}},0);else try{e.webkitEnterFullScreen()}catch(i){this.trigger("fullscreenerror",i)}}exitFullScreen(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(e){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(e):super.requestVideoFrameCallback(e)}cancelVideoFrameCallback(e){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(e):super.cancelVideoFrameCallback(e)}src(e){if(e===void 0)return this.el_.src;this.setSrc(e)}reset(){W.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(e){this.el_.controls=!!e}addTextTrack(e,i,r){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,i,r):super.addTextTrack(e,i,r)}createRemoteTextTrack(e){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(e);const i=V.createElement("track");return e.kind&&(i.kind=e.kind),e.label&&(i.label=e.label),(e.language||e.srclang)&&(i.srclang=e.language||e.srclang),e.default&&(i.default=e.default),e.id&&(i.id=e.id),e.src&&(i.src=e.src),i}addRemoteTextTrack(e,i){const r=super.addRemoteTextTrack(e,i);return this.featuresNativeTextTracks&&this.el().appendChild(r),r}removeRemoteTextTrack(e){if(super.removeRemoteTextTrack(e),this.featuresNativeTextTracks){const i=this.$$("track");let r=i.length;for(;r--;)(e===i[r]||e===i[r].track)&&this.el().removeChild(i[r])}}getVideoPlaybackQuality(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();const e={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),k.performance&&(e.creationTime=k.performance.now()),e}}Bl(W,"TEST_VID",function(){if(!ds())return;const t=V.createElement("video"),e=V.createElement("track");return e.kind="captions",e.srclang="en",e.label="English",t.appendChild(e),t});W.isSupported=function(){try{W.TEST_VID.volume=.5}catch{return!1}return!!(W.TEST_VID&&W.TEST_VID.canPlayType)};W.canPlayType=function(t){return W.TEST_VID.canPlayType(t)};W.canPlaySource=function(t,e){return W.canPlayType(t.type)};W.canControlVolume=function(){try{const t=W.TEST_VID.volume;W.TEST_VID.volume=t/2+.1;const e=t!==W.TEST_VID.volume;return e&&dt?(k.setTimeout(()=>{W&&W.prototype&&(W.prototype.featuresVolumeControl=t!==W.TEST_VID.volume)}),!1):e}catch{return!1}};W.canMuteVolume=function(){try{const t=W.TEST_VID.muted;return W.TEST_VID.muted=!t,W.TEST_VID.muted?Jn(W.TEST_VID,"muted","muted"):Hl(W.TEST_VID,"muted","muted"),t!==W.TEST_VID.muted}catch{return!1}};W.canControlPlaybackRate=function(){if(yi&&_i&&Fl<58)return!1;try{const t=W.TEST_VID.playbackRate;return W.TEST_VID.playbackRate=t/2+.1,t!==W.TEST_VID.playbackRate}catch{return!1}};W.canOverrideAttributes=function(){try{const t=()=>{};Object.defineProperty(V.createElement("video"),"src",{get:t,set:t}),Object.defineProperty(V.createElement("audio"),"src",{get:t,set:t}),Object.defineProperty(V.createElement("video"),"innerHTML",{get:t,set:t}),Object.defineProperty(V.createElement("audio"),"innerHTML",{get:t,set:t})}catch{return!1}return!0};W.supportsNativeTextTracks=function(){return $l||dt&&_i};W.supportsNativeVideoTracks=function(){return!!(W.TEST_VID&&W.TEST_VID.videoTracks)};W.supportsNativeAudioTracks=function(){return!!(W.TEST_VID&&W.TEST_VID.audioTracks)};W.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function([t,e]){Bl(W.prototype,t,()=>W[e](),!0)});W.prototype.featuresVolumeControl=W.canControlVolume();W.prototype.movingMediaElementInDOM=!dt;W.prototype.featuresFullscreenResize=!0;W.prototype.featuresProgressEvents=!0;W.prototype.featuresTimeupdateEvents=!0;W.prototype.featuresVideoFrameCallback=!!(W.TEST_VID&&W.TEST_VID.requestVideoFrameCallback);W.disposeMediaElement=function(t){if(t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("src"),typeof t.load=="function"&&function(){try{t.load()}catch{}}()}};W.resetMediaElement=function(t){if(!t)return;const e=t.querySelectorAll("source");let i=e.length;for(;i--;)t.removeChild(e[i]);t.removeAttribute("src"),typeof t.load=="function"&&function(){try{t.load()}catch{}}()};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(t){W.prototype[t]=function(){return this.el_[t]||this.el_.hasAttribute(t)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(t){W.prototype["set"+Ie(t)]=function(e){this.el_[t]=e,e?this.el_.setAttribute(t,t):this.el_.removeAttribute(t)}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(t){W.prototype[t]=function(){return this.el_[t]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(t){W.prototype["set"+Ie(t)]=function(e){this.el_[t]=e}});["pause","load","play"].forEach(function(t){W.prototype[t]=function(){return this.el_[t]()}});ie.withSourceHandlers(W);W.nativeSourceHandler={};W.nativeSourceHandler.canPlayType=function(t){try{return W.TEST_VID.canPlayType(t)}catch{return""}};W.nativeSourceHandler.canHandleSource=function(t,e){if(t.type)return W.nativeSourceHandler.canPlayType(t.type);if(t.src){const i=rp(t.src);return W.nativeSourceHandler.canPlayType(`video/${i}`)}return""};W.nativeSourceHandler.handleSource=function(t,e,i){e.setSrc(t.src)};W.nativeSourceHandler.dispose=function(){};W.registerSourceHandler(W.nativeSourceHandler);ie.registerTech("Html5",W);const p2=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],cd={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},mh=["tiny","xsmall","small","medium","large","xlarge","huge"],pu={};mh.forEach(t=>{const e=t.charAt(0)==="x"?`x-${t.substring(1)}`:t;pu[t]=`vjs-layout-${e}`});const tk={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0};class _e extends B{constructor(e,i,r){if(e.id=e.id||i.id||`vjs_video_${vi()}`,i=Object.assign(_e.getTagSettings(e),i),i.initChildren=!1,i.createEl=!1,i.evented=!1,i.reportTouchActivity=!1,!i.language){const a=e.closest("[lang]");a&&(i.language=a.getAttribute("lang"))}if(super(null,i,r),this.boundDocumentFullscreenChange_=a=>this.documentFullscreenChange_(a),this.boundFullWindowOnEscKey_=a=>this.fullWindowOnEscKey(a),this.boundUpdateStyleEl_=a=>this.updateStyleEl_(a),this.boundApplyInitTime_=a=>this.applyInitTime_(a),this.boundUpdateCurrentBreakpoint_=a=>this.updateCurrentBreakpoint_(a),this.boundHandleTechClick_=a=>this.handleTechClick_(a),this.boundHandleTechDoubleClick_=a=>this.handleTechDoubleClick_(a),this.boundHandleTechTouchStart_=a=>this.handleTechTouchStart_(a),this.boundHandleTechTouchMove_=a=>this.handleTechTouchMove_(a),this.boundHandleTechTouchEnd_=a=>this.handleTechTouchEnd_(a),this.boundHandleTechTap_=a=>this.handleTechTap_(a),this.isFullscreen_=!1,this.log=lT(this.id_),this.fsApi_=Xu,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=e,this.tagAttributes=e&&Qi(e),this.language(this.options_.language),i.languages){const a={};Object.getOwnPropertyNames(i.languages).forEach(function(o){a[o.toLowerCase()]=i.languages[o]}),this.languages_=a}else this.languages_=_e.prototype.options_.languages;this.resetCache_(),this.poster_=i.poster||"",this.controls_=!!i.controls,e.controls=!1,e.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],e.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),i.plugins&&Object.keys(i.plugins).forEach(a=>{if(typeof this[a]!="function")throw new Error(`plugin "${a}" does not exist`)}),this.scrubbing_=!1,this.el_=this.createEl(),Zf(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(It(V,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);const n=ge(this.options_);i.plugins&&Object.keys(i.plugins).forEach(a=>{this[a](i.plugins[a])}),i.debug&&this.debug(!0),this.options_.playerOptions=n,this.middleware_=[],this.playbackRates(i.playbackRates),this.initChildren(),this.isAudio(e.nodeName.toLowerCase()==="audio"),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),qa&&this.addClass("vjs-touch-enabled"),dt||this.addClass("vjs-workinghover"),_e.players[this.id_]=this;const s=aT.split(".")[0];this.addClass(`vjs-v${s}`),this.userActive(!0),this.reportUserActivity(),this.one("play",a=>this.listenForUserActivity_(a)),this.on("keydown",a=>this.handleKeyDown(a)),this.on("languagechange",a=>this.handleLanguagechange(a)),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)})}dispose(){this.trigger("dispose"),this.off("dispose"),et(V,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),et(V,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),_e.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),SA(this),st.names.forEach(e=>{const i=st[e],r=this[i.getterName]();r&&r.off&&r.off()}),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let e=this.tag,i,r=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player");const n=this.tag.tagName.toLowerCase()==="video-js";r?i=this.el_=e.parentNode:n||(i=this.el_=super.createEl("div"));const s=Qi(e);if(n){for(i=this.el_=e,e=this.tag=V.createElement("video");i.children.length;)e.appendChild(i.firstChild);Ta(i,"video-js")||$r(i,"video-js"),i.appendChild(e),r=this.playerElIngest_=i,Object.keys(i).forEach(o=>{try{e[o]=i[o]}catch{}})}if(e.setAttribute("tabindex","-1"),s.tabindex="-1",_i&&Ul&&(e.setAttribute("role","application"),s.role="application"),e.removeAttribute("width"),e.removeAttribute("height"),"width"in s&&delete s.width,"height"in s&&delete s.height,Object.getOwnPropertyNames(s).forEach(function(o){n&&o==="class"||i.setAttribute(o,s[o]),n&&e.setAttribute(o,s[o])}),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=i.player=this,this.addClass("vjs-paused"),k.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=kT("vjs-styles-dimensions");const o=gr(".vjs-styles-defaults"),l=gr("head");l.insertBefore(this.styleEl_,o?o.nextSibling:l.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);const a=e.getElementsByTagName("a");for(let o=0;o<a.length;o++){const l=a.item(o);$r(l,"vjs-hidden"),l.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!r&&e.parentNode.insertBefore(i,e),ah(e,i),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=i,i}crossOrigin(e){if(typeof e>"u")return this.techGet_("crossOrigin");if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){le.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`);return}this.techCall_("setCrossOrigin",e),this.posterImage&&this.posterImage.crossOrigin(e)}width(e){return this.dimension("width",e)}height(e){return this.dimension("height",e)}dimension(e,i){const r=e+"_";if(i===void 0)return this[r]||0;if(i===""||i==="auto"){this[r]=void 0,this.updateStyleEl_();return}const n=parseFloat(i);if(isNaN(n)){le.error(`Improper value "${i}" supplied for for ${e}`);return}this[r]=n,this.updateStyleEl_()}fluid(e){if(e===void 0)return!!this.fluid_;this.fluid_=!!e,Bi(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),JD(this,()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(e){if(e===void 0)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(e){if(e===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if(k.VIDEOJS_NO_DYNAMIC_STYLE===!0){const o=typeof this.width_=="number"?this.width_:this.options_.width,l=typeof this.height_=="number"?this.height_:this.options_.height,d=this.tech_&&this.tech_.el();d&&(o>=0&&(d.width=o),l>=0&&(d.height=l));return}let e,i,r,n;this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?r=this.aspectRatio_:this.videoWidth()>0?r=this.videoWidth()+":"+this.videoHeight():r="16:9";const s=r.split(":"),a=s[1]/s[0];this.width_!==void 0?e=this.width_:this.height_!==void 0?e=this.height_/a:e=this.videoWidth()||300,this.height_!==void 0?i=this.height_:i=e*a,/^[^a-zA-Z]/.test(this.id())?n="dimensions-"+this.id():n=this.id()+"-dimensions",this.addClass(n),IT(this.styleEl_,`
      .${n} {
        width: ${e}px;
        height: ${i}px;
      }

      .${n}.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: ${a*100}%;
      }
    `)}loadTech_(e,i){this.tech_&&this.unloadTech_();const r=Ie(e),n=e.charAt(0).toLowerCase()+e.slice(1);r!=="Html5"&&this.tag&&(ie.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=r,this.isReady_=!1;let s=this.autoplay();(typeof this.autoplay()=="string"||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(s=!1);const a={source:i,autoplay:s,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${n}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};st.names.forEach(l=>{const d=st[l];a[d.getterName]=this[d.privateName]}),Object.assign(a,this.options_[r]),Object.assign(a,this.options_[n]),Object.assign(a,this.options_[e.toLowerCase()]),this.tag&&(a.tag=this.tag),i&&i.src===this.cache_.src&&this.cache_.currentTime>0&&(a.startTime=this.cache_.currentTime);const o=ie.getTech(e);if(!o)throw new Error(`No Tech named '${r}' exists! '${r}' should be registered using videojs.registerTech()'`);this.tech_=new o(a),this.tech_.ready(ye(this,this.handleTechReady_),!0),C0.jsonToTextTracks(this.textTracksJson_||[],this.tech_),p2.forEach(l=>{this.on(this.tech_,l,d=>this[`handleTech${Ie(l)}_`](d))}),Object.keys(cd).forEach(l=>{this.on(this.tech_,l,d=>{if(this.tech_.playbackRate()===0&&this.tech_.seeking()){this.queuedCallbacks_.push({callback:this[`handleTech${cd[l]}_`].bind(this),event:d});return}this[`handleTech${cd[l]}_`](d)})}),this.on(this.tech_,"loadstart",l=>this.handleTechLoadStart_(l)),this.on(this.tech_,"sourceset",l=>this.handleTechSourceset_(l)),this.on(this.tech_,"waiting",l=>this.handleTechWaiting_(l)),this.on(this.tech_,"ended",l=>this.handleTechEnded_(l)),this.on(this.tech_,"seeking",l=>this.handleTechSeeking_(l)),this.on(this.tech_,"play",l=>this.handleTechPlay_(l)),this.on(this.tech_,"pause",l=>this.handleTechPause_(l)),this.on(this.tech_,"durationchange",l=>this.handleTechDurationChange_(l)),this.on(this.tech_,"fullscreenchange",(l,d)=>this.handleTechFullscreenChange_(l,d)),this.on(this.tech_,"fullscreenerror",(l,d)=>this.handleTechFullscreenError_(l,d)),this.on(this.tech_,"enterpictureinpicture",l=>this.handleTechEnterPictureInPicture_(l)),this.on(this.tech_,"leavepictureinpicture",l=>this.handleTechLeavePictureInPicture_(l)),this.on(this.tech_,"error",l=>this.handleTechError_(l)),this.on(this.tech_,"posterchange",l=>this.handleTechPosterChange_(l)),this.on(this.tech_,"textdata",l=>this.handleTechTextData_(l)),this.on(this.tech_,"ratechange",l=>this.handleTechRateChange_(l)),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&(r!=="Html5"||!this.tag)&&ah(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){st.names.forEach(e=>{const i=st[e];this[i.privateName]=this[i.getterName]()}),this.textTracksJson_=C0.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(e){return e===void 0&&le.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`),this.tech_}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):this.trigger("loadstart"),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(e){if(!this.tech_||typeof e!="string")return;const i=()=>{const n=this.muted();this.muted(!0);const s=()=>{this.muted(n)};this.playTerminatedQueue_.push(s);const a=this.play();if(Sa(a))return a.catch(o=>{throw s(),new Error(`Rejection at manualAutoplay. Restoring muted value. ${o||""}`)})};let r;if(e==="any"&&!this.muted()?(r=this.play(),Sa(r)&&(r=r.catch(i))):e==="muted"&&!this.muted()?r=i():r=this.play(),!!Sa(r))return r.then(()=>{this.trigger({type:"autoplay-success",autoplay:e})}).catch(()=>{this.trigger({type:"autoplay-failure",autoplay:e})})}updateSourceCaches_(e=""){let i=e,r="";typeof i!="string"&&(i=e.src,r=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],i&&!r&&(r=CA(this,i)),this.cache_.source=ge({},e,{src:i,type:r});const n=this.cache_.sources.filter(l=>l.src&&l.src===i),s=[],a=this.$$("source"),o=[];for(let l=0;l<a.length;l++){const d=Qi(a[l]);s.push(d),d.src&&d.src===i&&o.push(d.src)}o.length&&!n.length?this.cache_.sources=s:n.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=i}handleTechSourceset_(e){if(!this.changingSrc_){let i=s=>this.updateSourceCaches_(s);const r=this.currentSource().src,n=e.src;r&&!/^blob:/.test(r)&&/^blob:/.test(n)&&(!this.lastSource_||this.lastSource_.tech!==n&&this.lastSource_.player!==r)&&(i=()=>{}),i(n),e.src||this.tech_.any(["sourceset","loadstart"],s=>{if(s.type==="sourceset")return;const a=this.techGet("currentSrc");this.lastSource_.tech=a,this.updateSourceCaches_(a)})}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})}hasStarted(e){if(e===void 0)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(e=>e.callback(e.event)),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");const e=this.currentTime(),i=()=>{e!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",i))};this.on("timeupdate",i)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(e){this.controls_&&(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.click===void 0||this.options_.userActions.click!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click=="function"?this.options_.userActions.click.call(this,e):this.paused()?oi(this.play()):this.pause())}handleTechDoubleClick_(e){if(!this.controls_)return;Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),r=>r.contains(e.target))||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.doubleClick===void 0||this.options_.userActions.doubleClick!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick=="function"?this.options_.userActions.doubleClick.call(this,e):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(e){e.cancelable&&e.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(e){const i=e.target.player;if(i&&i!==this)return;const r=this.el();let n=V[this.fsApi_.fullscreenElement]===r;!n&&r.matches?n=r.matches(":"+this.fsApi_.fullscreen):!n&&r.msMatchesSelector&&(n=r.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(n)}handleTechFullscreenChange_(e,i){i&&(i.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",()=>{this.removeClass("vjs-ios-native-fs")})),this.isFullscreen(i.isFullscreen))}handleTechFullscreenError_(e,i){this.trigger("fullscreenerror",i)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(e){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(e){this.isInPictureInPicture(!1)}handleTechError_(){const e=this.tech_.error();this.error(e)}handleTechTextData_(){let e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(e,i){this.ready(function(){if(e in TA)return _A(this.middleware_,this.tech_,e,i);if(e in I0)return k0(this.middleware_,this.tech_,e,i);try{this.tech_&&this.tech_[e](i)}catch(r){throw le(r),r}},!0)}techGet_(e){if(!(!this.tech_||!this.tech_.isReady_)){if(e in vA)return yA(this.middleware_,this.tech_,e);if(e in I0)return k0(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(i){throw this.tech_[e]===void 0?(le(`Video.js: ${e} method not defined for ${this.techName_} playback technology.`,i),i):i.name==="TypeError"?(le(`Video.js: ${e} unavailable on ${this.techName_} playback technology element.`,i),this.tech_.isReady_=!1,i):(le(i),i)}}}play(){return new Promise(e=>{this.play_(e)})}play_(e=oi){this.playCallbacks_.push(e);const i=!!(!this.changingSrc_&&(this.src()||this.currentSrc())),r=!!($l||dt);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!i){this.waitToPlay_=a=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!i&&r&&this.load();return}const n=this.techGet_("play");r&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),n===null?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(n)}runPlayTerminatedQueue_(){const e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(i){i()})}runPlayCallbacks_(e){const i=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],i.forEach(function(r){r(e)})}pause(){this.techCall_("pause")}paused(){return this.techGet_("paused")!==!1}played(){return this.techGet_("played")||mi(0,0)}scrubbing(e){if(typeof e>"u")return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(e){if(typeof e<"u"){if(e<0&&(e=0),!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_);return}this.techCall_("setCurrentTime",e),this.cache_.initTime=0;return}return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(e){if(e===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;e=parseFloat(e),e<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let e=this.techGet_("buffered");return(!e||!e.length)&&(e=mi(0,0)),e}bufferedPercent(){return UT(this.buffered(),this.duration())}bufferedEnd(){const e=this.buffered(),i=this.duration();let r=e.end(e.length-1);return r>i&&(r=i),r}volume(e){let i;if(e!==void 0){i=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=i,this.techCall_("setVolume",i),i>0&&this.lastVolume_(i);return}return i=parseFloat(this.techGet_("volume")),isNaN(i)?1:i}muted(e){if(e!==void 0){this.techCall_("setMuted",e);return}return this.techGet_("muted")||!1}defaultMuted(e){return e!==void 0?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1}lastVolume_(e){if(e!==void 0&&e!==0){this.cache_.lastVolume=e;return}return this.cache_.lastVolume}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(e){if(e!==void 0){const i=this.isFullscreen_;this.isFullscreen_=!!e,this.isFullscreen_!==i&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_();return}return this.isFullscreen_}requestFullscreen(e){this.isInPictureInPicture()&&this.exitPictureInPicture();const i=this;return new Promise((r,n)=>{function s(){i.off("fullscreenerror",o),i.off("fullscreenchange",a)}function a(){s(),r()}function o(d,m){s(),n(m)}i.one("fullscreenchange",a),i.one("fullscreenerror",o);const l=i.requestFullscreenHelper_(e);l&&(l.then(s,s),l.then(r,n))})}requestFullscreenHelper_(e){let i;if(this.fsApi_.prefixed||(i=this.options_.fullscreen&&this.options_.fullscreen.options||{},e!==void 0&&(i=e)),this.fsApi_.requestFullscreen){const r=this.el_[this.fsApi_.requestFullscreen](i);return r&&r.then(()=>this.isFullscreen(!0),()=>this.isFullscreen(!1)),r}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){const e=this;return new Promise((i,r)=>{function n(){e.off("fullscreenerror",a),e.off("fullscreenchange",s)}function s(){n(),i()}function a(l,d){n(),r(d)}e.one("fullscreenchange",s),e.one("fullscreenerror",a);const o=e.exitFullscreenHelper_();o&&(o.then(n,n),o.then(i,r))})}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){const e=V[this.fsApi_.exitFullscreen]();return e&&oi(e.then(()=>this.isFullscreen(!1))),e}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=V.documentElement.style.overflow,It(V,"keydown",this.boundFullWindowOnEscKey_),V.documentElement.style.overflow="hidden",$r(V.body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(e){te.isEventKey(e,"Esc")&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,et(V,"keydown",this.boundFullWindowOnEscKey_),V.documentElement.style.overflow=this.docOrigOverflow,Vl(V.body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(e){if(e===void 0)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(e){if(e!==void 0){this.isInPictureInPicture_=!!e,this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_}requestPictureInPicture(){if(this.options_.enableDocumentPictureInPicture&&k.documentPictureInPicture){const e=V.createElement(this.el().tagName);return e.classList=this.el().classList,e.classList.add("vjs-pip-container"),this.posterImage&&e.appendChild(this.posterImage.el().cloneNode(!0)),this.titleBar&&e.appendChild(this.titleBar.el().cloneNode(!0)),e.appendChild(ne("p",{className:"vjs-pip-text"},{},this.localize("Playing in picture-in-picture"))),k.documentPictureInPicture.requestWindow({initialAspectRatio:this.videoWidth()/this.videoHeight(),copyStyleSheets:!0}).then(i=>(this.el_.parentNode.insertBefore(e,this.el_),i.document.body.append(this.el_),i.document.body.classList.add("vjs-pip-window"),this.player_.isInPictureInPicture(!0),this.player_.trigger("enterpictureinpicture"),i.addEventListener("unload",r=>{const n=r.target.querySelector(".video-js");e.replaceWith(n),this.player_.isInPictureInPicture(!1),this.player_.trigger("leavepictureinpicture")}),i))}return"pictureInPictureEnabled"in V&&this.disablePictureInPicture()===!1?this.techGet_("requestPictureInPicture"):Promise.reject("No PiP mode is available")}exitPictureInPicture(){if(k.documentPictureInPicture&&k.documentPictureInPicture.window)return k.documentPictureInPicture.window.close(),Promise.resolve();if("pictureInPictureEnabled"in V)return V.exitPictureInPicture()}handleKeyDown(e){const{userActions:i}=this.options_;!i||!i.hotkeys||(n=>{const s=n.tagName.toLowerCase();if(n.isContentEditable)return!0;const a=["button","checkbox","hidden","radio","reset","submit"];return s==="input"?a.indexOf(n.type)===-1:["textarea"].indexOf(s)!==-1})(this.el_.ownerDocument.activeElement)||(typeof i.hotkeys=="function"?i.hotkeys.call(this,e):this.handleHotkeys(e))}handleHotkeys(e){const i=this.options_.userActions?this.options_.userActions.hotkeys:{},{fullscreenKey:r=a=>te.isEventKey(a,"f"),muteKey:n=a=>te.isEventKey(a,"m"),playPauseKey:s=a=>te.isEventKey(a,"k")||te.isEventKey(a,"Space")}=i;if(r.call(this,e)){e.preventDefault(),e.stopPropagation();const a=B.getComponent("FullscreenToggle");V[this.fsApi_.fullscreenEnabled]!==!1&&a.prototype.handleClick.call(this,e)}else n.call(this,e)?(e.preventDefault(),e.stopPropagation(),B.getComponent("MuteToggle").prototype.handleClick.call(this,e)):s.call(this,e)&&(e.preventDefault(),e.stopPropagation(),B.getComponent("PlayToggle").prototype.handleClick.call(this,e))}canPlayType(e){let i;for(let r=0,n=this.options_.techOrder;r<n.length;r++){const s=n[r];let a=ie.getTech(s);if(a||(a=B.getComponent(s)),!a){le.error(`The "${s}" tech is undefined. Skipped browser support check for that tech.`);continue}if(a.isSupported()&&(i=a.canPlayType(e),i))return i}return""}selectSource(e){const i=this.options_.techOrder.map(o=>[o,ie.getTech(o)]).filter(([o,l])=>l?l.isSupported():(le.error(`The "${o}" tech is undefined. Skipped browser support check for that tech.`),!1)),r=function(o,l,d){let m;return o.some(y=>l.some(v=>{if(m=d(y,v),m)return!0})),m};let n;const s=o=>(l,d)=>o(d,l),a=([o,l],d)=>{if(l.canPlaySource(d,this.options_[o.toLowerCase()]))return{source:d,tech:o}};return this.options_.sourceOrder?n=r(e,i,s(a)):n=r(i,e,a),n||!1}handleSrc_(e,i){if(typeof e>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();const r=qT(e);if(!r.length){this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0);return}if(this.changingSrc_=!0,i||(this.cache_.sources=r),this.updateSourceCaches_(r[0]),mA(this,r[0],(n,s)=>{if(this.middleware_=s,i||(this.cache_.sources=r),this.updateSourceCaches_(n),this.src_(n)){if(r.length>1)return this.handleSrc_(r.slice(1));this.changingSrc_=!1,this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),this.triggerReady();return}gA(s,this.tech_)}),r.length>1){const n=()=>{this.error(null),this.handleSrc_(r.slice(1),!0)},s=()=>{this.off("error",n)};this.one("error",n),this.one("playing",s),this.resetRetryOnError_=()=>{this.off("error",n),this.off("playing",s)}}}src(e){return this.handleSrc_(e,!1)}src_(e){const i=this.selectSource([e]);return i?RT(i.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(i.tech,i.source),this.tech_.ready(()=>{this.changingSrc_=!1}),!1):!0}load(){this.techCall_("load")}reset(){if(this.paused())this.doReset_();else{const e=this.play();oi(e.then(()=>this.doReset_()))}}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),Bi(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);const{currentTimeDisplay:e,durationDisplay:i,progressControl:r,remainingTimeDisplay:n}=this.controlBar||{},{seekBar:s}=r||{};e&&e.updateContent(),i&&i.updateContent(),n&&n.updateContent(),s&&(s.update(),s.loadProgressBar&&s.loadProgressBar.update())}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){const e=this.currentSource(),i=[];return Object.keys(e).length!==0&&i.push(e),this.cache_.sources||i}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(e){if(e!==void 0){this.techCall_("setPreload",e),this.options_.preload=e;return}return this.techGet_("preload")}autoplay(e){if(e===void 0)return this.options_.autoplay||!1;let i;typeof e=="string"&&/(any|play|muted)/.test(e)||e===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_(typeof e=="string"?e:"play"),i=!1):e?this.options_.autoplay=!0:this.options_.autoplay=!1,i=typeof i>"u"?this.options_.autoplay:i,this.tech_&&this.techCall_("setAutoplay",i)}playsinline(e){return e!==void 0?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")}loop(e){if(e!==void 0){this.techCall_("setLoop",e),this.options_.loop=e;return}return this.techGet_("loop")}poster(e){if(e===void 0)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){const e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(e){if(e===void 0)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(e){if(e===void 0)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(e){if(e===void 0)return this.error_||null;if(mr("beforeerror").forEach(i=>{const r=i(this,e);if(!(gi(r)&&!Array.isArray(r)||typeof r=="string"||typeof r=="number"||r===null)){this.log.error("please return a value that MediaError expects in beforeerror hooks");return}e=r}),this.options_.suppressNotSupportedError&&e&&e.code===4){const i=function(){this.error(e)};this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],i),this.one("loadstart",function(){this.off(["click","touchstart"],i)});return}if(e===null){this.error_=e,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close();return}this.error_=new ut(e),this.addClass("vjs-error"),le.error(`(CODE:${this.error_.code} ${ut.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),mr("error").forEach(i=>i(this,this.error_))}reportUserActivity(e){this.userActivity_=!0}userActive(e){if(e===void 0)return this.userActive_;if(e=!!e,e!==this.userActive_){if(this.userActive_=e,this.userActive_){this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");return}this.tech_&&this.tech_.one("mousemove",function(i){i.stopPropagation(),i.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}listenForUserActivity_(){let e,i,r;const n=ye(this,this.reportUserActivity),s=function(m){(m.screenX!==i||m.screenY!==r)&&(i=m.screenX,r=m.screenY,n())},a=function(){n(),this.clearInterval(e),e=this.setInterval(n,250)},o=function(m){n(),this.clearInterval(e)};this.on("mousedown",a),this.on("mousemove",s),this.on("mouseup",o),this.on("mouseleave",o);const l=this.getChild("controlBar");l&&!dt&&!yi&&(l.on("mouseenter",function(m){this.player().options_.inactivityTimeout!==0&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),l.on("mouseleave",function(m){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",n),this.on("keyup",n);let d;this.setInterval(function(){if(!this.userActivity_)return;this.userActivity_=!1,this.userActive(!0),this.clearTimeout(d);const m=this.options_.inactivityTimeout;m<=0||(d=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},m))},250)}playbackRate(e){if(e!==void 0){this.techCall_("setPlaybackRate",e);return}return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1}defaultPlaybackRate(e){return e!==void 0?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(e){if(e!==void 0){this.isAudio_=!!e;return}return!!this.isAudio_}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");const e=this.children(),i=this.getChild("ControlBar"),r=i&&i.currentHeight();e.forEach(n=>{n!==i&&n.el_&&!n.hasClass("vjs-hidden")&&(n.hide(),this.audioOnlyCache_.hiddenChildren.push(n))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(r),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach(e=>e.show()),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(e){if(typeof e!="boolean"||e===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=e,e){const i=[];return this.isInPictureInPicture()&&i.push(this.exitPictureInPicture()),this.isFullscreen()&&i.push(this.exitFullscreen()),this.audioPosterMode()&&i.push(this.audioPosterMode(!1)),Promise.all(i).then(()=>this.enableAudioOnlyUI_())}return Promise.resolve().then(()=>this.disableAudioOnlyUI_())}enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(e){return typeof e!="boolean"||e===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=e,e?this.audioOnlyMode()?this.audioOnlyMode(!1).then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.disablePosterModeUI_()}))}addTextTrack(e,i,r){if(this.tech_)return this.tech_.addTextTrack(e,i,r)}addRemoteTextTrack(e,i){if(this.tech_)return this.tech_.addRemoteTextTrack(e,i)}removeRemoteTextTrack(e={}){let{track:i}=e;if(i||(i=e),this.tech_)return this.tech_.removeRemoteTextTrack(i)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(e){if(e===void 0)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),Bi(this)&&this.trigger("languagechange"))}languages(){return ge(_e.prototype.options_.languages,this.languages_)}toJSON(){const e=ge(this.options_),i=e.tracks;e.tracks=[];for(let r=0;r<i.length;r++){let n=i[r];n=ge(n),n.player=void 0,e.tracks[r]=n}return e}createModal(e,i){i=i||{},i.content=e||"";const r=new ps(this,i);return this.addChild(r),r.on("dispose",()=>{this.removeChild(r)}),r.open(),r}updateCurrentBreakpoint_(){if(!this.responsive())return;const e=this.currentBreakpoint(),i=this.currentWidth();for(let r=0;r<mh.length;r++){const n=mh[r],s=this.breakpoints_[n];if(i<=s){if(e===n)return;e&&this.removeClass(pu[e]),this.addClass(pu[n]),this.breakpoint_=n;break}}}removeCurrentBreakpoint_(){const e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)}breakpoints(e){return e===void 0?Object.assign(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=Object.assign({},tk,e),this.updateCurrentBreakpoint_(),Object.assign(this.breakpoints_))}responsive(e){if(e===void 0)return this.responsive_;e=!!e;const i=this.responsive_;if(e!==i)return this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return pu[this.breakpoint_]||""}loadMedia(e,i){if(!e||typeof e!="object")return;this.reset(),this.cache_.media=ge(e);const{artist:r,artwork:n,description:s,poster:a,src:o,textTracks:l,title:d}=this.cache_.media;!n&&a&&(this.cache_.media.artwork=[{src:a,type:el(a)}]),o&&this.src(o),a&&this.poster(a),Array.isArray(l)&&l.forEach(m=>this.addRemoteTextTrack(m,!1)),this.titleBar&&this.titleBar.update({title:d,description:s||r||""}),this.ready(i)}getMedia(){if(!this.cache_.media){const e=this.poster(),i=this.currentSources(),r=Array.prototype.map.call(this.remoteTextTracks(),s=>({kind:s.kind,label:s.label,language:s.language,src:s.src})),n={src:i,textTracks:r};return e&&(n.poster=e,n.artwork=[{src:n.poster,type:el(n.poster)}]),n}return ge(this.cache_.media)}static getTagSettings(e){const i={sources:[],tracks:[]},r=Qi(e),n=r["data-setup"];if(Ta(e,"vjs-fill")&&(r.fill=!0),Ta(e,"vjs-fluid")&&(r.fluid=!0),n!==null){const[s,a]=F1(n||"{}");s&&le.error(s),Object.assign(r,a)}if(Object.assign(i,r),e.hasChildNodes()){const s=e.childNodes;for(let a=0,o=s.length;a<o;a++){const l=s[a],d=l.nodeName.toLowerCase();d==="source"?i.sources.push(Qi(l)):d==="track"&&i.tracks.push(Qi(l))}}return i}debug(e){if(e===void 0)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(e){if(e===void 0)return this.cache_.playbackRates;Array.isArray(e)&&e.every(i=>typeof i=="number")&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))}}st.names.forEach(function(t){const e=st[t];_e.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}});_e.prototype.crossorigin=_e.prototype.crossOrigin;_e.players={};const Ws=k.navigator;_e.prototype.options_={techOrder:ie.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Ws&&(Ws.languages&&Ws.languages[0]||Ws.userLanguage||Ws.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1};["ended","seeking","seekable","networkState","readyState"].forEach(function(t){_e.prototype[t]=function(){return this.techGet_(t)}});p2.forEach(function(t){_e.prototype[`handleTech${Ie(t)}_`]=function(){return this.trigger(t)}});B.registerComponent("Player",_e);const il="plugin",Fn="activePlugins_",xn={},rl=t=>xn.hasOwnProperty(t),mu=t=>rl(t)?xn[t]:void 0,m2=(t,e)=>{t[Fn]=t[Fn]||{},t[Fn][e]=!0},nl=(t,e,i)=>{const r=(i?"before":"")+"pluginsetup";t.trigger(r,e),t.trigger(r+":"+e.name,e)},ik=function(t,e){const i=function(){nl(this,{name:t,plugin:e,instance:null},!0);const r=e.apply(this,arguments);return m2(this,t),nl(this,{name:t,plugin:e,instance:r}),r};return Object.keys(e).forEach(function(r){i[r]=e[r]}),i},q0=(t,e)=>(e.prototype.name=t,function(...i){nl(this,{name:t,plugin:e,instance:null},!0);const r=new e(this,...i);return this[t]=()=>r,nl(this,r.getEventHash()),r});class xt{constructor(e){if(this.constructor===xt)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,this.log||(this.log=this.player.log.createLogger(this.name)),Zf(this),delete this.trigger,NT(this,this.constructor.defaultState),m2(e,this.name),this.dispose=this.dispose.bind(this),e.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(e={}){return e.name=this.name,e.plugin=this.constructor,e.instance=this,e}trigger(e,i={}){return fs(this.eventBusEl_,e,this.getEventHash(i))}handleStateChanged(e){}dispose(){const{name:e,player:i}=this;this.trigger("dispose"),this.off(),i.off("dispose",this.dispose),i[Fn][e]=!1,this.player=this.state=null,i[e]=q0(e,xn[e])}static isBasic(e){const i=typeof e=="string"?mu(e):e;return typeof i=="function"&&!xt.prototype.isPrototypeOf(i.prototype)}static registerPlugin(e,i){if(typeof e!="string")throw new Error(`Illegal plugin name, "${e}", must be a string, was ${typeof e}.`);if(rl(e))le.warn(`A plugin named "${e}" already exists. You may want to avoid re-registering plugins!`);else if(_e.prototype.hasOwnProperty(e))throw new Error(`Illegal plugin name, "${e}", cannot share a name with an existing player method!`);if(typeof i!="function")throw new Error(`Illegal plugin for "${e}", must be a function, was ${typeof i}.`);return xn[e]=i,e!==il&&(xt.isBasic(i)?_e.prototype[e]=ik(e,i):_e.prototype[e]=q0(e,i)),i}static deregisterPlugin(e){if(e===il)throw new Error("Cannot de-register base plugin.");rl(e)&&(delete xn[e],delete _e.prototype[e])}static getPlugins(e=Object.keys(xn)){let i;return e.forEach(r=>{const n=mu(r);n&&(i=i||{},i[r]=n)}),i}static getPluginVersion(e){const i=mu(e);return i&&i.VERSION||""}}xt.getPlugin=mu;xt.BASE_PLUGIN_NAME=il;xt.registerPlugin(il,xt);_e.prototype.usingPlugin=function(t){return!!this[Fn]&&this[Fn][t]===!0};_e.prototype.hasPlugin=function(t){return!!rl(t)};function rk(t,e){let i=!1;return function(...r){return i||le.warn(t),i=!0,e.apply(this,r)}}function Jt(t,e,i,r){return rk(`${e} is deprecated and will be removed in ${t}.0; please use ${i} instead.`,r)}const g2=t=>t.indexOf("#")===0?t.slice(1):t;function R(t,e,i){let r=R.getPlayer(t);if(r)return e&&le.warn(`Player "${t}" is already initialised. Options will not be applied.`),i&&r.ready(i),r;const n=typeof t=="string"?gr("#"+g2(t)):t;if(!hs(n))throw new TypeError("The element or ID supplied is not valid. (videojs)");(!n.ownerDocument.defaultView||!n.ownerDocument.body.contains(n))&&le.warn("The element supplied is not included in the DOM"),e=e||{},e.restoreEl===!0&&(e.restoreEl=(n.parentNode&&n.parentNode.hasAttribute("data-vjs-player")?n.parentNode:n).cloneNode(!0)),mr("beforesetup").forEach(a=>{const o=a(n,ge(e));if(!gi(o)||Array.isArray(o)){le.error("please return an object in beforesetup hooks");return}e=ge(e,o)});const s=B.getComponent("Player");return r=new s(n,e,i),mr("setup").forEach(a=>a(r)),r}R.hooks_=Pi;R.hooks=mr;R.hook=FD;R.hookOnce=UD;R.removeHook=oT;if(k.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&ds()){let t=gr(".vjs-styles-defaults");if(!t){t=kT("vjs-styles-defaults");const e=gr("head");e&&e.insertBefore(t,e.firstChild),IT(t,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: 56.25%
      }
    `)}}uh(1,R);R.VERSION=aT;R.options=_e.prototype.options_;R.getPlayers=()=>_e.players;R.getPlayer=t=>{const e=_e.players;let i;if(typeof t=="string"){const r=g2(t),n=e[r];if(n)return n;i=gr("#"+r)}else i=t;if(hs(i)){const{player:r,playerId:n}=i;if(r||e[n])return r||e[n]}};R.getAllPlayers=()=>Object.keys(_e.players).map(t=>_e.players[t]).filter(Boolean);R.players=_e.players;R.getComponent=B.getComponent;R.registerComponent=(t,e)=>{ie.isTech(e)&&le.warn(`The ${t} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),B.registerComponent.call(B,t,e)};R.getTech=ie.getTech;R.registerTech=ie.registerTech;R.use=pA;Object.defineProperty(R,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(R.middleware,"TERMINATOR",{value:Zu,writeable:!1,enumerable:!0});R.browser=HD;R.obj=VD;R.mergeOptions=Jt(9,"videojs.mergeOptions","videojs.obj.merge",ge);R.defineLazyProperty=Jt(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",Bl);R.bind=Jt(9,"videojs.bind","native Function.prototype.bind",ye);R.registerPlugin=xt.registerPlugin;R.deregisterPlugin=xt.deregisterPlugin;R.plugin=(t,e)=>(le.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),xt.registerPlugin(t,e));R.getPlugins=xt.getPlugins;R.getPlugin=xt.getPlugin;R.getPluginVersion=xt.getPluginVersion;R.addLanguage=function(t,e){return t=(""+t).toLowerCase(),R.options.languages=ge(R.options.languages,{[t]:e}),R.options.languages[t]};R.log=le;R.createLogger=lT;R.time=rA;R.createTimeRange=Jt(9,"videojs.createTimeRange","videojs.time.createTimeRanges",mi);R.createTimeRanges=Jt(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",mi);R.formatTime=Jt(9,"videojs.formatTime","videojs.time.formatTime",Wr);R.setFormatTime=Jt(9,"videojs.setFormatTime","videojs.time.setFormatTime",BT);R.resetFormatTime=Jt(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",FT);R.parseUrl=Jt(9,"videojs.parseUrl","videojs.url.parseUrl",ip);R.isCrossOrigin=Jt(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",Kl);R.EventTarget=Vt;R.any=Jf;R.on=It;R.one=Wl;R.off=et;R.trigger=fs;R.xhr=cv;R.TextTrack=no;R.AudioTrack=VT;R.VideoTrack=HT;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(t=>{R[t]=function(){return le.warn(`videojs.${t}() is deprecated; use videojs.dom.${t}() instead`),DT[t].apply(null,arguments)}});R.computedStyle=Jt(9,"videojs.computedStyle","videojs.dom.computedStyle",es);R.dom=DT;R.fn=QD;R.num=LA;R.str=tA;R.url=hA;/*! @name videojs-contrib-quality-levels @version 3.0.0 @license Apache-2.0 */class nk{constructor(e){let i=this;return i.id=e.id,i.label=i.id,i.width=e.width,i.height=e.height,i.bitrate=e.bandwidth,i.frameRate=e.frameRate,i.enabled_=e.enabled,Object.defineProperty(i,"enabled",{get(){return i.enabled_()},set(r){i.enabled_(r)}}),i}}class sl extends R.EventTarget{constructor(){super();let e=this;return e.levels_=[],e.selectedIndex_=-1,Object.defineProperty(e,"selectedIndex",{get(){return e.selectedIndex_}}),Object.defineProperty(e,"length",{get(){return e.levels_.length}}),e}addQualityLevel(e){let i=this.getQualityLevelById(e.id);if(i)return i;const r=this.levels_.length;return i=new nk(e),""+r in this||Object.defineProperty(this,r,{get(){return this.levels_[r]}}),this.levels_.push(i),this.trigger({qualityLevel:i,type:"addqualitylevel"}),i}removeQualityLevel(e){let i=null;for(let r=0,n=this.length;r<n;r++)if(this[r]===e){i=this.levels_.splice(r,1)[0],this.selectedIndex_===r?this.selectedIndex_=-1:this.selectedIndex_>r&&this.selectedIndex_--;break}return i&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),i}getQualityLevelById(e){for(let i=0,r=this.length;i<r;i++){const n=this[i];if(n.id===e)return n}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}}sl.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(const t in sl.prototype.allowedEvents_)sl.prototype["on"+t]=null;var y2="3.0.0";const sk=R.registerPlugin||R.plugin,ak=function(t,e){const i=t.qualityLevels,r=new sl,n=function(){r.dispose(),t.qualityLevels=i,t.off("dispose",n)};return t.on("dispose",n),t.qualityLevels=()=>r,t.qualityLevels.VERSION=y2,r},_2=function(t){return ak(this,R.mergeOptions({},t))};sk("qualityLevels",_2);_2.VERSION=y2;/*! @name @videojs/http-streaming @version 3.0.2 @license Apache-2.0 */const Kt=AC,al=(t,e)=>e&&e.responseURL&&t!==e.responseURL?e.responseURL:t,Zt=t=>R.log.debug?R.log.debug.bind(R,"VHS:",`${t} >`):function(){};function ve(...t){const e=R.obj||R;return(e.merge||e.mergeOptions).apply(e,t)}function Je(...t){const e=R.time||R;return(e.createTimeRanges||e.createTimeRanges).apply(e,t)}const yr=1/30,ui=yr*3,v2=function(t,e){const i=[];let r;if(t&&t.length)for(r=0;r<t.length;r++)e(t.start(r),t.end(r))&&i.push([t.start(r),t.end(r)]);return Je(i)},Sn=function(t,e){return v2(t,function(i,r){return i-ui<=e&&r+ui>=e})},Jo=function(t,e){return v2(t,function(i){return i-yr>=e})},ok=function(t){if(t.length<2)return Je();const e=[];for(let i=1;i<t.length;i++){const r=t.end(i-1),n=t.start(i);e.push([r,n])}return Je(e)},uk=function(t,e){let i=null,r=null,n=0;const s=[],a=[];if(!t||!t.length||!e||!e.length)return Je();let o=t.length;for(;o--;)s.push({time:t.start(o),type:"start"}),s.push({time:t.end(o),type:"end"});for(o=e.length;o--;)s.push({time:e.start(o),type:"start"}),s.push({time:e.end(o),type:"end"});for(s.sort(function(l,d){return l.time-d.time}),o=0;o<s.length;o++)s[o].type==="start"?(n++,n===2&&(i=s[o].time)):s[o].type==="end"&&(n--,n===1&&(r=s[o].time)),i!==null&&r!==null&&(a.push([i,r]),i=null,r=null);return Je(a)},T2=t=>{const e=[];if(!t||!t.length)return"";for(let i=0;i<t.length;i++)e.push(t.start(i)+" => "+t.end(i));return e.join(", ")},lk=function(t,e,i=1){return((t.length?t.end(t.length-1):0)-e)/i},Fr=t=>{const e=[];for(let i=0;i<t.length;i++)e.push({start:t.start(i),end:t.end(i)});return e},ck=function(t,e){if(t===e)return!1;if(!t&&e||!e&&t||t.length!==e.length)return!0;for(let i=0;i<t.length;i++)if(t.start(i)!==e.start(i)||t.end(i)!==e.end(i))return!0;return!1},z0=function(t){if(!(!t||!t.length||!t.end))return t.end(t.length-1)},Tp=function(t,e){let i=0;if(!t||!t.length)return i;for(let r=0;r<t.length;r++){const n=t.start(r),s=t.end(r);if(!(e>s)){if(e>n&&e<=s){i+=s-e;continue}i+=s-n}}return i},xp=(t,e)=>{if(!e.preload)return e.duration;let i=0;return(e.parts||[]).forEach(function(r){i+=r.duration}),(e.preloadHints||[]).forEach(function(r){r.type==="PART"&&(i+=t.partTargetDuration)}),i},gh=t=>(t.segments||[]).reduce((e,i,r)=>(i.parts?i.parts.forEach(function(n,s){e.push({duration:n.duration,segmentIndex:r,partIndex:s,part:n,segment:i})}):e.push({duration:i.duration,segmentIndex:r,partIndex:null,segment:i,part:null}),e),[]),x2=t=>{const e=t.segments&&t.segments.length&&t.segments[t.segments.length-1];return e&&e.parts||[]},S2=({preloadSegment:t})=>{if(!t)return;const{parts:e,preloadHints:i}=t;let r=(i||[]).reduce((n,s)=>n+(s.type==="PART"?1:0),0);return r+=e&&e.length?e.length:0,r},E2=(t,e)=>{if(e.endList)return 0;if(t&&t.suggestedPresentationDelay)return t.suggestedPresentationDelay;const i=x2(e).length>0;return i&&e.serverControl&&e.serverControl.partHoldBack?e.serverControl.partHoldBack:i&&e.partTargetDuration?e.partTargetDuration*3:e.serverControl&&e.serverControl.holdBack?e.serverControl.holdBack:e.targetDuration?e.targetDuration*3:0},dk=function(t,e){let i=0,r=e-t.mediaSequence,n=t.segments[r];if(n){if(typeof n.start<"u")return{result:n.start,precise:!0};if(typeof n.end<"u")return{result:n.end-n.duration,precise:!0}}for(;r--;){if(n=t.segments[r],typeof n.end<"u")return{result:i+n.end,precise:!0};if(i+=xp(t,n),typeof n.start<"u")return{result:i+n.start,precise:!0}}return{result:i,precise:!1}},hk=function(t,e){let i=0,r,n=e-t.mediaSequence;for(;n<t.segments.length;n++){if(r=t.segments[n],typeof r.start<"u")return{result:r.start-i,precise:!0};if(i+=xp(t,r),typeof r.end<"u")return{result:r.end-i,precise:!0}}return{result:-1,precise:!1}},b2=function(t,e,i){if(typeof e>"u"&&(e=t.mediaSequence+t.segments.length),e<t.mediaSequence)return 0;const r=dk(t,e);if(r.precise)return r.result;const n=hk(t,e);return n.precise?n.result:r.result+i},C2=function(t,e,i){if(!t)return 0;if(typeof i!="number"&&(i=0),typeof e>"u"){if(t.totalDuration)return t.totalDuration;if(!t.endList)return k.Infinity}return b2(t,e,i)},Ea=function({defaultDuration:t,durationList:e,startIndex:i,endIndex:r}){let n=0;if(i>r&&([i,r]=[r,i]),i<0){for(let s=i;s<Math.min(0,r);s++)n+=t;i=0}for(let s=i;s<r;s++)n+=e[s].duration;return n},w2=function(t,e,i,r){if(!t||!t.segments)return null;if(t.endList)return C2(t);if(e===null)return null;e=e||0;let n=b2(t,t.mediaSequence+t.segments.length,e);return i&&(r=typeof r=="number"?r:E2(null,t),n-=r),Math.max(0,n)},fk=function(t,e,i){const n=e||0,s=w2(t,e,!0,i);return s===null?Je():Je(n,s)},pk=function({playlist:t,currentTime:e,startingSegmentIndex:i,startingPartIndex:r,startTime:n,exactManifestTimings:s}){let a=e-n;const o=gh(t);let l=0;for(let d=0;d<o.length;d++){const m=o[d];if(i===m.segmentIndex&&!(typeof r=="number"&&typeof m.partIndex=="number"&&r!==m.partIndex)){l=d;break}}if(a<0){if(l>0)for(let d=l-1;d>=0;d--){const m=o[d];if(a+=m.duration,s){if(a<0)continue}else if(a+yr<=0)continue;return{partIndex:m.partIndex,segmentIndex:m.segmentIndex,startTime:n-Ea({defaultDuration:t.targetDuration,durationList:o,startIndex:l,endIndex:d})}}return{partIndex:o[0]&&o[0].partIndex||null,segmentIndex:o[0]&&o[0].segmentIndex||0,startTime:e}}if(l<0){for(let d=l;d<0;d++)if(a-=t.targetDuration,a<0)return{partIndex:o[0]&&o[0].partIndex||null,segmentIndex:o[0]&&o[0].segmentIndex||0,startTime:e};l=0}for(let d=l;d<o.length;d++){const m=o[d];if(a-=m.duration,s){if(a>0)continue}else if(a-yr>=0)continue;return{partIndex:m.partIndex,segmentIndex:m.segmentIndex,startTime:n+Ea({defaultDuration:t.targetDuration,durationList:o,startIndex:l,endIndex:d})}}return{segmentIndex:o[o.length-1].segmentIndex,partIndex:o[o.length-1].partIndex,startTime:e}},D2=function(t){return t.excludeUntil&&t.excludeUntil>Date.now()},Sp=function(t){return t.excludeUntil&&t.excludeUntil===1/0},Jl=function(t){const e=D2(t);return!t.disabled&&!e},mk=function(t){return t.disabled},gk=function(t){for(let e=0;e<t.segments.length;e++)if(t.segments[e].key)return!0;return!1},A2=function(t,e){return e.attributes&&e.attributes[t]},yk=function(t,e,i,r=0){return A2("BANDWIDTH",i)?(t*i.attributes.BANDWIDTH-r*8)/e:NaN},yh=(t,e)=>{if(t.playlists.length===1)return!0;const i=e.attributes.BANDWIDTH||Number.MAX_VALUE;return t.playlists.filter(r=>Jl(r)?(r.attributes.BANDWIDTH||0)<i:!1).length===0},Ep=(t,e)=>!t&&!e||!t&&e||t&&!e?!1:!!(t===e||t.id&&e.id&&t.id===e.id||t.resolvedUri&&e.resolvedUri&&t.resolvedUri===e.resolvedUri||t.uri&&e.uri&&t.uri===e.uri),G0=function(t,e){const i=t&&t.mediaGroups&&t.mediaGroups.AUDIO||{};let r=!1;for(const n in i){for(const s in i[n])if(r=e(i[n][s]),r)break;if(r)break}return!!r},uo=t=>{if(!t||!t.playlists||!t.playlists.length)return G0(t,i=>i.playlists&&i.playlists.length||i.uri);for(let e=0;e<t.playlists.length;e++){const i=t.playlists[e],r=i.attributes&&i.attributes.CODECS;if(!(r&&r.split(",").every(s=>gv(s))||G0(t,s=>Ep(i,s))))return!1}return!0};var _t={liveEdgeDelay:E2,duration:C2,seekable:fk,getMediaInfoForTime:pk,isEnabled:Jl,isDisabled:mk,isExcluded:D2,isIncompatible:Sp,playlistEnd:w2,isAes:gk,hasAttribute:A2,estimateSegmentRequestTime:yk,isLowestEnabledRendition:yh,isAudioOnly:uo,playlistMatch:Ep,segmentDurationWithParts:xp};const{log:k2}=R,bp=(t,e)=>`${t}-${e}`,_k=(t,e,i)=>`placeholder-uri-${t}-${e}-${i}`,vk=({onwarn:t,oninfo:e,manifestString:i,customTagParsers:r=[],customTagMappers:n=[],llhls:s})=>{const a=new MC;t&&a.on("warn",t),e&&a.on("info",e),r.forEach(d=>a.addParser(d)),n.forEach(d=>a.addTagMapper(d)),a.push(i),a.end();const o=a.manifest;if(s||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(d){o.hasOwnProperty(d)&&delete o[d]}),o.segments&&o.segments.forEach(function(d){["parts","preloadHints"].forEach(function(m){d.hasOwnProperty(m)&&delete d[m]})})),!o.targetDuration){let d=10;o.segments&&o.segments.length&&(d=o.segments.reduce((m,y)=>Math.max(m,y.duration),0)),t&&t(`manifest has no targetDuration defaulting to ${d}`),o.targetDuration=d}const l=x2(o);if(l.length&&!o.partTargetDuration){const d=l.reduce((m,y)=>Math.max(m,y.duration),0);t&&(t(`manifest has no partTargetDuration defaulting to ${d}`),k2.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),o.partTargetDuration=d}return o},ys=(t,e)=>{t.mediaGroups&&["AUDIO","SUBTITLES"].forEach(i=>{if(t.mediaGroups[i])for(const r in t.mediaGroups[i])for(const n in t.mediaGroups[i][r]){const s=t.mediaGroups[i][r][n];e(s,i,r,n)}})},I2=({playlist:t,uri:e,id:i})=>{t.id=i,t.playlistErrors_=0,e&&(t.uri=e),t.attributes=t.attributes||{}},Tk=t=>{let e=t.playlists.length;for(;e--;){const i=t.playlists[e];I2({playlist:i,id:bp(e,i.uri)}),i.resolvedUri=Kt(t.uri,i.uri),t.playlists[i.id]=i,t.playlists[i.uri]=i,i.attributes.BANDWIDTH||k2.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},xk=t=>{ys(t,e=>{e.uri&&(e.resolvedUri=Kt(t.uri,e.uri))})},Sk=(t,e)=>{const i=bp(0,e),r={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:k.location.href,resolvedUri:k.location.href,playlists:[{uri:e,id:i,resolvedUri:e,attributes:{}}]};return r.playlists[i]=r.playlists[0],r.playlists[e]=r.playlists[0],r},P2=(t,e,i=_k)=>{t.uri=e;for(let n=0;n<t.playlists.length;n++)if(!t.playlists[n].uri){const s=`placeholder-uri-${n}`;t.playlists[n].uri=s}const r=uo(t);ys(t,(n,s,a,o)=>{if(!n.playlists||!n.playlists.length){if(r&&s==="AUDIO"&&!n.uri)for(let l=0;l<t.playlists.length;l++){const d=t.playlists[l];if(d.attributes&&d.attributes.AUDIO&&d.attributes.AUDIO===a)return}n.playlists=[Ui({},n)]}n.playlists.forEach(function(l,d){const m=i(s,a,o,l),y=bp(d,m);l.uri?l.resolvedUri=l.resolvedUri||Kt(t.uri,l.uri):(l.uri=d===0?m:y,l.resolvedUri=l.uri),l.id=l.id||y,l.attributes=l.attributes||{},t.playlists[l.id]=l,t.playlists[l.uri]=l})}),Tk(t),xk(t)},{EventTarget:Ek}=R,bk=(t,e)=>{if(e.endList||!e.serverControl)return t;const i={};if(e.serverControl.canBlockReload){const{preloadSegment:r}=e;let n=e.mediaSequence+e.segments.length;if(r){const s=r.parts||[],a=S2(e)-1;a>-1&&a!==s.length-1&&(i._HLS_part=a),(a>-1||s.length)&&n--}i._HLS_msn=n}if(e.serverControl&&e.serverControl.canSkipUntil&&(i._HLS_skip=e.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(i).length){const r=new k.URL(t);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(n){i.hasOwnProperty(n)&&r.searchParams.set(n,i[n])}),t=r.toString()}return t},Ck=(t,e)=>{if(!t)return e;const i=ve(t,e);if(t.preloadHints&&!e.preloadHints&&delete i.preloadHints,t.parts&&!e.parts)delete i.parts;else if(t.parts&&e.parts)for(let r=0;r<e.parts.length;r++)t.parts&&t.parts[r]&&(i.parts[r]=ve(t.parts[r],e.parts[r]));return!t.skipped&&e.skipped&&(i.skipped=!1),t.preload&&!e.preload&&(i.preload=!1),i},wk=(t,e,i)=>{const r=t.slice(),n=e.slice();i=i||0;const s=[];let a;for(let o=0;o<n.length;o++){const l=r[o+i],d=n[o];l?(a=l.map||a,s.push(Ck(l,d))):(a&&!d.map&&(d.map=a),s.push(d))}return s},O2=(t,e)=>{!t.resolvedUri&&t.uri&&(t.resolvedUri=Kt(e,t.uri)),t.key&&!t.key.resolvedUri&&(t.key.resolvedUri=Kt(e,t.key.uri)),t.map&&!t.map.resolvedUri&&(t.map.resolvedUri=Kt(e,t.map.uri)),t.map&&t.map.key&&!t.map.key.resolvedUri&&(t.map.key.resolvedUri=Kt(e,t.map.key.uri)),t.parts&&t.parts.length&&t.parts.forEach(i=>{i.resolvedUri||(i.resolvedUri=Kt(e,i.uri))}),t.preloadHints&&t.preloadHints.length&&t.preloadHints.forEach(i=>{i.resolvedUri||(i.resolvedUri=Kt(e,i.uri))})},L2=function(t){const e=t.segments||[],i=t.preloadSegment;if(i&&i.parts&&i.parts.length){if(i.preloadHints){for(let r=0;r<i.preloadHints.length;r++)if(i.preloadHints[r].type==="MAP")return e}i.duration=t.targetDuration,i.preload=!0,e.push(i)}return e},N2=(t,e)=>t===e||t.segments&&e.segments&&t.segments.length===e.segments.length&&t.endList===e.endList&&t.mediaSequence===e.mediaSequence&&t.preloadSegment===e.preloadSegment,_h=(t,e,i=N2)=>{const r=ve(t,{}),n=r.playlists[e.id];if(!n||i(n,e))return null;e.segments=L2(e);const s=ve(n,e);if(s.preloadSegment&&!e.preloadSegment&&delete s.preloadSegment,n.segments){if(e.skip){e.segments=e.segments||[];for(let a=0;a<e.skip.skippedSegments;a++)e.segments.unshift({skipped:!0})}s.segments=wk(n.segments,e.segments,e.mediaSequence-n.mediaSequence)}s.segments.forEach(a=>{O2(a,s.resolvedUri)});for(let a=0;a<r.playlists.length;a++)r.playlists[a].id===e.id&&(r.playlists[a]=s);return r.playlists[e.id]=s,r.playlists[e.uri]=s,ys(t,(a,o,l,d)=>{if(a.playlists)for(let m=0;m<a.playlists.length;m++)e.id===a.playlists[m].id&&(a.playlists[m]=s)}),r},vh=(t,e)=>{const i=t.segments||[],r=i[i.length-1],n=r&&r.parts&&r.parts[r.parts.length-1],s=n&&n.duration||r&&r.duration;return e&&s?s*1e3:(t.partTargetDuration||t.targetDuration||10)*500};class En extends Ek{constructor(e,i,r={}){if(super(),!e)throw new Error("A non-empty playlist URL or object is required");this.logger_=Zt("PlaylistLoader");const{withCredentials:n=!1}=r;this.src=e,this.vhs_=i,this.withCredentials=n;const s=i.options_;this.customTagParsers=s&&s.customTagParsers||[],this.customTagMappers=s&&s.customTagMappers||[],this.llhls=s&&s.llhls,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_)}handleMediaupdatetimeout_(){if(this.state!=="HAVE_METADATA")return;const e=this.media();let i=Kt(this.main.uri,e.uri);this.llhls&&(i=bk(i,e)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:i,withCredentials:this.withCredentials},(r,n)=>{if(this.request){if(r)return this.playlistRequestError(this.request,this.media(),"HAVE_METADATA");this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}})}playlistRequestError(e,i,r){const{uri:n,id:s}=i;this.request=null,r&&(this.state=r),this.error={playlist:this.main.playlists[s],status:e.status,message:`HLS playlist request error at URL: ${n}.`,responseText:e.responseText,code:e.status>=500?4:2},this.trigger("error")}parseManifest_({url:e,manifestString:i}){return vk({onwarn:({message:r})=>this.logger_(`m3u8-parser warn for ${e}: ${r}`),oninfo:({message:r})=>this.logger_(`m3u8-parser info for ${e}: ${r}`),manifestString:i,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls})}haveMetadata({playlistString:e,playlistObject:i,url:r,id:n}){this.request=null,this.state="HAVE_METADATA";const s=i||this.parseManifest_({url:r,manifestString:e});s.lastRequest=Date.now(),I2({playlist:s,uri:r,id:n});const a=_h(this.main,s);this.targetDuration=s.partTargetDuration||s.targetDuration,this.pendingMedia_=null,a?(this.main=a,this.media_=this.main.playlists[n]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(vh(this.media(),!!a)),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),k.clearTimeout(this.mediaUpdateTimeout),k.clearTimeout(this.finalRenditionTimeout),this.off()}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e,i){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof e=="string"){if(!this.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.main.playlists[e]}if(k.clearTimeout(this.finalRenditionTimeout),i){const a=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=k.setTimeout(this.media.bind(this,e,!1),a);return}const r=this.state,n=!this.media_||e.id!==this.media_.id,s=this.main.playlists[e.id];if(s&&s.endList||e.endList&&e.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,n&&(this.trigger("mediachanging"),r==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(vh(e,!0)),!!n){if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e,this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials},(a,o)=>{if(this.request){if(e.lastRequest=Date.now(),e.resolvedUri=al(e.resolvedUri,o),a)return this.playlistRequestError(this.request,e,r);this.haveMetadata({playlistString:o.responseText,url:e.uri,id:e.id}),r==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}})}}pause(){this.mediaUpdateTimeout&&(k.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MAIN_MANIFEST":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")}load(e){this.mediaUpdateTimeout&&(k.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);const i=this.media();if(e){const r=i?(i.partTargetDuration||i.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=k.setTimeout(()=>{this.mediaUpdateTimeout=null,this.load()},r);return}if(!this.started){this.start();return}i&&!i.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")}updateMediaUpdateTimeout_(e){this.mediaUpdateTimeout&&(k.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=k.setTimeout(()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(e)},e))}start(){if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=k.location.href),this.src.resolvedUri=this.src.uri,setTimeout(()=>{this.setupInitialPlaylist(this.src)},0);return}this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},(e,i)=>{if(!this.request)return;if(this.request=null,e)return this.error={status:i.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:i.responseText,code:2},this.state==="HAVE_NOTHING"&&(this.started=!1),this.trigger("error");this.src=al(this.src,i);const r=this.parseManifest_({manifestString:i.responseText,url:this.src});this.setupInitialPlaylist(r)})}srcUri(){return typeof this.src=="string"?this.src:this.src.uri}setupInitialPlaylist(e){if(this.state="HAVE_MAIN_MANIFEST",e.playlists){this.main=e,P2(this.main,this.srcUri()),e.playlists.forEach(r=>{r.segments=L2(r),r.segments.forEach(n=>{O2(n,r.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.main.playlists[0]);return}const i=this.srcUri()||k.location.href;this.main=Sk(e,i),this.haveMetadata({playlistObject:e,url:i,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}}const{xhr:Dk}=R,Th=function(t,e,i,r){const n=t.responseType==="arraybuffer"?t.response:t.responseText;!e&&n&&(t.responseTime=Date.now(),t.roundTripTime=t.responseTime-t.requestTime,t.bytesReceived=n.byteLength||n.length,t.bandwidth||(t.bandwidth=Math.floor(t.bytesReceived/t.roundTripTime*8*1e3))),i.headers&&(t.responseHeaders=i.headers),e&&e.code==="ETIMEDOUT"&&(t.timedout=!0),!e&&!t.aborted&&i.statusCode!==200&&i.statusCode!==206&&i.statusCode!==0&&(e=new Error("XHR Failed with a response of: "+(t&&(n||t.responseText)))),r(e,t)},R2=function(){const t=function e(i,r){i=ve({timeout:45e3},i);const n=e.beforeRequest||R.Vhs.xhr.beforeRequest;if(n&&typeof n=="function"){const l=n(i);l&&(i=l)}const a=(R.Vhs.xhr.original===!0?Dk:R.Vhs.xhr)(i,function(l,d){return Th(a,l,d,r)}),o=a.abort;return a.abort=function(){return a.aborted=!0,o.apply(a,arguments)},a.uri=i.uri,a.requestTime=Date.now(),a};return t.original=!0,t},Ak=function(t){let e;const i=t.offset;return typeof t.offset=="bigint"||typeof t.length=="bigint"?e=k.BigInt(t.offset)+k.BigInt(t.length)-k.BigInt(1):e=t.offset+t.length-1,"bytes="+i+"-"+e},xh=function(t){const e={};return t.byterange&&(e.Range=Ak(t.byterange)),e},kk=function(t,e){return t.start(e)+"-"+t.end(e)},Ik=function(t,e){const i=t.toString(16);return"00".substring(0,2-i.length)+i+(e%2?" ":"")},Pk=function(t){return t>=32&&t<126?String.fromCharCode(t):"."},M2=function(t){const e={};return Object.keys(t).forEach(i=>{const r=t[i];_v(r)?e[i]={bytes:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength}:e[i]=r}),e},ol=function(t){const e=t.byterange||{length:1/0,offset:0};return[e.length,e.offset,t.resolvedUri].join(",")},B2=function(t){return t.resolvedUri},F2=t=>{const e=Array.prototype.slice.call(t),i=16;let r="",n,s;for(let a=0;a<e.length/i;a++)n=e.slice(a*i,a*i+i).map(Ik).join(""),s=e.slice(a*i,a*i+i).map(Pk).join(""),r+=n+" "+s+`
`;return r},Ok=({bytes:t})=>F2(t),Lk=t=>{let e="",i;for(i=0;i<t.length;i++)e+=kk(t,i)+" ";return e};var Nk=Object.freeze({__proto__:null,createTransferableMessage:M2,initSegmentId:ol,segmentKeyId:B2,hexDump:F2,tagDump:Ok,textRanges:Lk});const U2=.25,Rk=(t,e)=>{if(!e.dateTimeObject)return null;const i=e.videoTimingInfo.transmuxerPrependedSeconds,n=e.videoTimingInfo.transmuxedPresentationStart+i,s=t-n;return new Date(e.dateTimeObject.getTime()+s*1e3)},Mk=t=>t.transmuxedPresentationEnd-t.transmuxedPresentationStart-t.transmuxerPrependedSeconds,Bk=(t,e)=>{let i;try{i=new Date(t)}catch{return null}if(!e||!e.segments||e.segments.length===0)return null;let r=e.segments[0];if(i<r.dateTimeObject)return null;for(let l=0;l<e.segments.length-1;l++){r=e.segments[l];const d=e.segments[l+1].dateTimeObject;if(i<d)break}const n=e.segments[e.segments.length-1],s=n.dateTimeObject,a=n.videoTimingInfo?Mk(n.videoTimingInfo):n.duration+n.duration*U2,o=new Date(s.getTime()+a*1e3);return i>o?null:(i>s&&(r=n),{segment:r,estimatedStart:r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationStart:_t.duration(e,e.mediaSequence+e.segments.indexOf(r)),type:r.videoTimingInfo?"accurate":"estimate"})},Fk=(t,e)=>{if(!e||!e.segments||e.segments.length===0)return null;let i=0,r;for(let s=0;s<e.segments.length&&(r=e.segments[s],i=r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationEnd:i+r.duration,!(t<=i));s++);const n=e.segments[e.segments.length-1];if(n.videoTimingInfo&&n.videoTimingInfo.transmuxedPresentationEnd<t)return null;if(t>i){if(t>i+n.duration*U2)return null;r=n}return{segment:r,estimatedStart:r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationStart:i-r.duration,type:r.videoTimingInfo?"accurate":"estimate"}},Uk=(t,e)=>{let i,r;try{i=new Date(t),r=new Date(e)}catch{}const n=i.getTime();return(r.getTime()-n)/1e3},jk=t=>{if(!t.segments||t.segments.length===0)return!1;for(let e=0;e<t.segments.length;e++)if(!t.segments[e].dateTimeObject)return!1;return!0},$k=({playlist:t,time:e=void 0,callback:i})=>{if(!i)throw new Error("getProgramTime: callback must be provided");if(!t||e===void 0)return i({message:"getProgramTime: playlist and time must be provided"});const r=Fk(e,t);if(!r)return i({message:"valid programTime was not found"});if(r.type==="estimate")return i({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:r.estimatedStart});const n={mediaSeconds:e},s=Rk(e,r.segment);return s&&(n.programDateTime=s.toISOString()),i(null,n)},j2=({programTime:t,playlist:e,retryCount:i=2,seekTo:r,pauseAfterSeek:n=!0,tech:s,callback:a})=>{if(!a)throw new Error("seekToProgramTime: callback must be provided");if(typeof t>"u"||!e||!r)return a({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!e.endList&&!s.hasStarted_)return a({message:"player must be playing a live stream to start buffering"});if(!jk(e))return a({message:"programDateTime tags must be provided in the manifest "+e.resolvedUri});const o=Bk(t,e);if(!o)return a({message:`${t} was not found in the stream`});const l=o.segment,d=Uk(l.dateTimeObject,t);if(o.type==="estimate"){if(i===0)return a({message:`${t} is not buffered yet. Try again`});r(o.estimatedStart+d),s.one("seeked",()=>{j2({programTime:t,playlist:e,retryCount:i-1,seekTo:r,pauseAfterSeek:n,tech:s,callback:a})});return}const m=l.start+d,y=()=>a(null,s.currentTime());s.one("seeked",y),n&&s.pause(),r(m)},dd=(t,e)=>{if(t.readyState===4)return e()},Vk=(t,e,i)=>{let r=[],n,s=!1;const a=function(m,y,v,b){return y.abort(),s=!0,i(m,y,v,b)},o=function(m,y){if(s)return;if(m)return a(m,y,"",r);const v=y.responseText.substring(r&&r.byteLength||0,y.responseText.length);if(r=XC(r,vv(v,!0)),n=n||na(r),r.length<10||n&&r.length<n+2)return dd(y,()=>a(m,y,"",r));const b=Hf(r);return b==="ts"&&r.length<188?dd(y,()=>a(m,y,"",r)):!b&&r.length<376?dd(y,()=>a(m,y,"",r)):a(null,y,b,r)},d=e({uri:t,beforeSend(m){m.overrideMimeType("text/plain; charset=x-user-defined"),m.addEventListener("progress",function({total:y,loaded:v}){return Th(m,null,{statusCode:m.status},o)})}},function(m,y){return Th(d,m,y,o)});return d},{EventTarget:Hk}=R,W0=function(t,e){if(!N2(t,e)||t.sidx&&e.sidx&&(t.sidx.offset!==e.sidx.offset||t.sidx.length!==e.sidx.length))return!1;if(!t.sidx&&e.sidx||t.sidx&&!e.sidx||t.segments&&!e.segments||!t.segments&&e.segments)return!1;if(!t.segments&&!e.segments)return!0;for(let i=0;i<t.segments.length;i++){const r=t.segments[i],n=e.segments[i];if(r.uri!==n.uri)return!1;if(!r.byterange&&!n.byterange)continue;const s=r.byterange,a=n.byterange;if(s&&!a||!s&&a||s.offset!==a.offset||s.length!==a.length)return!1}return!0},qk=(t,e,i,r)=>{const n=r.attributes.NAME||i;return`placeholder-uri-${t}-${e}-${n}`},zk=({mainXml:t,srcUrl:e,clientOffset:i,sidxMapping:r,previousManifest:n})=>{const s=gD(t,{manifestUri:e,clientOffset:i,sidxMapping:r,previousManifest:n});return P2(s,e,qk),s},Gk=(t,e)=>{ys(t,(i,r,n,s)=>{s in e.mediaGroups[r][n]||delete t.mediaGroups[r][n][s]})},Wk=(t,e,i)=>{let r=!0,n=ve(t,{duration:e.duration,minimumUpdatePeriod:e.minimumUpdatePeriod,timelineStarts:e.timelineStarts});for(let s=0;s<e.playlists.length;s++){const a=e.playlists[s];if(a.sidx){const l=Ll(a.sidx);i&&i[l]&&i[l].sidx&&jf(a,i[l].sidx,a.sidx.resolvedUri)}const o=_h(n,a,W0);o&&(n=o,r=!1)}return ys(e,(s,a,o,l)=>{if(s.playlists&&s.playlists.length){const d=s.playlists[0].id,m=_h(n,s.playlists[0],W0);m&&(n=m,l in n.mediaGroups[a][o]||(n.mediaGroups[a][o][l]=s),n.mediaGroups[a][o][l].playlists[0]=n.playlists[d],r=!1)}}),Gk(n,e),e.minimumUpdatePeriod!==t.minimumUpdatePeriod&&(r=!1),r?null:n},Xk=(t,e)=>(!t.map&&!e.map||!!(t.map&&e.map&&t.map.byterange.offset===e.map.byterange.offset&&t.map.byterange.length===e.map.byterange.length))&&t.uri===e.uri&&t.byterange.offset===e.byterange.offset&&t.byterange.length===e.byterange.length,X0=(t,e)=>{const i={};for(const r in t){const s=t[r].sidx;if(s){const a=Ll(s);if(!e[a])break;const o=e[a].sidxInfo;Xk(o,s)&&(i[a]=e[a])}}return i},Kk=(t,e)=>{let r=X0(t.playlists,e);return ys(t,(n,s,a,o)=>{if(n.playlists&&n.playlists.length){const l=n.playlists;r=ve(r,X0(l,e))}}),r};class Sh extends Hk{constructor(e,i,r={},n){super(),this.mainPlaylistLoader_=n||this,n||(this.isMain_=!0);const{withCredentials:s=!1}=r;if(this.vhs_=i,this.withCredentials=s,!e)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",()=>{this.refreshXml_()}),this.on("mediaupdatetimeout",()=>{this.refreshMedia_(this.media().id)}),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=Zt("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=e,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=e}requestErrored_(e,i,r){if(!this.request)return!0;if(this.request=null,e)return this.error=typeof e=="object"&&!(e instanceof Error)?e:{status:i.status,message:"DASH request error at URL: "+i.uri,response:i.response,code:2},r&&(this.state=r),this.trigger("error"),!0}addSidxSegments_(e,i,r){const n=e.sidx&&Ll(e.sidx);if(!e.sidx||!n||this.mainPlaylistLoader_.sidxMapping_[n]){this.mediaRequest_=k.setTimeout(()=>r(!1),0);return}const s=al(e.sidx.resolvedUri),a=(o,l)=>{if(this.requestErrored_(o,l,i))return;const d=this.mainPlaylistLoader_.sidxMapping_;let m;try{m=SD(Y(l.response).subarray(8))}catch(y){this.requestErrored_(y,l,i);return}return d[n]={sidxInfo:e.sidx,sidx:m},jf(e,m,e.sidx.resolvedUri),r(!0)};this.request=Vk(s,this.vhs_.xhr,(o,l,d,m)=>{if(o)return a(o,l);if(!d||d!=="mp4")return a({status:l.status,message:`Unsupported ${d||"unknown"} container type for sidx segment at URL: ${s}`,response:"",playlist:e,internal:!0,playlistExclusionDuration:1/0,code:2},l);const{offset:y,length:v}=e.sidx.byterange;if(m.length>=v+y)return a(o,{response:m.subarray(y,y+v),status:l.status,uri:l.uri});this.request=this.vhs_.xhr({uri:s,responseType:"arraybuffer",headers:xh({byterange:e.sidx.byterange})},a)})}dispose(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},k.clearTimeout(this.minimumUpdatePeriodTimeout_),k.clearTimeout(this.mediaRequest_),k.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);const i=this.state;if(typeof e=="string"){if(!this.mainPlaylistLoader_.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.mainPlaylistLoader_.main.playlists[e]}const r=!this.media_||e.id!==this.media_.id;if(r&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList){this.state="HAVE_METADATA",this.media_=e,r&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}r&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,i,n=>{this.haveMetadata({startingState:i,playlist:e})}))}haveMetadata({startingState:e,playlist:i}){this.state="HAVE_METADATA",this.loadedPlaylists_[i.id]=i,this.mediaRequest_=null,this.refreshMedia_(i.id),e==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),k.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(k.clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)}load(e){k.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;const i=this.media();if(e){const r=i?i.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=k.setTimeout(()=>this.load(),r);return}if(!this.started){this.start();return}i&&!i.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")}start(){if(this.started=!0,!this.isMain_){this.mediaRequest_=k.setTimeout(()=>this.haveMain_(),0);return}this.requestMain_((e,i)=>{this.haveMain_(),!this.hasPendingRequest()&&!this.media_&&this.media(this.mainPlaylistLoader_.main.playlists[0])})}requestMain_(e){this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},(i,r)=>{if(this.requestErrored_(i,r)){this.state==="HAVE_NOTHING"&&(this.started=!1);return}const n=r.responseText!==this.mainPlaylistLoader_.mainXml_;if(this.mainPlaylistLoader_.mainXml_=r.responseText,r.responseHeaders&&r.responseHeaders.date?this.mainLoaded_=Date.parse(r.responseHeaders.date):this.mainLoaded_=Date.now(),this.mainPlaylistLoader_.srcUrl=al(this.mainPlaylistLoader_.srcUrl,r),n){this.handleMain_(),this.syncClientServerClock_(()=>e(r,n));return}return e(r,n)})}syncClientServerClock_(e){const i=yD(this.mainPlaylistLoader_.mainXml_);if(i===null)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e();if(i.method==="DIRECT")return this.mainPlaylistLoader_.clientOffset_=i.value-Date.now(),e();this.request=this.vhs_.xhr({uri:Kt(this.mainPlaylistLoader_.srcUrl,i.value),method:i.method,withCredentials:this.withCredentials},(r,n)=>{if(!this.request)return;if(r)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e();let s;i.method==="HEAD"?!n.responseHeaders||!n.responseHeaders.date?s=this.mainLoaded_:s=Date.parse(n.responseHeaders.date):s=Date.parse(n.responseText),this.mainPlaylistLoader_.clientOffset_=s-Date.now(),e()})}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){this.mediaRequest_=null;const e=this.mainPlaylistLoader_.main;let i=zk({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:e});e&&(i=Wk(e,i,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=i||e;const r=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];return r&&r!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=r),(!e||i&&i.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),!!i}updateMinimumUpdatePeriodTimeout_(){const e=this.mainPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(k.clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);let i=e.main&&e.main.minimumUpdatePeriod;if(i===0&&(e.media()?i=e.media().targetDuration*1e3:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),typeof i!="number"||i<=0){i<0&&this.logger_(`found invalid minimumUpdatePeriod of ${i}, not setting a timeout`);return}this.createMUPTimeout_(i)}createMUPTimeout_(e){const i=this.mainPlaylistLoader_;i.minimumUpdatePeriodTimeout_=k.setTimeout(()=>{i.minimumUpdatePeriodTimeout_=null,i.trigger("minimumUpdatePeriod"),i.createMUPTimeout_(e)},e)}refreshXml_(){this.requestMain_((e,i)=>{i&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=Kk(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,r=>{this.refreshMedia_(this.media().id)}))})}refreshMedia_(e){if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();const i=this.mainPlaylistLoader_.main.playlists,r=!this.media_||this.media_!==i[e];if(r?this.media_=i[e]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){const n=()=>{this.media().endList||(this.mediaUpdateTimeout=k.setTimeout(()=>{this.trigger("mediaupdatetimeout"),n()},vh(this.media(),!!r)))};n()}this.trigger("loadedplaylist")}}var Ve={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};const Yk=t=>{const e=new Uint8Array(new ArrayBuffer(t.length));for(let i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e.buffer},$2=function(t){return t.on=t.addEventListener,t.off=t.removeEventListener,t},Qk=function(t){try{return URL.createObjectURL(new Blob([t],{type:"application/javascript"}))}catch{const i=new BlobBuilder;return i.append(t),URL.createObjectURL(i.getBlob())}},V2=function(t){return function(){const e=Qk(t),i=$2(new Worker(e));i.objURL=e;const r=i.terminate;return i.on=i.addEventListener,i.off=i.removeEventListener,i.terminate=function(){return URL.revokeObjectURL(e),r.call(this)},i}},H2=function(t){return`var browserWorkerPolyFill = ${$2.toString()};
browserWorkerPolyFill(self);
`+t},q2=function(t){return t.toString().replace(/^function.+?{/,"").slice(0,-1)},Jk=H2(q2(function(){var t=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=function(){this.init=function(){var u={};this.on=function(c,f){u[c]||(u[c]=[]),u[c]=u[c].concat(f)},this.off=function(c,f){var h;return u[c]?(h=u[c].indexOf(f),u[c]=u[c].slice(),u[c].splice(h,1),h>-1):!1},this.trigger=function(c){var f,h,p,g;if(f=u[c],!!f)if(arguments.length===2)for(p=f.length,h=0;h<p;++h)f[h].call(this,arguments[1]);else{for(g=[],h=arguments.length,h=1;h<arguments.length;++h)g.push(arguments[h]);for(p=f.length,h=0;h<p;++h)f[h].apply(this,g)}},this.dispose=function(){u={}}}};e.prototype.pipe=function(u){return this.on("data",function(c){u.push(c)}),this.on("done",function(c){u.flush(c)}),this.on("partialdone",function(c){u.partialFlush(c)}),this.on("endedtimeline",function(c){u.endTimeline(c)}),this.on("reset",function(c){u.reset(c)}),u},e.prototype.push=function(u){this.trigger("data",u)},e.prototype.flush=function(u){this.trigger("done",u)},e.prototype.partialFlush=function(u){this.trigger("partialdone",u)},e.prototype.endTimeline=function(u){this.trigger("endedtimeline",u)},e.prototype.reset=function(u){this.trigger("reset",u)};var i=e,r=Math.pow(2,32),n=function(u){var c=new DataView(u.buffer,u.byteOffset,u.byteLength),f;return c.getBigUint64?(f=c.getBigUint64(0),f<Number.MAX_SAFE_INTEGER?Number(f):f):c.getUint32(0)*r+c.getUint32(4)},s={getUint64:n,MAX_UINT32:r},a=s.MAX_UINT32,o,l,d,m,y,v,b,S,A,T,_,x,I,D,O,N,U,H,j,ee,oe,se,z,ue,Oe,ae,Te,bt,qt,Ei,q,K,re,be,Be,ei;(function(){var u;if(z={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(u in z)z.hasOwnProperty(u)&&(z[u]=[u.charCodeAt(0),u.charCodeAt(1),u.charCodeAt(2),u.charCodeAt(3)]);ue=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),ae=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),Oe=new Uint8Array([0,0,0,1]),Te=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),bt=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),qt={video:Te,audio:bt},K=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),q=new Uint8Array([0,0,0,0,0,0,0,0]),re=new Uint8Array([0,0,0,0,0,0,0,0]),be=re,Be=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),ei=re,Ei=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),o=function(u){var c=[],f=0,h,p,g;for(h=1;h<arguments.length;h++)c.push(arguments[h]);for(h=c.length;h--;)f+=c[h].byteLength;for(p=new Uint8Array(f+8),g=new DataView(p.buffer,p.byteOffset,p.byteLength),g.setUint32(0,p.byteLength),p.set(u,4),h=0,f=8;h<c.length;h++)p.set(c[h],f),f+=c[h].byteLength;return p},l=function(){return o(z.dinf,o(z.dref,K))},d=function(u){return o(z.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,u.audioobjecttype<<3|u.samplingfrequencyindex>>>1,u.samplingfrequencyindex<<7|u.channelcount<<3,6,1,2]))},m=function(){return o(z.ftyp,ue,Oe,ue,ae)},N=function(u){return o(z.hdlr,qt[u])},y=function(u){return o(z.mdat,u)},O=function(u){var c=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,u.duration>>>24&255,u.duration>>>16&255,u.duration>>>8&255,u.duration&255,85,196,0,0]);return u.samplerate&&(c[12]=u.samplerate>>>24&255,c[13]=u.samplerate>>>16&255,c[14]=u.samplerate>>>8&255,c[15]=u.samplerate&255),o(z.mdhd,c)},D=function(u){return o(z.mdia,O(u),N(u.type),b(u))},v=function(u){return o(z.mfhd,new Uint8Array([0,0,0,0,(u&4278190080)>>24,(u&16711680)>>16,(u&65280)>>8,u&255]))},b=function(u){return o(z.minf,u.type==="video"?o(z.vmhd,Ei):o(z.smhd,q),l(),H(u))},S=function(u,c){for(var f=[],h=c.length;h--;)f[h]=ee(c[h]);return o.apply(null,[z.moof,v(u)].concat(f))},A=function(u){for(var c=u.length,f=[];c--;)f[c]=x(u[c]);return o.apply(null,[z.moov,_(4294967295)].concat(f).concat(T(u)))},T=function(u){for(var c=u.length,f=[];c--;)f[c]=oe(u[c]);return o.apply(null,[z.mvex].concat(f))},_=function(u){var c=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(u&4278190080)>>24,(u&16711680)>>16,(u&65280)>>8,u&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return o(z.mvhd,c)},U=function(u){var c=u.samples||[],f=new Uint8Array(4+c.length),h,p;for(p=0;p<c.length;p++)h=c[p].flags,f[p+4]=h.dependsOn<<4|h.isDependedOn<<2|h.hasRedundancy;return o(z.sdtp,f)},H=function(u){return o(z.stbl,j(u),o(z.stts,ei),o(z.stsc,be),o(z.stsz,Be),o(z.stco,re))},function(){var u,c;j=function(f){return o(z.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),f.type==="video"?u(f):c(f))},u=function(f){var h=f.sps||[],p=f.pps||[],g=[],E=[],C,w;for(C=0;C<h.length;C++)g.push((h[C].byteLength&65280)>>>8),g.push(h[C].byteLength&255),g=g.concat(Array.prototype.slice.call(h[C]));for(C=0;C<p.length;C++)E.push((p[C].byteLength&65280)>>>8),E.push(p[C].byteLength&255),E=E.concat(Array.prototype.slice.call(p[C]));if(w=[z.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(f.width&65280)>>8,f.width&255,(f.height&65280)>>8,f.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o(z.avcC,new Uint8Array([1,f.profileIdc,f.profileCompatibility,f.levelIdc,255].concat([h.length],g,[p.length],E))),o(z.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],f.sarRatio){var P=f.sarRatio[0],L=f.sarRatio[1];w.push(o(z.pasp,new Uint8Array([(P&4278190080)>>24,(P&16711680)>>16,(P&65280)>>8,P&255,(L&4278190080)>>24,(L&16711680)>>16,(L&65280)>>8,L&255])))}return o.apply(null,w)},c=function(f){return o(z.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(f.channelcount&65280)>>8,f.channelcount&255,(f.samplesize&65280)>>8,f.samplesize&255,0,0,0,0,(f.samplerate&65280)>>8,f.samplerate&255,0,0]),d(f))}}(),I=function(u){var c=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(u.id&4278190080)>>24,(u.id&16711680)>>16,(u.id&65280)>>8,u.id&255,0,0,0,0,(u.duration&4278190080)>>24,(u.duration&16711680)>>16,(u.duration&65280)>>8,u.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(u.width&65280)>>8,u.width&255,0,0,(u.height&65280)>>8,u.height&255,0,0]);return o(z.tkhd,c)},ee=function(u){var c,f,h,p,g,E,C;return c=o(z.tfhd,new Uint8Array([0,0,0,58,(u.id&4278190080)>>24,(u.id&16711680)>>16,(u.id&65280)>>8,u.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),E=Math.floor(u.baseMediaDecodeTime/a),C=Math.floor(u.baseMediaDecodeTime%a),f=o(z.tfdt,new Uint8Array([1,0,0,0,E>>>24&255,E>>>16&255,E>>>8&255,E&255,C>>>24&255,C>>>16&255,C>>>8&255,C&255])),g=32+20+8+16+8+8,u.type==="audio"?(h=se(u,g),o(z.traf,c,f,h)):(p=U(u),h=se(u,p.length+g),o(z.traf,c,f,h,p))},x=function(u){return u.duration=u.duration||4294967295,o(z.trak,I(u),D(u))},oe=function(u){var c=new Uint8Array([0,0,0,0,(u.id&4278190080)>>24,(u.id&16711680)>>16,(u.id&65280)>>8,u.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return u.type!=="video"&&(c[c.length-1]=0),o(z.trex,c)},function(){var u,c,f;f=function(h,p){var g=0,E=0,C=0,w=0;return h.length&&(h[0].duration!==void 0&&(g=1),h[0].size!==void 0&&(E=2),h[0].flags!==void 0&&(C=4),h[0].compositionTimeOffset!==void 0&&(w=8)),[0,0,g|E|C|w,1,(h.length&4278190080)>>>24,(h.length&16711680)>>>16,(h.length&65280)>>>8,h.length&255,(p&4278190080)>>>24,(p&16711680)>>>16,(p&65280)>>>8,p&255]},c=function(h,p){var g,E,C,w,P,L;for(w=h.samples||[],p+=8+12+16*w.length,C=f(w,p),E=new Uint8Array(C.length+w.length*16),E.set(C),g=C.length,L=0;L<w.length;L++)P=w[L],E[g++]=(P.duration&4278190080)>>>24,E[g++]=(P.duration&16711680)>>>16,E[g++]=(P.duration&65280)>>>8,E[g++]=P.duration&255,E[g++]=(P.size&4278190080)>>>24,E[g++]=(P.size&16711680)>>>16,E[g++]=(P.size&65280)>>>8,E[g++]=P.size&255,E[g++]=P.flags.isLeading<<2|P.flags.dependsOn,E[g++]=P.flags.isDependedOn<<6|P.flags.hasRedundancy<<4|P.flags.paddingValue<<1|P.flags.isNonSyncSample,E[g++]=P.flags.degradationPriority&61440,E[g++]=P.flags.degradationPriority&15,E[g++]=(P.compositionTimeOffset&4278190080)>>>24,E[g++]=(P.compositionTimeOffset&16711680)>>>16,E[g++]=(P.compositionTimeOffset&65280)>>>8,E[g++]=P.compositionTimeOffset&255;return o(z.trun,E)},u=function(h,p){var g,E,C,w,P,L;for(w=h.samples||[],p+=8+12+8*w.length,C=f(w,p),g=new Uint8Array(C.length+w.length*8),g.set(C),E=C.length,L=0;L<w.length;L++)P=w[L],g[E++]=(P.duration&4278190080)>>>24,g[E++]=(P.duration&16711680)>>>16,g[E++]=(P.duration&65280)>>>8,g[E++]=P.duration&255,g[E++]=(P.size&4278190080)>>>24,g[E++]=(P.size&16711680)>>>16,g[E++]=(P.size&65280)>>>8,g[E++]=P.size&255;return o(z.trun,g)},se=function(h,p){return h.type==="audio"?u(h,p):c(h,p)}}();var bi={ftyp:m,mdat:y,moof:S,moov:A,initSegment:function(u){var c=m(),f=A(u),h;return h=new Uint8Array(c.byteLength+f.byteLength),h.set(c),h.set(f,c.byteLength),h}},Sr=function(u){var c,f,h=[],p=[];for(p.byteLength=0,p.nalCount=0,p.duration=0,h.byteLength=0,c=0;c<u.length;c++)f=u[c],f.nalUnitType==="access_unit_delimiter_rbsp"?(h.length&&(h.duration=f.dts-h.dts,p.byteLength+=h.byteLength,p.nalCount+=h.length,p.duration+=h.duration,p.push(h)),h=[f],h.byteLength=f.data.byteLength,h.pts=f.pts,h.dts=f.dts):(f.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(h.keyFrame=!0),h.duration=f.dts-h.dts,h.byteLength+=f.data.byteLength,h.push(f));return p.length&&(!h.duration||h.duration<=0)&&(h.duration=p[p.length-1].duration),p.byteLength+=h.byteLength,p.nalCount+=h.length,p.duration+=h.duration,p.push(h),p},Gi=function(u){var c,f,h=[],p=[];for(h.byteLength=0,h.nalCount=0,h.duration=0,h.pts=u[0].pts,h.dts=u[0].dts,p.byteLength=0,p.nalCount=0,p.duration=0,p.pts=u[0].pts,p.dts=u[0].dts,c=0;c<u.length;c++)f=u[c],f.keyFrame?(h.length&&(p.push(h),p.byteLength+=h.byteLength,p.nalCount+=h.nalCount,p.duration+=h.duration),h=[f],h.nalCount=f.length,h.byteLength=f.byteLength,h.pts=f.pts,h.dts=f.dts,h.duration=f.duration):(h.duration+=f.duration,h.nalCount+=f.length,h.byteLength+=f.byteLength,h.push(f));return p.length&&h.duration<=0&&(h.duration=p[p.length-1].duration),p.byteLength+=h.byteLength,p.nalCount+=h.nalCount,p.duration+=h.duration,p.push(h),p},dx=function(u){var c;return!u[0][0].keyFrame&&u.length>1&&(c=u.shift(),u.byteLength-=c.byteLength,u.nalCount-=c.nalCount,u[0][0].dts=c.dts,u[0][0].pts=c.pts,u[0][0].duration+=c.duration),u},hx=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},Dp=function(u,c){var f=hx();return f.dataOffset=c,f.compositionTimeOffset=u.pts-u.dts,f.duration=u.duration,f.size=4*u.length,f.size+=u.byteLength,u.keyFrame&&(f.flags.dependsOn=2,f.flags.isNonSyncSample=0),f},fx=function(u,c){var f,h,p,g,E,C=c||0,w=[];for(f=0;f<u.length;f++)for(g=u[f],h=0;h<g.length;h++)E=g[h],p=Dp(E,C),C+=p.size,w.push(p);return w},px=function(u){var c,f,h,p,g,E,C=0,w=u.byteLength,P=u.nalCount,L=w+4*P,M=new Uint8Array(L),G=new DataView(M.buffer);for(c=0;c<u.length;c++)for(p=u[c],f=0;f<p.length;f++)for(g=p[f],h=0;h<g.length;h++)E=g[h],G.setUint32(C,E.data.byteLength),C+=4,M.set(E.data,C),C+=E.data.byteLength;return M},mx=function(u,c){var f,h=c||0,p=[];return f=Dp(u,h),p.push(f),p},gx=function(u){var c,f,h=0,p=u.byteLength,g=u.length,E=p+4*g,C=new Uint8Array(E),w=new DataView(C.buffer);for(c=0;c<u.length;c++)f=u[c],w.setUint32(h,f.data.byteLength),h+=4,C.set(f.data,h),h+=f.data.byteLength;return C},yx={groupNalsIntoFrames:Sr,groupFramesIntoGops:Gi,extendFirstKeyFrame:dx,generateSampleTable:fx,concatenateNalData:px,generateSampleTableForFrame:mx,concatenateNalDataForFrame:gx},Wi=[33,16,5,32,164,27],Zl=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],de=function(u){for(var c=[];u--;)c.push(0);return c},_x=function(u){return Object.keys(u).reduce(function(c,f){return c[f]=new Uint8Array(u[f].reduce(function(h,p){return h.concat(p)},[])),c},{})},ec,vx=function(){if(!ec){var u={96e3:[Wi,[227,64],de(154),[56]],88200:[Wi,[231],de(170),[56]],64e3:[Wi,[248,192],de(240),[56]],48e3:[Wi,[255,192],de(268),[55,148,128],de(54),[112]],44100:[Wi,[255,192],de(268),[55,163,128],de(84),[112]],32e3:[Wi,[255,192],de(268),[55,234],de(226),[112]],24e3:[Wi,[255,192],de(268),[55,255,128],de(268),[111,112],de(126),[224]],16e3:[Wi,[255,192],de(268),[55,255,128],de(268),[111,255],de(269),[223,108],de(195),[1,192]],12e3:[Zl,de(268),[3,127,248],de(268),[6,255,240],de(268),[13,255,224],de(268),[27,253,128],de(259),[56]],11025:[Zl,de(268),[3,127,248],de(268),[6,255,240],de(268),[13,255,224],de(268),[27,255,192],de(268),[55,175,128],de(108),[112]],8e3:[Zl,de(268),[3,121,16],de(47),[7]]};ec=_x(u)}return ec},tc=9e4,ic,rc,lo,nc,Ap,kp,Ip;ic=function(u){return u*tc},rc=function(u,c){return u*c},lo=function(u){return u/tc},nc=function(u,c){return u/c},Ap=function(u,c){return ic(nc(u,c))},kp=function(u,c){return rc(lo(u),c)},Ip=function(u,c,f){return lo(f?u:u-c)};var xe={ONE_SECOND_IN_TS:tc,secondsToVideoTs:ic,secondsToAudioTs:rc,videoTsToSeconds:lo,audioTsToSeconds:nc,audioTsToVideoTs:Ap,videoTsToAudioTs:kp,metadataTsToSeconds:Ip},Tx=vx,co=xe,xx=function(u){var c,f,h=0;for(c=0;c<u.length;c++)f=u[c],h+=f.data.byteLength;return h},Sx=function(u,c,f,h){var p,g=0,E=0,C=0,w=0,P,L,M;if(c.length&&(p=co.audioTsToVideoTs(u.baseMediaDecodeTime,u.samplerate),g=Math.ceil(co.ONE_SECOND_IN_TS/(u.samplerate/1024)),f&&h&&(E=p-Math.max(f,h),C=Math.floor(E/g),w=C*g),!(C<1||w>co.ONE_SECOND_IN_TS/2))){for(P=Tx()[u.samplerate],P||(P=c[0].data),L=0;L<C;L++)M=c[0],c.splice(0,0,{data:P,dts:M.dts-g,pts:M.pts-g});return u.baseMediaDecodeTime-=Math.floor(co.videoTsToAudioTs(w,u.samplerate)),w}},Ex=function(u,c,f){return c.minSegmentDts>=f?u:(c.minSegmentDts=1/0,u.filter(function(h){return h.dts>=f?(c.minSegmentDts=Math.min(c.minSegmentDts,h.dts),c.minSegmentPts=c.minSegmentDts,!0):!1}))},bx=function(u){var c,f,h=[];for(c=0;c<u.length;c++)f=u[c],h.push({size:f.data.byteLength,duration:1024});return h},Cx=function(u){var c,f,h=0,p=new Uint8Array(xx(u));for(c=0;c<u.length;c++)f=u[c],p.set(f.data,h),h+=f.data.byteLength;return p},wx={prefixWithSilence:Sx,trimAdtsFramesByEarliestDts:Ex,generateSampleTable:bx,concatenateFrameData:Cx},Dx=xe.ONE_SECOND_IN_TS,Ax=function(u,c){typeof c.pts=="number"&&(u.timelineStartInfo.pts===void 0&&(u.timelineStartInfo.pts=c.pts),u.minSegmentPts===void 0?u.minSegmentPts=c.pts:u.minSegmentPts=Math.min(u.minSegmentPts,c.pts),u.maxSegmentPts===void 0?u.maxSegmentPts=c.pts:u.maxSegmentPts=Math.max(u.maxSegmentPts,c.pts)),typeof c.dts=="number"&&(u.timelineStartInfo.dts===void 0&&(u.timelineStartInfo.dts=c.dts),u.minSegmentDts===void 0?u.minSegmentDts=c.dts:u.minSegmentDts=Math.min(u.minSegmentDts,c.dts),u.maxSegmentDts===void 0?u.maxSegmentDts=c.dts:u.maxSegmentDts=Math.max(u.maxSegmentDts,c.dts))},kx=function(u){delete u.minSegmentDts,delete u.maxSegmentDts,delete u.minSegmentPts,delete u.maxSegmentPts},Ix=function(u,c){var f,h,p=u.minSegmentDts;return c||(p-=u.timelineStartInfo.dts),f=u.timelineStartInfo.baseMediaDecodeTime,f+=p,f=Math.max(0,f),u.type==="audio"&&(h=u.samplerate/Dx,f*=h,f=Math.floor(f)),f},Px={clearDtsInfo:kx,calculateTrackBaseMediaDecodeTime:Ix,collectDtsInfo:Ax},Pp=4,Ox=128,Lx=function(u){for(var c=0,f={payloadType:-1,payloadSize:0},h=0,p=0;c<u.byteLength&&u[c]!==Ox;){for(;u[c]===255;)h+=255,c++;for(h+=u[c++];u[c]===255;)p+=255,c++;if(p+=u[c++],!f.payload&&h===Pp){var g=String.fromCharCode(u[c+3],u[c+4],u[c+5],u[c+6]);if(g==="GA94"){f.payloadType=h,f.payloadSize=p,f.payload=u.subarray(c,c+p);break}else f.payload=void 0}c+=p,h=0,p=0}return f},Nx=function(u){return u.payload[0]!==181||(u.payload[1]<<8|u.payload[2])!==49||String.fromCharCode(u.payload[3],u.payload[4],u.payload[5],u.payload[6])!=="GA94"||u.payload[7]!==3?null:u.payload.subarray(8,u.payload.length-1)},Rx=function(u,c){var f=[],h,p,g,E;if(!(c[0]&64))return f;for(p=c[0]&31,h=0;h<p;h++)g=h*3,E={type:c[g+2]&3,pts:u},c[g+2]&4&&(E.ccData=c[g+3]<<8|c[g+4],f.push(E));return f},Mx=function(u){for(var c=u.byteLength,f=[],h=1,p,g;h<c-2;)u[h]===0&&u[h+1]===0&&u[h+2]===3?(f.push(h+2),h+=2):h++;if(f.length===0)return u;p=c-f.length,g=new Uint8Array(p);var E=0;for(h=0;h<p;E++,h++)E===f[0]&&(E++,f.shift()),g[h]=u[E];return g},Op={parseSei:Lx,parseUserData:Nx,parseCaptionPackets:Rx,discardEmulationPreventionBytes:Mx,USER_DATA_REGISTERED_ITU_T_T35:Pp},sc=i,ho=Op,ft=function(u){u=u||{},ft.prototype.init.call(this),this.parse708captions_=typeof u.parse708captions=="boolean"?u.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new Ce(0,0),new Ce(0,1),new Ce(1,0),new Ce(1,1)],this.parse708captions_&&(this.cc708Stream_=new pe({captionServices:u.captionServices})),this.reset(),this.ccStreams_.forEach(function(c){c.on("data",this.trigger.bind(this,"data")),c.on("partialdone",this.trigger.bind(this,"partialdone")),c.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};ft.prototype=new sc,ft.prototype.push=function(u){var c,f,h;if(u.nalUnitType==="sei_rbsp"&&(c=ho.parseSei(u.escapedRBSP),!!c.payload&&c.payloadType===ho.USER_DATA_REGISTERED_ITU_T_T35&&(f=ho.parseUserData(c),!!f))){if(u.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(u.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}h=ho.parseCaptionPackets(u.pts,f),this.captionPackets_=this.captionPackets_.concat(h),this.latestDts_!==u.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=u.dts}},ft.prototype.flushCCStreams=function(u){this.ccStreams_.forEach(function(c){return u==="flush"?c.flush():c.partialFlush()},this)},ft.prototype.flushStream=function(u){if(!this.captionPackets_.length){this.flushCCStreams(u);return}this.captionPackets_.forEach(function(c,f){c.presortIndex=f}),this.captionPackets_.sort(function(c,f){return c.pts===f.pts?c.presortIndex-f.presortIndex:c.pts-f.pts}),this.captionPackets_.forEach(function(c){c.type<2?this.dispatchCea608Packet(c):this.dispatchCea708Packet(c)},this),this.captionPackets_.length=0,this.flushCCStreams(u)},ft.prototype.flush=function(){return this.flushStream("flush")},ft.prototype.partialFlush=function(){return this.flushStream("partialFlush")},ft.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(u){u.reset()})},ft.prototype.dispatchCea608Packet=function(u){this.setsTextOrXDSActive(u)?this.activeCea608Channel_[u.type]=null:this.setsChannel1Active(u)?this.activeCea608Channel_[u.type]=0:this.setsChannel2Active(u)&&(this.activeCea608Channel_[u.type]=1),this.activeCea608Channel_[u.type]!==null&&this.ccStreams_[(u.type<<1)+this.activeCea608Channel_[u.type]].push(u)},ft.prototype.setsChannel1Active=function(u){return(u.ccData&30720)===4096},ft.prototype.setsChannel2Active=function(u){return(u.ccData&30720)===6144},ft.prototype.setsTextOrXDSActive=function(u){return(u.ccData&28928)===256||(u.ccData&30974)===4138||(u.ccData&30974)===6186},ft.prototype.dispatchCea708Packet=function(u){this.parse708captions_&&this.cc708Stream_.push(u)};var Bx={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},Fx=function(u){var c=Bx[u]||u;return u&4096&&u===c?"":String.fromCharCode(c)},fo=function(u){return 32<=u&&u<=127||160<=u&&u<=255},Ci=function(u){this.windowNum=u,this.reset()};Ci.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},Ci.prototype.getText=function(){return this.rows.join(`
`)},Ci.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},Ci.prototype.newLine=function(u){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(u),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},Ci.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},Ci.prototype.addText=function(u){this.rows[this.rowIdx]+=u},Ci.prototype.backspace=function(){if(!this.isEmpty()){var u=this.rows[this.rowIdx];this.rows[this.rowIdx]=u.substr(0,u.length-1)}};var po=function(u,c,f){this.serviceNum=u,this.text="",this.currentWindow=new Ci(-1),this.windows=[],this.stream=f,typeof c=="string"&&this.createTextDecoder(c)};po.prototype.init=function(u,c){this.startPts=u;for(var f=0;f<8;f++)this.windows[f]=new Ci(f),typeof c=="function"&&(this.windows[f].beforeRowOverflow=c)},po.prototype.setCurrentWindow=function(u){this.currentWindow=this.windows[u]},po.prototype.createTextDecoder=function(u){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(u)}catch(c){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+u+" encoding. "+c})}};var pe=function(u){u=u||{},pe.prototype.init.call(this);var c=this,f=u.captionServices||{},h={},p;Object.keys(f).forEach(g=>{p=f[g],/^SERVICE/.test(g)&&(h[g]=p.encoding)}),this.serviceEncodings=h,this.current708Packet=null,this.services={},this.push=function(g){g.type===3?(c.new708Packet(),c.add708Bytes(g)):(c.current708Packet===null&&c.new708Packet(),c.add708Bytes(g))}};pe.prototype=new sc,pe.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},pe.prototype.add708Bytes=function(u){var c=u.ccData,f=c>>>8,h=c&255;this.current708Packet.ptsVals.push(u.pts),this.current708Packet.data.push(f),this.current708Packet.data.push(h)},pe.prototype.push708Packet=function(){var u=this.current708Packet,c=u.data,f=null,h=null,p=0,g=c[p++];for(u.seq=g>>6,u.sizeCode=g&63;p<c.length;p++)g=c[p++],f=g>>5,h=g&31,f===7&&h>0&&(g=c[p++],f=g),this.pushServiceBlock(f,p,h),h>0&&(p+=h-1)},pe.prototype.pushServiceBlock=function(u,c,f){var h,p=c,g=this.current708Packet.data,E=this.services[u];for(E||(E=this.initService(u,p));p<c+f&&p<g.length;p++)h=g[p],fo(h)?p=this.handleText(p,E):h===24?p=this.multiByteCharacter(p,E):h===16?p=this.extendedCommands(p,E):128<=h&&h<=135?p=this.setCurrentWindow(p,E):152<=h&&h<=159?p=this.defineWindow(p,E):h===136?p=this.clearWindows(p,E):h===140?p=this.deleteWindows(p,E):h===137?p=this.displayWindows(p,E):h===138?p=this.hideWindows(p,E):h===139?p=this.toggleWindows(p,E):h===151?p=this.setWindowAttributes(p,E):h===144?p=this.setPenAttributes(p,E):h===145?p=this.setPenColor(p,E):h===146?p=this.setPenLocation(p,E):h===143?E=this.reset(p,E):h===8?E.currentWindow.backspace():h===12?E.currentWindow.clearText():h===13?E.currentWindow.pendingNewLine=!0:h===14?E.currentWindow.clearText():h===141&&p++},pe.prototype.extendedCommands=function(u,c){var f=this.current708Packet.data,h=f[++u];return fo(h)&&(u=this.handleText(u,c,{isExtended:!0})),u},pe.prototype.getPts=function(u){return this.current708Packet.ptsVals[Math.floor(u/2)]},pe.prototype.initService=function(u,c){var h="SERVICE"+u,f=this,h,p;return h in this.serviceEncodings&&(p=this.serviceEncodings[h]),this.services[u]=new po(u,p,f),this.services[u].init(this.getPts(c),function(g){f.flushDisplayed(g,f.services[u])}),this.services[u]},pe.prototype.handleText=function(u,c,f){var h=f&&f.isExtended,p=f&&f.isMultiByte,g=this.current708Packet.data,E=h?4096:0,C=g[u],w=g[u+1],P=c.currentWindow,L,M;return c.textDecoder_&&!h?(p?(M=[C,w],u++):M=[C],L=c.textDecoder_.decode(new Uint8Array(M))):L=Fx(E|C),P.pendingNewLine&&!P.isEmpty()&&P.newLine(this.getPts(u)),P.pendingNewLine=!1,P.addText(L),u},pe.prototype.multiByteCharacter=function(u,c){var f=this.current708Packet.data,h=f[u+1],p=f[u+2];return fo(h)&&fo(p)&&(u=this.handleText(++u,c,{isMultiByte:!0})),u},pe.prototype.setCurrentWindow=function(u,c){var f=this.current708Packet.data,h=f[u],p=h&7;return c.setCurrentWindow(p),u},pe.prototype.defineWindow=function(u,c){var f=this.current708Packet.data,h=f[u],p=h&7;c.setCurrentWindow(p);var g=c.currentWindow;return h=f[++u],g.visible=(h&32)>>5,g.rowLock=(h&16)>>4,g.columnLock=(h&8)>>3,g.priority=h&7,h=f[++u],g.relativePositioning=(h&128)>>7,g.anchorVertical=h&127,h=f[++u],g.anchorHorizontal=h,h=f[++u],g.anchorPoint=(h&240)>>4,g.rowCount=h&15,h=f[++u],g.columnCount=h&63,h=f[++u],g.windowStyle=(h&56)>>3,g.penStyle=h&7,g.virtualRowCount=g.rowCount+1,u},pe.prototype.setWindowAttributes=function(u,c){var f=this.current708Packet.data,h=f[u],p=c.currentWindow.winAttr;return h=f[++u],p.fillOpacity=(h&192)>>6,p.fillRed=(h&48)>>4,p.fillGreen=(h&12)>>2,p.fillBlue=h&3,h=f[++u],p.borderType=(h&192)>>6,p.borderRed=(h&48)>>4,p.borderGreen=(h&12)>>2,p.borderBlue=h&3,h=f[++u],p.borderType+=(h&128)>>5,p.wordWrap=(h&64)>>6,p.printDirection=(h&48)>>4,p.scrollDirection=(h&12)>>2,p.justify=h&3,h=f[++u],p.effectSpeed=(h&240)>>4,p.effectDirection=(h&12)>>2,p.displayEffect=h&3,u},pe.prototype.flushDisplayed=function(u,c){for(var f=[],h=0;h<8;h++)c.windows[h].visible&&!c.windows[h].isEmpty()&&f.push(c.windows[h].getText());c.endPts=u,c.text=f.join(`

`),this.pushCaption(c),c.startPts=u},pe.prototype.pushCaption=function(u){u.text!==""&&(this.trigger("data",{startPts:u.startPts,endPts:u.endPts,text:u.text,stream:"cc708_"+u.serviceNum}),u.text="",u.startPts=u.endPts)},pe.prototype.displayWindows=function(u,c){var f=this.current708Packet.data,h=f[++u],p=this.getPts(u);this.flushDisplayed(p,c);for(var g=0;g<8;g++)h&1<<g&&(c.windows[g].visible=1);return u},pe.prototype.hideWindows=function(u,c){var f=this.current708Packet.data,h=f[++u],p=this.getPts(u);this.flushDisplayed(p,c);for(var g=0;g<8;g++)h&1<<g&&(c.windows[g].visible=0);return u},pe.prototype.toggleWindows=function(u,c){var f=this.current708Packet.data,h=f[++u],p=this.getPts(u);this.flushDisplayed(p,c);for(var g=0;g<8;g++)h&1<<g&&(c.windows[g].visible^=1);return u},pe.prototype.clearWindows=function(u,c){var f=this.current708Packet.data,h=f[++u],p=this.getPts(u);this.flushDisplayed(p,c);for(var g=0;g<8;g++)h&1<<g&&c.windows[g].clearText();return u},pe.prototype.deleteWindows=function(u,c){var f=this.current708Packet.data,h=f[++u],p=this.getPts(u);this.flushDisplayed(p,c);for(var g=0;g<8;g++)h&1<<g&&c.windows[g].reset();return u},pe.prototype.setPenAttributes=function(u,c){var f=this.current708Packet.data,h=f[u],p=c.currentWindow.penAttr;return h=f[++u],p.textTag=(h&240)>>4,p.offset=(h&12)>>2,p.penSize=h&3,h=f[++u],p.italics=(h&128)>>7,p.underline=(h&64)>>6,p.edgeType=(h&56)>>3,p.fontStyle=h&7,u},pe.prototype.setPenColor=function(u,c){var f=this.current708Packet.data,h=f[u],p=c.currentWindow.penColor;return h=f[++u],p.fgOpacity=(h&192)>>6,p.fgRed=(h&48)>>4,p.fgGreen=(h&12)>>2,p.fgBlue=h&3,h=f[++u],p.bgOpacity=(h&192)>>6,p.bgRed=(h&48)>>4,p.bgGreen=(h&12)>>2,p.bgBlue=h&3,h=f[++u],p.edgeRed=(h&48)>>4,p.edgeGreen=(h&12)>>2,p.edgeBlue=h&3,u},pe.prototype.setPenLocation=function(u,c){var f=this.current708Packet.data,h=f[u],p=c.currentWindow.penLoc;return c.currentWindow.pendingNewLine=!0,h=f[++u],p.row=h&15,h=f[++u],p.column=h&63,u},pe.prototype.reset=function(u,c){var f=this.getPts(u);return this.flushDisplayed(f,c),this.initService(c.serviceNum,u)};var Ux={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},mo=function(u){return u===null?"":(u=Ux[u]||u,String.fromCharCode(u))},go=14,jx=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Er=function(){for(var u=[],c=go+1;c--;)u.push("");return u},Ce=function(u,c){Ce.prototype.init.call(this),this.field_=u||0,this.dataChannel_=c||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(f){var h,p,g,E,C;if(h=f.ccData&32639,h===this.lastControlCode_){this.lastControlCode_=null;return}if((h&61440)===4096?this.lastControlCode_=h:h!==this.PADDING_&&(this.lastControlCode_=null),g=h>>>8,E=h&255,h!==this.PADDING_)if(h===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(h===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(f.pts),this.flushDisplayed(f.pts),p=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=p,this.startPts_=f.pts;else if(h===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(f.pts);else if(h===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(f.pts);else if(h===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(f.pts);else if(h===this.CARRIAGE_RETURN_)this.clearFormatting(f.pts),this.flushDisplayed(f.pts),this.shiftRowsUp_(),this.startPts_=f.pts;else if(h===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(h===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(f.pts),this.displayed_=Er();else if(h===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Er();else if(h===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(f.pts),this.displayed_=Er()),this.mode_="paintOn",this.startPts_=f.pts;else if(this.isSpecialCharacter(g,E))g=(g&3)<<8,C=mo(g|E),this[this.mode_](f.pts,C),this.column_++;else if(this.isExtCharacter(g,E))this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),g=(g&3)<<8,C=mo(g|E),this[this.mode_](f.pts,C),this.column_++;else if(this.isMidRowCode(g,E))this.clearFormatting(f.pts),this[this.mode_](f.pts," "),this.column_++,(E&14)===14&&this.addFormatting(f.pts,["i"]),(E&1)===1&&this.addFormatting(f.pts,["u"]);else if(this.isOffsetControlCode(g,E))this.column_+=E&3;else if(this.isPAC(g,E)){var w=jx.indexOf(h&7968);this.mode_==="rollUp"&&(w-this.rollUpRows_+1<0&&(w=this.rollUpRows_-1),this.setRollUp(f.pts,w)),w!==this.row_&&(this.clearFormatting(f.pts),this.row_=w),E&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(f.pts,["u"]),(h&16)===16&&(this.column_=((h&14)>>1)*4),this.isColorPAC(E)&&(E&14)===14&&this.addFormatting(f.pts,["i"])}else this.isNormalChar(g)&&(E===0&&(E=null),C=mo(g),C+=mo(E),this[this.mode_](f.pts,C),this.column_+=C.length)}};Ce.prototype=new sc,Ce.prototype.flushDisplayed=function(u){var c=this.displayed_.map(function(f,h){try{return f.trim()}catch{return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+h+"."}),""}},this).join(`
`).replace(/^\n+|\n+$/g,"");c.length&&this.trigger("data",{startPts:this.startPts_,endPts:u,text:c,stream:this.name_})},Ce.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Er(),this.nonDisplayed_=Er(),this.lastControlCode_=null,this.column_=0,this.row_=go,this.rollUpRows_=2,this.formatting_=[]},Ce.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},Ce.prototype.isSpecialCharacter=function(u,c){return u===this.EXT_&&c>=48&&c<=63},Ce.prototype.isExtCharacter=function(u,c){return(u===this.EXT_+1||u===this.EXT_+2)&&c>=32&&c<=63},Ce.prototype.isMidRowCode=function(u,c){return u===this.EXT_&&c>=32&&c<=47},Ce.prototype.isOffsetControlCode=function(u,c){return u===this.OFFSET_&&c>=33&&c<=35},Ce.prototype.isPAC=function(u,c){return u>=this.BASE_&&u<this.BASE_+8&&c>=64&&c<=127},Ce.prototype.isColorPAC=function(u){return u>=64&&u<=79||u>=96&&u<=127},Ce.prototype.isNormalChar=function(u){return u>=32&&u<=127},Ce.prototype.setRollUp=function(u,c){if(this.mode_!=="rollUp"&&(this.row_=go,this.mode_="rollUp",this.flushDisplayed(u),this.nonDisplayed_=Er(),this.displayed_=Er()),c!==void 0&&c!==this.row_)for(var f=0;f<this.rollUpRows_;f++)this.displayed_[c-f]=this.displayed_[this.row_-f],this.displayed_[this.row_-f]="";c===void 0&&(c=this.row_),this.topRow_=c-this.rollUpRows_+1},Ce.prototype.addFormatting=function(u,c){this.formatting_=this.formatting_.concat(c);var f=c.reduce(function(h,p){return h+"<"+p+">"},"");this[this.mode_](u,f)},Ce.prototype.clearFormatting=function(u){if(this.formatting_.length){var c=this.formatting_.reverse().reduce(function(f,h){return f+"</"+h+">"},"");this.formatting_=[],this[this.mode_](u,c)}},Ce.prototype.popOn=function(u,c){var f=this.nonDisplayed_[this.row_];f+=c,this.nonDisplayed_[this.row_]=f},Ce.prototype.rollUp=function(u,c){var f=this.displayed_[this.row_];f+=c,this.displayed_[this.row_]=f},Ce.prototype.shiftRowsUp_=function(){var u;for(u=0;u<this.topRow_;u++)this.displayed_[u]="";for(u=this.row_+1;u<go+1;u++)this.displayed_[u]="";for(u=this.topRow_;u<this.row_;u++)this.displayed_[u]=this.displayed_[u+1];this.displayed_[this.row_]=""},Ce.prototype.paintOn=function(u,c){var f=this.displayed_[this.row_];f+=c,this.displayed_[this.row_]=f};var Lp={CaptionStream:ft,Cea608Stream:Ce,Cea708Stream:pe},yo={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},$x=i,Vx=8589934592,Hx=4294967296,Np="shared",ac=function(u,c){var f=1;for(u>c&&(f=-1);Math.abs(c-u)>Hx;)u+=f*Vx;return u},oc=function(u){var c,f;oc.prototype.init.call(this),this.type_=u||Np,this.push=function(h){this.type_!==Np&&h.type!==this.type_||(f===void 0&&(f=h.dts),h.dts=ac(h.dts,f),h.pts=ac(h.pts,f),c=h.dts,this.trigger("data",h))},this.flush=function(){f=c,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){f=void 0,c=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};oc.prototype=new $x;var Rp={TimestampRolloverStream:oc,handleRollover:ac},qx=(u,c,f)=>{if(!u)return-1;for(var h=f;h<u.length;h++)if(u[h]===c)return h;return-1},zx={typedArrayIndexOf:qx},_o=zx.typedArrayIndexOf,vo={Iso88591:0,Utf16:1,Utf16be:2,Utf8:3},Mp=function(u,c,f){var h,p="";for(h=c;h<f;h++)p+="%"+("00"+u[h].toString(16)).slice(-2);return p},_s=function(u,c,f){return decodeURIComponent(Mp(u,c,f))},vs=function(u,c,f){return unescape(Mp(u,c,f))},Ts=function(u){return u[0]<<21|u[1]<<14|u[2]<<7|u[3]},xs={APIC:function(u){var c=1,f,h,p="-->";u.data[0]===vo.Utf8&&(f=_o(u.data,0,c),!(f<0)&&(u.mimeType=vs(u.data,c,f),c=f+1,u.pictureType=u.data[c],c++,h=_o(u.data,0,c),!(h<0)&&(u.description=_s(u.data,c,h),c=h+1,u.mimeType===p?u.url=vs(u.data,c,u.data.length):u.pictureData=u.data.subarray(c,u.data.length))))},"T*":function(u){u.data[0]===vo.Utf8&&(u.value=_s(u.data,1,u.data.length).replace(/\0*$/,""),u.values=u.value.split("\0"))},TXXX:function(u){var c;u.data[0]===vo.Utf8&&(c=_o(u.data,0,1),c!==-1&&(u.description=_s(u.data,1,c),u.value=_s(u.data,c+1,u.data.length).replace(/\0*$/,""),u.data=u.value))},"W*":function(u){u.url=vs(u.data,0,u.data.length).replace(/\0.*$/,"")},WXXX:function(u){var c;u.data[0]===vo.Utf8&&(c=_o(u.data,0,1),c!==-1&&(u.description=_s(u.data,1,c),u.url=vs(u.data,c+1,u.data.length).replace(/\0.*$/,"")))},PRIV:function(u){var c;for(c=0;c<u.data.length;c++)if(u.data[c]===0){u.owner=vs(u.data,0,c);break}u.privateData=u.data.subarray(c+1),u.data=u.privateData}},Gx=function(u){var c,f,h=10,p=0,g=[];if(!(u.length<10||u[0]!=="I".charCodeAt(0)||u[1]!=="D".charCodeAt(0)||u[2]!=="3".charCodeAt(0))){p=Ts(u.subarray(6,10)),p+=10;var E=u[5]&64;E&&(h+=4,h+=Ts(u.subarray(10,14)),p-=Ts(u.subarray(16,20)));do{if(c=Ts(u.subarray(h+4,h+8)),c<1)break;f=String.fromCharCode(u[h],u[h+1],u[h+2],u[h+3]);var C={id:f,data:u.subarray(h+10,h+c+10)};C.key=C.id,xs[C.id]?xs[C.id](C):C.id[0]==="T"?xs["T*"](C):C.id[0]==="W"&&xs["W*"](C),g.push(C),h+=10,h+=c}while(h<p);return g}},Bp={parseId3Frames:Gx,parseSyncSafeInteger:Ts,frameParsers:xs},Wx=i,Xx=yo,Xi=Bp,To;To=function(u){var c={descriptor:u&&u.descriptor},f=0,h=[],p=0,g;if(To.prototype.init.call(this),this.dispatchType=Xx.METADATA_STREAM_TYPE.toString(16),c.descriptor)for(g=0;g<c.descriptor.length;g++)this.dispatchType+=("00"+c.descriptor[g].toString(16)).slice(-2);this.push=function(E){var C,w,P,L,M,G;if(E.type==="timed-metadata"){if(E.dataAlignmentIndicator&&(p=0,h.length=0),h.length===0&&(E.data.length<10||E.data[0]!=="I".charCodeAt(0)||E.data[1]!=="D".charCodeAt(0)||E.data[2]!=="3".charCodeAt(0))){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(h.push(E),p+=E.data.byteLength,h.length===1&&(f=Xi.parseSyncSafeInteger(E.data.subarray(6,10)),f+=10),!(p<f)){for(C={data:new Uint8Array(f),frames:[],pts:h[0].pts,dts:h[0].dts},M=0;M<f;)C.data.set(h[0].data.subarray(0,f-M),M),M+=h[0].data.byteLength,p-=h[0].data.byteLength,h.shift();w=10,C.data[5]&64&&(w+=4,w+=Xi.parseSyncSafeInteger(C.data.subarray(10,14)),f-=Xi.parseSyncSafeInteger(C.data.subarray(16,20)));do{if(P=Xi.parseSyncSafeInteger(C.data.subarray(w+4,w+8)),P<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if(G=String.fromCharCode(C.data[w],C.data[w+1],C.data[w+2],C.data[w+3]),L={id:G,data:C.data.subarray(w+10,w+P+10)},L.key=L.id,Xi.frameParsers[L.id]?Xi.frameParsers[L.id](L):L.id[0]==="T"?Xi.frameParsers["T*"](L):L.id[0]==="W"&&Xi.frameParsers["W*"](L),L.owner==="com.apple.streaming.transportStreamTimestamp"){var F=L.data,Q=(F[3]&1)<<30|F[4]<<22|F[5]<<14|F[6]<<6|F[7]>>>2;Q*=4,Q+=F[7]&3,L.timeStamp=Q,C.pts===void 0&&C.dts===void 0&&(C.pts=L.timeStamp,C.dts=L.timeStamp),this.trigger("timestamp",L)}C.frames.push(L),w+=10,w+=P}while(w<f);this.trigger("data",C)}}}},To.prototype=new Wx;var Kx=To,uc=i,lc=Lp,zt=yo,Yx=Rp.TimestampRolloverStream,xo,Ss,So,Zr=188,cc=71;xo=function(){var u=new Uint8Array(Zr),c=0;xo.prototype.init.call(this),this.push=function(f){var h=0,p=Zr,g;for(c?(g=new Uint8Array(f.byteLength+c),g.set(u.subarray(0,c)),g.set(f,c),c=0):g=f;p<g.byteLength;){if(g[h]===cc&&g[p]===cc){this.trigger("data",g.subarray(h,p)),h+=Zr,p+=Zr;continue}h++,p++}h<g.byteLength&&(u.set(g.subarray(h),0),c=g.byteLength-h)},this.flush=function(){c===Zr&&u[0]===cc&&(this.trigger("data",u),c=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){c=0,this.trigger("reset")}},xo.prototype=new uc,Ss=function(){var u,c,f,h;Ss.prototype.init.call(this),h=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,u=function(p,g){var E=0;g.payloadUnitStartIndicator&&(E+=p[E]+1),g.type==="pat"?c(p.subarray(E),g):f(p.subarray(E),g)},c=function(p,g){g.section_number=p[7],g.last_section_number=p[8],h.pmtPid=(p[10]&31)<<8|p[11],g.pmtPid=h.pmtPid},f=function(p,g){var E,C,w,P;if(p[5]&1){for(h.programMapTable={video:null,audio:null,"timed-metadata":{}},E=(p[1]&15)<<8|p[2],C=3+E-4,w=(p[10]&15)<<8|p[11],P=12+w;P<C;){var L=p[P],M=(p[P+1]&31)<<8|p[P+2];L===zt.H264_STREAM_TYPE&&h.programMapTable.video===null?h.programMapTable.video=M:L===zt.ADTS_STREAM_TYPE&&h.programMapTable.audio===null?h.programMapTable.audio=M:L===zt.METADATA_STREAM_TYPE&&(h.programMapTable["timed-metadata"][M]=L),P+=((p[P+3]&15)<<8|p[P+4])+5}g.programMapTable=h.programMapTable}},this.push=function(p){var g={},E=4;if(g.payloadUnitStartIndicator=!!(p[1]&64),g.pid=p[1]&31,g.pid<<=8,g.pid|=p[2],(p[3]&48)>>>4>1&&(E+=p[E]+1),g.pid===0)g.type="pat",u(p.subarray(E),g),this.trigger("data",g);else if(g.pid===this.pmtPid)for(g.type="pmt",u(p.subarray(E),g),this.trigger("data",g);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([p,E,g]):this.processPes_(p,E,g)},this.processPes_=function(p,g,E){E.pid===this.programMapTable.video?E.streamType=zt.H264_STREAM_TYPE:E.pid===this.programMapTable.audio?E.streamType=zt.ADTS_STREAM_TYPE:E.streamType=this.programMapTable["timed-metadata"][E.pid],E.type="pes",E.data=p.subarray(g),this.trigger("data",E)}},Ss.prototype=new uc,Ss.STREAM_TYPES={h264:27,adts:15},So=function(){var u=this,c=!1,f={data:[],size:0},h={data:[],size:0},p={data:[],size:0},g,E=function(w,P){var L;const M=w[0]<<16|w[1]<<8|w[2];P.data=new Uint8Array,M===1&&(P.packetLength=6+(w[4]<<8|w[5]),P.dataAlignmentIndicator=(w[6]&4)!==0,L=w[7],L&192&&(P.pts=(w[9]&14)<<27|(w[10]&255)<<20|(w[11]&254)<<12|(w[12]&255)<<5|(w[13]&254)>>>3,P.pts*=4,P.pts+=(w[13]&6)>>>1,P.dts=P.pts,L&64&&(P.dts=(w[14]&14)<<27|(w[15]&255)<<20|(w[16]&254)<<12|(w[17]&255)<<5|(w[18]&254)>>>3,P.dts*=4,P.dts+=(w[18]&6)>>>1)),P.data=w.subarray(9+w[8]))},C=function(w,P,L){var M=new Uint8Array(w.size),G={type:P},F=0,Q=0,J=!1,Fe;if(!(!w.data.length||w.size<9)){for(G.trackId=w.data[0].pid,F=0;F<w.data.length;F++)Fe=w.data[F],M.set(Fe.data,Q),Q+=Fe.data.byteLength;E(M,G),J=P==="video"||G.packetLength<=w.size,(L||J)&&(w.size=0,w.data.length=0),J&&u.trigger("data",G)}};So.prototype.init.call(this),this.push=function(w){({pat:function(){},pes:function(){var P,L;switch(w.streamType){case zt.H264_STREAM_TYPE:P=f,L="video";break;case zt.ADTS_STREAM_TYPE:P=h,L="audio";break;case zt.METADATA_STREAM_TYPE:P=p,L="timed-metadata";break;default:return}w.payloadUnitStartIndicator&&C(P,L,!0),P.data.push(w),P.size+=w.data.byteLength},pmt:function(){var P={type:"metadata",tracks:[]};g=w.programMapTable,g.video!==null&&P.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+g.video,codec:"avc",type:"video"}),g.audio!==null&&P.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+g.audio,codec:"adts",type:"audio"}),c=!0,u.trigger("data",P)}})[w.type]()},this.reset=function(){f.size=0,f.data.length=0,h.size=0,h.data.length=0,this.trigger("reset")},this.flushStreams_=function(){C(f,"video"),C(h,"audio"),C(p,"timed-metadata")},this.flush=function(){if(!c&&g){var w={type:"metadata",tracks:[]};g.video!==null&&w.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+g.video,codec:"avc",type:"video"}),g.audio!==null&&w.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+g.audio,codec:"adts",type:"audio"}),u.trigger("data",w)}c=!1,this.flushStreams_(),this.trigger("done")}},So.prototype=new uc;var Fp={PAT_PID:0,MP2T_PACKET_LENGTH:Zr,TransportPacketStream:xo,TransportParseStream:Ss,ElementaryStream:So,TimestampRolloverStream:Yx,CaptionStream:lc.CaptionStream,Cea608Stream:lc.Cea608Stream,Cea708Stream:lc.Cea708Stream,MetadataStream:Kx};for(var dc in zt)zt.hasOwnProperty(dc)&&(Fp[dc]=zt[dc]);var Qx=Fp,Jx=i,Zx=xe.ONE_SECOND_IN_TS,Eo,Up=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];Eo=function(u){var c,f=0;Eo.prototype.init.call(this),this.skipWarn_=function(h,p){this.trigger("log",{level:"warn",message:`adts skiping bytes ${h} to ${p} in frame ${f} outside syncword`})},this.push=function(h){var p=0,g,E,C,w,P;if(u||(f=0),h.type==="audio"){c&&c.length?(C=c,c=new Uint8Array(C.byteLength+h.data.byteLength),c.set(C),c.set(h.data,C.byteLength)):c=h.data;for(var L;p+7<c.length;){if(c[p]!==255||(c[p+1]&246)!==240){typeof L!="number"&&(L=p),p++;continue}if(typeof L=="number"&&(this.skipWarn_(L,p),L=null),E=(~c[p+1]&1)*2,g=(c[p+3]&3)<<11|c[p+4]<<3|(c[p+5]&224)>>5,w=((c[p+6]&3)+1)*1024,P=w*Zx/Up[(c[p+2]&60)>>>2],c.byteLength-p<g)break;this.trigger("data",{pts:h.pts+f*P,dts:h.dts+f*P,sampleCount:w,audioobjecttype:(c[p+2]>>>6&3)+1,channelcount:(c[p+2]&1)<<2|(c[p+3]&192)>>>6,samplerate:Up[(c[p+2]&60)>>>2],samplingfrequencyindex:(c[p+2]&60)>>>2,samplesize:16,data:c.subarray(p+7+E,p+g)}),f++,p+=g}typeof L=="number"&&(this.skipWarn_(L,p),L=null),c=c.subarray(p)}},this.flush=function(){f=0,this.trigger("done")},this.reset=function(){c=void 0,this.trigger("reset")},this.endTimeline=function(){c=void 0,this.trigger("endedtimeline")}},Eo.prototype=new Jx;var eS=Eo,jp;jp=function(u){var c=u.byteLength,f=0,h=0;this.length=function(){return 8*c},this.bitsAvailable=function(){return 8*c+h},this.loadWord=function(){var p=u.byteLength-c,g=new Uint8Array(4),E=Math.min(4,c);if(E===0)throw new Error("no bytes available");g.set(u.subarray(p,p+E)),f=new DataView(g.buffer).getUint32(0),h=E*8,c-=E},this.skipBits=function(p){var g;h>p?(f<<=p,h-=p):(p-=h,g=Math.floor(p/8),p-=g*8,c-=g,this.loadWord(),f<<=p,h-=p)},this.readBits=function(p){var g=Math.min(h,p),E=f>>>32-g;return h-=g,h>0?f<<=g:c>0&&this.loadWord(),g=p-g,g>0?E<<g|this.readBits(g):E},this.skipLeadingZeros=function(){var p;for(p=0;p<h;++p)if(f&2147483648>>>p)return f<<=p,h-=p,p;return this.loadWord(),p+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var p=this.skipLeadingZeros();return this.readBits(p+1)-1},this.readExpGolomb=function(){var p=this.readUnsignedExpGolomb();return 1&p?1+p>>>1:-1*(p>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var tS=jp,$p=i,iS=tS,bo,Es,Vp;Es=function(){var u=0,c,f;Es.prototype.init.call(this),this.push=function(h){var p;f?(p=new Uint8Array(f.byteLength+h.data.byteLength),p.set(f),p.set(h.data,f.byteLength),f=p):f=h.data;for(var g=f.byteLength;u<g-3;u++)if(f[u+2]===1){c=u+5;break}for(;c<g;)switch(f[c]){case 0:if(f[c-1]!==0){c+=2;break}else if(f[c-2]!==0){c++;break}u+3!==c-2&&this.trigger("data",f.subarray(u+3,c-2));do c++;while(f[c]!==1&&c<g);u=c-2,c+=3;break;case 1:if(f[c-1]!==0||f[c-2]!==0){c+=3;break}this.trigger("data",f.subarray(u+3,c-2)),u=c-2,c+=3;break;default:c+=3;break}f=f.subarray(u),c-=u,u=0},this.reset=function(){f=null,u=0,this.trigger("reset")},this.flush=function(){f&&f.byteLength>3&&this.trigger("data",f.subarray(u+3)),f=null,u=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},Es.prototype=new $p,Vp={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},bo=function(){var u=new Es,c,f,h,p,g,E,C;bo.prototype.init.call(this),c=this,this.push=function(w){w.type==="video"&&(f=w.trackId,h=w.pts,p=w.dts,u.push(w))},u.on("data",function(w){var P={trackId:f,pts:h,dts:p,data:w,nalUnitTypeCode:w[0]&31};switch(P.nalUnitTypeCode){case 5:P.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:P.nalUnitType="sei_rbsp",P.escapedRBSP=g(w.subarray(1));break;case 7:P.nalUnitType="seq_parameter_set_rbsp",P.escapedRBSP=g(w.subarray(1)),P.config=E(P.escapedRBSP);break;case 8:P.nalUnitType="pic_parameter_set_rbsp";break;case 9:P.nalUnitType="access_unit_delimiter_rbsp";break}c.trigger("data",P)}),u.on("done",function(){c.trigger("done")}),u.on("partialdone",function(){c.trigger("partialdone")}),u.on("reset",function(){c.trigger("reset")}),u.on("endedtimeline",function(){c.trigger("endedtimeline")}),this.flush=function(){u.flush()},this.partialFlush=function(){u.partialFlush()},this.reset=function(){u.reset()},this.endTimeline=function(){u.endTimeline()},C=function(w,P){var L=8,M=8,G,F;for(G=0;G<w;G++)M!==0&&(F=P.readExpGolomb(),M=(L+F+256)%256),L=M===0?L:M},g=function(w){for(var P=w.byteLength,L=[],M=1,G,F;M<P-2;)w[M]===0&&w[M+1]===0&&w[M+2]===3?(L.push(M+2),M+=2):M++;if(L.length===0)return w;G=P-L.length,F=new Uint8Array(G);var Q=0;for(M=0;M<G;Q++,M++)Q===L[0]&&(Q++,L.shift()),F[M]=w[Q];return F},E=function(w){var P=0,L=0,M=0,G=0,F,Q,J,Fe,Ot,wr,ym,_m,vm,xc,Tm,Ne=[1,1],xm,Dr;if(F=new iS(w),Q=F.readUnsignedByte(),Fe=F.readUnsignedByte(),J=F.readUnsignedByte(),F.skipUnsignedExpGolomb(),Vp[Q]&&(Ot=F.readUnsignedExpGolomb(),Ot===3&&F.skipBits(1),F.skipUnsignedExpGolomb(),F.skipUnsignedExpGolomb(),F.skipBits(1),F.readBoolean()))for(Tm=Ot!==3?8:12,Dr=0;Dr<Tm;Dr++)F.readBoolean()&&(Dr<6?C(16,F):C(64,F));if(F.skipUnsignedExpGolomb(),wr=F.readUnsignedExpGolomb(),wr===0)F.readUnsignedExpGolomb();else if(wr===1)for(F.skipBits(1),F.skipExpGolomb(),F.skipExpGolomb(),ym=F.readUnsignedExpGolomb(),Dr=0;Dr<ym;Dr++)F.skipExpGolomb();if(F.skipUnsignedExpGolomb(),F.skipBits(1),_m=F.readUnsignedExpGolomb(),vm=F.readUnsignedExpGolomb(),xc=F.readBits(1),xc===0&&F.skipBits(1),F.skipBits(1),F.readBoolean()&&(P=F.readUnsignedExpGolomb(),L=F.readUnsignedExpGolomb(),M=F.readUnsignedExpGolomb(),G=F.readUnsignedExpGolomb()),F.readBoolean()&&F.readBoolean()){switch(xm=F.readUnsignedByte(),xm){case 1:Ne=[1,1];break;case 2:Ne=[12,11];break;case 3:Ne=[10,11];break;case 4:Ne=[16,11];break;case 5:Ne=[40,33];break;case 6:Ne=[24,11];break;case 7:Ne=[20,11];break;case 8:Ne=[32,11];break;case 9:Ne=[80,33];break;case 10:Ne=[18,11];break;case 11:Ne=[15,11];break;case 12:Ne=[64,33];break;case 13:Ne=[160,99];break;case 14:Ne=[4,3];break;case 15:Ne=[3,2];break;case 16:Ne=[2,1];break;case 255:{Ne=[F.readUnsignedByte()<<8|F.readUnsignedByte(),F.readUnsignedByte()<<8|F.readUnsignedByte()];break}}Ne&&Ne[0]/Ne[1]}return{profileIdc:Q,levelIdc:J,profileCompatibility:Fe,width:(_m+1)*16-P*2-L*2,height:(2-xc)*(vm+1)*16-M*2-G*2,sarRatio:Ne}}},bo.prototype=new $p;var rS={H264Stream:bo,NalByteStream:Es},nS=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Hp=function(u,c){var f=u[c+6]<<21|u[c+7]<<14|u[c+8]<<7|u[c+9],h=u[c+5],p=(h&16)>>4;return f=f>=0?f:0,p?f+20:f+10},qp=function(u,c){return u.length-c<10||u[c]!=="I".charCodeAt(0)||u[c+1]!=="D".charCodeAt(0)||u[c+2]!=="3".charCodeAt(0)?c:(c+=Hp(u,c),qp(u,c))},sS=function(u){var c=qp(u,0);return u.length>=c+2&&(u[c]&255)===255&&(u[c+1]&240)===240&&(u[c+1]&22)===16},zp=function(u){return u[0]<<21|u[1]<<14|u[2]<<7|u[3]},aS=function(u,c,f){var h,p="";for(h=c;h<f;h++)p+="%"+("00"+u[h].toString(16)).slice(-2);return p},oS=function(u,c,f){return unescape(aS(u,c,f))},uS=function(u,c){var f=(u[c+5]&224)>>5,h=u[c+4]<<3,p=u[c+3]&6144;return p|h|f},lS=function(u,c){return u[c]==="I".charCodeAt(0)&&u[c+1]==="D".charCodeAt(0)&&u[c+2]==="3".charCodeAt(0)?"timed-metadata":u[c]&!0&&(u[c+1]&240)===240?"audio":null},cS=function(u){for(var c=0;c+5<u.length;){if(u[c]!==255||(u[c+1]&246)!==240){c++;continue}return nS[(u[c+2]&60)>>>2]}return null},dS=function(u){var c,f,h,p;c=10,u[5]&64&&(c+=4,c+=zp(u.subarray(10,14)));do{if(f=zp(u.subarray(c+4,c+8)),f<1)return null;if(p=String.fromCharCode(u[c],u[c+1],u[c+2],u[c+3]),p==="PRIV"){h=u.subarray(c+10,c+f+10);for(var g=0;g<h.byteLength;g++)if(h[g]===0){var E=oS(h,0,g);if(E==="com.apple.streaming.transportStreamTimestamp"){var C=h.subarray(g+1),w=(C[3]&1)<<30|C[4]<<22|C[5]<<14|C[6]<<6|C[7]>>>2;return w*=4,w+=C[7]&3,w}break}}c+=10,c+=f}while(c<u.byteLength);return null},hc={isLikelyAacData:sS,parseId3TagSize:Hp,parseAdtsSize:uS,parseType:lS,parseSampleRate:cS,parseAacTimestamp:dS},hS=i,Gp=hc,Co;Co=function(){var u=new Uint8Array,c=0;Co.prototype.init.call(this),this.setTimestamp=function(f){c=f},this.push=function(f){var h=0,p=0,g,E,C,w;for(u.length?(w=u.length,u=new Uint8Array(f.byteLength+w),u.set(u.subarray(0,w)),u.set(f,w)):u=f;u.length-p>=3;){if(u[p]==="I".charCodeAt(0)&&u[p+1]==="D".charCodeAt(0)&&u[p+2]==="3".charCodeAt(0)){if(u.length-p<10||(h=Gp.parseId3TagSize(u,p),p+h>u.length))break;E={type:"timed-metadata",data:u.subarray(p,p+h)},this.trigger("data",E),p+=h;continue}else if((u[p]&255)===255&&(u[p+1]&240)===240){if(u.length-p<7||(h=Gp.parseAdtsSize(u,p),p+h>u.length))break;C={type:"audio",data:u.subarray(p,p+h),pts:c,dts:c},this.trigger("data",C),p+=h;continue}p++}g=u.length-p,g>0?u=u.subarray(p):u=new Uint8Array},this.reset=function(){u=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){u=new Uint8Array,this.trigger("endedtimeline")}},Co.prototype=new hS;var fS=Co,pS=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],mS=pS,gS=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],yS=gS,wo=i,bs=bi,Cs=yx,Do=wx,Gt=Px,wi=Qx,Ao=xe,Wp=eS,_S=rS.H264Stream,vS=fS,TS=hc.isLikelyAacData,xS=xe.ONE_SECOND_IN_TS,fc=mS,pc=yS,ws,en,ko,br,SS=function(u,c){c.stream=u,this.trigger("log",c)},Xp=function(u,c){for(var f=Object.keys(c),h=0;h<f.length;h++){var p=f[h];p==="headOfPipeline"||!c[p].on||c[p].on("log",SS.bind(u,p))}},Kp=function(u,c){var f;if(u.length!==c.length)return!1;for(f=0;f<u.length;f++)if(u[f]!==c[f])return!1;return!0},mc=function(u,c,f,h,p,g){var E=f-c,C=h-c,w=p-f;return{start:{dts:u,pts:u+E},end:{dts:u+C,pts:u+w},prependedContentDuration:g,baseMediaDecodeTime:u}};en=function(u,c){var f=[],h,p=0,g=0,E=1/0;c=c||{},h=c.firstSequenceNumber||0,en.prototype.init.call(this),this.push=function(C){Gt.collectDtsInfo(u,C),u&&fc.forEach(function(w){u[w]=C[w]}),f.push(C)},this.setEarliestDts=function(C){p=C},this.setVideoBaseMediaDecodeTime=function(C){E=C},this.setAudioAppendStart=function(C){g=C},this.flush=function(){var C,w,P,L,M,G,F;if(f.length===0){this.trigger("done","AudioSegmentStream");return}C=Do.trimAdtsFramesByEarliestDts(f,u,p),u.baseMediaDecodeTime=Gt.calculateTrackBaseMediaDecodeTime(u,c.keepOriginalTimestamps),F=Do.prefixWithSilence(u,C,g,E),u.samples=Do.generateSampleTable(C),P=bs.mdat(Do.concatenateFrameData(C)),f=[],w=bs.moof(h,[u]),L=new Uint8Array(w.byteLength+P.byteLength),h++,L.set(w),L.set(P,w.byteLength),Gt.clearDtsInfo(u),M=Math.ceil(xS*1024/u.samplerate),C.length&&(G=C.length*M,this.trigger("segmentTimingInfo",mc(Ao.audioTsToVideoTs(u.baseMediaDecodeTime,u.samplerate),C[0].dts,C[0].pts,C[0].dts+G,C[0].pts+G,F||0)),this.trigger("timingInfo",{start:C[0].pts,end:C[0].pts+G})),this.trigger("data",{track:u,boxes:L}),this.trigger("done","AudioSegmentStream")},this.reset=function(){Gt.clearDtsInfo(u),f=[],this.trigger("reset")}},en.prototype=new wo,ws=function(u,c){var f,h=[],p=[],g,E;c=c||{},f=c.firstSequenceNumber||0,ws.prototype.init.call(this),delete u.minPTS,this.gopCache_=[],this.push=function(C){Gt.collectDtsInfo(u,C),C.nalUnitType==="seq_parameter_set_rbsp"&&!g&&(g=C.config,u.sps=[C.data],pc.forEach(function(w){u[w]=g[w]},this)),C.nalUnitType==="pic_parameter_set_rbsp"&&!E&&(E=C.data,u.pps=[C.data]),h.push(C)},this.flush=function(){for(var C,w,P,L,M,G,F=0,Q,J;h.length&&h[0].nalUnitType!=="access_unit_delimiter_rbsp";)h.shift();if(h.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(C=Cs.groupNalsIntoFrames(h),P=Cs.groupFramesIntoGops(C),P[0][0].keyFrame||(w=this.getGopForFusion_(h[0],u),w?(F=w.duration,P.unshift(w),P.byteLength+=w.byteLength,P.nalCount+=w.nalCount,P.pts=w.pts,P.dts=w.dts,P.duration+=w.duration):P=Cs.extendFirstKeyFrame(P)),p.length){var Fe;if(c.alignGopsAtEnd?Fe=this.alignGopsAtEnd_(P):Fe=this.alignGopsAtStart_(P),!Fe){this.gopCache_.unshift({gop:P.pop(),pps:u.pps,sps:u.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),h=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}Gt.clearDtsInfo(u),P=Fe}Gt.collectDtsInfo(u,P),u.samples=Cs.generateSampleTable(P),M=bs.mdat(Cs.concatenateNalData(P)),u.baseMediaDecodeTime=Gt.calculateTrackBaseMediaDecodeTime(u,c.keepOriginalTimestamps),this.trigger("processedGopsInfo",P.map(function(Ot){return{pts:Ot.pts,dts:Ot.dts,byteLength:Ot.byteLength}})),Q=P[0],J=P[P.length-1],this.trigger("segmentTimingInfo",mc(u.baseMediaDecodeTime,Q.dts,Q.pts,J.dts+J.duration,J.pts+J.duration,F)),this.trigger("timingInfo",{start:P[0].pts,end:P[P.length-1].pts+P[P.length-1].duration}),this.gopCache_.unshift({gop:P.pop(),pps:u.pps,sps:u.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),h=[],this.trigger("baseMediaDecodeTime",u.baseMediaDecodeTime),this.trigger("timelineStartInfo",u.timelineStartInfo),L=bs.moof(f,[u]),G=new Uint8Array(L.byteLength+M.byteLength),f++,G.set(L),G.set(M,L.byteLength),this.trigger("data",{track:u,boxes:G}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),h=[],this.gopCache_.length=0,p.length=0,this.trigger("reset")},this.resetStream_=function(){Gt.clearDtsInfo(u),g=void 0,E=void 0},this.getGopForFusion_=function(C){var w=45e3,P=1e4,L=1/0,M,G,F,Q,J;for(J=0;J<this.gopCache_.length;J++)Q=this.gopCache_[J],F=Q.gop,!(!(u.pps&&Kp(u.pps[0],Q.pps[0]))||!(u.sps&&Kp(u.sps[0],Q.sps[0])))&&(F.dts<u.timelineStartInfo.dts||(M=C.dts-F.dts-F.duration,M>=-P&&M<=w&&(!G||L>M)&&(G=Q,L=M)));return G?G.gop:null},this.alignGopsAtStart_=function(C){var w,P,L,M,G,F,Q,J;for(G=C.byteLength,F=C.nalCount,Q=C.duration,w=P=0;w<p.length&&P<C.length&&(L=p[w],M=C[P],L.pts!==M.pts);){if(M.pts>L.pts){w++;continue}P++,G-=M.byteLength,F-=M.nalCount,Q-=M.duration}return P===0?C:P===C.length?null:(J=C.slice(P),J.byteLength=G,J.duration=Q,J.nalCount=F,J.pts=J[0].pts,J.dts=J[0].dts,J)},this.alignGopsAtEnd_=function(C){var w,P,L,M,G,F;for(w=p.length-1,P=C.length-1,G=null,F=!1;w>=0&&P>=0;){if(L=p[w],M=C[P],L.pts===M.pts){F=!0;break}if(L.pts>M.pts){w--;continue}w===p.length-1&&(G=P),P--}if(!F&&G===null)return null;var Q;if(F?Q=P:Q=G,Q===0)return C;var J=C.slice(Q),Fe=J.reduce(function(Ot,wr){return Ot.byteLength+=wr.byteLength,Ot.duration+=wr.duration,Ot.nalCount+=wr.nalCount,Ot},{byteLength:0,duration:0,nalCount:0});return J.byteLength=Fe.byteLength,J.duration=Fe.duration,J.nalCount=Fe.nalCount,J.pts=J[0].pts,J.dts=J[0].dts,J},this.alignGopsWith=function(C){p=C}},ws.prototype=new wo,br=function(u,c){this.numberOfTracks=0,this.metadataStream=c,u=u||{},typeof u.remux<"u"?this.remuxTracks=!!u.remux:this.remuxTracks=!0,typeof u.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=u.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,br.prototype.init.call(this),this.push=function(f){if(f.text)return this.pendingCaptions.push(f);if(f.frames)return this.pendingMetadata.push(f);this.pendingTracks.push(f.track),this.pendingBytes+=f.boxes.byteLength,f.track.type==="video"&&(this.videoTrack=f.track,this.pendingBoxes.push(f.boxes)),f.track.type==="audio"&&(this.audioTrack=f.track,this.pendingBoxes.unshift(f.boxes))}},br.prototype=new wo,br.prototype.flush=function(u){var c=0,f={captions:[],captionStreams:{},metadata:[],info:{}},h,p,g,E=0,C;if(this.pendingTracks.length<this.numberOfTracks){if(u!=="VideoSegmentStream"&&u!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(E=this.videoTrack.timelineStartInfo.pts,pc.forEach(function(w){f.info[w]=this.videoTrack[w]},this)):this.audioTrack&&(E=this.audioTrack.timelineStartInfo.pts,fc.forEach(function(w){f.info[w]=this.audioTrack[w]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?f.type=this.pendingTracks[0].type:f.type="combined",this.emittedTracks+=this.pendingTracks.length,g=bs.initSegment(this.pendingTracks),f.initSegment=new Uint8Array(g.byteLength),f.initSegment.set(g),f.data=new Uint8Array(this.pendingBytes),C=0;C<this.pendingBoxes.length;C++)f.data.set(this.pendingBoxes[C],c),c+=this.pendingBoxes[C].byteLength;for(C=0;C<this.pendingCaptions.length;C++)h=this.pendingCaptions[C],h.startTime=Ao.metadataTsToSeconds(h.startPts,E,this.keepOriginalTimestamps),h.endTime=Ao.metadataTsToSeconds(h.endPts,E,this.keepOriginalTimestamps),f.captionStreams[h.stream]=!0,f.captions.push(h);for(C=0;C<this.pendingMetadata.length;C++)p=this.pendingMetadata[C],p.cueTime=Ao.metadataTsToSeconds(p.pts,E,this.keepOriginalTimestamps),f.metadata.push(p);for(f.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",f),C=0;C<f.captions.length;C++)h=f.captions[C],this.trigger("caption",h);for(C=0;C<f.metadata.length;C++)p=f.metadata[C],this.trigger("id3Frame",p)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},br.prototype.setRemux=function(u){this.remuxTracks=u},ko=function(u){var c=this,f=!0,h,p;ko.prototype.init.call(this),u=u||{},this.baseMediaDecodeTime=u.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var g={};this.transmuxPipeline_=g,g.type="aac",g.metadataStream=new wi.MetadataStream,g.aacStream=new vS,g.audioTimestampRolloverStream=new wi.TimestampRolloverStream("audio"),g.timedMetadataTimestampRolloverStream=new wi.TimestampRolloverStream("timed-metadata"),g.adtsStream=new Wp,g.coalesceStream=new br(u,g.metadataStream),g.headOfPipeline=g.aacStream,g.aacStream.pipe(g.audioTimestampRolloverStream).pipe(g.adtsStream),g.aacStream.pipe(g.timedMetadataTimestampRolloverStream).pipe(g.metadataStream).pipe(g.coalesceStream),g.metadataStream.on("timestamp",function(E){g.aacStream.setTimestamp(E.timeStamp)}),g.aacStream.on("data",function(E){E.type!=="timed-metadata"&&E.type!=="audio"||g.audioSegmentStream||(p=p||{timelineStartInfo:{baseMediaDecodeTime:c.baseMediaDecodeTime},codec:"adts",type:"audio"},g.coalesceStream.numberOfTracks++,g.audioSegmentStream=new en(p,u),g.audioSegmentStream.on("log",c.getLogTrigger_("audioSegmentStream")),g.audioSegmentStream.on("timingInfo",c.trigger.bind(c,"audioTimingInfo")),g.adtsStream.pipe(g.audioSegmentStream).pipe(g.coalesceStream),c.trigger("trackinfo",{hasAudio:!!p,hasVideo:!!h}))}),g.coalesceStream.on("data",this.trigger.bind(this,"data")),g.coalesceStream.on("done",this.trigger.bind(this,"done")),Xp(this,g)},this.setupTsPipeline=function(){var g={};this.transmuxPipeline_=g,g.type="ts",g.metadataStream=new wi.MetadataStream,g.packetStream=new wi.TransportPacketStream,g.parseStream=new wi.TransportParseStream,g.elementaryStream=new wi.ElementaryStream,g.timestampRolloverStream=new wi.TimestampRolloverStream,g.adtsStream=new Wp,g.h264Stream=new _S,g.captionStream=new wi.CaptionStream(u),g.coalesceStream=new br(u,g.metadataStream),g.headOfPipeline=g.packetStream,g.packetStream.pipe(g.parseStream).pipe(g.elementaryStream).pipe(g.timestampRolloverStream),g.timestampRolloverStream.pipe(g.h264Stream),g.timestampRolloverStream.pipe(g.adtsStream),g.timestampRolloverStream.pipe(g.metadataStream).pipe(g.coalesceStream),g.h264Stream.pipe(g.captionStream).pipe(g.coalesceStream),g.elementaryStream.on("data",function(E){var C;if(E.type==="metadata"){for(C=E.tracks.length;C--;)!h&&E.tracks[C].type==="video"?(h=E.tracks[C],h.timelineStartInfo.baseMediaDecodeTime=c.baseMediaDecodeTime):!p&&E.tracks[C].type==="audio"&&(p=E.tracks[C],p.timelineStartInfo.baseMediaDecodeTime=c.baseMediaDecodeTime);h&&!g.videoSegmentStream&&(g.coalesceStream.numberOfTracks++,g.videoSegmentStream=new ws(h,u),g.videoSegmentStream.on("log",c.getLogTrigger_("videoSegmentStream")),g.videoSegmentStream.on("timelineStartInfo",function(w){p&&!u.keepOriginalTimestamps&&(p.timelineStartInfo=w,g.audioSegmentStream.setEarliestDts(w.dts-c.baseMediaDecodeTime))}),g.videoSegmentStream.on("processedGopsInfo",c.trigger.bind(c,"gopInfo")),g.videoSegmentStream.on("segmentTimingInfo",c.trigger.bind(c,"videoSegmentTimingInfo")),g.videoSegmentStream.on("baseMediaDecodeTime",function(w){p&&g.audioSegmentStream.setVideoBaseMediaDecodeTime(w)}),g.videoSegmentStream.on("timingInfo",c.trigger.bind(c,"videoTimingInfo")),g.h264Stream.pipe(g.videoSegmentStream).pipe(g.coalesceStream)),p&&!g.audioSegmentStream&&(g.coalesceStream.numberOfTracks++,g.audioSegmentStream=new en(p,u),g.audioSegmentStream.on("log",c.getLogTrigger_("audioSegmentStream")),g.audioSegmentStream.on("timingInfo",c.trigger.bind(c,"audioTimingInfo")),g.audioSegmentStream.on("segmentTimingInfo",c.trigger.bind(c,"audioSegmentTimingInfo")),g.adtsStream.pipe(g.audioSegmentStream).pipe(g.coalesceStream)),c.trigger("trackinfo",{hasAudio:!!p,hasVideo:!!h})}}),g.coalesceStream.on("data",this.trigger.bind(this,"data")),g.coalesceStream.on("id3Frame",function(E){E.dispatchType=g.metadataStream.dispatchType,c.trigger("id3Frame",E)}),g.coalesceStream.on("caption",this.trigger.bind(this,"caption")),g.coalesceStream.on("done",this.trigger.bind(this,"done")),Xp(this,g)},this.setBaseMediaDecodeTime=function(g){var E=this.transmuxPipeline_;u.keepOriginalTimestamps||(this.baseMediaDecodeTime=g),p&&(p.timelineStartInfo.dts=void 0,p.timelineStartInfo.pts=void 0,Gt.clearDtsInfo(p),E.audioTimestampRolloverStream&&E.audioTimestampRolloverStream.discontinuity()),h&&(E.videoSegmentStream&&(E.videoSegmentStream.gopCache_=[]),h.timelineStartInfo.dts=void 0,h.timelineStartInfo.pts=void 0,Gt.clearDtsInfo(h),E.captionStream.reset()),E.timestampRolloverStream&&E.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(g){p&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(g)},this.setRemux=function(g){var E=this.transmuxPipeline_;u.remux=g,E&&E.coalesceStream&&E.coalesceStream.setRemux(g)},this.alignGopsWith=function(g){h&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(g)},this.getLogTrigger_=function(g){var E=this;return function(C){C.stream=g,E.trigger("log",C)}},this.push=function(g){if(f){var E=TS(g);E&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!E&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),f=!1}this.transmuxPipeline_.headOfPipeline.push(g)},this.flush=function(){f=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},ko.prototype=new wo;var ES={Transmuxer:ko,VideoSegmentStream:ws,AudioSegmentStream:en,AUDIO_PROPERTIES:fc,VIDEO_PROPERTIES:pc,generateSegmentTimingInfo:mc},bS=function(u){return u>>>0},CS=function(u){return("00"+u.toString(16)).slice(-2)},Io={toUnsigned:bS,toHexString:CS},wS=function(u){var c="";return c+=String.fromCharCode(u[0]),c+=String.fromCharCode(u[1]),c+=String.fromCharCode(u[2]),c+=String.fromCharCode(u[3]),c},Yp=wS,DS=Io.toUnsigned,AS=Yp,Qp=function(u,c){var f=[],h,p,g,E,C;if(!c.length)return null;for(h=0;h<u.byteLength;)p=DS(u[h]<<24|u[h+1]<<16|u[h+2]<<8|u[h+3]),g=AS(u.subarray(h+4,h+8)),E=p>1?h+p:u.byteLength,g===c[0]&&(c.length===1?f.push(u.subarray(h+8,E)):(C=Qp(u.subarray(h+8,E),c.slice(1)),C.length&&(f=f.concat(C)))),h=E;return f},Jp=Qp,kS=Io.toUnsigned,IS=s.getUint64,PS=function(u){var c={version:u[0],flags:new Uint8Array(u.subarray(1,4))};return c.version===1?c.baseMediaDecodeTime=IS(u.subarray(4)):c.baseMediaDecodeTime=kS(u[4]<<24|u[5]<<16|u[6]<<8|u[7]),c},Zp=PS,OS=function(u){return{isLeading:(u[0]&12)>>>2,dependsOn:u[0]&3,isDependedOn:(u[1]&192)>>>6,hasRedundancy:(u[1]&48)>>>4,paddingValue:(u[1]&14)>>>1,isNonSyncSample:u[1]&1,degradationPriority:u[2]<<8|u[3]}},LS=OS,em=LS,NS=function(u){var c={version:u[0],flags:new Uint8Array(u.subarray(1,4)),samples:[]},f=new DataView(u.buffer,u.byteOffset,u.byteLength),h=c.flags[2]&1,p=c.flags[2]&4,g=c.flags[1]&1,E=c.flags[1]&2,C=c.flags[1]&4,w=c.flags[1]&8,P=f.getUint32(4),L=8,M;for(h&&(c.dataOffset=f.getInt32(L),L+=4),p&&P&&(M={flags:em(u.subarray(L,L+4))},L+=4,g&&(M.duration=f.getUint32(L),L+=4),E&&(M.size=f.getUint32(L),L+=4),w&&(c.version===1?M.compositionTimeOffset=f.getInt32(L):M.compositionTimeOffset=f.getUint32(L),L+=4),c.samples.push(M),P--);P--;)M={},g&&(M.duration=f.getUint32(L),L+=4),E&&(M.size=f.getUint32(L),L+=4),C&&(M.flags=em(u.subarray(L,L+4)),L+=4),w&&(c.version===1?M.compositionTimeOffset=f.getInt32(L):M.compositionTimeOffset=f.getUint32(L),L+=4),c.samples.push(M);return c},tm=NS,RS=function(u){var c=new DataView(u.buffer,u.byteOffset,u.byteLength),f={version:u[0],flags:new Uint8Array(u.subarray(1,4)),trackId:c.getUint32(4)},h=f.flags[2]&1,p=f.flags[2]&2,g=f.flags[2]&8,E=f.flags[2]&16,C=f.flags[2]&32,w=f.flags[0]&65536,P=f.flags[0]&131072,L;return L=8,h&&(L+=4,f.baseDataOffset=c.getUint32(12),L+=4),p&&(f.sampleDescriptionIndex=c.getUint32(L),L+=4),g&&(f.defaultSampleDuration=c.getUint32(L),L+=4),E&&(f.defaultSampleSize=c.getUint32(L),L+=4),C&&(f.defaultSampleFlags=c.getUint32(L)),w&&(f.durationIsEmpty=!0),!h&&P&&(f.baseDataOffsetIsMoof=!0),f},im=RS,Ds;typeof window<"u"?Ds=window:typeof t<"u"?Ds=t:typeof self<"u"?Ds=self:Ds={};var rm=Ds,MS=Op.discardEmulationPreventionBytes,BS=Lp.CaptionStream,As=Jp,FS=Zp,US=tm,jS=im,nm=rm,$S=function(u,c){for(var f=u,h=0;h<c.length;h++){var p=c[h];if(f<p.size)return p;f-=p.size}return null},VS=function(u,c,f){var h=new DataView(u.buffer,u.byteOffset,u.byteLength),p={logs:[],seiNals:[]},g,E,C,w;for(E=0;E+4<u.length;E+=C)if(C=h.getUint32(E),E+=4,!(C<=0))switch(u[E]&31){case 6:var P=u.subarray(E+1,E+1+C),L=$S(E,c);if(g={nalUnitType:"sei_rbsp",size:C,data:P,escapedRBSP:MS(P),trackId:f},L)g.pts=L.pts,g.dts=L.dts,w=L;else if(w)g.pts=w.pts,g.dts=w.dts;else{p.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+E+" for trackId "+f+". See mux.js#223."});break}p.seiNals.push(g);break}return p},HS=function(u,c,f){var h=c,p=f.defaultSampleDuration||0,g=f.defaultSampleSize||0,E=f.trackId,C=[];return u.forEach(function(w){var P=US(w),L=P.samples;L.forEach(function(M){M.duration===void 0&&(M.duration=p),M.size===void 0&&(M.size=g),M.trackId=E,M.dts=h,M.compositionTimeOffset===void 0&&(M.compositionTimeOffset=0),typeof h=="bigint"?(M.pts=h+nm.BigInt(M.compositionTimeOffset),h+=nm.BigInt(M.duration)):(M.pts=h+M.compositionTimeOffset,h+=M.duration)}),C=C.concat(L)}),C},qS=function(u,c){var f=As(u,["moof","traf"]),h=As(u,["mdat"]),p={},g=[];return h.forEach(function(E,C){var w=f[C];g.push({mdat:E,traf:w})}),g.forEach(function(E){var C=E.mdat,w=E.traf,P=As(w,["tfhd"]),L=jS(P[0]),M=L.trackId,G=As(w,["tfdt"]),F=G.length>0?FS(G[0]).baseMediaDecodeTime:0,Q=As(w,["trun"]),J,Fe;c===M&&Q.length>0&&(J=HS(Q,F,L),Fe=VS(C,J,M),p[M]||(p[M]={seiNals:[],logs:[]}),p[M].seiNals=p[M].seiNals.concat(Fe.seiNals),p[M].logs=p[M].logs.concat(Fe.logs))}),p},zS=function(u,c,f){var h;if(c===null)return null;h=qS(u,c);var p=h[c]||{};return{seiNals:p.seiNals,logs:p.logs,timescale:f}},GS=function(){var u=!1,c,f,h,p,g,E;this.isInitialized=function(){return u},this.init=function(C){c=new BS,u=!0,E=C?C.isPartial:!1,c.on("data",function(w){w.startTime=w.startPts/p,w.endTime=w.endPts/p,g.captions.push(w),g.captionStreams[w.stream]=!0}),c.on("log",function(w){g.logs.push(w)})},this.isNewInit=function(C,w){return C&&C.length===0||w&&typeof w=="object"&&Object.keys(w).length===0?!1:h!==C[0]||p!==w[h]},this.parse=function(C,w,P){var L;if(this.isInitialized()){if(!w||!P)return null;if(this.isNewInit(w,P))h=w[0],p=P[h];else if(h===null||!p)return f.push(C),null}else return null;for(;f.length>0;){var M=f.shift();this.parse(M,w,P)}return L=zS(C,h,p),L&&L.logs&&(g.logs=g.logs.concat(L.logs)),L===null||!L.seiNals?g.logs.length?{logs:g.logs,captions:[],captionStreams:[]}:null:(this.pushNals(L.seiNals),this.flushStream(),g)},this.pushNals=function(C){if(!this.isInitialized()||!C||C.length===0)return null;C.forEach(function(w){c.push(w)})},this.flushStream=function(){if(!this.isInitialized())return null;E?c.partialFlush():c.flush()},this.clearParsedCaptions=function(){g.captions=[],g.captionStreams={},g.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;c.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){f=[],h=null,p=null,g?this.clearParsedCaptions():g={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},WS=GS,XS=function(u){for(var c=0,f=String.fromCharCode(u[c]),h="";f!=="\0";)h+=f,c++,f=String.fromCharCode(u[c]);return h+=f,h},KS={uint8ToCString:XS},Po=KS.uint8ToCString,YS=s.getUint64,QS=function(u){var c=4,f=u[0],h,p,g,E,C,w,P,L;if(f===0){h=Po(u.subarray(c)),c+=h.length,p=Po(u.subarray(c)),c+=p.length;var M=new DataView(u.buffer);g=M.getUint32(c),c+=4,C=M.getUint32(c),c+=4,w=M.getUint32(c),c+=4,P=M.getUint32(c),c+=4}else if(f===1){var M=new DataView(u.buffer);g=M.getUint32(c),c+=4,E=YS(u.subarray(c)),c+=8,w=M.getUint32(c),c+=4,P=M.getUint32(c),c+=4,h=Po(u.subarray(c)),c+=h.length,p=Po(u.subarray(c)),c+=p.length}L=new Uint8Array(u.subarray(c,u.byteLength));var G={scheme_id_uri:h,value:p,timescale:g||1,presentation_time:E,presentation_time_delta:C,event_duration:w,id:P,message_data:L};return ZS(f,G)?G:void 0},JS=function(u,c,f,h){return u||u===0?u/c:h+f/c},ZS=function(u,c){var f=c.scheme_id_uri!=="\0",h=u===0&&sm(c.presentation_time_delta)&&f,p=u===1&&sm(c.presentation_time)&&f;return!(u>1)&&h||p},sm=function(u){return u!==void 0||u!==null},eE={parseEmsgBox:QS,scaleTime:JS},Oo=Io.toUnsigned,ks=Io.toHexString,Le=Jp,tn=Yp,gc=eE,tE=im,iE=tm,rE=Zp,nE=s.getUint64,am,om,um,lm,cm,yc,dm,_c=rm,sE=Bp.parseId3Frames;am=function(u){var c={},f=Le(u,["moov","trak"]);return f.reduce(function(h,p){var g,E,C,w,P;return g=Le(p,["tkhd"])[0],!g||(E=g[0],C=E===0?12:20,w=Oo(g[C]<<24|g[C+1]<<16|g[C+2]<<8|g[C+3]),P=Le(p,["mdia","mdhd"])[0],!P)?null:(E=P[0],C=E===0?12:20,h[w]=Oo(P[C]<<24|P[C+1]<<16|P[C+2]<<8|P[C+3]),h)},c)},om=function(u,c){var f;f=Le(c,["moof","traf"]);var h=f.reduce(function(p,g){var E=Le(g,["tfhd"])[0],C=Oo(E[4]<<24|E[5]<<16|E[6]<<8|E[7]),w=u[C]||9e4,P=Le(g,["tfdt"])[0],L=new DataView(P.buffer,P.byteOffset,P.byteLength),M;P[0]===1?M=nE(P.subarray(4,12)):M=L.getUint32(4);let G;return typeof M=="bigint"?G=M/_c.BigInt(w):typeof M=="number"&&!isNaN(M)&&(G=M/w),G<Number.MAX_SAFE_INTEGER&&(G=Number(G)),G<p&&(p=G),p},1/0);return typeof h=="bigint"||isFinite(h)?h:0},um=function(u,c){var f=Le(c,["moof","traf"]),h=0,p=0,g;if(f&&f.length){var E=Le(f[0],["tfhd"])[0],C=Le(f[0],["trun"])[0],w=Le(f[0],["tfdt"])[0];if(E){var P=tE(E);g=P.trackId}if(w){var L=rE(w);h=L.baseMediaDecodeTime}if(C){var M=iE(C);M.samples&&M.samples.length&&(p=M.samples[0].compositionTimeOffset||0)}}var G=u[g]||9e4;typeof h=="bigint"&&(p=_c.BigInt(p),G=_c.BigInt(G));var F=(h+p)/G;return typeof F=="bigint"&&F<Number.MAX_SAFE_INTEGER&&(F=Number(F)),F},lm=function(u){var c=Le(u,["moov","trak"]),f=[];return c.forEach(function(h){var p=Le(h,["mdia","hdlr"]),g=Le(h,["tkhd"]);p.forEach(function(E,C){var w=tn(E.subarray(8,12)),P=g[C],L,M,G;w==="vide"&&(L=new DataView(P.buffer,P.byteOffset,P.byteLength),M=L.getUint8(0),G=M===0?L.getUint32(12):L.getUint32(20),f.push(G))})}),f},yc=function(u){var c=u[0],f=c===0?12:20;return Oo(u[f]<<24|u[f+1]<<16|u[f+2]<<8|u[f+3])},cm=function(u){var c=Le(u,["moov","trak"]),f=[];return c.forEach(function(h){var p={},g=Le(h,["tkhd"])[0],E,C;g&&(E=new DataView(g.buffer,g.byteOffset,g.byteLength),C=E.getUint8(0),p.id=C===0?E.getUint32(12):E.getUint32(20));var w=Le(h,["mdia","hdlr"])[0];if(w){var P=tn(w.subarray(8,12));P==="vide"?p.type="video":P==="soun"?p.type="audio":p.type=P}var L=Le(h,["mdia","minf","stbl","stsd"])[0];if(L){var M=L.subarray(8);p.codec=tn(M.subarray(4,8));var G=Le(M,[p.codec])[0],F,Q;G&&(/^[asm]vc[1-9]$/i.test(p.codec)?(F=G.subarray(78),Q=tn(F.subarray(4,8)),Q==="avcC"&&F.length>11?(p.codec+=".",p.codec+=ks(F[9]),p.codec+=ks(F[10]),p.codec+=ks(F[11])):p.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(p.codec)?(F=G.subarray(28),Q=tn(F.subarray(4,8)),Q==="esds"&&F.length>20&&F[19]!==0?(p.codec+="."+ks(F[19]),p.codec+="."+ks(F[20]>>>2&63).replace(/^0/,"")):p.codec="mp4a.40.2"):p.codec=p.codec.toLowerCase())}var J=Le(h,["mdia","mdhd"])[0];J&&(p.timescale=yc(J)),f.push(p)}),f},dm=function(u,c=0){var f=Le(u,["emsg"]);return f.map(h=>{var p=gc.parseEmsgBox(new Uint8Array(h)),g=sE(p.message_data);return{cueTime:gc.scaleTime(p.presentation_time,p.timescale,p.presentation_time_delta,c),duration:gc.scaleTime(p.event_duration,p.timescale),frames:g}})};var hm={findBox:Le,parseType:tn,timescale:am,startTime:om,compositionStartTime:um,videoTrackIds:lm,tracks:cm,getTimescaleFromMediaHeader:yc,getEmsgID3:dm},vc=yo,fm=function(u){var c=u[1]&31;return c<<=8,c|=u[2],c},Lo=function(u){return!!(u[1]&64)},No=function(u){var c=0;return(u[3]&48)>>>4>1&&(c+=u[4]+1),c},aE=function(u,c){var f=fm(u);return f===0?"pat":f===c?"pmt":c?"pes":null},oE=function(u){var c=Lo(u),f=4+No(u);return c&&(f+=u[f]+1),(u[f+10]&31)<<8|u[f+11]},uE=function(u){var c={},f=Lo(u),h=4+No(u);if(f&&(h+=u[h]+1),!!(u[h+5]&1)){var p,g,E;p=(u[h+1]&15)<<8|u[h+2],g=3+p-4,E=(u[h+10]&15)<<8|u[h+11];for(var C=12+E;C<g;){var w=h+C;c[(u[w+1]&31)<<8|u[w+2]]=u[w],C+=((u[w+3]&15)<<8|u[w+4])+5}return c}},lE=function(u,c){var f=fm(u),h=c[f];switch(h){case vc.H264_STREAM_TYPE:return"video";case vc.ADTS_STREAM_TYPE:return"audio";case vc.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},cE=function(u){var c=Lo(u);if(!c)return null;var f=4+No(u);if(f>=u.byteLength)return null;var h=null,p;return p=u[f+7],p&192&&(h={},h.pts=(u[f+9]&14)<<27|(u[f+10]&255)<<20|(u[f+11]&254)<<12|(u[f+12]&255)<<5|(u[f+13]&254)>>>3,h.pts*=4,h.pts+=(u[f+13]&6)>>>1,h.dts=h.pts,p&64&&(h.dts=(u[f+14]&14)<<27|(u[f+15]&255)<<20|(u[f+16]&254)<<12|(u[f+17]&255)<<5|(u[f+18]&254)>>>3,h.dts*=4,h.dts+=(u[f+18]&6)>>>1)),h},Tc=function(u){switch(u){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},dE=function(u){for(var c=4+No(u),f=u.subarray(c),h=0,p=0,g=!1,E;p<f.byteLength-3;p++)if(f[p+2]===1){h=p+5;break}for(;h<f.byteLength;)switch(f[h]){case 0:if(f[h-1]!==0){h+=2;break}else if(f[h-2]!==0){h++;break}p+3!==h-2&&(E=Tc(f[p+3]&31),E==="slice_layer_without_partitioning_rbsp_idr"&&(g=!0));do h++;while(f[h]!==1&&h<f.length);p=h-2,h+=3;break;case 1:if(f[h-1]!==0||f[h-2]!==0){h+=3;break}E=Tc(f[p+3]&31),E==="slice_layer_without_partitioning_rbsp_idr"&&(g=!0),p=h-2,h+=3;break;default:h+=3;break}return f=f.subarray(p),h-=p,p=0,f&&f.byteLength>3&&(E=Tc(f[p+3]&31),E==="slice_layer_without_partitioning_rbsp_idr"&&(g=!0)),g},hE={parseType:aE,parsePat:oE,parsePmt:uE,parsePayloadUnitStartIndicator:Lo,parsePesType:lE,parsePesTime:cE,videoPacketContainsKeyFrame:dE},pm=yo,rn=Rp.handleRollover,he={};he.ts=hE,he.aac=hc;var Cr=xe.ONE_SECOND_IN_TS,rt=188,ti=71,fE=function(u,c){for(var f=0,h=rt,p,g;h<u.byteLength;){if(u[f]===ti&&u[h]===ti){switch(p=u.subarray(f,h),g=he.ts.parseType(p,c.pid),g){case"pat":c.pid=he.ts.parsePat(p);break;case"pmt":var E=he.ts.parsePmt(p);c.table=c.table||{},Object.keys(E).forEach(function(C){c.table[C]=E[C]});break}f+=rt,h+=rt;continue}f++,h++}},mm=function(u,c,f){for(var h=0,p=rt,g,E,C,w,P,L=!1;p<=u.byteLength;){if(u[h]===ti&&(u[p]===ti||p===u.byteLength)){switch(g=u.subarray(h,p),E=he.ts.parseType(g,c.pid),E){case"pes":C=he.ts.parsePesType(g,c.table),w=he.ts.parsePayloadUnitStartIndicator(g),C==="audio"&&w&&(P=he.ts.parsePesTime(g),P&&(P.type="audio",f.audio.push(P),L=!0));break}if(L)break;h+=rt,p+=rt;continue}h++,p++}for(p=u.byteLength,h=p-rt,L=!1;h>=0;){if(u[h]===ti&&(u[p]===ti||p===u.byteLength)){switch(g=u.subarray(h,p),E=he.ts.parseType(g,c.pid),E){case"pes":C=he.ts.parsePesType(g,c.table),w=he.ts.parsePayloadUnitStartIndicator(g),C==="audio"&&w&&(P=he.ts.parsePesTime(g),P&&(P.type="audio",f.audio.push(P),L=!0));break}if(L)break;h-=rt,p-=rt;continue}h--,p--}},pE=function(u,c,f){for(var h=0,p=rt,g,E,C,w,P,L,M,G,F=!1,Q={data:[],size:0};p<u.byteLength;){if(u[h]===ti&&u[p]===ti){switch(g=u.subarray(h,p),E=he.ts.parseType(g,c.pid),E){case"pes":if(C=he.ts.parsePesType(g,c.table),w=he.ts.parsePayloadUnitStartIndicator(g),C==="video"&&(w&&!F&&(P=he.ts.parsePesTime(g),P&&(P.type="video",f.video.push(P),F=!0)),!f.firstKeyFrame)){if(w&&Q.size!==0){for(L=new Uint8Array(Q.size),M=0;Q.data.length;)G=Q.data.shift(),L.set(G,M),M+=G.byteLength;if(he.ts.videoPacketContainsKeyFrame(L)){var J=he.ts.parsePesTime(L);J?(f.firstKeyFrame=J,f.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}Q.size=0}Q.data.push(g),Q.size+=g.byteLength}break}if(F&&f.firstKeyFrame)break;h+=rt,p+=rt;continue}h++,p++}for(p=u.byteLength,h=p-rt,F=!1;h>=0;){if(u[h]===ti&&u[p]===ti){switch(g=u.subarray(h,p),E=he.ts.parseType(g,c.pid),E){case"pes":C=he.ts.parsePesType(g,c.table),w=he.ts.parsePayloadUnitStartIndicator(g),C==="video"&&w&&(P=he.ts.parsePesTime(g),P&&(P.type="video",f.video.push(P),F=!0));break}if(F)break;h-=rt,p-=rt;continue}h--,p--}},mE=function(u,c){if(u.audio&&u.audio.length){var f=c;(typeof f>"u"||isNaN(f))&&(f=u.audio[0].dts),u.audio.forEach(function(g){g.dts=rn(g.dts,f),g.pts=rn(g.pts,f),g.dtsTime=g.dts/Cr,g.ptsTime=g.pts/Cr})}if(u.video&&u.video.length){var h=c;if((typeof h>"u"||isNaN(h))&&(h=u.video[0].dts),u.video.forEach(function(g){g.dts=rn(g.dts,h),g.pts=rn(g.pts,h),g.dtsTime=g.dts/Cr,g.ptsTime=g.pts/Cr}),u.firstKeyFrame){var p=u.firstKeyFrame;p.dts=rn(p.dts,h),p.pts=rn(p.pts,h),p.dtsTime=p.dts/Cr,p.ptsTime=p.pts/Cr}}},gE=function(u){for(var c=!1,f=0,h=null,p=null,g=0,E=0,C;u.length-E>=3;){var w=he.aac.parseType(u,E);switch(w){case"timed-metadata":if(u.length-E<10){c=!0;break}if(g=he.aac.parseId3TagSize(u,E),g>u.length){c=!0;break}p===null&&(C=u.subarray(E,E+g),p=he.aac.parseAacTimestamp(C)),E+=g;break;case"audio":if(u.length-E<7){c=!0;break}if(g=he.aac.parseAdtsSize(u,E),g>u.length){c=!0;break}h===null&&(C=u.subarray(E,E+g),h=he.aac.parseSampleRate(C)),f++,E+=g;break;default:E++;break}if(c)return null}if(h===null||p===null)return null;var P=Cr/h,L={audio:[{type:"audio",dts:p,pts:p},{type:"audio",dts:p+f*1024*P,pts:p+f*1024*P}]};return L},yE=function(u){var c={pid:null,table:null},f={};fE(u,c);for(var h in c.table)if(c.table.hasOwnProperty(h)){var p=c.table[h];switch(p){case pm.H264_STREAM_TYPE:f.video=[],pE(u,c,f),f.video.length===0&&delete f.video;break;case pm.ADTS_STREAM_TYPE:f.audio=[],mm(u,c,f),f.audio.length===0&&delete f.audio;break}}return f},_E=function(u,c){var f=he.aac.isLikelyAacData(u),h;return f?h=gE(u):h=yE(u),!h||!h.audio&&!h.video?null:(mE(h,c),h)},vE={inspect:_E,parseAudioPes_:mm};const TE=function(u,c){c.on("data",function(f){const h=f.initSegment;f.initSegment={data:h.buffer,byteOffset:h.byteOffset,byteLength:h.byteLength};const p=f.data;f.data=p.buffer,u.postMessage({action:"data",segment:f,byteOffset:p.byteOffset,byteLength:p.byteLength},[f.data])}),c.on("done",function(f){u.postMessage({action:"done"})}),c.on("gopInfo",function(f){u.postMessage({action:"gopInfo",gopInfo:f})}),c.on("videoSegmentTimingInfo",function(f){const h={start:{decode:xe.videoTsToSeconds(f.start.dts),presentation:xe.videoTsToSeconds(f.start.pts)},end:{decode:xe.videoTsToSeconds(f.end.dts),presentation:xe.videoTsToSeconds(f.end.pts)},baseMediaDecodeTime:xe.videoTsToSeconds(f.baseMediaDecodeTime)};f.prependedContentDuration&&(h.prependedContentDuration=xe.videoTsToSeconds(f.prependedContentDuration)),u.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:h})}),c.on("audioSegmentTimingInfo",function(f){const h={start:{decode:xe.videoTsToSeconds(f.start.dts),presentation:xe.videoTsToSeconds(f.start.pts)},end:{decode:xe.videoTsToSeconds(f.end.dts),presentation:xe.videoTsToSeconds(f.end.pts)},baseMediaDecodeTime:xe.videoTsToSeconds(f.baseMediaDecodeTime)};f.prependedContentDuration&&(h.prependedContentDuration=xe.videoTsToSeconds(f.prependedContentDuration)),u.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:h})}),c.on("id3Frame",function(f){u.postMessage({action:"id3Frame",id3Frame:f})}),c.on("caption",function(f){u.postMessage({action:"caption",caption:f})}),c.on("trackinfo",function(f){u.postMessage({action:"trackinfo",trackInfo:f})}),c.on("audioTimingInfo",function(f){u.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:xe.videoTsToSeconds(f.start),end:xe.videoTsToSeconds(f.end)}})}),c.on("videoTimingInfo",function(f){u.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:xe.videoTsToSeconds(f.start),end:xe.videoTsToSeconds(f.end)}})}),c.on("log",function(f){u.postMessage({action:"log",log:f})})};class gm{constructor(c,f){this.options=f||{},this.self=c,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new ES.Transmuxer(this.options),TE(this.self,this.transmuxer)}pushMp4Captions(c){this.captionParser||(this.captionParser=new WS,this.captionParser.init());const f=new Uint8Array(c.data,c.byteOffset,c.byteLength),h=this.captionParser.parse(f,c.trackIds,c.timescales);this.self.postMessage({action:"mp4Captions",captions:h&&h.captions||[],logs:h&&h.logs||[],data:f.buffer},[f.buffer])}probeMp4StartTime({timescales:c,data:f}){const h=hm.startTime(c,f);this.self.postMessage({action:"probeMp4StartTime",startTime:h,data:f},[f.buffer])}probeMp4Tracks({data:c}){const f=hm.tracks(c);this.self.postMessage({action:"probeMp4Tracks",tracks:f,data:c},[c.buffer])}probeTs({data:c,baseStartTime:f}){const h=typeof f=="number"&&!isNaN(f)?f*xe.ONE_SECOND_IN_TS:void 0,p=vE.inspect(c,h);let g=null;p&&(g={hasVideo:p.video&&p.video.length===2||!1,hasAudio:p.audio&&p.audio.length===2||!1},g.hasVideo&&(g.videoStart=p.video[0].ptsTime),g.hasAudio&&(g.audioStart=p.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:g,data:c},[c.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(c){const f=new Uint8Array(c.data,c.byteOffset,c.byteLength);this.transmuxer.push(f)}reset(){this.transmuxer.reset()}setTimestampOffset(c){const f=c.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(xe.secondsToVideoTs(f)))}setAudioAppendStart(c){this.transmuxer.setAudioAppendStart(Math.ceil(xe.secondsToVideoTs(c.appendStart)))}setRemux(c){this.transmuxer.setRemux(c.remux)}flush(c){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(c){this.transmuxer.alignGopsWith(c.gopsToAlignWith.slice())}}self.onmessage=function(u){if(u.data.action==="init"&&u.data.options){this.messageHandlers=new gm(self,u.data.options);return}this.messageHandlers||(this.messageHandlers=new gm(self)),u.data&&u.data.action&&u.data.action!=="init"&&this.messageHandlers[u.data.action]&&this.messageHandlers[u.data.action](u.data)}}));var Zk=V2(Jk);const eI=(t,e,i)=>{const{type:r,initSegment:n,captions:s,captionStreams:a,metadata:o,videoFrameDtsTime:l,videoFramePtsTime:d}=t.data.segment;e.buffer.push({captions:s,captionStreams:a,metadata:o});const m=t.data.segment.boxes||{data:t.data.segment.data},y={type:r,data:new Uint8Array(m.data,m.data.byteOffset,m.data.byteLength),initSegment:new Uint8Array(n.data,n.byteOffset,n.byteLength)};typeof l<"u"&&(y.videoFrameDtsTime=l),typeof d<"u"&&(y.videoFramePtsTime=d),i(y)},tI=({transmuxedData:t,callback:e})=>{t.buffer=[],e(t)},iI=(t,e)=>{e.gopInfo=t.data.gopInfo},z2=t=>{const{transmuxer:e,bytes:i,audioAppendStart:r,gopsToAlignWith:n,remux:s,onData:a,onTrackInfo:o,onAudioTimingInfo:l,onVideoTimingInfo:d,onVideoSegmentTimingInfo:m,onAudioSegmentTimingInfo:y,onId3:v,onCaptions:b,onDone:S,onEndedTimeline:A,onTransmuxerLog:T,isEndOfTimeline:_}=t,x={buffer:[]};let I=_;const D=O=>{e.currentTransmux===t&&(O.data.action==="data"&&eI(O,x,a),O.data.action==="trackinfo"&&o(O.data.trackInfo),O.data.action==="gopInfo"&&iI(O,x),O.data.action==="audioTimingInfo"&&l(O.data.audioTimingInfo),O.data.action==="videoTimingInfo"&&d(O.data.videoTimingInfo),O.data.action==="videoSegmentTimingInfo"&&m(O.data.videoSegmentTimingInfo),O.data.action==="audioSegmentTimingInfo"&&y(O.data.audioSegmentTimingInfo),O.data.action==="id3Frame"&&v([O.data.id3Frame],O.data.id3Frame.dispatchType),O.data.action==="caption"&&b(O.data.caption),O.data.action==="endedtimeline"&&(I=!1,A()),O.data.action==="log"&&T(O.data.log),O.data.type==="transmuxed"&&(I||(e.onmessage=null,tI({transmuxedData:x,callback:S}),G2(e))))};if(e.onmessage=D,r&&e.postMessage({action:"setAudioAppendStart",appendStart:r}),Array.isArray(n)&&e.postMessage({action:"alignGopsWith",gopsToAlignWith:n}),typeof s<"u"&&e.postMessage({action:"setRemux",remux:s}),i.byteLength){const O=i instanceof ArrayBuffer?i:i.buffer,N=i instanceof ArrayBuffer?0:i.byteOffset;e.postMessage({action:"push",data:O,byteOffset:N,byteLength:i.byteLength},[O])}_&&e.postMessage({action:"endTimeline"}),e.postMessage({action:"flush"})},G2=t=>{t.currentTransmux=null,t.transmuxQueue.length&&(t.currentTransmux=t.transmuxQueue.shift(),typeof t.currentTransmux=="function"?t.currentTransmux():z2(t.currentTransmux))},K0=(t,e)=>{t.postMessage({action:e}),G2(t)},W2=(t,e)=>{if(!e.currentTransmux){e.currentTransmux=t,K0(e,t);return}e.transmuxQueue.push(K0.bind(null,e,t))},rI=t=>{W2("reset",t)},nI=t=>{W2("endTimeline",t)},X2=t=>{if(!t.transmuxer.currentTransmux){t.transmuxer.currentTransmux=t,z2(t);return}t.transmuxer.transmuxQueue.push(t)},sI=t=>{const e=new Zk;e.currentTransmux=null,e.transmuxQueue=[];const i=e.terminate;return e.terminate=()=>(e.currentTransmux=null,e.transmuxQueue.length=0,i.call(e)),e.postMessage({action:"init",options:t}),e};var hd={reset:rI,endTimeline:nI,transmux:X2,createTransmuxer:sI};const ul=function(t){const e=t.transmuxer,i=t.endAction||t.action,r=t.callback,n=Ui({},t,{endAction:null,transmuxer:null,callback:null}),s=a=>{a.data.action===i&&(e.removeEventListener("message",s),a.data.data&&(a.data.data=new Uint8Array(a.data.data,t.byteOffset||0,t.byteLength||a.data.data.byteLength),t.data&&(t.data=a.data.data)),r(a.data))};if(e.addEventListener("message",s),t.data){const a=t.data instanceof ArrayBuffer;n.byteOffset=a?0:t.data.byteOffset,n.byteLength=t.data.byteLength;const o=[a?t.data:t.data.buffer];e.postMessage(n,o)}else e.postMessage(n)},li={FAILURE:2,TIMEOUT:-101,ABORTED:-102},Eh=t=>{t.forEach(e=>{e.abort()})},aI=t=>({bandwidth:t.bandwidth,bytesReceived:t.bytesReceived||0,roundTripTime:t.roundTripTime||0}),oI=t=>{const e=t.target,r={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-e.requestTime||0};return r.bytesReceived=t.loaded,r.bandwidth=Math.floor(r.bytesReceived/r.roundTripTime*8*1e3),r},Cp=(t,e)=>e.timedout?{status:e.status,message:"HLS request timed-out at URL: "+e.uri,code:li.TIMEOUT,xhr:e}:e.aborted?{status:e.status,message:"HLS request aborted at URL: "+e.uri,code:li.ABORTED,xhr:e}:t?{status:e.status,message:"HLS request errored at URL: "+e.uri,code:li.FAILURE,xhr:e}:e.responseType==="arraybuffer"&&e.response.byteLength===0?{status:e.status,message:"Empty HLS response at URL: "+e.uri,code:li.FAILURE,xhr:e}:null,Y0=(t,e,i)=>(r,n)=>{const s=n.response,a=Cp(r,n);if(a)return i(a,t);if(s.byteLength!==16)return i({status:n.status,message:"Invalid HLS key at URL: "+n.uri,code:li.FAILURE,xhr:n},t);const o=new DataView(s),l=new Uint32Array([o.getUint32(0),o.getUint32(4),o.getUint32(8),o.getUint32(12)]);for(let d=0;d<e.length;d++)e[d].bytes=l;return i(null,t)},K2=(t,e)=>{const i=Hf(t.map.bytes);if(i!=="mp4"){const r=t.map.resolvedUri||t.map.uri;return e({internal:!0,message:`Found unsupported ${i||"unknown"} container for initialization segment at URL: ${r}`,code:li.FAILURE})}ul({action:"probeMp4Tracks",data:t.map.bytes,transmuxer:t.transmuxer,callback:({tracks:r,data:n})=>(t.map.bytes=n,r.forEach(function(s){t.map.tracks=t.map.tracks||{},!t.map.tracks[s.type]&&(t.map.tracks[s.type]=s,typeof s.id=="number"&&s.timescale&&(t.map.timescales=t.map.timescales||{},t.map.timescales[s.id]=s.timescale))}),e(null))})},uI=({segment:t,finishProcessingFn:e})=>(i,r)=>{const n=Cp(i,r);if(n)return e(n,t);const s=new Uint8Array(r.response);if(t.map.key)return t.map.encryptedBytes=s,e(null,t);t.map.bytes=s,K2(t,function(a){if(a)return a.xhr=r,a.status=r.status,e(a,t);e(null,t)})},lI=({segment:t,finishProcessingFn:e,responseType:i})=>(r,n)=>{const s=Cp(r,n);if(s)return e(s,t);const a=i==="arraybuffer"||!n.responseText?n.response:Yk(n.responseText.substring(t.lastReachedChar||0));return t.stats=aI(n),t.key?t.encryptedBytes=new Uint8Array(a):t.bytes=new Uint8Array(a),e(null,t)},cI=({segment:t,bytes:e,trackInfoFn:i,timingInfoFn:r,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:d,dataFn:m,doneFn:y,onTransmuxerLog:v})=>{const b=t.map&&t.map.tracks||{},S=!!(b.audio&&b.video);let A=r.bind(null,t,"audio","start");const T=r.bind(null,t,"audio","end");let _=r.bind(null,t,"video","start");const x=r.bind(null,t,"video","end"),I=()=>X2({bytes:e,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,remux:S,onData:D=>{D.type=D.type==="combined"?"video":D.type,m(t,D)},onTrackInfo:D=>{i&&(S&&(D.isMuxed=!0),i(t,D))},onAudioTimingInfo:D=>{A&&typeof D.start<"u"&&(A(D.start),A=null),T&&typeof D.end<"u"&&T(D.end)},onVideoTimingInfo:D=>{_&&typeof D.start<"u"&&(_(D.start),_=null),x&&typeof D.end<"u"&&x(D.end)},onVideoSegmentTimingInfo:D=>{n(D)},onAudioSegmentTimingInfo:D=>{s(D)},onId3:(D,O)=>{a(t,D,O)},onCaptions:D=>{o(t,[D])},isEndOfTimeline:l,onEndedTimeline:()=>{d()},onTransmuxerLog:v,onDone:D=>{y&&(D.type=D.type==="combined"?"video":D.type,y(null,t,D))}});ul({action:"probeTs",transmuxer:t.transmuxer,data:e,baseStartTime:t.baseStartTime,callback:D=>{t.bytes=e=D.data;const O=D.result;O&&(i(t,{hasAudio:O.hasAudio,hasVideo:O.hasVideo,isMuxed:S}),i=null,O.hasAudio&&!S&&A(O.audioStart),O.hasVideo&&_(O.videoStart),A=null,_=null),I()}})},Y2=({segment:t,bytes:e,trackInfoFn:i,timingInfoFn:r,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:d,dataFn:m,doneFn:y,onTransmuxerLog:v})=>{let b=new Uint8Array(e);if(BD(b)){t.isFmp4=!0;const{tracks:S}=t.map,A={isFmp4:!0,hasVideo:!!S.video,hasAudio:!!S.audio};S.audio&&S.audio.codec&&S.audio.codec!=="enca"&&(A.audioCodec=S.audio.codec),S.video&&S.video.codec&&S.video.codec!=="encv"&&(A.videoCodec=S.video.codec),S.video&&S.audio&&(A.isMuxed=!0),i(t,A);const T=_=>{m(t,{data:b,type:A.hasAudio&&!A.isMuxed?"audio":"video"}),_&&_.length&&o(t,_),y(null,t,{})};ul({action:"probeMp4StartTime",timescales:t.map.timescales,data:b,transmuxer:t.transmuxer,callback:({data:_,startTime:x})=>{if(e=_.buffer,t.bytes=b=_,A.hasAudio&&!A.isMuxed&&r(t,"audio","start",x),A.hasVideo&&r(t,"video","start",x),!S.video||!_.byteLength||!t.transmuxer){T();return}ul({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:t.transmuxer,data:b,timescales:t.map.timescales,trackIds:[S.video.id],callback:I=>{e=I.data.buffer,t.bytes=b=I.data,I.logs.forEach(function(D){v(ve(D,{stream:"mp4CaptionParser"}))}),T(I.captions)}})}});return}if(!t.transmuxer){y(null,t,{});return}if(typeof t.container>"u"&&(t.container=Hf(b)),t.container!=="ts"&&t.container!=="aac"){i(t,{hasAudio:!1,hasVideo:!1}),y(null,t,{});return}cI({segment:t,bytes:e,trackInfoFn:i,timingInfoFn:r,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:d,dataFn:m,doneFn:y,onTransmuxerLog:v})},Q2=function({id:t,key:e,encryptedBytes:i,decryptionWorker:r},n){const s=o=>{if(o.data.source===t){r.removeEventListener("message",s);const l=o.data.decrypted;n(new Uint8Array(l.bytes,l.byteOffset,l.byteLength))}};r.addEventListener("message",s);let a;e.bytes.slice?a=e.bytes.slice():a=new Uint32Array(Array.prototype.slice.call(e.bytes)),r.postMessage(M2({source:t,encrypted:i,key:a,iv:e.iv}),[i.buffer,a.buffer])},dI=({decryptionWorker:t,segment:e,trackInfoFn:i,timingInfoFn:r,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:d,dataFn:m,doneFn:y,onTransmuxerLog:v})=>{Q2({id:e.requestId,key:e.key,encryptedBytes:e.encryptedBytes,decryptionWorker:t},b=>{e.bytes=b,Y2({segment:e,bytes:e.bytes,trackInfoFn:i,timingInfoFn:r,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:d,dataFn:m,doneFn:y,onTransmuxerLog:v})})},hI=({activeXhrs:t,decryptionWorker:e,trackInfoFn:i,timingInfoFn:r,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:d,dataFn:m,doneFn:y,onTransmuxerLog:v})=>{let b=0,S=!1;return(A,T)=>{if(!S){if(A)return S=!0,Eh(t),y(A,T);if(b+=1,b===t.length){const _=function(){if(T.encryptedBytes)return dI({decryptionWorker:e,segment:T,trackInfoFn:i,timingInfoFn:r,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:d,dataFn:m,doneFn:y,onTransmuxerLog:v});Y2({segment:T,bytes:T.bytes,trackInfoFn:i,timingInfoFn:r,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:d,dataFn:m,doneFn:y,onTransmuxerLog:v})};if(T.endOfAllRequests=Date.now(),T.map&&T.map.encryptedBytes&&!T.map.bytes)return Q2({decryptionWorker:e,id:T.requestId+"-init",encryptedBytes:T.map.encryptedBytes,key:T.map.key},x=>{T.map.bytes=x,K2(T,I=>{if(I)return Eh(t),y(I,T);_()})});_()}}}},fI=({loadendState:t,abortFn:e})=>i=>{i.target.aborted&&e&&!t.calledAbortFn&&(e(),t.calledAbortFn=!0)},pI=({segment:t,progressFn:e,trackInfoFn:i,timingInfoFn:r,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:d,dataFn:m})=>y=>{if(!y.target.aborted)return t.stats=ve(t.stats,oI(y)),!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived&&(t.stats.firstBytesReceivedAt=Date.now()),e(y,t)},mI=({xhr:t,xhrOptions:e,decryptionWorker:i,segment:r,abortFn:n,progressFn:s,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:d,id3Fn:m,captionsFn:y,isEndOfTimeline:v,endedTimelineFn:b,dataFn:S,doneFn:A,onTransmuxerLog:T})=>{const _=[],x=hI({activeXhrs:_,decryptionWorker:i,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:d,id3Fn:m,captionsFn:y,isEndOfTimeline:v,endedTimelineFn:b,dataFn:S,doneFn:A,onTransmuxerLog:T});if(r.key&&!r.key.bytes){const U=[r.key];r.map&&!r.map.bytes&&r.map.key&&r.map.key.resolvedUri===r.key.resolvedUri&&U.push(r.map.key);const H=ve(e,{uri:r.key.resolvedUri,responseType:"arraybuffer"}),j=Y0(r,U,x),ee=t(H,j);_.push(ee)}if(r.map&&!r.map.bytes){if(r.map.key&&(!r.key||r.key.resolvedUri!==r.map.key.resolvedUri)){const oe=ve(e,{uri:r.map.key.resolvedUri,responseType:"arraybuffer"}),se=Y0(r,[r.map.key],x),z=t(oe,se);_.push(z)}const H=ve(e,{uri:r.map.resolvedUri,responseType:"arraybuffer",headers:xh(r.map)}),j=uI({segment:r,finishProcessingFn:x}),ee=t(H,j);_.push(ee)}const I=ve(e,{uri:r.part&&r.part.resolvedUri||r.resolvedUri,responseType:"arraybuffer",headers:xh(r)}),D=lI({segment:r,finishProcessingFn:x,responseType:I.responseType}),O=t(I,D);O.addEventListener("progress",pI({segment:r,progressFn:s,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:d,id3Fn:m,captionsFn:y,isEndOfTimeline:v,endedTimelineFn:b,dataFn:S})),_.push(O);const N={};return _.forEach(U=>{U.addEventListener("loadend",fI({loadendState:N,abortFn:n}))}),()=>Eh(_)},gI=Zt("CodecUtils"),yI=function(t){const e=t.attributes||{};if(e.CODECS)return ii(e.CODECS)},J2=(t,e)=>{const i=e.attributes||{};return t&&t.mediaGroups&&t.mediaGroups.AUDIO&&i.AUDIO&&t.mediaGroups.AUDIO[i.AUDIO]},_I=(t,e)=>{if(!J2(t,e))return!0;const i=e.attributes||{},r=t.mediaGroups.AUDIO[i.AUDIO];for(const n in r)if(!r[n].uri&&!r[n].playlists)return!0;return!1},ll=function(t){const e={};return t.forEach(({mediaType:i,type:r,details:n})=>{e[i]=e[i]||[],e[i].push(mv(`${r}${n}`))}),Object.keys(e).forEach(function(i){if(e[i].length>1){gI(`multiple ${i} codecs found as attributes: ${e[i].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),e[i]=null;return}e[i]=e[i][0]}),e},Q0=function(t){let e=0;return t.audio&&e++,t.video&&e++,e},ba=function(t,e){const i=e.attributes||{},r=ll(yI(e)||[]);if(J2(t,e)&&!r.audio&&!_I(t,e)){const n=ll(FC(t,i.AUDIO)||[]);n.audio&&(r.audio=n.audio)}return r},Zo=Zt("PlaylistSelector"),J0=function(t){if(!t||!t.playlist)return;const e=t.playlist;return JSON.stringify({id:e.id,bandwidth:t.bandwidth,width:t.width,height:t.height,codecs:e.attributes&&e.attributes.CODECS||""})},cl=function(t,e){if(!t)return"";const i=k.getComputedStyle(t);return i?i[e]:""},Un=function(t,e){const i=t.slice();t.sort(function(r,n){const s=e(r,n);return s===0?i.indexOf(r)-i.indexOf(n):s})},wp=function(t,e){let i,r;return t.attributes.BANDWIDTH&&(i=t.attributes.BANDWIDTH),i=i||k.Number.MAX_VALUE,e.attributes.BANDWIDTH&&(r=e.attributes.BANDWIDTH),r=r||k.Number.MAX_VALUE,i-r},vI=function(t,e){let i,r;return t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(i=t.attributes.RESOLUTION.width),i=i||k.Number.MAX_VALUE,e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(r=e.attributes.RESOLUTION.width),r=r||k.Number.MAX_VALUE,i===r&&t.attributes.BANDWIDTH&&e.attributes.BANDWIDTH?t.attributes.BANDWIDTH-e.attributes.BANDWIDTH:i-r};let Z2=function(t,e,i,r,n,s){if(!t)return;const a={bandwidth:e,width:i,height:r,limitRenditionByPlayerDimensions:n};let o=t.playlists;_t.isAudioOnly(t)&&(o=s.getAudioTrackPlaylists_(),a.audioOnly=!0);let l=o.map(O=>{let N;const U=O.attributes&&O.attributes.RESOLUTION&&O.attributes.RESOLUTION.width,H=O.attributes&&O.attributes.RESOLUTION&&O.attributes.RESOLUTION.height;return N=O.attributes&&O.attributes.BANDWIDTH,N=N||k.Number.MAX_VALUE,{bandwidth:N,width:U,height:H,playlist:O}});Un(l,(O,N)=>O.bandwidth-N.bandwidth),l=l.filter(O=>!_t.isIncompatible(O.playlist));let d=l.filter(O=>_t.isEnabled(O.playlist));d.length||(d=l.filter(O=>!_t.isDisabled(O.playlist)));const m=d.filter(O=>O.bandwidth*Ve.BANDWIDTH_VARIANCE<e);let y=m[m.length-1];const v=m.filter(O=>O.bandwidth===y.bandwidth)[0];if(n===!1){const O=v||d[0]||l[0];if(O&&O.playlist){let N="sortedPlaylistReps";return v&&(N="bandwidthBestRep"),d[0]&&(N="enabledPlaylistReps"),Zo(`choosing ${J0(O)} using ${N} with options`,a),O.playlist}return Zo("could not choose a playlist with options",a),null}const b=m.filter(O=>O.width&&O.height);Un(b,(O,N)=>O.width-N.width);const S=b.filter(O=>O.width===i&&O.height===r);y=S[S.length-1];const A=S.filter(O=>O.bandwidth===y.bandwidth)[0];let T,_,x;A||(T=b.filter(O=>O.width>i||O.height>r),_=T.filter(O=>O.width===T[0].width&&O.height===T[0].height),y=_[_.length-1],x=_.filter(O=>O.bandwidth===y.bandwidth)[0]);let I;if(s.leastPixelDiffSelector){const O=b.map(N=>(N.pixelDiff=Math.abs(N.width-i)+Math.abs(N.height-r),N));Un(O,(N,U)=>N.pixelDiff===U.pixelDiff?U.bandwidth-N.bandwidth:N.pixelDiff-U.pixelDiff),I=O[0]}const D=I||x||A||v||d[0]||l[0];if(D&&D.playlist){let O="sortedPlaylistReps";return I?O="leastPixelDiffRep":x?O="resolutionPlusOneRep":A?O="resolutionBestRep":v?O="bandwidthBestRep":d[0]&&(O="enabledPlaylistReps"),Zo(`choosing ${J0(D)} using ${O} with options`,a),D.playlist}return Zo("could not choose a playlist with options",a),null};const Z0=function(){const t=this.useDevicePixelRatio&&k.devicePixelRatio||1;return Z2(this.playlists.main,this.systemBandwidth,parseInt(cl(this.tech_.el(),"width"),10)*t,parseInt(cl(this.tech_.el(),"height"),10)*t,this.limitRenditionByPlayerDimensions,this.playlistController_)},TI=function(t){let e=-1,i=-1;if(t<0||t>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){const r=this.useDevicePixelRatio&&k.devicePixelRatio||1;return e<0&&(e=this.systemBandwidth,i=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==i&&(e=t*this.systemBandwidth+(1-t)*e,i=this.systemBandwidth),Z2(this.playlists.main,e,parseInt(cl(this.tech_.el(),"width"),10)*r,parseInt(cl(this.tech_.el(),"height"),10)*r,this.limitRenditionByPlayerDimensions,this.playlistController_)}},xI=function(t){const{main:e,currentTime:i,bandwidth:r,duration:n,segmentDuration:s,timeUntilRebuffer:a,currentTimeline:o,syncController:l}=t,d=e.playlists.filter(S=>!_t.isIncompatible(S));let m=d.filter(_t.isEnabled);m.length||(m=d.filter(S=>!_t.isDisabled(S)));const v=m.filter(_t.hasAttribute.bind(null,"BANDWIDTH")).map(S=>{const T=l.getSyncPoint(S,n,o,i)?1:2,x=_t.estimateSegmentRequestTime(s,r,S)*T-a;return{playlist:S,rebufferingImpact:x}}),b=v.filter(S=>S.rebufferingImpact<=0);return Un(b,(S,A)=>wp(A.playlist,S.playlist)),b.length?b[0]:(Un(v,(S,A)=>S.rebufferingImpact-A.rebufferingImpact),v[0]||null)},SI=function(){const t=this.playlists.main.playlists.filter(_t.isEnabled);return Un(t,(i,r)=>wp(i,r)),t.filter(i=>!!ba(this.playlists.main,i).video)[0]||null},EI=t=>{let e=0,i;return t.bytes&&(i=new Uint8Array(t.bytes),t.segments.forEach(r=>{i.set(r,e),e+=r.byteLength})),i},bI=function(t,e,i){if(!t[i]){e.trigger({type:"usage",name:"vhs-608"});let r=i;/^cc708_/.test(i)&&(r="SERVICE"+i.split("_")[1]);const n=e.textTracks().getTrackById(r);if(n)t[i]=n;else{const s=e.options_.vhs&&e.options_.vhs.captionServices||{};let a=i,o=i,l=!1;const d=s[r];d&&(a=d.label,o=d.language,l=d.default),t[i]=e.addRemoteTextTrack({kind:"captions",id:r,default:l,label:a,language:o},!1).track}}},CI=function({inbandTextTracks:t,captionArray:e,timestampOffset:i}){if(!e)return;const r=k.WebKitDataCue||k.VTTCue;e.forEach(n=>{const s=n.stream;t[s].addCue(new r(n.startTime+i,n.endTime+i,n.text))})},wI=function(t){Object.defineProperties(t.frame,{id:{get(){return R.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),t.value.key}},value:{get(){return R.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),t.value.data}},privateData:{get(){return R.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),t.value.data}}})},DI=({inbandTextTracks:t,metadataArray:e,timestampOffset:i,videoDuration:r})=>{if(!e)return;const n=k.WebKitDataCue||k.VTTCue,s=t.metadataTrack_;if(!s||(e.forEach(m=>{const y=m.cueTime+i;typeof y!="number"||k.isNaN(y)||y<0||!(y<1/0)||m.frames.forEach(v=>{const b=new n(y,y,v.value||v.url||v.data||"");b.frame=v,b.value=v,wI(b),s.addCue(b)})}),!s.cues||!s.cues.length))return;const a=s.cues,o=[];for(let m=0;m<a.length;m++)a[m]&&o.push(a[m]);const l=o.reduce((m,y)=>{const v=m[y.startTime]||[];return v.push(y),m[y.startTime]=v,m},{}),d=Object.keys(l).sort((m,y)=>Number(m)-Number(y));d.forEach((m,y)=>{const v=l[m],b=Number(d[y+1])||r;v.forEach(S=>{S.endTime=b})})},AI=(t,e,i)=>{t.metadataTrack_||(t.metadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,t.metadataTrack_.inBandMetadataTrackDispatchType=e)},aa=function(t,e,i){let r,n;if(i&&i.cues)for(r=i.cues.length;r--;)n=i.cues[r],n.startTime>=t&&n.endTime<=e&&i.removeCue(n)},kI=function(t){const e=t.cues;if(e)for(let i=0;i<e.length;i++){const r=[];let n=0;for(let s=0;s<e.length;s++)e[i].startTime===e[s].startTime&&e[i].endTime===e[s].endTime&&e[i].text===e[s].text&&(n++,n>1&&r.push(e[s]));r.length&&r.forEach(s=>t.removeCue(s))}},II=(t,e,i)=>{if(typeof e>"u"||e===null||!t.length)return[];const r=Math.ceil((e-i+3)*Wu.ONE_SECOND_IN_TS);let n;for(n=0;n<t.length&&!(t[n].pts>r);n++);return t.slice(n)},PI=(t,e,i)=>{if(!e.length)return t;if(i)return e.slice();const r=e[0].pts;let n=0;for(n;n<t.length&&!(t[n].pts>=r);n++);return t.slice(0,n).concat(e)},OI=(t,e,i,r)=>{const n=Math.ceil((e-r)*Wu.ONE_SECOND_IN_TS),s=Math.ceil((i-r)*Wu.ONE_SECOND_IN_TS),a=t.slice();let o=t.length;for(;o--&&!(t[o].pts<=s););if(o===-1)return a;let l=o+1;for(;l--&&!(t[l].pts<=n););return l=Math.max(l,0),a.splice(l,o-l+1),a},LI=function(t,e){if(!t&&!e||!t&&e||t&&!e)return!1;if(t===e)return!0;const i=Object.keys(t).sort(),r=Object.keys(e).sort();if(i.length!==r.length)return!1;for(let n=0;n<i.length;n++){const s=i[n];if(s!==r[n]||t[s]!==e[s])return!1}return!0},ex=22,NI=function(t,e,i){e=e||[];const r=[];let n=0;for(let s=0;s<e.length;s++){const a=e[s];if(t===a.timeline&&(r.push(s),n+=a.duration,n>i))return s}return r.length===0?0:r[r.length-1]},Xs=1,RI=500,ey=t=>typeof t=="number"&&isFinite(t),eu=1/60,MI=(t,e,i)=>t!=="main"||!e||!i?null:!i.hasAudio&&!i.hasVideo?"Neither audio nor video found in segment.":e.hasVideo&&!i.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!e.hasVideo&&i.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null,BI=(t,e,i)=>{let r=e-Ve.BACK_BUFFER_LENGTH;t.length&&(r=Math.max(r,t.start(0)));const n=e-i;return Math.min(n,r)},dn=t=>{const{startOfSegment:e,duration:i,segment:r,part:n,playlist:{mediaSequence:s,id:a,segments:o=[]},mediaIndex:l,partIndex:d,timeline:m}=t,y=o.length-1;let v="mediaIndex/partIndex increment";t.getMediaInfoForTime?v=`getMediaInfoForTime (${t.getMediaInfoForTime})`:t.isSyncRequest&&(v="getSyncSegmentCandidate (isSyncRequest)"),t.independent&&(v+=` with independent ${t.independent}`);const b=typeof d=="number",S=t.segment.uri?"segment":"pre-segment",A=b?S2({preloadSegment:r})-1:0;return`${S} [${s+l}/${s+y}]`+(b?` part [${d}/${A}]`:"")+` segment start/end [${r.start} => ${r.end}]`+(b?` part start/end [${n.start} => ${n.end}]`:"")+` startOfSegment [${e}] duration [${i}] timeline [${m}] selected by [${v}] playlist [${a}]`},ty=t=>`${t}TimingInfo`,FI=({segmentTimeline:t,currentTimeline:e,startOfSegment:i,buffered:r,overrideCheck:n})=>!n&&t===e?null:t<e?i:r.length?r.end(r.length-1):i,iy=({timelineChangeController:t,currentTimeline:e,segmentTimeline:i,loaderType:r,audioDisabled:n})=>{if(e===i)return!1;if(r==="audio"){const s=t.lastTimelineChange({type:"main"});return!s||s.to!==i}if(r==="main"&&n){const s=t.pendingTimelineChange({type:"audio"});return!(s&&s.to===i)}return!1},UI=t=>{let e=0;return["video","audio"].forEach(function(i){const r=t[`${i}TimingInfo`];if(!r)return;const{start:n,end:s}=r;let a;typeof n=="bigint"||typeof s=="bigint"?a=k.BigInt(s)-k.BigInt(n):typeof n=="number"&&typeof s=="number"&&(a=s-n),typeof a<"u"&&a>e&&(e=a)}),typeof e=="bigint"&&e<Number.MAX_SAFE_INTEGER&&(e=Number(e)),e},ry=({segmentDuration:t,maxDuration:e})=>t?Math.round(t)>e+yr:!1,jI=(t,e)=>{if(e!=="hls")return null;const i=UI({audioTimingInfo:t.audioTimingInfo,videoTimingInfo:t.videoTimingInfo});if(!i)return null;const r=t.playlist.targetDuration,n=ry({segmentDuration:i,maxDuration:r*2}),s=ry({segmentDuration:i,maxDuration:r}),a=`Segment with index ${t.mediaIndex} from playlist ${t.playlist.id} has a duration of ${i} when the reported duration is ${t.duration} and the target duration is ${r}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`;return n||s?{severity:n?"warn":"info",message:a}:null};class bh extends R.EventTarget{constructor(e,i={}){if(super(),!e)throw new TypeError("Initialization settings are required");if(typeof e.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=e.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=e.hasPlayed,this.currentTime_=e.currentTime,this.seekable_=e.seekable,this.seeking_=e.seeking,this.duration_=e.duration,this.mediaSource_=e.mediaSource,this.vhs_=e.vhs,this.loaderType_=e.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=e.segmentMetadataTrack,this.goalBufferLength_=e.goalBufferLength,this.sourceType_=e.sourceType,this.sourceUpdater_=e.sourceUpdater,this.inbandTextTracks_=e.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=e.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=e.parse708captions,this.useDtsForTimestampOffset_=e.useDtsForTimestampOffset,this.captionServices_=e.captionServices,this.exactManifestTimings=e.exactManifestTimings,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=R.browser.IE_VERSION>=11,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=e.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=e.decrypter,this.syncController_=e.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)}),this.fetchAtBuffer_=!1,this.logger_=Zt(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(r){r!==this.state_&&(this.logger_(`${this.state_} -> ${r}`),this.state_=r,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}),this.loaderType_==="main"&&this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}),this.loaderType_==="audio"&&this.timelineChangeController_.on("timelinechange",()=>{this.hasEnoughInfoToLoad_()&&this.processLoadQueue_(),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()})}createTransmuxer_(){return hd.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&k.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,k.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(e){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==e}error(e){return typeof e<"u"&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&hd.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){const e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return Je();if(this.loaderType_==="main"){const{hasAudio:i,hasVideo:r,isMuxed:n}=e;if(r&&i&&!this.audioDisabled_&&!n)return this.sourceUpdater_.buffered();if(r)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(e,i=!1){if(!e)return null;const r=ol(e);let n=this.initSegments_[r];return i&&!n&&e.bytes&&(this.initSegments_[r]=n={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),n||e}segmentKey(e,i=!1){if(!e)return null;const r=B2(e);let n=this.keyCache_[r];this.cacheEncryptionKeys_&&i&&!n&&e.bytes&&(this.keyCache_[r]=n={resolvedUri:e.resolvedUri,bytes:e.bytes});const s={resolvedUri:(n||e).resolvedUri};return n&&(s.bytes=n.bytes),s}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(e,i={}){if(!e)return;const r=this.playlist_,n=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=i,this.state==="INIT"&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(e));let s=null;if(r&&(r.id?s=r.id:r.uri&&(s=r.uri)),this.logger_(`playlist update [${s} => ${e.id||e.uri}]`),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!r||r.uri!==e.uri){this.mediaIndex!==null&&(e.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}const a=e.mediaSequence-r.mediaSequence;if(this.logger_(`live window shift [${a}]`),this.mediaIndex!==null)if(this.mediaIndex-=a,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{const o=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!o.parts||!o.parts.length||!o.parts[this.partIndex])){const l=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=l}}n&&(n.mediaIndex-=a,n.mediaIndex<0?(n.mediaIndex=null,n.partIndex=null):(n.mediaIndex>=0&&(n.segment=e.segments[n.mediaIndex]),n.partIndex>=0&&n.segment.parts&&(n.part=n.segment.parts[n.partIndex]))),this.syncController_.saveExpiredSegmentInfo(r,e)}pause(){this.checkBufferTimeout_&&(k.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return this.checkBufferTimeout_===null}resetEverything(e){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.resyncLoader()}resyncLoader(){this.transmuxer_&&hd.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(e,i,r=()=>{},n=!1){if(i===1/0&&(i=this.duration_()),i<=e){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}let s=1;const a=()=>{s--,s===0&&r()};(n||!this.audioDisabled_)&&(s++,this.sourceUpdater_.removeAudio(e,i,a)),(n||this.loaderType_==="main")&&(this.gopBuffer_=OI(this.gopBuffer_,e,i,this.timeMapping_),s++,this.sourceUpdater_.removeVideo(e,i,a));for(const o in this.inbandTextTracks_)aa(e,i,this.inbandTextTracks_[o]);aa(e,i,this.segmentMetadataTrack_),a()}monitorBuffer_(){this.checkBufferTimeout_&&k.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=k.setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&k.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=k.setTimeout(this.monitorBufferTick_.bind(this),RI)}fillBuffer_(){if(this.sourceUpdater_.updating())return;const e=this.chooseNextRequest_();e&&(typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e))}isEndOfStream_(e=this.mediaIndex,i=this.playlist_,r=this.partIndex){if(!i||!this.mediaSource_)return!1;const n=typeof e=="number"&&i.segments[e],s=e+1===i.segments.length,a=!n||!n.parts||r+1===n.parts.length;return i.endList&&this.mediaSource_.readyState==="open"&&s&&a}chooseNextRequest_(){const e=this.buffered_(),i=z0(e)||0,r=Tp(e,this.currentTime_()),n=!this.hasPlayed_()&&r>=1,s=r>=this.goalBufferLength_(),a=this.playlist_.segments;if(!a.length||n||s)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());const o={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(o.isSyncRequest)o.mediaIndex=NI(this.currentTimeline_,a,i);else if(this.mediaIndex!==null){const y=a[this.mediaIndex],v=typeof this.partIndex=="number"?this.partIndex:-1;o.startOfSegment=y.end?y.end:i,y.parts&&y.parts[v+1]?(o.mediaIndex=this.mediaIndex,o.partIndex=v+1):o.mediaIndex=this.mediaIndex+1}else{const{segmentIndex:y,startTime:v,partIndex:b}=_t.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?i:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});o.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${i}`:`currentTime ${this.currentTime_()}`,o.mediaIndex=y,o.startOfSegment=v,o.partIndex=b}const l=a[o.mediaIndex];let d=l&&typeof o.partIndex=="number"&&l.parts&&l.parts[o.partIndex];if(!l||typeof o.partIndex=="number"&&!d)return null;if(typeof o.partIndex!="number"&&l.parts&&(o.partIndex=0,d=l.parts[0]),!r&&d&&!d.independent)if(o.partIndex===0){const y=a[o.mediaIndex-1],v=y.parts&&y.parts.length&&y.parts[y.parts.length-1];v&&v.independent&&(o.mediaIndex-=1,o.partIndex=y.parts.length-1,o.independent="previous segment")}else l.parts[o.partIndex-1].independent&&(o.partIndex-=1,o.independent="previous part");const m=this.mediaSource_&&this.mediaSource_.readyState==="ended";return o.mediaIndex>=a.length-1&&m&&!this.seeking_()?null:this.generateSegmentInfo_(o)}generateSegmentInfo_(e){const{independent:i,playlist:r,mediaIndex:n,startOfSegment:s,isSyncRequest:a,partIndex:o,forceTimestampOffset:l,getMediaInfoForTime:d}=e,m=r.segments[n],y=typeof o=="number"&&m.parts[o],v={requestId:"segment-loader-"+Math.random(),uri:y&&y.resolvedUri||m.resolvedUri,mediaIndex:n,partIndex:y?o:null,isSyncRequest:a,startOfSegment:s,playlist:r,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:m.timeline,duration:y&&y.duration||m.duration,segment:m,part:y,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:d,independent:i},b=typeof l<"u"?l:this.isPendingTimestampOffset_;v.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:m.timeline,currentTimeline:this.currentTimeline_,startOfSegment:s,buffered:this.buffered_(),overrideCheck:b});const S=z0(this.sourceUpdater_.audioBuffered());return typeof S=="number"&&(v.audioAppendStart=S-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(v.gopsToAlignWith=II(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),v}timestampOffsetForSegment_(e){return FI(e)}earlyAbortWhenNeeded_(e){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return;const i=this.currentTime_(),r=e.bandwidth,n=this.pendingSegment_.duration,s=_t.estimateSegmentRequestTime(n,r,this.playlist_,e.bytesReceived),a=lk(this.buffered_(),i,this.vhs_.tech_.playbackRate())-1;if(s<=a)return;const o=xI({main:this.vhs_.playlists.main,currentTime:i,bandwidth:r,duration:this.duration_(),segmentDuration:n,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!o)return;const d=s-a-o.rebufferingImpact;let m=.5;a<=yr&&(m=1),!(!o.playlist||o.playlist.uri===this.playlist_.uri||d<m)&&(this.bandwidth=o.playlist.attributes.BANDWIDTH*Ve.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(e){this.logger_(`Aborting ${dn(e)}`),this.mediaRequestsAborted+=1}handleProgress_(e,i){this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)&&this.trigger("progress")}handleTrackInfo_(e,i){this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)&&(this.checkForIllegalMediaSwitch(i)||(i=i||{},LI(this.currentMediaInfo_,i)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=i,this.currentMediaInfo_=i,this.logger_("trackinfo update",i),this.trigger("trackinfo")),!this.checkForAbort_(e.requestId)&&(this.pendingSegment_.trackInfo=i,this.hasEnoughInfoToAppend_()&&this.processCallQueue_())))}handleTimingInfo_(e,i,r,n){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;const s=this.pendingSegment_,a=ty(i);s[a]=s[a]||{},s[a][r]=n,this.logger_(`timinginfo: ${i} - ${r} - ${n}`),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}handleCaptions_(e,i){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(i.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,i));return}const n=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),s={};i.forEach(a=>{s[a.stream]=s[a.stream]||{startTime:1/0,captions:[],endTime:0};const o=s[a.stream];o.startTime=Math.min(o.startTime,a.startTime+n),o.endTime=Math.max(o.endTime,a.endTime+n),o.captions.push(a)}),Object.keys(s).forEach(a=>{const{startTime:o,endTime:l,captions:d}=s[a],m=this.inbandTextTracks_;this.logger_(`adding cues from ${o} -> ${l} for ${a}`),bI(m,this.vhs_.tech_,a),aa(o,l,m[a]),CI({captionArray:d,inbandTextTracks:m,timestampOffset:n})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(e,i,r){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,i,r));return}const s=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();AI(this.inbandTextTracks_,r,this.vhs_.tech_),DI({inbandTextTracks:this.inbandTextTracks_,metadataArray:i,timestampOffset:s,videoDuration:this.duration_()})}processMetadataQueue_(){this.metadataQueue_.id3.forEach(e=>e()),this.metadataQueue_.caption.forEach(e=>e()),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){const e=this.callQueue_;this.callQueue_=[],e.forEach(i=>i())}processLoadQueue_(){const e=this.loadQueue_;this.loadQueue_=[],e.forEach(i=>i())}hasEnoughInfoToLoad_(){if(this.loaderType_!=="audio")return!0;const e=this.pendingSegment_;return e?this.getCurrentMediaInfo_()?!iy({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1}getCurrentMediaInfo_(e=this.pendingSegment_){return e&&e.trackInfo||this.currentMediaInfo_}getMediaInfo_(e=this.pendingSegment_){return this.getCurrentMediaInfo_(e)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;const e=this.pendingSegment_,i=this.getCurrentMediaInfo_();if(!e||!i)return!1;const{hasAudio:r,hasVideo:n,isMuxed:s}=i;return!(n&&!e.videoTimingInfo||r&&!this.audioDisabled_&&!s&&!e.audioTimingInfo||iy({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(e,i){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){this.callQueue_.push(this.handleData_.bind(this,e,i));return}const r=this.pendingSegment_;if(this.setTimeMapping_(r.timeline),this.updateMediaSecondsLoaded_(r.part||r.segment),this.mediaSource_.readyState!=="closed"){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),r.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),r.isFmp4=e.isFmp4,r.timingInfo=r.timingInfo||{},r.isFmp4)this.trigger("fmp4"),r.timingInfo.start=r[ty(i.type)].start;else{const n=this.getCurrentMediaInfo_(),s=this.loaderType_==="main"&&n&&n.hasVideo;let a;s&&(a=r.videoTimingInfo.start),r.timingInfo.start=this.trueSegmentStart_({currentStart:r.timingInfo.start,playlist:r.playlist,mediaIndex:r.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:s,firstVideoFrameTimeForData:a,videoTimingInfo:r.videoTimingInfo,audioTimingInfo:r.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(r,i.type),this.updateSourceBufferTimestampOffset_(r),r.isSyncRequest){this.updateTimingInfoEnd_(r),this.syncController_.saveSegmentTimingInfo({segmentInfo:r,shouldSaveTimelineMapping:this.loaderType_==="main"});const n=this.chooseNextRequest_();if(n.mediaIndex!==r.mediaIndex||n.partIndex!==r.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}r.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(r,i)}}updateAppendInitSegmentStatus(e,i){this.loaderType_==="main"&&typeof e.timestampOffset=="number"&&!e.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[i]!==e.playlist&&(this.appendInitSegment_[i]=!0)}getInitSegmentAndUpdateState_({type:e,initSegment:i,map:r,playlist:n}){if(r){const s=ol(r);if(this.activeInitSegmentId_===s)return null;i=this.initSegmentForMap(r,!0).bytes,this.activeInitSegmentId_=s}return i&&this.appendInitSegment_[e]?(this.playlistOfLastInitSegment_[e]=n,this.appendInitSegment_[e]=!1,this.activeInitSegmentId_=null,i):null}handleQuotaExceededError_({segmentInfo:e,type:i,bytes:r},n){const s=this.sourceUpdater_.audioBuffered(),a=this.sourceUpdater_.videoBuffered();s.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+Fr(s).join(", ")),a.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+Fr(a).join(", "));const o=s.length?s.start(0):0,l=s.length?s.end(s.length-1):0,d=a.length?a.start(0):0,m=a.length?a.end(a.length-1):0;if(l-o<=Xs&&m-d<=Xs){this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${r.byteLength}, audio buffer: ${Fr(s).join(", ")}, video buffer: ${Fr(a).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:e,type:i,bytes:r}));const v=this.currentTime_()-Xs;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${v}`),this.remove(0,v,()=>{this.logger_(`On QUOTA_EXCEEDED_ERR, retrying append in ${Xs}s`),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=k.setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()},Xs*1e3)},!0)}handleAppendError_({segmentInfo:e,type:i,bytes:r},n){if(n){if(n.code===ex){this.handleQuotaExceededError_({segmentInfo:e,type:i,bytes:r});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",n),this.error(`${i} append of ${r.length}b failed for segment #${e.mediaIndex} in playlist ${e.playlist.id}`),this.trigger("appenderror")}}appendToSourceBuffer_({segmentInfo:e,type:i,initSegment:r,data:n,bytes:s}){if(!s){const a=[n];let o=n.byteLength;r&&(a.unshift(r),o+=r.byteLength),s=EI({bytes:o,segments:a})}this.sourceUpdater_.appendBuffer({segmentInfo:e,type:i,bytes:s},this.handleAppendError_.bind(this,{segmentInfo:e,type:i,bytes:s}))}handleSegmentTimingInfo_(e,i,r){if(!this.pendingSegment_||i!==this.pendingSegment_.requestId)return;const n=this.pendingSegment_.segment,s=`${e}TimingInfo`;n[s]||(n[s]={}),n[s].transmuxerPrependedSeconds=r.prependedContentDuration||0,n[s].transmuxedPresentationStart=r.start.presentation,n[s].transmuxedDecodeStart=r.start.decode,n[s].transmuxedPresentationEnd=r.end.presentation,n[s].transmuxedDecodeEnd=r.end.decode,n[s].baseMediaDecodeTime=r.baseMediaDecodeTime}appendData_(e,i){const{type:r,data:n}=i;if(!n||!n.byteLength||r==="audio"&&this.audioDisabled_)return;const s=this.getInitSegmentAndUpdateState_({type:r,initSegment:i.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:r,initSegment:s,data:n})}loadSegment_(e){if(this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),typeof e.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){this.loadQueue_.push(()=>{const i=Ui({},e,{forceTimestampOffset:!0});Ui(e,this.generateSegmentInfo_(i)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(e)});return}this.updateTransmuxerAndRequestSegment_(e)}updateTransmuxerAndRequestSegment_(e){this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));const i=this.createSimplifiedSegmentObj_(e),r=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),n=this.mediaIndex!==null,s=e.timeline!==this.currentTimeline_&&e.timeline>0,a=r||n&&s;this.logger_(`Requesting ${dn(e)}`),i.map&&!i.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=mI({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:i,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:a,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:o,level:l,stream:d})=>{this.logger_(`${dn(e)} logged from transmuxer stream ${d} as a ${l}: ${o}`)}})}trimBackBuffer_(e){const i=BI(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);i>0&&this.remove(0,i)}createSimplifiedSegmentObj_(e){const i=e.segment,r=e.part,n={resolvedUri:r?r.resolvedUri:i.resolvedUri,byterange:r?r.byterange:i.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part},s=e.playlist.segments[e.mediaIndex-1];if(s&&s.timeline===i.timeline&&(s.videoTimingInfo?n.baseStartTime=s.videoTimingInfo.transmuxedDecodeEnd:s.audioTimingInfo&&(n.baseStartTime=s.audioTimingInfo.transmuxedDecodeEnd)),i.key){const a=i.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);n.key=this.segmentKey(i.key),n.key.iv=a}return i.map&&(n.map=this.initSegmentForMap(i.map)),n}saveTransferStats_(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)}saveBandwidthRelatedStats_(e,i){if(this.pendingSegment_.byteLength=i.bytesReceived,e<eu){this.logger_(`Ignoring segment's bandwidth because its duration of ${e} is less than the min to record ${eu}`);return}this.bandwidth=i.bandwidth,this.roundTrip=i.roundTripTime}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(e,i,r){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,i,r));return}if(this.saveTransferStats_(i.stats),!this.pendingSegment_||i.requestId!==this.pendingSegment_.requestId)return;if(e){if(this.pendingSegment_=null,this.state="READY",e.code===li.ABORTED)return;if(this.pause(),e.code===li.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(e),this.trigger("error");return}const n=this.pendingSegment_;this.saveBandwidthRelatedStats_(n.duration,i.stats),n.endOfAllRequests=i.endOfAllRequests,r.gopInfo&&(this.gopBuffer_=PI(this.gopBuffer_,r.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(n)}setTimeMapping_(e){const i=this.syncController_.mappingForTimeline(e);i!==null&&(this.timeMapping_=i)}updateMediaSecondsLoaded_(e){typeof e.start=="number"&&typeof e.end=="number"?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration}shouldUpdateTransmuxerTimestampOffset_(e){return e===null?!1:this.loaderType_==="main"&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset()}trueSegmentStart_({currentStart:e,playlist:i,mediaIndex:r,firstVideoFrameTimeForData:n,currentVideoTimestampOffset:s,useVideoTimingInfo:a,videoTimingInfo:o,audioTimingInfo:l}){if(typeof e<"u")return e;if(!a)return l.start;const d=i.segments[r-1];return r===0||!d||typeof d.start>"u"||d.end!==n+s?n:o.start}waitForAppendsToComplete_(e){const i=this.getCurrentMediaInfo_(e);if(!i){this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),this.trigger("error");return}const{hasAudio:r,hasVideo:n,isMuxed:s}=i,a=this.loaderType_==="main"&&n,o=!this.audioDisabled_&&r&&!s;if(e.waitingOnAppends=0,!e.hasAppendedData_){!e.timingInfo&&typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),this.checkAppendsDone_(e);return}a&&e.waitingOnAppends++,o&&e.waitingOnAppends++,a&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),o&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))}checkAppendsDone_(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,e.waitingOnAppends===0&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(e){const i=MI(this.loaderType_,this.getCurrentMediaInfo_(),e);return i?(this.error({message:i,playlistExclusionDuration:1/0}),this.trigger("error"),!0):!1}updateSourceBufferTimestampOffset_(e){if(e.timestampOffset===null||typeof e.timingInfo.start!="number"||e.changedTimestampOffset||this.loaderType_!=="main")return;let i=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),i=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),i=!0),i&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e,audioTimingInfo:i,timingInfo:r}){return this.useDtsForTimestampOffset_?e&&typeof e.transmuxedDecodeStart=="number"?e.transmuxedDecodeStart:i&&typeof i.transmuxedDecodeStart=="number"?i.transmuxedDecodeStart:r.start:r.start}updateTimingInfoEnd_(e){e.timingInfo=e.timingInfo||{};const i=this.getMediaInfo_(),n=this.loaderType_==="main"&&i&&i.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;n&&(e.timingInfo.end=typeof n.end=="number"?n.end:n.start+e.duration)}handleAppendsDone_(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}const e=this.pendingSegment_;this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:this.loaderType_==="main"});const i=jI(e,this.sourceType_);if(i&&(i.severity==="warn"?R.log.warn(i.message):this.logger_(i.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest&&(this.trigger("syncinfoupdate"),!e.hasAppendedData_)){this.logger_(`Throwing away un-appended sync request ${dn(e)}`);return}this.logger_(`Appended ${dn(e)}`),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");const r=e.segment,n=e.part,s=r.end&&this.currentTime_()-r.end>e.playlist.targetDuration*3,a=n&&n.end&&this.currentTime_()-n.end>e.playlist.partTargetDuration*3;if(s||a){this.logger_(`bad ${s?"segment":"part"} ${dn(e)}`),this.resetEverything();return}this.mediaIndex!==null&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(e){if(e.duration<eu){this.logger_(`Ignoring segment's throughput because its duration of ${e.duration} is less than the min to record ${eu}`);return}const i=this.throughput.rate,r=Date.now()-e.endOfAllRequests+1,n=Math.floor(e.byteLength/r*8*1e3);this.throughput.rate+=(n-i)/++this.throughput.count}addSegmentMetadataCue_(e){if(!this.segmentMetadataTrack_)return;const i=e.segment,r=i.start,n=i.end;if(!ey(r)||!ey(n))return;aa(r,n,this.segmentMetadataTrack_);const s=k.WebKitDataCue||k.VTTCue,a={custom:i.custom,dateTimeObject:i.dateTimeObject,dateTimeString:i.dateTimeString,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:r,end:n},o=JSON.stringify(a),l=new s(r,n,o);l.value=a,this.segmentMetadataTrack_.addCue(l)}}function Oi(){}const tx=function(t){return typeof t!="string"?t:t.replace(/./,e=>e.toUpperCase())},$I=["video","audio"],Ch=(t,e)=>{const i=e[`${t}Buffer`];return i&&i.updating||e.queuePending[t]},VI=(t,e)=>{for(let i=0;i<e.length;i++){const r=e[i];if(r.type==="mediaSource")return null;if(r.type===t)return i}return null},jn=(t,e)=>{if(e.queue.length===0)return;let i=0,r=e.queue[i];if(r.type==="mediaSource"){!e.updating()&&e.mediaSource.readyState!=="closed"&&(e.queue.shift(),r.action(e),r.doneFn&&r.doneFn(),jn("audio",e),jn("video",e));return}if(t!=="mediaSource"&&!(!e.ready()||e.mediaSource.readyState==="closed"||Ch(t,e))){if(r.type!==t){if(i=VI(t,e.queue),i===null)return;r=e.queue[i]}if(e.queue.splice(i,1),e.queuePending[t]=r,r.action(t,e),!r.doneFn){e.queuePending[t]=null,jn(t,e);return}}},ix=(t,e)=>{const i=e[`${t}Buffer`],r=tx(t);i&&(i.removeEventListener("updateend",e[`on${r}UpdateEnd_`]),i.removeEventListener("error",e[`on${r}Error_`]),e.codecs[t]=null,e[`${t}Buffer`]=null)},ri=(t,e)=>t&&e&&Array.prototype.indexOf.call(t.sourceBuffers,e)!==-1,Ct={appendBuffer:(t,e,i)=>(r,n)=>{const s=n[`${r}Buffer`];if(ri(n.mediaSource,s)){n.logger_(`Appending segment ${e.mediaIndex}'s ${t.length} bytes to ${r}Buffer`);try{s.appendBuffer(t)}catch(a){n.logger_(`Error with code ${a.code} `+(a.code===ex?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${e.mediaIndex} to ${r}Buffer`),n.queuePending[r]=null,i(a)}}},remove:(t,e)=>(i,r)=>{const n=r[`${i}Buffer`];if(ri(r.mediaSource,n)){r.logger_(`Removing ${t} to ${e} from ${i}Buffer`);try{n.remove(t,e)}catch{r.logger_(`Remove ${t} to ${e} from ${i}Buffer failed`)}}},timestampOffset:t=>(e,i)=>{const r=i[`${e}Buffer`];ri(i.mediaSource,r)&&(i.logger_(`Setting ${e}timestampOffset to ${t}`),r.timestampOffset=t)},callback:t=>(e,i)=>{t()},endOfStream:t=>e=>{if(e.mediaSource.readyState==="open"){e.logger_(`Calling mediaSource endOfStream(${t||""})`);try{e.mediaSource.endOfStream(t)}catch(i){R.log.warn("Failed to call media source endOfStream",i)}}},duration:t=>e=>{e.logger_(`Setting mediaSource duration to ${t}`);try{e.mediaSource.duration=t}catch(i){R.log.warn("Failed to set media source duration",i)}},abort:()=>(t,e)=>{if(e.mediaSource.readyState!=="open")return;const i=e[`${t}Buffer`];if(ri(e.mediaSource,i)){e.logger_(`calling abort on ${t}Buffer`);try{i.abort()}catch(r){R.log.warn(`Failed to abort on ${t}Buffer`,r)}}},addSourceBuffer:(t,e)=>i=>{const r=tx(t),n=Ua(e);i.logger_(`Adding ${t}Buffer with codec ${e} to mediaSource`);const s=i.mediaSource.addSourceBuffer(n);s.addEventListener("updateend",i[`on${r}UpdateEnd_`]),s.addEventListener("error",i[`on${r}Error_`]),i.codecs[t]=e,i[`${t}Buffer`]=s},removeSourceBuffer:t=>e=>{const i=e[`${t}Buffer`];if(ix(t,e),!!ri(e.mediaSource,i)){e.logger_(`Removing ${t}Buffer with codec ${e.codecs[t]} from mediaSource`);try{e.mediaSource.removeSourceBuffer(i)}catch(r){R.log.warn(`Failed to removeSourceBuffer ${t}Buffer`,r)}}},changeType:t=>(e,i)=>{const r=i[`${e}Buffer`],n=Ua(t);ri(i.mediaSource,r)&&i.codecs[e]!==t&&(i.logger_(`changing ${e}Buffer codec from ${i.codecs[e]} to ${t}`),r.changeType(n),i.codecs[e]=t)}},wt=({type:t,sourceUpdater:e,action:i,doneFn:r,name:n})=>{e.queue.push({type:t,action:i,doneFn:r,name:n}),jn(t,e)},ny=(t,e)=>i=>{if(e.queuePending[t]){const r=e.queuePending[t].doneFn;e.queuePending[t]=null,r&&r(e[`${t}Error_`])}jn(t,e)};class rx extends R.EventTarget{constructor(e){super(),this.mediaSource=e,this.sourceopenListener_=()=>jn("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=Zt("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=ny("video",this),this.onAudioUpdateEnd_=ny("audio",this),this.onVideoError_=i=>{this.videoError_=i},this.onAudioError_=i=>{this.audioError_=i},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(e,i){wt({type:"mediaSource",sourceUpdater:this,action:Ct.addSourceBuffer(e,i),name:"addSourceBuffer"})}abort(e){wt({type:e,sourceUpdater:this,action:Ct.abort(e),name:"abort"})}removeSourceBuffer(e){if(!this.canRemoveSourceBuffer()){R.log.error("removeSourceBuffer is not supported!");return}wt({type:"mediaSource",sourceUpdater:this,action:Ct.removeSourceBuffer(e),name:"removeSourceBuffer"})}canRemoveSourceBuffer(){return!R.browser.IE_VERSION&&!R.browser.IS_FIREFOX&&k.MediaSource&&k.MediaSource.prototype&&typeof k.MediaSource.prototype.removeSourceBuffer=="function"}static canChangeType(){return k.SourceBuffer&&k.SourceBuffer.prototype&&typeof k.SourceBuffer.prototype.changeType=="function"}canChangeType(){return this.constructor.canChangeType()}changeType(e,i){if(!this.canChangeType()){R.log.error("changeType is not supported!");return}wt({type:e,sourceUpdater:this,action:Ct.changeType(i),name:"changeType"})}addOrChangeSourceBuffers(e){if(!e||typeof e!="object"||Object.keys(e).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach(i=>{const r=e[i];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(i,r);this.canChangeType()&&this.changeType(i,r)})}appendBuffer(e,i){const{segmentInfo:r,type:n,bytes:s}=e;if(this.processedAppend_=!0,n==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([e,i]),this.logger_(`delayed audio append of ${s.length} until video append`);return}const a=i;if(wt({type:n,sourceUpdater:this,action:Ct.appendBuffer(s,r||{mediaIndex:-1},a),doneFn:i,name:"appendBuffer"}),n==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;const o=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${o.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,o.forEach(l=>{this.appendBuffer.apply(this,l)})}}audioBuffered(){return ri(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:Je()}videoBuffered(){return ri(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:Je()}buffered(){const e=ri(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,i=ri(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return i&&!e?this.audioBuffered():e&&!i?this.videoBuffered():uk(this.audioBuffered(),this.videoBuffered())}setDuration(e,i=Oi){wt({type:"mediaSource",sourceUpdater:this,action:Ct.duration(e),name:"duration",doneFn:i})}endOfStream(e=null,i=Oi){typeof e!="string"&&(e=void 0),wt({type:"mediaSource",sourceUpdater:this,action:Ct.endOfStream(e),name:"endOfStream",doneFn:i})}removeAudio(e,i,r=Oi){if(!this.audioBuffered().length||this.audioBuffered().end(0)===0){r();return}wt({type:"audio",sourceUpdater:this,action:Ct.remove(e,i),doneFn:r,name:"remove"})}removeVideo(e,i,r=Oi){if(!this.videoBuffered().length||this.videoBuffered().end(0)===0){r();return}wt({type:"video",sourceUpdater:this,action:Ct.remove(e,i),doneFn:r,name:"remove"})}updating(){return!!(Ch("audio",this)||Ch("video",this))}audioTimestampOffset(e){return typeof e<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(wt({type:"audio",sourceUpdater:this,action:Ct.timestampOffset(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_}videoTimestampOffset(e){return typeof e<"u"&&this.videoBuffer&&this.videoTimestampOffset!==e&&(wt({type:"video",sourceUpdater:this,action:Ct.timestampOffset(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_}audioQueueCallback(e){this.audioBuffer&&wt({type:"audio",sourceUpdater:this,action:Ct.callback(e),name:"callback"})}videoQueueCallback(e){this.videoBuffer&&wt({type:"video",sourceUpdater:this,action:Ct.callback(e),name:"callback"})}dispose(){this.trigger("dispose"),$I.forEach(e=>{this.abort(e),this.canRemoveSourceBuffer()?this.removeSourceBuffer(e):this[`${e}QueueCallback`](()=>ix(e,this))}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}}const sy=t=>decodeURIComponent(escape(String.fromCharCode.apply(null,t))),ay=new Uint8Array(`

`.split("").map(t=>t.charCodeAt(0)));class HI extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}}class qI extends bh{constructor(e,i={}){super(e,i),this.mediaSource_=null,this.subtitlesTrack_=null,this.loaderType_="subtitle",this.featuresNativeTextTracks_=e.featuresNativeTextTracks,this.loadVttJs=e.loadVttJs,this.shouldSaveSegmentTimingInfo_=!1}createTransmuxer_(){return null}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return Je();const e=this.subtitlesTrack_.cues,i=e[0].startTime,r=e[e.length-1].startTime;return Je([[i,r]])}initSegmentForMap(e,i=!1){if(!e)return null;const r=ol(e);let n=this.initSegments_[r];if(i&&!n&&e.bytes){const s=ay.byteLength+e.bytes.byteLength,a=new Uint8Array(s);a.set(e.bytes),a.set(ay,e.bytes.byteLength),this.initSegments_[r]=n={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:a}}return n||e}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(e){return typeof e>"u"?this.subtitlesTrack_:(this.subtitlesTrack_=e,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)}remove(e,i){aa(e,i,this.subtitlesTrack_)}fillBuffer_(){const e=this.chooseNextRequest_();if(e){if(this.syncController_.timestampOffsetForTimeline(e.timeline)===null){const i=()=>{this.state="READY",this.paused()||this.monitorBuffer_()};this.syncController_.one("timestampoffset",i),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(e)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e}stopForError(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(e,i,r){if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(i.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(e){e.code===li.TIMEOUT&&this.handleTimeout_(),e.code===li.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(e);return}const n=this.pendingSegment_;this.saveBandwidthRelatedStats_(n.duration,i.stats),i.key&&this.segmentKey(i.key,!0),this.state="APPENDING",this.trigger("appending");const s=n.segment;if(s.map&&(s.map.bytes=i.map.bytes),n.bytes=i.bytes,typeof k.WebVTT!="function"&&typeof this.loadVttJs=="function"){this.state="WAITING_ON_VTTJS",this.loadVttJs().then(()=>this.segmentRequestFinished_(e,i,r),()=>this.stopForError({message:"Error loading vtt.js"}));return}s.requested=!0;try{this.parseVTTCues_(n)}catch(a){this.stopForError({message:a.message});return}if(this.updateTimeMapping_(n,this.syncController_.timelines[n.timeline],this.playlist_),n.cues.length?n.timingInfo={start:n.cues[0].startTime,end:n.cues[n.cues.length-1].endTime}:n.timingInfo={start:n.startOfSegment,end:n.startOfSegment+n.duration},n.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}n.byteLength=n.bytes.byteLength,this.mediaSecondsLoaded+=s.duration,n.cues.forEach(a=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new k.VTTCue(a.startTime,a.endTime,a.text):a)}),kI(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(){}updateTimingInfoEnd_(){}parseVTTCues_(e){let i,r=!1;if(typeof k.WebVTT!="function")throw new HI;typeof k.TextDecoder=="function"?i=new k.TextDecoder("utf8"):(i=k.WebVTT.StringDecoder(),r=!0);const n=new k.WebVTT.Parser(k,k.vttjs,i);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},n.oncue=e.cues.push.bind(e.cues),n.ontimestampmap=a=>{e.timestampmap=a},n.onparsingerror=a=>{R.log.warn("Error encountered when parsing cues: "+a.message)},e.segment.map){let a=e.segment.map.bytes;r&&(a=sy(a)),n.parse(a)}let s=e.bytes;r&&(s=sy(s)),n.parse(s),n.flush()}updateTimeMapping_(e,i,r){const n=e.segment;if(!i)return;if(!e.cues.length){n.empty=!0;return}const s=e.timestampmap,a=s.MPEGTS/Wu.ONE_SECOND_IN_TS-s.LOCAL+i.mapping;if(e.cues.forEach(o=>{o.startTime+=a,o.endTime+=a}),!r.syncInfo){const o=e.cues[0].startTime,l=e.cues[e.cues.length-1].startTime;r.syncInfo={mediaSequence:r.mediaSequence+e.mediaIndex,time:Math.min(o,l-n.duration)}}}}const zI=function(t,e){const i=t.cues;for(let r=0;r<i.length;r++){const n=i[r];if(e>=n.adStartTime&&e<=n.adEndTime)return n}return null},GI=function(t,e,i=0){if(!t.segments)return;let r=i,n;for(let s=0;s<t.segments.length;s++){const a=t.segments[s];if(n||(n=zI(e,r+a.duration/2)),n){if("cueIn"in a){n.endTime=r,n.adEndTime=r,r+=a.duration,n=null;continue}if(r<n.endTime){r+=a.duration;continue}n.endTime+=a.duration}else if("cueOut"in a&&(n=new k.VTTCue(r,r+a.duration,a.cueOut),n.adStartTime=r,n.adEndTime=r+parseFloat(a.cueOut),e.addCue(n)),"cueOutCont"in a){const[o,l]=a.cueOutCont.split("/").map(parseFloat);n=new k.VTTCue(r,r+a.duration,""),n.adStartTime=r-o,n.adEndTime=n.adStartTime+l,e.addCue(n)}r+=a.duration}},WI=86400,oy=[{name:"VOD",run:(t,e,i,r,n)=>i!==1/0?{time:0,segmentIndex:0,partIndex:null}:null},{name:"ProgramDateTime",run:(t,e,i,r,n)=>{if(!Object.keys(t.timelineToDatetimeMappings).length)return null;let s=null,a=null;const o=gh(e);n=n||0;for(let l=0;l<o.length;l++){const d=e.endList||n===0?l:o.length-(l+1),m=o[d],y=m.segment,v=t.timelineToDatetimeMappings[y.timeline];if(!v||!y.dateTimeObject)continue;let S=y.dateTimeObject.getTime()/1e3+v;if(y.parts&&typeof m.partIndex=="number")for(let T=0;T<m.partIndex;T++)S+=y.parts[T].duration;const A=Math.abs(n-S);if(a!==null&&(A===0||a<A))break;a=A,s={time:S,segmentIndex:m.segmentIndex,partIndex:m.partIndex}}return s}},{name:"Segment",run:(t,e,i,r,n)=>{let s=null,a=null;n=n||0;const o=gh(e);for(let l=0;l<o.length;l++){const d=e.endList||n===0?l:o.length-(l+1),m=o[d],y=m.segment,v=m.part&&m.part.start||y&&y.start;if(y.timeline===r&&typeof v<"u"){const b=Math.abs(n-v);if(a!==null&&a<b)break;(!s||a===null||a>=b)&&(a=b,s={time:v,segmentIndex:m.segmentIndex,partIndex:m.partIndex})}}return s}},{name:"Discontinuity",run:(t,e,i,r,n)=>{let s=null;if(n=n||0,e.discontinuityStarts&&e.discontinuityStarts.length){let a=null;for(let o=0;o<e.discontinuityStarts.length;o++){const l=e.discontinuityStarts[o],d=e.discontinuitySequence+o+1,m=t.discontinuities[d];if(m){const y=Math.abs(n-m.time);if(a!==null&&a<y)break;(!s||a===null||a>=y)&&(a=y,s={time:m.time,segmentIndex:l,partIndex:null})}}}return s}},{name:"Playlist",run:(t,e,i,r,n)=>e.syncInfo?{time:e.syncInfo.time,segmentIndex:e.syncInfo.mediaSequence-e.mediaSequence,partIndex:null}:null}];class XI extends R.EventTarget{constructor(e={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={},this.logger_=Zt("SyncController")}getSyncPoint(e,i,r,n){const s=this.runStrategies_(e,i,r,n);return s.length?this.selectSyncPoint_(s,{key:"time",value:n}):null}getExpiredTime(e,i){if(!e||!e.segments)return null;const r=this.runStrategies_(e,i,e.discontinuitySequence,0);if(!r.length)return null;const n=this.selectSyncPoint_(r,{key:"segmentIndex",value:0});return n.segmentIndex>0&&(n.time*=-1),Math.abs(n.time+Ea({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:n.segmentIndex,endIndex:0}))}runStrategies_(e,i,r,n){const s=[];for(let a=0;a<oy.length;a++){const o=oy[a],l=o.run(this,e,i,r,n);l&&(l.strategy=o.name,s.push({strategy:o.name,syncPoint:l}))}return s}selectSyncPoint_(e,i){let r=e[0].syncPoint,n=Math.abs(e[0].syncPoint[i.key]-i.value),s=e[0].strategy;for(let a=1;a<e.length;a++){const o=Math.abs(e[a].syncPoint[i.key]-i.value);o<n&&(n=o,r=e[a].syncPoint,s=e[a].strategy)}return this.logger_(`syncPoint for [${i.key}: ${i.value}] chosen with strategy [${s}]: [time:${r.time}, segmentIndex:${r.segmentIndex}`+(typeof r.partIndex=="number"?`,partIndex:${r.partIndex}`:"")+"]"),r}saveExpiredSegmentInfo(e,i){const r=i.mediaSequence-e.mediaSequence;if(r>WI){R.log.warn(`Not saving expired segment info. Media sequence gap ${r} is too large.`);return}for(let n=r-1;n>=0;n--){const s=e.segments[n];if(s&&typeof s.start<"u"){i.syncInfo={mediaSequence:e.mediaSequence+n,time:s.start},this.logger_(`playlist refresh sync: [time:${i.syncInfo.time}, mediaSequence: ${i.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){const i=e.segments[0],r=i.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[i.timeline]=-r}}saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:i}){const r=this.calculateSegmentTimeMapping_(e,e.timingInfo,i),n=e.segment;r&&(this.saveDiscontinuitySyncInfo_(e),e.playlist.syncInfo||(e.playlist.syncInfo={mediaSequence:e.playlist.mediaSequence+e.mediaIndex,time:n.start}));const s=n.dateTimeObject;n.discontinuity&&i&&s&&(this.timelineToDatetimeMappings[n.timeline]=-(s.getTime()/1e3))}timestampOffsetForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].time}mappingForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].mapping}calculateSegmentTimeMapping_(e,i,r){const n=e.segment,s=e.part;let a=this.timelines[e.timeline],o,l;if(typeof e.timestampOffset=="number")a={time:e.startOfSegment,mapping:e.startOfSegment-i.start},r&&(this.timelines[e.timeline]=a,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${e.timeline}: [time: ${a.time}] [mapping: ${a.mapping}]`)),o=e.startOfSegment,l=i.end+a.mapping;else if(a)o=i.start+a.mapping,l=i.end+a.mapping;else return!1;return s&&(s.start=o,s.end=l),(!n.start||o<n.start)&&(n.start=o),n.end=l,!0}saveDiscontinuitySyncInfo_(e){const i=e.playlist,r=e.segment;if(r.discontinuity)this.discontinuities[r.timeline]={time:r.start,accuracy:0};else if(i.discontinuityStarts&&i.discontinuityStarts.length)for(let n=0;n<i.discontinuityStarts.length;n++){const s=i.discontinuityStarts[n],a=i.discontinuitySequence+n+1,o=s-e.mediaIndex,l=Math.abs(o);if(!this.discontinuities[a]||this.discontinuities[a].accuracy>l){let d;o<0?d=r.start-Ea({defaultDuration:i.targetDuration,durationList:i.segments,startIndex:e.mediaIndex,endIndex:s}):d=r.end+Ea({defaultDuration:i.targetDuration,durationList:i.segments,startIndex:e.mediaIndex+1,endIndex:s}),this.discontinuities[a]={time:d,accuracy:l}}}}dispose(){this.trigger("dispose"),this.off()}}class KI extends R.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:e,from:i,to:r}){return typeof i=="number"&&typeof r=="number"&&(this.pendingTimelineChanges_[e]={type:e,from:i,to:r},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[e]}lastTimelineChange({type:e,from:i,to:r}){return typeof i=="number"&&typeof r=="number"&&(this.lastTimelineChanges_[e]={type:e,from:i,to:r},delete this.pendingTimelineChanges_[e],this.trigger("timelinechange")),this.lastTimelineChanges_[e]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}}const YI=H2(q2(function(){var t=function(){function A(){this.listeners={}}var T=A.prototype;return T.on=function(x,I){this.listeners[x]||(this.listeners[x]=[]),this.listeners[x].push(I)},T.off=function(x,I){if(!this.listeners[x])return!1;var D=this.listeners[x].indexOf(I);return this.listeners[x]=this.listeners[x].slice(0),this.listeners[x].splice(D,1),D>-1},T.trigger=function(x){var I=this.listeners[x];if(I)if(arguments.length===2)for(var D=I.length,O=0;O<D;++O)I[O].call(this,arguments[1]);else for(var N=Array.prototype.slice.call(arguments,1),U=I.length,H=0;H<U;++H)I[H].apply(this,N)},T.dispose=function(){this.listeners={}},T.pipe=function(x){this.on("data",function(I){x.push(I)})},A}();/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */function e(A){return A.subarray(0,A.byteLength-A[A.byteLength-1])}/*! @name aes-decrypter @version 4.0.1 @license Apache-2.0 */const i=function(){const A=[[[],[],[],[],[]],[[],[],[],[],[]]],T=A[0],_=A[1],x=T[4],I=_[4];let D,O,N;const U=[],H=[];let j,ee,oe,se,z,ue;for(D=0;D<256;D++)H[(U[D]=D<<1^(D>>7)*283)^D]=D;for(O=N=0;!x[O];O^=j||1,N=H[N]||1)for(se=N^N<<1^N<<2^N<<3^N<<4,se=se>>8^se&255^99,x[O]=se,I[se]=O,oe=U[ee=U[j=U[O]]],ue=oe*16843009^ee*65537^j*257^O*16843008,z=U[se]*257^se*16843008,D=0;D<4;D++)T[D][O]=z=z<<24^z>>>8,_[D][se]=ue=ue<<24^ue>>>8;for(D=0;D<5;D++)T[D]=T[D].slice(0),_[D]=_[D].slice(0);return A};let r=null;class n{constructor(T){r||(r=i()),this._tables=[[r[0][0].slice(),r[0][1].slice(),r[0][2].slice(),r[0][3].slice(),r[0][4].slice()],[r[1][0].slice(),r[1][1].slice(),r[1][2].slice(),r[1][3].slice(),r[1][4].slice()]];let _,x,I;const D=this._tables[0][4],O=this._tables[1],N=T.length;let U=1;if(N!==4&&N!==6&&N!==8)throw new Error("Invalid aes key size");const H=T.slice(0),j=[];for(this._key=[H,j],_=N;_<4*N+28;_++)I=H[_-1],(_%N===0||N===8&&_%N===4)&&(I=D[I>>>24]<<24^D[I>>16&255]<<16^D[I>>8&255]<<8^D[I&255],_%N===0&&(I=I<<8^I>>>24^U<<24,U=U<<1^(U>>7)*283)),H[_]=H[_-N]^I;for(x=0;_;x++,_--)I=H[x&3?_:_-4],_<=4||x<4?j[x]=I:j[x]=O[0][D[I>>>24]]^O[1][D[I>>16&255]]^O[2][D[I>>8&255]]^O[3][D[I&255]]}decrypt(T,_,x,I,D,O){const N=this._key[1];let U=T^N[0],H=I^N[1],j=x^N[2],ee=_^N[3],oe,se,z;const ue=N.length/4-2;let Oe,ae=4;const Te=this._tables[1],bt=Te[0],qt=Te[1],Ei=Te[2],q=Te[3],K=Te[4];for(Oe=0;Oe<ue;Oe++)oe=bt[U>>>24]^qt[H>>16&255]^Ei[j>>8&255]^q[ee&255]^N[ae],se=bt[H>>>24]^qt[j>>16&255]^Ei[ee>>8&255]^q[U&255]^N[ae+1],z=bt[j>>>24]^qt[ee>>16&255]^Ei[U>>8&255]^q[H&255]^N[ae+2],ee=bt[ee>>>24]^qt[U>>16&255]^Ei[H>>8&255]^q[j&255]^N[ae+3],ae+=4,U=oe,H=se,j=z;for(Oe=0;Oe<4;Oe++)D[(3&-Oe)+O]=K[U>>>24]<<24^K[H>>16&255]<<16^K[j>>8&255]<<8^K[ee&255]^N[ae++],oe=U,U=H,H=j,j=ee,ee=oe}}class s extends t{constructor(){super(t),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}push(T){this.jobs.push(T),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}const a=function(A){return A<<24|(A&65280)<<8|(A&16711680)>>8|A>>>24},o=function(A,T,_){const x=new Int32Array(A.buffer,A.byteOffset,A.byteLength>>2),I=new n(Array.prototype.slice.call(T)),D=new Uint8Array(A.byteLength),O=new Int32Array(D.buffer);let N,U,H,j,ee,oe,se,z,ue;for(N=_[0],U=_[1],H=_[2],j=_[3],ue=0;ue<x.length;ue+=4)ee=a(x[ue]),oe=a(x[ue+1]),se=a(x[ue+2]),z=a(x[ue+3]),I.decrypt(ee,oe,se,z,O,ue),O[ue]=a(O[ue]^N),O[ue+1]=a(O[ue+1]^U),O[ue+2]=a(O[ue+2]^H),O[ue+3]=a(O[ue+3]^j),N=ee,U=oe,H=se,j=z;return D};class l{constructor(T,_,x,I){const D=l.STEP,O=new Int32Array(T.buffer),N=new Uint8Array(T.byteLength);let U=0;for(this.asyncStream_=new s,this.asyncStream_.push(this.decryptChunk_(O.subarray(U,U+D),_,x,N)),U=D;U<O.length;U+=D)x=new Uint32Array([a(O[U-4]),a(O[U-3]),a(O[U-2]),a(O[U-1])]),this.asyncStream_.push(this.decryptChunk_(O.subarray(U,U+D),_,x,N));this.asyncStream_.push(function(){I(null,e(N))})}static get STEP(){return 32e3}decryptChunk_(T,_,x,I){return function(){const D=o(T,_,x);I.set(D,T.byteOffset)}}}var d=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},m;typeof window<"u"?m=window:typeof d<"u"?m=d:typeof self<"u"?m=self:m={};var y=m,v=function(T){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(T):T&&T.buffer instanceof ArrayBuffer},b=y.BigInt||Number;b("0x1"),b("0x100"),b("0x10000"),b("0x1000000"),b("0x100000000"),b("0x10000000000"),b("0x1000000000000"),b("0x100000000000000"),b("0x10000000000000000"),function(){var A=new Uint16Array([65484]),T=new Uint8Array(A.buffer,A.byteOffset,A.byteLength);return T[0]===255?"big":T[0]===204?"little":"unknown"}();const S=function(A){const T={};return Object.keys(A).forEach(_=>{const x=A[_];v(x)?T[_]={bytes:x.buffer,byteOffset:x.byteOffset,byteLength:x.byteLength}:T[_]=x}),T};self.onmessage=function(A){const T=A.data,_=new Uint8Array(T.encrypted.bytes,T.encrypted.byteOffset,T.encrypted.byteLength),x=new Uint32Array(T.key.bytes,T.key.byteOffset,T.key.byteLength/4),I=new Uint32Array(T.iv.bytes,T.iv.byteOffset,T.iv.byteLength/4);new l(_,x,I,function(D,O){self.postMessage(S({source:T.source,decrypted:O}),[O.buffer])})}}));var QI=V2(YI);const JI=t=>{let e=t.default?"main":"alternative";return t.characteristics&&t.characteristics.indexOf("public.accessibility.describes-video")>=0&&(e="main-desc"),e},dl=(t,e)=>{t.abort(),t.pause(),e&&e.activePlaylistLoader&&(e.activePlaylistLoader.pause(),e.activePlaylistLoader=null)},wh=(t,e)=>{e.activePlaylistLoader=t,t.load()},ZI=(t,e)=>()=>{const{segmentLoaders:{[t]:i,main:r},mediaTypes:{[t]:n}}=e,s=n.activeTrack(),a=n.getActiveGroup(),o=n.activePlaylistLoader,l=n.lastGroup_;if(!(a&&l&&a.id===l.id)&&(n.lastGroup_=a,n.lastTrack_=s,dl(i,n),!(!a||a.isMainPlaylist))){if(!a.playlistLoader){o&&r.resetEverything();return}i.resyncLoader(),wh(a.playlistLoader,n)}},eP=(t,e)=>()=>{const{segmentLoaders:{[t]:i},mediaTypes:{[t]:r}}=e;r.lastGroup_=null,i.abort(),i.pause()},tP=(t,e)=>()=>{const{mainPlaylistLoader:i,segmentLoaders:{[t]:r,main:n},mediaTypes:{[t]:s}}=e,a=s.activeTrack(),o=s.getActiveGroup(),l=s.activePlaylistLoader,d=s.lastTrack_;if(!(d&&a&&d.id===a.id)&&(s.lastGroup_=o,s.lastTrack_=a,dl(r,s),!!o)){if(o.isMainPlaylist){if(!a||!d||a.id===d.id)return;const m=e.vhs.playlistController_,y=m.selectPlaylist();if(m.media()===y)return;s.logger_(`track change. Switching main audio from ${d.id} to ${a.id}`),i.pause(),n.resetEverything(),m.fastQualityChange_(y);return}if(t==="AUDIO"){if(!o.playlistLoader){n.setAudio(!0),n.resetEverything();return}r.setAudio(!0),n.setAudio(!1)}if(l===o.playlistLoader){wh(o.playlistLoader,s);return}r.track&&r.track(a),r.resetEverything(),wh(o.playlistLoader,s)}},hl={AUDIO:(t,e)=>()=>{const{segmentLoaders:{[t]:i},mediaTypes:{[t]:r},excludePlaylist:n}=e;dl(i,r);const s=r.activeTrack(),a=r.activeGroup(),o=(a.filter(d=>d.default)[0]||a[0]).id,l=r.tracks[o];if(s===l){n({error:{message:"Problem encountered loading the default audio track."}});return}R.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(const d in r.tracks)r.tracks[d].enabled=r.tracks[d]===l;r.onTrackChanged()},SUBTITLES:(t,e)=>()=>{const{segmentLoaders:{[t]:i},mediaTypes:{[t]:r}}=e;R.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),dl(i,r);const n=r.activeTrack();n&&(n.mode="disabled"),r.onTrackChanged()}},uy={AUDIO:(t,e,i)=>{if(!e)return;const{tech:r,requestOptions:n,segmentLoaders:{[t]:s}}=i;e.on("loadedmetadata",()=>{const a=e.media();s.playlist(a,n),(!r.paused()||a.endList&&r.preload()!=="none")&&s.load()}),e.on("loadedplaylist",()=>{s.playlist(e.media(),n),r.paused()||s.load()}),e.on("error",hl[t](t,i))},SUBTITLES:(t,e,i)=>{const{tech:r,requestOptions:n,segmentLoaders:{[t]:s},mediaTypes:{[t]:a}}=i;e.on("loadedmetadata",()=>{const o=e.media();s.playlist(o,n),s.track(a.activeTrack()),(!r.paused()||o.endList&&r.preload()!=="none")&&s.load()}),e.on("loadedplaylist",()=>{s.playlist(e.media(),n),r.paused()||s.load()}),e.on("error",hl[t](t,i))}},iP={AUDIO:(t,e)=>{const{vhs:i,sourceType:r,segmentLoaders:{[t]:n},requestOptions:s,main:{mediaGroups:a},mediaTypes:{[t]:{groups:o,tracks:l,logger_:d}},mainPlaylistLoader:m}=e,y=uo(m.main);(!a[t]||Object.keys(a[t]).length===0)&&(a[t]={main:{default:{default:!0}}},y&&(a[t].main.default.playlists=m.main.playlists));for(const v in a[t]){o[v]||(o[v]=[]);for(const b in a[t][v]){let S=a[t][v][b],A;if(y?(d(`AUDIO group '${v}' label '${b}' is a main playlist`),S.isMainPlaylist=!0,A=null):r==="vhs-json"&&S.playlists?A=new En(S.playlists[0],i,s):S.resolvedUri?A=new En(S.resolvedUri,i,s):S.playlists&&r==="dash"?A=new Sh(S.playlists[0],i,s,m):A=null,S=ve({id:b,playlistLoader:A},S),uy[t](t,S.playlistLoader,e),o[v].push(S),typeof l[b]>"u"){const T=new R.AudioTrack({id:b,kind:JI(S),enabled:!1,language:S.language,default:S.default,label:b});l[b]=T}}}n.on("error",hl[t](t,e))},SUBTITLES:(t,e)=>{const{tech:i,vhs:r,sourceType:n,segmentLoaders:{[t]:s},requestOptions:a,main:{mediaGroups:o},mediaTypes:{[t]:{groups:l,tracks:d}},mainPlaylistLoader:m}=e;for(const y in o[t]){l[y]||(l[y]=[]);for(const v in o[t][y]){if(o[t][y][v].forced)continue;let b=o[t][y][v],S;if(n==="hls")S=new En(b.resolvedUri,r,a);else if(n==="dash"){if(!b.playlists.filter(T=>T.excludeUntil!==1/0).length)return;S=new Sh(b.playlists[0],r,a,m)}else n==="vhs-json"&&(S=new En(b.playlists?b.playlists[0]:b.resolvedUri,r,a));if(b=ve({id:v,playlistLoader:S},b),uy[t](t,b.playlistLoader,e),l[y].push(b),typeof d[v]>"u"){const A=i.addRemoteTextTrack({id:v,kind:"subtitles",default:b.default&&b.autoselect,language:b.language,label:v},!1).track;d[v]=A}}}s.on("error",hl[t](t,e))},"CLOSED-CAPTIONS":(t,e)=>{const{tech:i,main:{mediaGroups:r},mediaTypes:{[t]:{groups:n,tracks:s}}}=e;for(const a in r[t]){n[a]||(n[a]=[]);for(const o in r[t][a]){const l=r[t][a][o];if(!/^(?:CC|SERVICE)/.test(l.instreamId))continue;const d=i.options_.vhs&&i.options_.vhs.captionServices||{};let m={label:o,language:l.language,instreamId:l.instreamId,default:l.default&&l.autoselect};if(d[m.instreamId]&&(m=ve(m,d[m.instreamId])),m.default===void 0&&delete m.default,n[a].push(ve({id:o},l)),typeof s[o]>"u"){const y=i.addRemoteTextTrack({id:m.instreamId,kind:"captions",default:m.default,language:m.language,label:m.label},!1).track;s[o]=y}}}}},nx=(t,e)=>{for(let i=0;i<t.length;i++)if(Ep(e,t[i])||t[i].playlists&&nx(t[i].playlists,e))return!0;return!1},rP=(t,e)=>i=>{const{mainPlaylistLoader:r,mediaTypes:{[t]:{groups:n}}}=e,s=r.media();if(!s)return null;let a=null;s.attributes[t]&&(a=n[s.attributes[t]]);const o=Object.keys(n);if(!a)if(t==="AUDIO"&&o.length>1&&uo(e.main))for(let l=0;l<o.length;l++){const d=n[o[l]];if(nx(d,s)){a=d;break}}else n.main?a=n.main:o.length===1&&(a=n[o[0]]);return typeof i>"u"?a:i===null||!a?null:a.filter(l=>l.id===i.id)[0]||null},nP={AUDIO:(t,e)=>()=>{const{mediaTypes:{[t]:{tracks:i}}}=e;for(const r in i)if(i[r].enabled)return i[r];return null},SUBTITLES:(t,e)=>()=>{const{mediaTypes:{[t]:{tracks:i}}}=e;for(const r in i)if(i[r].mode==="showing"||i[r].mode==="hidden")return i[r];return null}},sP=(t,{mediaTypes:e})=>()=>{const i=e[t].activeTrack();return i?e[t].activeGroup(i):null},aP=t=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(d=>{iP[d](d,t)});const{mediaTypes:e,mainPlaylistLoader:i,tech:r,vhs:n,segmentLoaders:{["AUDIO"]:s,main:a}}=t;["AUDIO","SUBTITLES"].forEach(d=>{e[d].activeGroup=rP(d,t),e[d].activeTrack=nP[d](d,t),e[d].onGroupChanged=ZI(d,t),e[d].onGroupChanging=eP(d,t),e[d].onTrackChanged=tP(d,t),e[d].getActiveGroup=sP(d,t)});const o=e.AUDIO.activeGroup();if(o){const d=(o.filter(y=>y.default)[0]||o[0]).id;e.AUDIO.tracks[d].enabled=!0,e.AUDIO.onGroupChanged(),e.AUDIO.onTrackChanged(),e.AUDIO.getActiveGroup().playlistLoader?(a.setAudio(!1),s.setAudio(!0)):a.setAudio(!0)}i.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(d=>e[d].onGroupChanged())}),i.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(d=>e[d].onGroupChanging())});const l=()=>{e.AUDIO.onTrackChanged(),r.trigger({type:"usage",name:"vhs-audio-change"})};r.audioTracks().addEventListener("change",l),r.remoteTextTracks().addEventListener("change",e.SUBTITLES.onTrackChanged),n.on("dispose",()=>{r.audioTracks().removeEventListener("change",l),r.remoteTextTracks().removeEventListener("change",e.SUBTITLES.onTrackChanged)}),r.clearTracks("audio");for(const d in e.AUDIO.tracks)r.audioTracks().addTrack(e.AUDIO.tracks[d])},oP=()=>{const t={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{t[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Oi,activeTrack:Oi,getActiveGroup:Oi,onGroupChanged:Oi,onTrackChanged:Oi,lastTrack_:null,logger_:Zt(`MediaGroups[${e}]`)}}),t},uP=60*2;let Di;const lP=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],cP=function(t){return this.audioSegmentLoader_[t]+this.mainSegmentLoader_[t]},dP=function({currentPlaylist:t,buffered:e,currentTime:i,nextPlaylist:r,bufferLowWaterLine:n,bufferHighWaterLine:s,duration:a,bufferBasedABR:o,log:l}){if(!r)return R.log.warn("We received no playlist to switch to. Please check your stream."),!1;const d=`allowing switch ${t&&t.id||"null"} -> ${r.id}`;if(!t)return l(`${d} as current playlist is not set`),!0;if(r.id===t.id)return!1;const m=!!Sn(e,i).length;if(!t.endList)return!m&&typeof t.partTargetDuration=="number"?(l(`not ${d} as current playlist is live llhls, but currentTime isn't in buffered.`),!1):(l(`${d} as current playlist is live`),!0);const y=Tp(e,i),v=o?Ve.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Ve.MAX_BUFFER_LOW_WATER_LINE;if(a<v)return l(`${d} as duration < max low water line (${a} < ${v})`),!0;const b=r.attributes.BANDWIDTH,S=t.attributes.BANDWIDTH;if(b<S&&(!o||y<s)){let A=`${d} as next bandwidth < current bandwidth (${b} < ${S})`;return o&&(A+=` and forwardBuffer < bufferHighWaterLine (${y} < ${s})`),l(A),!0}if((!o||b>S)&&y>=n){let A=`${d} as forwardBuffer >= bufferLowWaterLine (${y} >= ${n})`;return o&&(A+=` and next bandwidth > current bandwidth (${b} > ${S})`),l(A),!0}return l(`not ${d} as no switching criteria met`),!1};class hP extends R.EventTarget{constructor(e){super();const{src:i,withCredentials:r,tech:n,bandwidth:s,externVhs:a,useCueTags:o,playlistExclusionDuration:l,enableLowInitialPlaylist:d,sourceType:m,cacheEncryptionKeys:y,bufferBasedABR:v,leastPixelDiffSelector:b,captionServices:S}=e;if(!i)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:A}=e;(A===null||typeof A>"u")&&(A=1/0),Di=a,this.bufferBasedABR=!!v,this.leastPixelDiffSelector=!!b,this.withCredentials=r,this.tech_=n,this.vhs_=n.vhs,this.sourceType_=m,this.useCueTags_=o,this.playlistExclusionDuration=l,this.maxPlaylistRetries=A,this.enableLowInitialPlaylist=d,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:r,maxPlaylistRetries:A,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=oP(),this.mediaSource=new k.MediaSource,this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.seekable_=Je(),this.hasPlayed_=!1,this.syncController_=new XI(e),this.segmentMetadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.decrypter_=new QI,this.sourceUpdater_=new rx(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new KI;const T={vhs:this.vhs_,parse708captions:e.parse708captions,useDtsForTimestampOffset:e.useDtsForTimestampOffset,captionServices:S,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:s,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:y,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:e.exactManifestTimings};this.mainPlaylistLoader_=this.sourceType_==="dash"?new Sh(i,this.vhs_,this.requestOptions_):new En(i,this.vhs_,this.requestOptions_),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new bh(ve(T,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),e),this.audioSegmentLoader_=new bh(ve(T,{loaderType:"audio"}),e),this.subtitleSegmentLoader_=new qI(ve(T,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:()=>new Promise((x,I)=>{function D(){n.off("vttjserror",O),x()}function O(){n.off("vttjsloaded",D),I()}n.one("vttjsloaded",D),n.one("vttjserror",O),n.addWebVttScript_()})}),e),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",()=>this.stopABRTimer_()),this.tech_.on("play",()=>this.startABRTimer_())),lP.forEach(x=>{this[x+"_"]=cP.bind(this,x)}),this.logger_=Zt("pc"),this.triggeredFmp4Usage=!1,this.tech_.preload()==="none"?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;const _=this.tech_.preload()==="none"?"play":"loadstart";this.tech_.one(_,()=>{const x=Date.now();this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-x,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){const e=this.mainAppendsToLoadedData_(),i=this.audioAppendsToLoadedData_();return e===-1||i===-1?-1:e+i}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(e="abr"){const i=this.selectPlaylist();i&&this.shouldSwitchToMedia_(i)&&this.switchMedia_(i,e)}switchMedia_(e,i,r){const n=this.media(),s=n&&(n.id||n.uri),a=e.id||e.uri;s&&s!==a&&(this.logger_(`switch media ${s} -> ${a} from ${i}`),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${i}`})),this.mainPlaylistLoader_.media(e,r)}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=k.setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(k.clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){const e=this.main(),i=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return i;const r=e.mediaGroups.AUDIO,n=Object.keys(r);let s;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)s=this.mediaTypes_.AUDIO.activeTrack();else{const o=r.main||n.length&&r[n[0]];for(const l in o)if(o[l].default){s={label:l};break}}if(!s)return i;const a=[];for(const o in r)if(r[o][s.label]){const l=r[o][s.label];if(l.playlists&&l.playlists.length)a.push.apply(a,l.playlists);else if(l.uri)a.push(l);else if(e.playlists.length)for(let d=0;d<e.playlists.length;d++){const m=e.playlists[d];m.attributes&&m.attributes.AUDIO&&m.attributes.AUDIO===o&&a.push(m)}}return a.length?a:i}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{const e=this.mainPlaylistLoader_.media(),i=e.targetDuration*1.5*1e3;yh(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=i,e.endList&&this.tech_.preload()!=="none"&&(this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.mainSegmentLoader_.load()),aP({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),e),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})}),this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let e=this.mainPlaylistLoader_.media();if(!e){this.excludeUnsupportedVariants_();let i;if(this.enableLowInitialPlaylist&&(i=this.selectInitialPlaylist()),i||(i=this.selectPlaylist()),!i||!this.shouldSwitchToMedia_(i)||(this.initialMedia_=i,this.switchMedia_(this.initialMedia_,"initial"),!(this.sourceType_==="vhs-json"&&this.initialMedia_.segments)))return;e=this.initialMedia_}this.handleUpdatedMediaPlaylist(e)}),this.mainPlaylistLoader_.on("error",()=>{const e=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:e.playlist,error:e})}),this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()}),this.mainPlaylistLoader_.on("mediachange",()=>{const e=this.mainPlaylistLoader_.media(),i=e.targetDuration*1.5*1e3;yh(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=i,this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})}),this.mainPlaylistLoader_.on("playlistunchanged",()=>{const e=this.mainPlaylistLoader_.media();if(e.lastExcludeReason_==="playlist-unchanged")return;this.stuckAtPlaylistEnd_(e)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))}),this.mainPlaylistLoader_.on("renditiondisabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})}),this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})})}handleUpdatedMediaPlaylist(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(e,i){const r=e.mediaGroups||{};let n=!0;const s=Object.keys(r.AUDIO);for(const a in r.AUDIO)for(const o in r.AUDIO[a])r.AUDIO[a][o].uri||(n=!1);n&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(r.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),Di.Playlist.isAes(i)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),s.length&&Object.keys(r.AUDIO[s[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(e){const i=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,r=this.tech_.currentTime(),n=this.bufferLowWaterLine(),s=this.bufferHighWaterLine(),a=this.tech_.buffered();return dP({buffered:a,currentTime:r,currentPlaylist:i,nextPlaylist:e,bufferLowWaterLine:n,bufferHighWaterLine:s,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()}),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")}),this.mainSegmentLoader_.on("error",()=>{const i=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:i.playlist,error:i})}),this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended"),this.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",i=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:uP}))});const e=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();const i=this.getCodecsOrExclude_();i&&this.sourceUpdater_.addOrChangeSourceBuffers(i)};this.mainSegmentLoader_.on("trackinfo",e),this.audioSegmentLoader_.on("trackinfo",e),this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}fastQualityChange_(e=this.selectPlaylist()){if(e===this.mainPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(e,"fast-quality"),this.mainSegmentLoader_.resetEverything(()=>{R.browser.IE_VERSION||R.browser.IS_EDGE?this.tech_.setCurrentTime(this.tech_.currentTime()+.04):this.tech_.setCurrentTime(this.tech_.currentTime())})}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();const e=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0))return this.tech_.setCurrentTime(e.end(e.length-1))}setupFirstPlay(){const e=this.mainPlaylistLoader_.media();if(!e||this.tech_.paused()||this.hasPlayed_)return!1;if(!e.endList){const i=this.seekable();if(!i.length)return!1;if(R.browser.IE_VERSION&&this.tech_.readyState()===0)return this.tech_.one("loadedmetadata",()=>{this.trigger("firstplay"),this.tech_.setCurrentTime(i.end(0)),this.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(i.end(0))}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){const e=this.tech_.play();typeof e<"u"&&typeof e.then=="function"&&e.then(null,i=>{})}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;const e=this.inbandTextTracks_.metadataTrack_.cues;if(!e||!e.length)return;const i=this.duration();e[e.length-1].endTime=isNaN(i)||Math.abs(i)===1/0?Number.MAX_VALUE:i}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){const i=this.mainSegmentLoader_.getCurrentMediaInfo_();!i||i.hasVideo?e=e&&this.audioSegmentLoader_.ended_:e=this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(e){if(!this.seekable().length)return!1;const r=this.syncController_.getExpiredTime(e,this.duration());if(r===null)return!1;const n=Di.Playlist.playlistEnd(e,r),s=this.tech_.currentTime(),a=this.tech_.buffered();if(!a.length)return n-s<=ui;const o=a.end(a.length-1);return o-s<=ui&&n-o<=ui}excludePlaylist({playlistToExclude:e=this.mainPlaylistLoader_.media(),error:i={},playlistExclusionDuration:r}){if(e=e||this.mainPlaylistLoader_.media(),r=r||i.playlistExclusionDuration||this.playlistExclusionDuration,!e){this.error=i,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}e.playlistErrors_++;const n=this.mainPlaylistLoader_.main.playlists,s=n.filter(Jl),a=s.length===1&&s[0]===e;if(n.length===1&&r!==1/0)return R.log.warn(`Problem encountered with playlist ${e.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(a);if(a){let b=!1;n.forEach(S=>{if(S===e)return;const A=S.excludeUntil;typeof A<"u"&&A!==1/0&&(b=!0,delete S.excludeUntil)}),b&&(R.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let o;e.playlistErrors_>this.maxPlaylistRetries?o=1/0:o=Date.now()+r*1e3,e.excludeUntil=o,i.reason&&(e.lastExcludeReason_=i.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});const l=this.selectPlaylist();if(!l){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}const d=i.internal?this.logger_:R.log.warn,m=i.message?" "+i.message:"";d(`${i.internal?"Internal problem":"Problem"} encountered with playlist ${e.id}.${m} Switching to playlist ${l.id}.`),l.attributes.AUDIO!==e.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),l.attributes.SUBTITLES!==e.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);const y=l.targetDuration/2*1e3||5*1e3,v=typeof l.lastRequest=="number"&&Date.now()-l.lastRequest<=y;return this.switchMedia_(l,"exclude",a||v)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(e,i){const r=[],n=e==="all";(n||e==="main")&&r.push(this.mainPlaylistLoader_);const s=[];(n||e==="audio")&&s.push("AUDIO"),(n||e==="subtitle")&&(s.push("CLOSED-CAPTIONS"),s.push("SUBTITLES")),s.forEach(a=>{const o=this.mediaTypes_[a]&&this.mediaTypes_[a].activePlaylistLoader;o&&r.push(o)}),["main","audio","subtitle"].forEach(a=>{const o=this[`${a}SegmentLoader_`];o&&(e===a||e==="all")&&r.push(o)}),r.forEach(a=>i.forEach(o=>{typeof a[o]=="function"&&a[o]()}))}setCurrentTime(e){const i=Sn(this.tech_.buffered(),e);if(!(this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media())||!this.mainPlaylistLoader_.media().segments)return 0;if(i&&i.length)return e;this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),this.load()}duration(){if(!this.mainPlaylistLoader_)return 0;const e=this.mainPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:Di.Playlist.duration(e):1/0:0}seekable(){return this.seekable_}onSyncInfoUpdate_(){let e;if(!this.mainPlaylistLoader_)return;let i=this.mainPlaylistLoader_.media();if(!i)return;let r=this.syncController_.getExpiredTime(i,this.duration());if(r===null)return;const n=this.mainPlaylistLoader_.main,s=Di.Playlist.seekable(i,r,Di.Playlist.liveEdgeDelay(n,i));if(s.length===0||this.mediaTypes_.AUDIO.activePlaylistLoader&&(i=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),r=this.syncController_.getExpiredTime(i,this.duration()),r===null||(e=Di.Playlist.seekable(i,r,Di.Playlist.liveEdgeDelay(n,i)),e.length===0)))return;let a,o;this.seekable_&&this.seekable_.length&&(a=this.seekable_.end(0),o=this.seekable_.start(0)),e?e.start(0)>s.end(0)||s.start(0)>e.end(0)?this.seekable_=s:this.seekable_=Je([[e.start(0)>s.start(0)?e.start(0):s.start(0),e.end(0)<s.end(0)?e.end(0):s.end(0)]]):this.seekable_=s,!(this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===a&&this.seekable_.start(0)===o)&&(this.logger_(`seekable updated [${T2(this.seekable_)}]`),this.tech_.trigger("seekablechanged"))}updateDuration(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,e),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(e){const n=this.seekable();if(!n.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<n.end(n.length-1))&&this.sourceUpdater_.setDuration(n.end(n.length-1));return}const i=this.tech_.buffered();let r=Di.Playlist.duration(this.mainPlaylistLoader_.media());i.length>0&&(r=Math.max(r,i.end(i.length-1))),this.mediaSource.duration!==r&&this.sourceUpdater_.setDuration(r)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(e=>{const i=this.mediaTypes_[e].groups;for(const r in i)i[r].forEach(n=>{n.playlistLoader&&n.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){const e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,i=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),r=e?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!i||!r)}getCodecsOrExclude_(){const e={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},i=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();e.video=e.main;const r=ba(this.main(),i),n={},s=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(e.main.hasVideo&&(n.video=r.video||e.main.videoCodec||jC),e.main.isMuxed&&(n.video+=`,${r.audio||e.main.audioCodec||Xg}`),(e.main.hasAudio&&!e.main.isMuxed||e.audio.hasAudio||s)&&(n.audio=r.audio||e.main.audioCodec||e.audio.audioCodec||Xg,e.audio.isFmp4=e.main.hasAudio&&!e.main.isMuxed?e.main.isFmp4:e.audio.isFmp4),!n.audio&&!n.video){this.excludePlaylist({playlistToExclude:i,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});return}const a=(d,m)=>d?hu(m):Yc(m),o={};let l;if(["video","audio"].forEach(function(d){if(n.hasOwnProperty(d)&&!a(e[d].isFmp4,n[d])){const m=e[d].isFmp4?"browser":"muxer";o[m]=o[m]||[],o[m].push(n[d]),d==="audio"&&(l=m)}}),s&&l&&i.attributes.AUDIO){const d=i.attributes.AUDIO;this.main().playlists.forEach(m=>{(m.attributes&&m.attributes.AUDIO)===d&&m!==i&&(m.excludeUntil=1/0)}),this.logger_(`excluding audio group ${d} as ${l} does not support codec(s): "${n.audio}"`)}if(Object.keys(o).length){const d=Object.keys(o).reduce((m,y)=>(m&&(m+=", "),m+=`${y} does not support codec(s): "${o[y].join(",")}"`,m),"")+".";this.excludePlaylist({playlistToExclude:i,error:{internal:!0,message:d},playlistExclusionDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){const d=[];if(["video","audio"].forEach(m=>{const y=(ii(this.sourceUpdater_.codecs[m]||"")[0]||{}).type,v=(ii(n[m]||"")[0]||{}).type;y&&v&&y.toLowerCase()!==v.toLowerCase()&&d.push(`"${this.sourceUpdater_.codecs[m]}" -> "${n[m]}"`)}),d.length){this.excludePlaylist({playlistToExclude:i,error:{message:`Codec switching not supported: ${d.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0});return}}return n}tryToCreateSourceBuffers_(){if(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers()||!this.areMediaTypesKnown_())return;const e=this.getCodecsOrExclude_();if(!e)return;this.sourceUpdater_.createSourceBuffers(e);const i=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(i)}excludeUnsupportedVariants_(){const e=this.main().playlists,i=[];Object.keys(e).forEach(r=>{const n=e[r];if(i.indexOf(n.id)!==-1)return;i.push(n.id);const s=ba(this.main,n),a=[];s.audio&&!Yc(s.audio)&&!hu(s.audio)&&a.push(`audio codec ${s.audio}`),s.video&&!Yc(s.video)&&!hu(s.video)&&a.push(`video codec ${s.video}`),s.text&&s.text==="stpp.ttml.im1t"&&a.push(`text codec ${s.text}`),a.length&&(n.excludeUntil=1/0,this.logger_(`excluding ${n.id} for unsupported: ${a.join(", ")}`))})}excludeIncompatibleVariants_(e){const i=[],r=this.main().playlists,n=ll(ii(e)),s=Q0(n),a=n.video&&ii(n.video)[0]||null,o=n.audio&&ii(n.audio)[0]||null;Object.keys(r).forEach(l=>{const d=r[l];if(i.indexOf(d.id)!==-1||d.excludeUntil===1/0)return;i.push(d.id);const m=[],y=ba(this.mainPlaylistLoader_.main,d),v=Q0(y);if(!(!y.audio&&!y.video)){if(v!==s&&m.push(`codec count "${v}" !== "${s}"`),!this.sourceUpdater_.canChangeType()){const b=y.video&&ii(y.video)[0]||null,S=y.audio&&ii(y.audio)[0]||null;b&&a&&b.type.toLowerCase()!==a.type.toLowerCase()&&m.push(`video codec "${b.type}" !== "${a.type}"`),S&&o&&S.type.toLowerCase()!==o.type.toLowerCase()&&m.push(`audio codec "${S.type}" !== "${o.type}"`)}m.length&&(d.excludeUntil=1/0,this.logger_(`excluding ${d.id}: ${m.join(" && ")}`))}})}updateAdCues_(e){let i=0;const r=this.seekable();r.length&&(i=r.start(0)),GI(e,this.cueTagsTrack_,i)}goalBufferLength(){const e=this.tech_.currentTime(),i=Ve.GOAL_BUFFER_LENGTH,r=Ve.GOAL_BUFFER_LENGTH_RATE,n=Math.max(i,Ve.MAX_GOAL_BUFFER_LENGTH);return Math.min(i+e*r,n)}bufferLowWaterLine(){const e=this.tech_.currentTime(),i=Ve.BUFFER_LOW_WATER_LINE,r=Ve.BUFFER_LOW_WATER_LINE_RATE,n=Math.max(i,Ve.MAX_BUFFER_LOW_WATER_LINE),s=Math.max(i,Ve.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(i+e*r,this.bufferBasedABR?s:n)}bufferHighWaterLine(){return Ve.BUFFER_HIGH_WATER_LINE}}const fP=(t,e,i)=>r=>{const n=t.main.playlists[e],s=Sp(n),a=Jl(n);return typeof r>"u"?a:(r?delete n.disabled:n.disabled=!0,r!==a&&!s&&(i(),r?t.trigger("renditionenabled"):t.trigger("renditiondisabled")),r)};class pP{constructor(e,i,r){const{playlistController_:n}=e,s=n.fastQualityChange_.bind(n);if(i.attributes){const a=i.attributes.RESOLUTION;this.width=a&&a.width,this.height=a&&a.height,this.bandwidth=i.attributes.BANDWIDTH,this.frameRate=i.attributes["FRAME-RATE"]}this.codecs=ba(n.main(),i),this.playlist=i,this.id=r,this.enabled=fP(e.playlists,i.id,s)}}const mP=function(t){t.representations=()=>{const e=t.playlistController_.main(),i=uo(e)?t.playlistController_.getAudioTrackPlaylists_():e.playlists;return i?i.filter(r=>!Sp(r)).map((r,n)=>new pP(t,r,r.id)):[]}},ly=["seeking","seeked","pause","playing","error"];class gP{constructor(e){this.playlistController_=e.playlistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=Zt("PlaybackWatcher"),this.logger_("initialize");const i=()=>this.monitorCurrentTime_(),r=()=>this.monitorCurrentTime_(),n=()=>this.techWaiting_(),s=()=>this.resetTimeUpdate_(),a=this.playlistController_,o=["main","subtitle","audio"],l={};o.forEach(m=>{l[m]={reset:()=>this.resetSegmentDownloads_(m),updateend:()=>this.checkSegmentDownloads_(m)},a[`${m}SegmentLoader_`].on("appendsdone",l[m].updateend),a[`${m}SegmentLoader_`].on("playlistupdate",l[m].reset),this.tech_.on(["seeked","seeking"],l[m].reset)});const d=m=>{["main","audio"].forEach(y=>{a[`${y}SegmentLoader_`][m]("appended",this.seekingAppendCheck_)})};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),d("off"))},this.clearSeekingAppendCheck_=()=>d("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),d("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",n),this.tech_.on(ly,s),this.tech_.on("canplay",r),this.tech_.one("play",i),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",n),this.tech_.off(ly,s),this.tech_.off("canplay",r),this.tech_.off("play",i),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),o.forEach(m=>{a[`${m}SegmentLoader_`].off("appendsdone",l[m].updateend),a[`${m}SegmentLoader_`].off("playlistupdate",l[m].reset),this.tech_.off(["seeked","seeking"],l[m].reset)}),this.checkCurrentTimeTimeout_&&k.clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&k.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=k.setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(e){const i=this.playlistController_[`${e}SegmentLoader_`];this[`${e}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${e} loader`),this[`${e}StalledDownloads_`]=0,this[`${e}Buffered_`]=i.buffered_()}checkSegmentDownloads_(e){const i=this.playlistController_,r=i[`${e}SegmentLoader_`],n=r.buffered_(),s=ck(this[`${e}Buffered_`],n);if(this[`${e}Buffered_`]=n,s){this.resetSegmentDownloads_(e);return}this[`${e}StalledDownloads_`]++,this.logger_(`found #${this[`${e}StalledDownloads_`]} ${e} appends that did not increase buffer (possible stalled download)`,{playlistId:r.playlist_&&r.playlist_.id,buffered:Fr(n)}),!(this[`${e}StalledDownloads_`]<10)&&(this.logger_(`${e} loader stalled download exclusion`),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:`vhs-${e}-download-exclusion`}),e!=="subtitle"&&i.excludePlaylist({error:{message:`Excessive ${e} segment downloading detected.`},playlistExclusionDuration:1/0}))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;const e=this.tech_.currentTime(),i=this.tech_.buffered();if(this.lastRecordedTime===e&&(!i.length||e+ui>=i.end(i.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;const i=this.seekable(),r=this.tech_.currentTime(),n=this.afterSeekableWindow_(i,r,this.media(),this.allowSeeksWithinUnsafeLiveWindow);let s;if(n&&(s=i.end(i.length-1)),this.beforeSeekableWindow_(i,r)){const S=i.start(0);s=S+(S===i.end(0)?0:ui)}if(typeof s<"u")return this.logger_(`Trying to seek outside of seekable at time ${r} with seekable range ${T2(i)}. Seeking to ${s}.`),this.tech_.setCurrentTime(s),!0;const a=this.playlistController_.sourceUpdater_,o=this.tech_.buffered(),l=a.audioBuffer?a.audioBuffered():null,d=a.videoBuffer?a.videoBuffered():null,m=this.media(),y=m.partTargetDuration?m.partTargetDuration:(m.targetDuration-yr)*2,v=[l,d];for(let S=0;S<v.length;S++){if(!v[S])continue;if(Tp(v[S],r)<y)return!1}const b=Jo(o,r);return b.length===0?!1:(s=b.start(0)+ui,this.logger_(`Buffered region starts (${b.start(0)})  just beyond seek point (${r}). Seeking to ${s}.`),this.tech_.setCurrentTime(s),!0)}waiting_(){if(this.techWaiting_())return;const e=this.tech_.currentTime(),i=this.tech_.buffered(),r=Sn(i,e);if(r.length&&e+3<=r.end(0)){this.resetTimeUpdate_(),this.tech_.setCurrentTime(e),this.logger_(`Stopped at ${e} while inside a buffered region [${r.start(0)} -> ${r.end(0)}]. Attempting to resume playback by seeking to the current time.`),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"});return}}techWaiting_(){const e=this.seekable(),i=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(e,i)){const o=e.end(e.length-1);return this.logger_(`Fell out of live window at time ${i}. Seeking to live point (seekable end) ${o}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(o),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}const r=this.tech_.vhs.playlistController_.sourceUpdater_,n=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:r.audioBuffered(),videoBuffered:r.videoBuffered(),currentTime:i}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(i),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;const a=Jo(n,i);return a.length>0?(this.logger_(`Stopped at ${i} and seeking to ${a.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(i),!0):!1}afterSeekableWindow_(e,i,r,n=!1){if(!e.length)return!1;let s=e.end(e.length-1)+ui;return!r.endList&&n&&(s=e.end(e.length-1)+r.targetDuration*3),i>s}beforeSeekableWindow_(e,i){return!!(e.length&&e.start(0)>0&&i<e.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:e,audioBuffered:i,currentTime:r}){if(!e)return;let n;if(e.length&&i.length){const s=Sn(e,r-3),a=Sn(e,r),o=Sn(i,r);o.length&&!a.length&&s.length&&(n={start:s.end(0),end:o.end(0)})}else Jo(e,r).length||(n=this.gapFromVideoUnderflow_(e,r));return n?(this.logger_(`Encountered a gap in video from ${n.start} to ${n.end}. Seeking to current time ${r}`),!0):!1}skipTheGap_(e){const i=this.tech_.buffered(),r=this.tech_.currentTime(),n=Jo(i,r);this.resetTimeUpdate_(),!(n.length===0||r!==e)&&(this.logger_("skipTheGap_:","currentTime:",r,"scheduled currentTime:",e,"nextRange start:",n.start(0)),this.tech_.setCurrentTime(n.start(0)+yr),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}))}gapFromVideoUnderflow_(e,i){const r=ok(e);for(let n=0;n<r.length;n++){const s=r.start(n),a=r.end(n);if(i-s<4&&i-s>2)return{start:s,end:a}}return null}}const yP={errorInterval:30,getSource(t){const i=this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource();return t(i)}},sx=function(t,e){let i=0,r=0;const n=ve(yP,e);t.ready(()=>{t.trigger({type:"usage",name:"vhs-error-reload-initialized"})});const s=function(){r&&t.currentTime(r)},a=function(m){m!=null&&(r=t.duration()!==1/0&&t.currentTime()||0,t.one("loadedmetadata",s),t.src(m),t.trigger({type:"usage",name:"vhs-error-reload"}),t.play())},o=function(){if(Date.now()-i<n.errorInterval*1e3){t.trigger({type:"usage",name:"vhs-error-reload-canceled"});return}if(!n.getSource||typeof n.getSource!="function"){R.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return i=Date.now(),n.getSource.call(t,a)},l=function(){t.off("loadedmetadata",s),t.off("error",o),t.off("dispose",l)},d=function(m){l(),sx(t,m)};t.on("error",o),t.on("dispose",l),t.reloadSourceOnError=d},_P=function(t){sx(this,t)};var ax="3.0.2",vP="6.3.0",TP="1.0.1",xP="6.0.0",SP="4.0.1";const lt={PlaylistLoader:En,Playlist:_t,utils:Nk,STANDARD_PLAYLIST_SELECTOR:Z0,INITIAL_PLAYLIST_SELECTOR:SI,lastBandwidthSelector:Z0,movingAverageBandwidthSelector:TI,comparePlaylistBandwidth:wp,comparePlaylistResolution:vI,xhr:R2()};Object.keys(Ve).forEach(t=>{Object.defineProperty(lt,t,{get(){return R.log.warn(`using Vhs.${t} is UNSAFE be sure you know what you are doing`),Ve[t]},set(e){if(R.log.warn(`using Vhs.${t} is UNSAFE be sure you know what you are doing`),typeof e!="number"||e<0){R.log.warn(`value of Vhs.${t} must be greater than or equal to 0`);return}Ve[t]=e}})});const ox="videojs-vhs",ux=function(t,e){const i=e.media();let r=-1;for(let n=0;n<t.length;n++)if(t[n].id===i.id){r=n;break}t.selectedIndex_=r,t.trigger({selectedIndex:r,type:"change"})},EP=function(t,e){e.representations().forEach(i=>{t.addQualityLevel(i)}),ux(t,e.playlists)};lt.canPlaySource=function(){return R.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const bP=(t,e,i)=>{if(!t)return t;let r={};e&&e.attributes&&e.attributes.CODECS&&(r=ll(ii(e.attributes.CODECS))),i&&i.attributes&&i.attributes.CODECS&&(r.audio=i.attributes.CODECS);const n=Ua(r.video),s=Ua(r.audio),a={};for(const o in t)a[o]={},s&&(a[o].audioContentType=s),n&&(a[o].videoContentType=n),e.contentProtection&&e.contentProtection[o]&&e.contentProtection[o].pssh&&(a[o].pssh=e.contentProtection[o].pssh),typeof t[o]=="string"&&(a[o].url=t[o]);return ve(t,a)},CP=(t,e)=>t.reduce((i,r)=>{if(!r.contentProtection)return i;const n=e.reduce((s,a)=>{const o=r.contentProtection[a];return o&&o.pssh&&(s[a]={pssh:o.pssh}),s},{});return Object.keys(n).length&&i.push(n),i},[]),wP=({player:t,sourceKeySystems:e,audioMedia:i,mainPlaylists:r})=>{if(!t.eme.initializeMediaKeys)return Promise.resolve();const n=i?r.concat([i]):r,s=CP(n,Object.keys(e)),a=[],o=[];return s.forEach(l=>{o.push(new Promise((d,m)=>{t.tech_.one("keysessioncreated",d)})),a.push(new Promise((d,m)=>{t.eme.initializeMediaKeys({keySystems:l},y=>{if(y){m(y);return}d()})}))}),Promise.race([Promise.all(a),Promise.race(o)])},DP=({player:t,sourceKeySystems:e,media:i,audioMedia:r})=>{const n=bP(e,i,r);return n?(t.currentSource().keySystems=n,n&&!t.eme?(R.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},lx=()=>{if(!k.localStorage)return null;const t=k.localStorage.getItem(ox);if(!t)return null;try{return JSON.parse(t)}catch{return null}},AP=t=>{if(!k.localStorage)return!1;let e=lx();e=e?ve(e,t):t;try{k.localStorage.setItem(ox,JSON.stringify(e))}catch{return!1}return e},kP=t=>t.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(t.substring(t.indexOf(",")+1)):t;lt.supportsNativeHls=function(){if(!V||!V.createElement)return!1;const t=V.createElement("video");return R.getTech("Html5").isSupported()?["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(i){return/maybe|probably/i.test(t.canPlayType(i))}):!1}();lt.supportsNativeDash=function(){return!V||!V.createElement||!R.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(V.createElement("video").canPlayType("application/dash+xml"))}();lt.supportsTypeNatively=t=>t==="hls"?lt.supportsNativeHls:t==="dash"?lt.supportsNativeDash:!1;lt.isSupported=function(){return R.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const IP=R.getComponent("Component");class cx extends IP{constructor(e,i,r){if(super(i,r.vhs),typeof r.initialBandwidth=="number"&&(this.options_.bandwidth=r.initialBandwidth),this.logger_=Zt("VhsHandler"),i.options_&&i.options_.playerId){const n=R.getPlayer(i.options_.playerId);this.player_=n}if(this.tech_=i,this.source_=e,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&i.overrideNativeAudioTracks&&i.overrideNativeVideoTracks)i.overrideNativeAudioTracks(!0),i.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(i.featuresNativeVideoTracks||i.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(V,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],n=>{const s=V.fullscreenElement||V.webkitFullscreenElement||V.mozFullScreenElement||V.msFullscreenElement;s&&s.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()}),this.on(this.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}setOptions_(){if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=this.options_.llhls!==!1,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,typeof this.options_.playlistExclusionDuration!="number"&&(this.options_.playlistExclusionDuration=5*60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){const e=lx();e&&e.bandwidth&&(this.options_.bandwidth=e.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),e&&e.throughput&&(this.options_.throughput=e.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=Ve.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Ve.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach(e=>{typeof this.source_[e]<"u"&&(this.options_[e]=this.source_[e])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio}src(e,i){if(!e)return;this.setOptions_(),this.options_.src=kP(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=lt,this.options_.sourceType=yv(i),this.options_.seekTo=s=>{this.tech_.setCurrentTime(s)},this.playlistController_=new hP(this.options_);const r=ve({liveRangeSafeTimeDelta:ui},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new gP(r),this.playlistController_.on("error",()=>{const s=R.players[this.tech_.options_.playerId];let a=this.playlistController_.error;typeof a=="object"&&!a.code?a.code=3:typeof a=="string"&&(a={message:a,code:3}),s.error(a)});const n=this.options_.bufferBasedABR?lt.movingAverageBandwidthSelector(.55):lt.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):n.bind(this),this.playlistController_.selectInitialPlaylist=lt.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(s){this.playlistController_.selectPlaylist=s.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(s){this.playlistController_.mainSegmentLoader_.throughput.rate=s,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let s=this.playlistController_.mainSegmentLoader_.bandwidth;const a=k.navigator.connection||k.navigator.mozConnection||k.navigator.webkitConnection,o=1e7;if(this.options_.useNetworkInformationApi&&a){const l=a.downlink*1e3*1e3;l>=o&&s>=o?s=Math.max(s,l):s=l}return s},set(s){this.playlistController_.mainSegmentLoader_.bandwidth=s,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){const s=1/(this.bandwidth||1);let a;return this.throughput>0?a=1/this.throughput:a=0,Math.floor(1/(s+a))},set(){R.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>Fr(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>Fr(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{this.options_.useBandwidthFromLocalStorage&&AP({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})}),this.playlistController_.on("selectedinitialmedia",()=>{mP(this)}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=k.URL.createObjectURL(this.playlistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),wP({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:e&&e.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()}).catch(i=>{this.logger_("error while creating EME key session",i),this.player_.error({message:"Failed to initialize media keys for EME",code:3})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,i=DP({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:e&&e.media()});if(this.player_.tech_.on("keystatuschange",r=>{if(r.status!=="output-restricted")return;const n=this.playlistController_.main();if(!n||!n.playlists)return;const s=[];n.playlists.forEach(a=>{a&&a.attributes&&a.attributes.RESOLUTION&&a.attributes.RESOLUTION.height>=720&&(!a.excludeUntil||a.excludeUntil<1/0)&&(a.excludeUntil=1/0,s.push(a))}),s.length&&(R.log.warn('DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.',...s),this.playlistController_.fastQualityChange_())}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),R.browser.IE_VERSION===11||!i){this.playlistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()}setupQualityLevels_(){const e=R.players[this.tech_.options_.playerId];!e||!e.qualityLevels||this.qualityLevels_||(this.qualityLevels_=e.qualityLevels(),this.playlistController_.on("selectedinitialmedia",()=>{EP(this.qualityLevels_,this)}),this.playlists.on("mediachange",()=>{ux(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":ax,"mux.js":vP,"mpd-parser":TP,"m3u8-parser":xP,"aes-decrypter":SP}}version(){return this.constructor.version()}canChangeType(){return rx.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(e){this.playlistController_.setCurrentTime(e)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&k.URL.revokeObjectURL&&(k.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(e,i){return $k({playlist:this.playlistController_.media(),time:e,callback:i})}seekToProgramTime(e,i,r=!0,n=2){return j2({programTime:e,playlist:this.playlistController_.media(),retryCount:n,pauseAfterSeek:r,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:i})}}const fl={name:"videojs-http-streaming",VERSION:ax,canHandleSource(t,e={}){const i=ve(R.options,e);return fl.canPlayType(t.type,i)},handleSource(t,e,i={}){const r=ve(R.options,i);return e.vhs=new cx(t,e,r),e.vhs.xhr=R2(),e.vhs.src(t.src,t.type),e.vhs},canPlayType(t,e){const i=yv(t);if(!i)return"";const r=fl.getOverrideNative(e);return!lt.supportsTypeNatively(i)||r?"maybe":""},getOverrideNative(t={}){const{vhs:e={}}=t,i=!(R.browser.IS_ANY_SAFARI||R.browser.IS_IOS),{overrideNative:r=i}=e;return r}},PP=()=>hu("avc1.4d400d,mp4a.40.2");PP()&&R.getTech("Html5").registerSourceHandler(fl,0);R.VhsHandler=cx;R.VhsSourceHandler=fl;R.Vhs=lt;R.use||R.registerComponent("Vhs",lt);R.options.vhs=R.options.vhs||{};(!R.getPlugin||!R.getPlugin("reloadSourceOnError"))&&R.registerPlugin("reloadSourceOnError",_P);const OP=t=>{const e=Ks.useRef(null),i=Ks.useRef(null),{options:r,onReady:n}=t;return Ks.useEffect(()=>{if(!i.current){const s=e.current;if(!s)return;const a=i.current=R(s,r,()=>{R.log("Video player is ready"),n&&n(a)})}},[r,e]),Ks.useEffect(()=>{const s=i.current;return()=>{s&&(s.dispose(),i.current=null)}},[i]),ki.jsx("div",{className:t.className,"data-vjs-player":!0,children:ki.jsx("video",{width:"640",height:"480",ref:e,className:"video-js vjs-big-playcentered"})})};function LP(){const[t,e]=bn.useState("https://live-par-1-abr-cdn.livepush.io/live_abr_cdn/emaIqCGoZw-6/index.m3u8"),[i,r]=bn.useState(t),n=bn.useRef(null),s=o=>{r(o.currentTarget.value)},a=()=>{e(i)};return ki.jsxs("main",{className:"main",children:[ki.jsxs("div",{className:"input",children:[ki.jsx("input",{type:"text",value:i,onChange:s}),ki.jsx("button",{onClick:a,children:"Send"})]}),ki.jsx(OP,{className:"videojs",options:{autoplay:!0,controls:!0,responsive:!0,fluid:!0,sources:[{src:t,type:"application/vnd.apple.mpegurl"}]},onReady:o=>{n.current=o}},t)]})}I1.render(ki.jsx(Ks.StrictMode,{children:ki.jsx(LP,{})}),document.getElementById("root"));
